<!doctype html><html lang=id class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=en href=https://kubernetes.io/docs/tutorials/><link rel=alternate hreflang=zh-cn href=https://kubernetes.io/zh-cn/docs/tutorials/><link rel=alternate hreflang=ko href=https://kubernetes.io/ko/docs/tutorials/><link rel=alternate hreflang=ja href=https://kubernetes.io/ja/docs/tutorials/><link rel=alternate hreflang=fr href=https://kubernetes.io/fr/docs/tutorials/><link rel=alternate hreflang=it href=https://kubernetes.io/it/docs/tutorials/><link rel=alternate hreflang=de href=https://kubernetes.io/de/docs/tutorials/><link rel=alternate hreflang=es href=https://kubernetes.io/es/docs/tutorials/><link rel=alternate hreflang=pt-br href=https://kubernetes.io/pt-br/docs/tutorials/><link rel=alternate hreflang=hi href=https://kubernetes.io/hi/docs/tutorials/><link rel=alternate hreflang=ru href=https://kubernetes.io/ru/docs/tutorials/><link rel=alternate hreflang=pl href=https://kubernetes.io/pl/docs/tutorials/><link rel=alternate hreflang=uk href=https://kubernetes.io/uk/docs/tutorials/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://kubernetes.io/id/docs/tutorials/><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>Tutorial | Kubernetes</title><meta property="og:title" content="Tutorial"><meta property="og:description" content="Orkestrasi Kontainer dengan Skala Produksi"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.io/id/docs/tutorials/"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="Tutorial"><meta itemprop=description content="Orkestrasi Kontainer dengan Skala Produksi"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tutorial"><meta name=twitter:description content="Orkestrasi Kontainer dengan Skala Produksi"><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content="Bagian ini membahas tentang tutorial Kubernetes. Tutorial berfungsi untuk memperlihatkan bagaimana caranya mencapai suatu tujuan yang lebih dari sekedar task sederhana. Biasanya, sebuah tutorial punya beberapa bagian, masing-masing bagian terdiri dari langkah-langkah yang berurutan. Sebelum melangkah lebih lanjut ke tutorial, sebaiknya tandai dulu halaman Kamus Istilah untuk referensi nanti.
Prinsip Dasar Prinsip Dasar Kubernetes merupakan tutorial yang sangat interaktif, membantu kamu mengerti apa itu sistem Kubernetes dan beberapa fitur Kubernetes yang umum digunakan."><meta property="og:description" content="Bagian ini membahas tentang tutorial Kubernetes. Tutorial berfungsi untuk memperlihatkan bagaimana caranya mencapai suatu tujuan yang lebih dari sekedar task sederhana. Biasanya, sebuah tutorial punya beberapa bagian, masing-masing bagian terdiri dari langkah-langkah yang berurutan. Sebelum melangkah lebih lanjut ke tutorial, sebaiknya tandai dulu halaman Kamus Istilah untuk referensi nanti.
Prinsip Dasar Prinsip Dasar Kubernetes merupakan tutorial yang sangat interaktif, membantu kamu mengerti apa itu sistem Kubernetes dan beberapa fitur Kubernetes yang umum digunakan."><meta name=twitter:description content="Bagian ini membahas tentang tutorial Kubernetes. Tutorial berfungsi untuk memperlihatkan bagaimana caranya mencapai suatu tujuan yang lebih dari sekedar task sederhana. Biasanya, sebuah tutorial punya beberapa bagian, masing-masing bagian terdiri dari langkah-langkah yang berurutan. Sebelum melangkah lebih lanjut ke tutorial, sebaiknya tandai dulu halaman Kamus Istilah untuk referensi nanti.
Prinsip Dasar Prinsip Dasar Kubernetes merupakan tutorial yang sangat interaktif, membantu kamu mengerti apa itu sistem Kubernetes dan beberapa fitur Kubernetes yang umum digunakan."><meta property="og:url" content="https://kubernetes.io/id/docs/tutorials/"><meta property="og:title" content="Tutorial"><meta name=twitter:title content="Tutorial"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/id/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/id/docs/>Dokumentasi</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/id/community/>Komunitas</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/id/case-studies/>Studi kasus</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Versi</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/id/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/id/docs/tutorials/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/id/docs/tutorials/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/id/docs/tutorials/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/id/docs/tutorials/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/id/docs/tutorials/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Bahasa Indonesia</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/tutorials/>English</a>
<a class=dropdown-item href=/zh-cn/docs/tutorials/>中文 (Chinese)</a>
<a class=dropdown-item href=/ko/docs/tutorials/>한국어 (Korean)</a>
<a class=dropdown-item href=/ja/docs/tutorials/>日本語 (Japanese)</a>
<a class=dropdown-item href=/fr/docs/tutorials/>Français (French)</a>
<a class=dropdown-item href=/it/docs/tutorials/>Italiano (Italian)</a>
<a class=dropdown-item href=/de/docs/tutorials/>Deutsch (German)</a>
<a class=dropdown-item href=/es/docs/tutorials/>Español (Spanish)</a>
<a class=dropdown-item href=/pt-br/docs/tutorials/>Português (Portuguese)</a>
<a class=dropdown-item href=/hi/docs/tutorials/>हिन्दी (Hindi)</a>
<a class=dropdown-item href=/ru/docs/tutorials/>Русский (Russian)</a>
<a class=dropdown-item href=/pl/docs/tutorials/>Polski (Polish)</a>
<a class=dropdown-item href=/uk/docs/tutorials/>Українська (Ukrainian)</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/id/docs/tutorials/>Return to the regular view of this page</a>.</p></div><h1 class=title>Tutorial</h1><ul><li>1: <a href=#pg-5e3051fff9e84735871d9fb5e7b93f33>Halo Minikube</a></li><li>2: <a href=#pg-3c83f53a74233ace9b289ac5e24c3e62>Mempelajari Panduan Dasar Kubernetes</a></li><ul><li>2.1: <a href=#pg-7df66040311338d6098ebeab43ba9afb>Membuat Klaster</a></li><ul><li>2.1.1: <a href=#pg-de49316920e97a82e36763cb66781ada>Menggunakan Minikube Untuk Membuat Klaster</a></li><li>2.1.2: <a href=#pg-323b75976001e8dfe35d67d61bc74f1a>Tutorial Interaktif - Membuat Klaster</a></li></ul><li>2.2: <a href=#pg-76d78b3fba507f7ed33cef14a35b631d>Menyebarkan (Deploy) Aplikasi</a></li><ul><li>2.2.1: <a href=#pg-2b1bba431989008c7493109a0f049ece>Menggunakan kubectl untuk membuat Deployment</a></li><li>2.2.2: <a href=#pg-f8997ec143b382fa6c9621941ea62ca3>Tutorial Interaktif - Menyebarkan (Deploy) Aplikasi</a></li></ul><li>2.3: <a href=#pg-250d620a73ec8be7e1f7d835574c4596>Menjelajahi Aplikasimu</a></li><ul><li>2.3.1: <a href=#pg-2771f4e8c45321b17cb0114a2d266453>Melihat Pod dan Node</a></li><li>2.3.2: <a href=#pg-4b01eab98a9844ad91131079654199dd>Tutorial Interaktif - Menjelajahi Aplikasimu</a></li></ul><li>2.4: <a href=#pg-4b0e31c9e0eae68bbb0a358b4042ada9>Mengekspos Aplikasimu Secara Publik</a></li><ul><li>2.4.1: <a href=#pg-8ef4dad8f743b191a9e8c6f891cb191a>Menggunakan Service untuk Mengekspos Aplikasimu</a></li><li>2.4.2: <a href=#pg-352241d22effe0714772d21c7d1b512d>Tutorial Interaktif - Mengekspos Aplikasimu</a></li></ul><li>2.5: <a href=#pg-be4996c93fb39c459a30b6669569d423>Penyekalaan Aplikasimu</a></li><ul><li>2.5.1: <a href=#pg-d1c15c9bd4f625adbc13149b1475287c>Menjalankan Multipel Instans dari Aplikasimu</a></li><li>2.5.2: <a href=#pg-7bdb3fbaa1177ff5dfa3fe86bd35ef59>Tutorial Interaktif - Penyekalaan Aplikasimu</a></li></ul><li>2.6: <a href=#pg-62b8b17dadfb55f1801cf8439e944e58>Memperbarui Aplikasimu</a></li><ul><li>2.6.1: <a href=#pg-12e04355145afad615ca3c38335ba019>Melakukan Pembaruan Bertahap</a></li><li>2.6.2: <a href=#pg-dddc0cb356c280e0339bcf42776987dc>Tutorial Interaktif - Memperbarui Aplikasimu</a></li></ul></ul><li>3: <a href=#pg-1efbbc2c3015389f835b1661d5effb29>Aplikasi Stateless</a></li><ul><li>3.1: <a href=#pg-62caf420877232190a7404b8d93c6724>Mengekspos Alamat IP Eksternal untuk Mengakses Aplikasi di dalam Klaster</a></li></ul><li>4: <a href=#pg-d6336d9712aa433eb5f0fb8cbed6bef7>Aplikasi Stateful</a></li><ul><li>4.1: <a href=#pg-42e39658021b706bcc9478c8cc73c4a3>Dasar-dasar StatefulSet</a></li></ul></ul><div class=content><p>Bagian ini membahas tentang tutorial Kubernetes.
Tutorial berfungsi untuk memperlihatkan bagaimana caranya mencapai suatu tujuan yang lebih dari sekedar <a href=/docs/tasks/>task</a> sederhana.
Biasanya, sebuah tutorial punya beberapa bagian, masing-masing bagian terdiri dari langkah-langkah yang berurutan.
Sebelum melangkah lebih lanjut ke tutorial, sebaiknya tandai dulu halaman <a href=/docs/reference/glossary/>Kamus Istilah</a> untuk referensi nanti.</p><h2 id=prinsip-dasar>Prinsip Dasar</h2><ul><li><p><a href=/id/docs/tutorials/kubernetes-basics/>Prinsip Dasar Kubernetes</a> merupakan tutorial yang sangat interaktif, membantu kamu mengerti apa itu sistem Kubernetes dan beberapa fitur Kubernetes yang umum digunakan.</p></li><li><p><a href=https://www.udacity.com/course/scalable-microservices-with-kubernetes--ud615>Mikroservis yang Scalable dengan Kubernetes (Udacity)</a></p></li><li><p><a href=https://www.edx.org/course/introduction-kubernetes-linuxfoundationx-lfs158x#>Pengenalan Kubernetes (edX)</a></p></li><li><p><a href=/id/docs/tutorials/hello-minikube/>Halo Minikube</a></p></li></ul><h2 id=konfigurasi>Konfigurasi</h2><ul><li><a href=/docs/tutorials/configuration/configure-redis-using-configmap/>Konfigurasi Redis menggunakan sebuah ConfigMap</a></li></ul><h2 id=aplikasi-stateless>Aplikasi Stateless</h2><ul><li><p><a href=/id/docs/tutorials/stateless-application/expose-external-ip-address/>Memberi Akses Aplikasi di dalam Klaster melalui IP Eksternal</a></p></li><li><p><a href=/docs/tutorials/stateless-application/guestbook/>Contoh: Deploy aplikasi Guestbook PHP dengan Redis</a></p></li></ul><h2 id=aplikasi-stateful>Aplikasi Stateful</h2><ul><li><p><a href=/docs/tutorials/stateful-application/basic-stateful-set/>Prinsip Dasar StatefulSet</a></p></li><li><p><a href=/docs/tutorials/stateful-application/mysql-wordpress-persistent-volume/>Contoh: WordPress dan MySQL dengan Persistent Volumes</a></p></li><li><p><a href=/docs/tutorials/stateful-application/cassandra/>Contoh: Deploy Cassandra dengan Stateful Sets</a></p></li><li><p><a href=/docs/tutorials/stateful-application/zookeeper/>Menjalankan ZooKeeper, sebuah sistem terdistribusi yang berbasis CP</a></p></li></ul><h2 id=klaster>Klaster</h2><ul><li><p><a href=/docs/tutorials/clusters/apparmor/>AppArmor</a></p></li><li><p><a href=/docs/tutorials/clusters/seccomp/>seccomp</a></p></li></ul><h2 id=servis>Servis</h2><ul><li><a href=/docs/tutorials/services/source-ip/>Menggunakan Source IP</a></li></ul><h2 id=selanjutnya>Selanjutnya</h2><p>Tertarik menulis tutorial? Lihat
<a href=/docs/home/contribute/page-templates/>Menggunakan Template Halaman</a>
untuk info mengenai template dan ragam halaman tutorial.</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5e3051fff9e84735871d9fb5e7b93f33>1 - Halo Minikube</h1><p>Tutorial ini menunjukkan bagaimana caranya menjalankan aplikasi sederhana Node.js Halo Dunia di Kubernetes, dengan <a href=/docs/getting-started-guides/minikube><code>minikube</code></a> dan Katacoda.
Katacoda menyediakan <i>environment</i> Kubernetes secara gratis di dalam browser.</p><div class="alert alert-info note callout" role=alert><strong>Catatan:</strong> Kamupun bisa mengikuti tutorial ini kalau sudah instalasi minikube di lokal. Silakan lihat <a href=https://minikube.sigs.k8s.io/docs/start/>memulai <code>minikube</code></a> untuk instruksi instalasi.</div><h2 id=tujuan>Tujuan</h2><ul><li>Deploy aplikasi halo dunia pada minikube.</li><li>Jalankan aplikasinya.</li><li>Melihat log aplikasi.</li></ul><h2 id=sebelum-kamu-memulai>Sebelum kamu memulai</h2><p>Tutorial ini menyediakan image Kontainer yang dibuat melalui barisan kode berikut:</p><div class=highlight><div class=copy-code-icon style=text-align:right><a href=https://raw.githubusercontent.com/kubernetes/website/main/content/id/examples/minikube/server.js download=minikube/server.js><code>minikube/server.js</code></a>
<img src=/images/copycode.svg style=max-height:24px;cursor:pointer onclick='copyCode("minikube-server-js")' title="Copy minikube/server.js to clipboard"></img></div><div class=includecode id=minikube-server-js><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a2f;font-weight:700>var</span> http <span style=color:#666>=</span> require(<span style=color:#b44>&#39;http&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a2f;font-weight:700>var</span> handleRequest <span style=color:#666>=</span> <span style=color:#a2f;font-weight:700>function</span>(request, response) {
</span></span><span style=display:flex><span>  console.log(<span style=color:#b44>&#39;Received request for URL: &#39;</span> <span style=color:#666>+</span> request.url);
</span></span><span style=display:flex><span>  response.writeHead(<span style=color:#666>200</span>);
</span></span><span style=display:flex><span>  response.end(<span style=color:#b44>&#39;Hello World!&#39;</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span><span style=color:#a2f;font-weight:700>var</span> www <span style=color:#666>=</span> http.createServer(handleRequest);
</span></span><span style=display:flex><span>www.listen(<span style=color:#666>8080</span>);
</span></span></code></pre></div></div></div><div class=highlight><div class=copy-code-icon style=text-align:right><a href=https://raw.githubusercontent.com/kubernetes/website/main/content/id/examples/minikube/Dockerfile download=minikube/Dockerfile><code>minikube/Dockerfile</code></a>
<img src=/images/copycode.svg style=max-height:24px;cursor:pointer onclick='copyCode("minikube-dockerfile")' title="Copy minikube/Dockerfile to clipboard"></img></div><div class=includecode id=minikube-dockerfile><pre tabindex=0><code class=language-conf data-lang=conf>FROM node:6.14.2
EXPOSE 8080
COPY server.js .
CMD node server.js
</code></pre></div></div><p>Untuk info lebih lanjut tentang perintah <code>docker build</code>, baca <a href=https://docs.docker.com/engine/reference/commandline/build/>dokumentasi Docker</a>.</p><h2 id=membuat-sebuah-klaster-minikube>Membuat sebuah klaster Minikube</h2><ol><li><p>Tekan <strong>Launch Terminal</strong></p><script defer src=https://katacoda.com/embed.js></script>
<button class=button onclick=window.katacoda.init()>Launch Terminal</button><div class="alert alert-info note callout" role=alert><strong>Catatan:</strong> Kalau kamu memilih instalasi minikube secara lokal, jalankan <code>minikube start</code>.</div></li><li><p>Buka dasbor Kubernetes di dalam browser:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube dashboard
</span></span></code></pre></div></li><li><p>Hanya untuk <i>environment</i> Katacoda: Di layar terminal paling atas, tekan tombol plus, lalu lanjut tekan <strong>Select port to view on Host 1</strong>.</p></li><li><p>Hanya untuk <i>environment</i> Katacoda: Ketik <code>30000</code>, lalu lanjut tekan <strong>Display Port</strong>.</p></li></ol><h2 id=membuat-sebuah-deployment>Membuat sebuah Deployment</h2><p>Sebuah Kubernetes <a href=/id/docs/concepts/workloads/pods/pod/><em>Pod</em></a> adalah kumpulan dari satu atau banyak Kontainer,
saling terhubung untuk kebutuhan administrasi dan jaringan. Pod dalam tutorial ini hanya punya satu Kontainer. Sebuah Kubernetes
<a href=/id/docs/concepts/workloads/controllers/deployment/><em>Deployment</em></a> selalu memeriksa kesehatan
Pod kamu dan melakukan <i>restart</i> saat Kontainer di dalam Pod tersebut mati. Deployment adalah cara jitu untuk membuat dan mereplikasi Pod.</p><ol><li><p>Gunakan perintah <code>kubectl create</code> untuk membuat Deployment yang dapat mengatur Pod.
Pod menjalankan Kontainer sesuai dengan image Docker yang telah diberikan.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl create deployment hello-node --image<span style=color:#666>=</span>k8s.gcr.io/echoserver:1.4
</span></span></code></pre></div></li><li><p>Lihat Deployment:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get deployments
</span></span></code></pre></div><p>Keluaran:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>NAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style=display:flex><span>hello-node   <span style=color:#666>1</span>         <span style=color:#666>1</span>         <span style=color:#666>1</span>            <span style=color:#666>1</span>           1m
</span></span></code></pre></div></li><li><p>Lihat Pod:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods
</span></span></code></pre></div><p>Keluaran:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>NAME                          READY     STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>hello-node-5f76cf6ccf-br9b5   1/1       Running   <span style=color:#666>0</span>          1m
</span></span></code></pre></div></li><li><p>Lihat <i>event</i> klaster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get events
</span></span></code></pre></div></li><li><p>Lihat konfigurasi <code>kubectl</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl config view
</span></span></code></pre></div><div class="alert alert-info note callout" role=alert><strong>Catatan:</strong> Untuk info lebih lanjut tentang perintah <code>kubectl</code>, lihat <a href=/docs/user-guide/kubectl-overview/>ringkasan kubectl</a>.</div></li></ol><h2 id=membuat-sebuah-servis>Membuat sebuah Servis</h2><p>Secara <i>default</i>, Pod hanya bisa diakses melalui alamat IP internal di dalam klaster Kubernetes.
Supaya Kontainer <code>hello-node</code> bisa diakses dari luar jaringan virtual Kubernetes, kamu harus ekspos Pod sebagai <a href=/id/docs/concepts/services-networking/service/><em>Servis</em></a> Kubernetes.</p><ol><li><p>Ekspos Pod pada internet publik menggunakan perintah <code>kubectl expose</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl expose deployment hello-node --type<span style=color:#666>=</span>LoadBalancer --port<span style=color:#666>=</span><span style=color:#666>8080</span>
</span></span></code></pre></div><p>Tanda <code>--type=LoadBalancer</code> menunjukkan bahwa kamu ingin ekspos Servis keluar dari klaster.</p></li><li><p>Lihat Servis yang baru kamu buat:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get services
</span></span></code></pre></div><p>Keluaran:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>NAME         TYPE           CLUSTER-IP      EXTERNAL-IP   PORT<span style=color:#666>(</span>S<span style=color:#666>)</span>          AGE
</span></span><span style=display:flex><span>hello-node   LoadBalancer   10.108.144.78   &lt;pending&gt;     8080:30369/TCP   21s
</span></span><span style=display:flex><span>kubernetes   ClusterIP      10.96.0.1       &lt;none&gt;        443/TCP          23m
</span></span></code></pre></div><p>Untuk penyedia cloud yang memiliki <i>load balancer</i>, sebuah alamat IP eksternal akan disediakan untuk mengakses Servis tersebut.
Pada minikube, tipe <code>LoadBalancer</code> membuat Servis tersebut dapat diakses melalui perintah <code>minikube service</code>.</p></li><li><p>Jalankan perintah berikut:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube service hello-node
</span></span></code></pre></div></li><li><p>Hanya untuk <i>environment</i> Katacoda: Tekan tombol plus, lalu lanjut tekan <strong>Select port to view on Host 1</strong>.</p></li><li><p>Hanya untuk <i>environment</i> Katacoda: Ketik <code>30369</code> (lihat port di samping <code>8080</code> pada keluaran servis), lalu lanjut tekan</p><p>Ini akan membuka jendela browser yang menjalankan aplikasimu dan memperlihatkan pesan "Halo Dunia".</p></li></ol><h2 id=aktifkan-addons>Aktifkan addons</h2><p>Perangkat minikube meliputi sekumpulan <a class=glossary-tooltip title='Resources that extend the functionality of Kubernetes.' data-toggle=tooltip data-placement=top href=/docs/concepts/cluster-administration/addons/ target=_blank aria-label=addons>addons</a> bawaan yang bisa diaktifkan, dinonaktifkan, maupun dibuka di dalam <i>environment</i> Kubernetes lokal.</p><ol><li><p>Daftar <i>addons</i> yang ada saat ini:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube addons list
</span></span></code></pre></div><p>Keluaran:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>addon-manager: enabled
</span></span><span style=display:flex><span>coredns: disabled
</span></span><span style=display:flex><span>dashboard: enabled
</span></span><span style=display:flex><span>default-storageclass: enabled
</span></span><span style=display:flex><span>efk: disabled
</span></span><span style=display:flex><span>freshpod: disabled
</span></span><span style=display:flex><span>heapster: disabled
</span></span><span style=display:flex><span>ingress: disabled
</span></span><span style=display:flex><span>kube-dns: enabled
</span></span><span style=display:flex><span>metrics-server: disabled
</span></span><span style=display:flex><span>nvidia-driver-installer: disabled
</span></span><span style=display:flex><span>nvidia-gpu-device-plugin: disabled
</span></span><span style=display:flex><span>registry: disabled
</span></span><span style=display:flex><span>registry-creds: disabled
</span></span><span style=display:flex><span>storage-provisioner: enabled
</span></span></code></pre></div></li><li><p>Aktifkan sebuah <i>addon</i>, misalnya <code>heapster</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube addons <span style=color:#a2f>enable</span> heapster
</span></span></code></pre></div><p>Keluaran:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>heapster was successfully enabled
</span></span></code></pre></div></li><li><p>Lihat Pod dan Servis yang baru saja kamu buat:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod,svc -n kube-system
</span></span></code></pre></div><p>Keluaran:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>NAME                                        READY     STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>pod/heapster-9jttx                          1/1       Running   <span style=color:#666>0</span>          26s
</span></span><span style=display:flex><span>pod/influxdb-grafana-b29w8                  2/2       Running   <span style=color:#666>0</span>          26s
</span></span><span style=display:flex><span>pod/kube-addon-manager-minikube             1/1       Running   <span style=color:#666>0</span>          34m
</span></span><span style=display:flex><span>pod/kube-dns-6dcb57bcc8-gv7mw               3/3       Running   <span style=color:#666>0</span>          34m
</span></span><span style=display:flex><span>pod/kubernetes-dashboard-5498ccf677-cgspw   1/1       Running   <span style=color:#666>0</span>          34m
</span></span><span style=display:flex><span>pod/storage-provisioner                     1/1       Running   <span style=color:#666>0</span>          34m
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAME                           TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span style=color:#666>(</span>S<span style=color:#666>)</span>             AGE
</span></span><span style=display:flex><span>service/heapster               ClusterIP   10.96.241.45    &lt;none&gt;        80/TCP              26s
</span></span><span style=display:flex><span>service/kube-dns               ClusterIP   10.96.0.10      &lt;none&gt;        53/UDP,53/TCP       34m
</span></span><span style=display:flex><span>service/kubernetes-dashboard   NodePort    10.109.29.1     &lt;none&gt;        80:30000/TCP        34m
</span></span><span style=display:flex><span>service/monitoring-grafana     NodePort    10.99.24.54     &lt;none&gt;        80:30002/TCP        26s
</span></span><span style=display:flex><span>service/monitoring-influxdb    ClusterIP   10.111.169.94   &lt;none&gt;        8083/TCP,8086/TCP   26s
</span></span></code></pre></div></li><li><p>Non-aktifkan <code>heapster</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube addons disable heapster
</span></span></code></pre></div><p>Keluaran:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>heapster was successfully disabled
</span></span></code></pre></div></li></ol><h2 id=bersih-bersih>Bersih-bersih</h2><p>Sekarang, mari kita bersihkan semua <i>resource</i> yang kamu buat di klaster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete service hello-node
</span></span><span style=display:flex><span>kubectl delete deployment hello-node
</span></span></code></pre></div><p>Kamu juga boleh mematikan mesin virtual atau <em>virtual machine</em> (VM) untuk minikube:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube stop
</span></span></code></pre></div><p>Kamu juga boleh menghapus minikube VM:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube delete
</span></span></code></pre></div><h2 id=selanjutnya>Selanjutnya</h2><ul><li>Pelajari lebih lanjut tentang <a href=/id/docs/concepts/workloads/controllers/deployment/>Deployment</a>.</li><li>Pelajari lebih lanjut tentang <a href=/docs/user-guide/deploying-applications/>Deploy aplikasi</a>.</li><li>Pelajari lebih lanjut tentang <a href=/id/docs/concepts/services-networking/service/>Servis</a>.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-3c83f53a74233ace9b289ac5e24c3e62>2 - Mempelajari Panduan Dasar Kubernetes</h1><!doctype html><html lang=en><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><div class=layout id=top><main class=content><div class=row><div class=col-md-9><h2>Panduan Dasar Kubernetes</h2><p>Tutorial ini menyediakan panduan dasar mekanisme orkestrasi klaster Kubernetes. Setiap modul memliki beberapa informasi mengenai latar belakang bagi konsep mendasar dan <i>feature</i> Kubernetes, termasuk mode interaktif yang dapat digunakan sebagai metode pembelajaran <i>online</i>. Mode tutorial interaktif ini memberikan kesempatan pengguna untuk melakukan manajemen klaster sederhana beserta aplikasi terkontainerisasi yang kamu miliki.</p><p>Dengan menggunakan mode tutorial interaktif ini, pengguna diharapkan dapat memahami:</p><ul><li><i>Deploy</i> sebuah aplikasi yang sudah dikontainerisasi pada klaster</li><li>Melakukan <i>scale</i> <i>deployment</i></li><li>Memperbarui aplikasi yang sudah dikontainerisasi dengan menggunakan versi aplikasi terbaru</li><li>Men-<i>debug</i> aplikasi yang sudah dikontainerisasi</li></ul><p>Tutorial ini menggunakan Katakoda untuk menjalankan terminal virtual diatas Minikube pada <i>web browser</i> kamu. Dengan demikian, kamu tidak perlu melakukan instalasi perangkat lunak apa pun, segala modul yang ada dijalankan secara langsung melalui <i>web browser</i> yang kamu miliki.</p></div></div><br><div class=row><div class=col-md-9><h2>Apa yang dapat dilakukan oleh Kubernetes untuk kamu?</h2><p>Seiring berkembangnya web servis modern, pengguna memiliki ekspektasi agar aplikasi selalu dapat diakses 24/7, selain itu <i>developers</i> juga memiliki harapan agar mereka dapat melakukan <i>deployment</i> aplikasi dengan versi terbaru yang mereka miliki berulang per hari. Mekanisme kontainerisasi mengepak perangkat lunak agar memenuhi kebutuhan yang ada, memudahkan serta mempercepat proses rilis dan pembaharuan aplikasi tanpa adanya <i>downtime</i> proses ini dapat dilakukan berulang per hari. Kubernetes membantu kamu menjaga aplikasi yang kamu buat untuk dapat dijalankan dimana pun dan kapan pun kamu menginginkannya, serta menjamin segala kebutuhan dan peralatan yang dibutuhkan oleh aplikasi kamu tersedia. Kubernetes merupakan platform <i>open source</i> yang sudah matang yang didesain berdasarkan pengalaman Google serta ide yang brilian dari komunitas yang ada.</p></div></div><br><div id=basics-modules class=content__modules><h2>Modul Dasar Kubernetes</h2><div class=row><div class=col-md-12><div class=row><div class=col-md-4><div class=thumbnail><a href=/id/docs/tutorials/kubernetes-basics/create-cluster/cluster-intro/><img src="/docs/tutorials/kubernetes-basics/public/images/module_01.svg?v=1469803628347" alt></a><div class=caption><a href=/id/docs/tutorials/kubernetes-basics/create-cluster/cluster-intro/><h5>1. Membuat klaster Kubernetes</h5></a></div></div></div><div class=col-md-4><div class=thumbnail><a href=/id/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/><img src="/docs/tutorials/kubernetes-basics/public/images/module_02.svg?v=1469803628347" alt></a><div class=caption><a href=/id/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/><h5>2. Menyebarkan (Deploy) Aplikasi</h5></a></div></div></div><div class=col-md-4><div class=thumbnail><a href=/id/docs/tutorials/kubernetes-basics/explore/explore-intro/><img src="/docs/tutorials/kubernetes-basics/public/images/module_03.svg?v=1469803628347" alt></a><div class=caption><a href=/id/docs/tutorials/kubernetes-basics/explore/explore-intro/><h5>3. Menjelajahi aplikasimu</h5></a></div></div></div></div></div><div class=col-md-12><div class=row><div class=col-md-4><div class=thumbnail><a href=/id/docs/tutorials/kubernetes-basics/expose/expose-intro/><img src="/docs/tutorials/kubernetes-basics/public/images/module_04.svg?v=1469803628347" alt></a><div class=caption><a href=/id/docs/tutorials/kubernetes-basics/expose/expose-intro/><h5>4. Mengekspos aplikasimu secara publik</h5></a></div></div></div><div class=col-md-4><div class=thumbnail><a href=/id/docs/tutorials/kubernetes-basics/scale/scale-intro/><img src="/docs/tutorials/kubernetes-basics/public/images/module_05.svg?v=1469803628347" alt></a><div class=caption><a href=/id/docs/tutorials/kubernetes-basics/scale/scale-intro/><h5>5. Penyekalaan naik aplikasimu</h5></a></div></div></div><div class=col-md-4><div class=thumbnail><a href=/id/docs/tutorials/kubernetes-basics/update/update-intro/><img src="/docs/tutorials/kubernetes-basics/public/images/module_06.svg?v=1469803628347" alt></a><div class=caption><a href=/id/docs/tutorials/kubernetes-basics/update/update-intro/><h5>6. Memperbarui aplikasimu</h5></a></div></div></div></div></div></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-7df66040311338d6098ebeab43ba9afb>2.1 - Membuat Klaster</h1></div><div class=td-content><h1 id=pg-de49316920e97a82e36763cb66781ada>2.1.1 - Menggunakan Minikube Untuk Membuat Klaster</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><div class=layout id=top><main class=content><div class=row><div class=col-md-8><h3>Objectives</h3><ul><li>Belajar apa itu klaster Kubernetes.</li><li>Belajar apa itu Minikube.</li><li>Memulai klaster Kubernetes menggunakan terminal _online_.</li></ul></div><div class=col-md-8><h3>Klaster Kubernetes</h3><p><b>Kubernetes mengoordinasikan klaster komputer ketersediaan tinggi (_highly available_) yang saling terhubung sebagai unit tunggal.</b> Abstraksi pada Kubernetes mengizinkan kamu untuk men-_deploy_ aplikasi terkemas (_containerized_) ke sebuah klaster tanpa perlu membalutnya secara spesifik pada setiap mesin. Untuk menggunakan model baru _deployment_ ini, aplikasi perlu dikemas dengan cara memisahkan mereka dari hos individu: mereka perlu dikemas. Aplikasi terkemas lebih fleksibel dan tersedia dibanding model _deployment_ lama, dimana aplikasi dipasang secara langsung didalam mesin spesifik sebagai paket yang sangat terintegrasi dengan hos. <b>Kubernetes mengotomasisasikan distribusi dan penjadwalan kontainer aplikasi sebuah klaster secara menyeluruh dengan cara yang lebih efisien.</b> Kubernetes merupakan platform _open-source_ dan siap produksi.</p><p>Klaster Kubernetes terdiri dari 2 tipe sumber daya:<ul><li><b>Master</b> mengoordinasikan klaster</li><li><b>Node</b> adalah pekerja (_worker_) yang menjalankan aplikasi</li></ul></p></div><div class=col-md-4><div class="content_box content_box_lined"><h3>Summary:</h3><ul><li>Klaster Kubernetes</li><li>Minikube</li></ul></div><div class="content_box content_box_fill"><p><i>Kubernetes merupakan platform _open-source_ tingkat produksi yang mengatur penjadwalan dan eksekusi kontainer aplikasi didalam dan keseluruhan klaster komputer.</i></p></div></div></div><br><div class=row><div class=col-md-8><h2 style=color:#3771e3>Diagram Klaster</h2></div></div><div class=row><div class=col-md-8><p><img src=/docs/tutorials/kubernetes-basics/public/images/module_01_cluster.svg></p></div></div><br><div class=row><div class=col-md-8><p><b>Master mempunyai kewajiban untuk mengelola klaster.</b> Master mengoordinasikan semua aktifitas di klaster kamu, seperti penjadwalan aplikasi, pemeliharaan keadaan (_state_) aplikasi yang diinginkan, _scaling_ aplikasi, dan _roll-out_ pembaharuan.</p><p><b>Node merupakan VM atau komputer fisik yang berfungsi sebagai mesin pekerja dalam klaster Kubernetes.</b> Setiap node mempunyai Kubelet, sebuah agen untuk mengatur Node dan komunikasi dengan Kubernetes master. Node juga harus mempunyai alat untuk menangani operasi kontainer, seperti Docker atau rkt. Sebuah klaster Kubernetes yang menangani trafik produksi harus mempunyai minimal 3 Node.</p></div><div class=col-md-4><div class="content_box content_box_fill"><p><i>Master mengatur klaster dan Node yang digunakan sebagai hos dari aplikasi yang berjalan.</i></p></div></div></div><div class=row><div class=col-md-8><p>Ketika kamu men-_deploy_ aplikasi pada Kubernetes, kamu memberitahu master untuk memulai kontainer aplikasi. Master melakukan penjadwalan kontainer untuk berjalan diatas klaster Node. <b>Node berkomunikasi dengan master menggunakan <a href=/docs/concepts/overview/kubernetes-api/>Kubernetes API</a></b>, yang disediakan oleh master. Pengguna akhir juga dapat menggunakan Kubernetes API secara langsung untuk berinteraksi dengan klaster.</p><p>Klaster Kubernetes dapat di-_deploy_ ke mesik fisik maupun virtual. Untuk memulai pengembangan Kubernetes, kamu dapat menggunakan Minikube. Minikube merupakan implementasi Kubernetes ringan yang membuat VM padi mesin lokal kamu dan men-_deploy_ klaster sederhanya yang terdiri atas 1 Node. Minikube tersedia untuk Linux, macOS, dan sistem Windows. Minikube CLI menyediakan operasi _bootstraping_ dasar untuk bekerja dengan klaster kamu. Namun untuk tutorial ini, kamu akan menggunakan online terminal yang sudah disediakan dengan Minikube yang sudah diinstall sebelumnya.</p><p>Sekarang kamu telah mengetahui apa itu Kubernetes, mari kita pergi ke tutorial online dan memulai klaster pertama kita!</p></div></div><br><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/docs/tutorials/kubernetes-basics/create-cluster/cluster-interactive/ role=button>Mulai Tutorial Interaktif<span class=btn_next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-323b75976001e8dfe35d67d61bc74f1a>2.1.2 - Tutorial Interaktif - Membuat Klaster</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><link href=/docs/tutorials/kubernetes-basics/public/css/overrides.css rel=stylesheet><script src=https://katacoda.com/embed.js></script><div class=layout id=top><main class="content katacoda-content"><div class=katacoda><div class=katacoda__alert>Layar terlalu kecil untuk berinteraksi dengan Terminal, silahkan gunakan desktop/tablet.</div><div class=katacoda__box id=inline-terminal-1 data-katacoda-lang=id data-katacoda-id=kubernetes-bootcamp/1 data-katacoda-color=326de6 data-katacoda-secondary=273d6d data-katacoda-hideintro=false data-katacoda-prompt="Kubernetes Bootcamp Terminal" style=height:600px></div></div><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/id/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/ role=button>Lanjut ke Modul 2<span class=btn__next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-76d78b3fba507f7ed33cef14a35b631d>2.2 - Menyebarkan (Deploy) Aplikasi</h1></div><div class=td-content><h1 id=pg-2b1bba431989008c7493109a0f049ece>2.2.1 - Menggunakan kubectl untuk membuat Deployment</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><div class=layout id=top><main class=content><div class=row><div class=col-md-8><h3>Tujuan</h3><ul><li>Belajar tentang menyebarkan (<i>deploy</i>) aplikasi.</li><li>Menyebarkan aplikasi pertama kamu di Kubernetes dengan kubectl.</li></ul></div><div class=col-md-8><h3><i>Deployment</i> Kubernetes</h3><p>Ketika klaster Kubernetes kamu sudah berjalan, kamu dapat menyebarkan aplikasi terkontainerisasi di atasnya.
Untuk melakukannya, kamu perlu membuat konfigurasi <b>Deployment</b>. Deployment menginstruksikan Kubernetes
tentang bagaimana cara membuat dan memperbarui <i>instance</i> aplikasi kamu. Ketika kamu selesai membuat Deployment, Kubernetes <i>control plane</i>
melakukan penjadwalan <i>instance</i> aplikasi yang terlibat dalam Deployment untuk berjalan di Node individu pada klaster.</p><p>Setelah <i>instance</i> aplikasi telah dibuat, Kubernetes Deployment Controller akan melakukan monitoring <i>instance</i> tersebut secara kontinu. Jika <i>instance</i> pada hos Node mati atau terhapus, Deployment Controller akan mengganti <i>instance</i> tersebut dengan <i>instance</i> Node lain dalam klaster. <b>Ia menyediakan mekanisme penyembuhan diri (<i>self-healing</i>) untuk mengatasi kegagalan mesin atau pemeliharaan (<i>maintenance</i>)</b></p><p>Pada masa pra-orkestrasi, instalasi <i>script</i> sering digunakan untuk memulai aplikasi, namun cara ini tidak memberikan mekanisme pemulihan ketika terjadi kegagalan mesin. Dengan kemampuan membuat <i>instance</i> aplikasi dan menjaganya tetap berjalan pada Node, Deployment Kubernetes menyediakan manajemen aplikasi dengan pendekatan fundamental yang berbeda.</p></div><div class=col-md-4><div class="content__box content__box_lined"><h3>Ringkasan:</h3><ul><li>Deployment</li><li>Kubectl</li></ul></div><div class="content__box content__box_fill"><p><i>Sebuah Deployment bertanggung jawab untuk membuat dan memperbarui instance dari aplikasi kamu</i></p></div></div></div><br><div class=row><div class=col-md-8><h2 style=color:#3771e3>Menyebarkan aplikasi pertama kamu dalam Kubernetes</h2></div></div><div class=row><div class=col-md-8><p><img src=/docs/tutorials/kubernetes-basics/public/images/module_02_first_app.svg></p></div></div><br><div class=row><div class=col-md-8><p>Kamu dapat membuat dan mengatur Deployment dengan menggunakan antar muka baris perintah (CLI) Kubernetes, <b>Kubectl</b>. Kubectl menggunakan Kubernetes API untuk berinteraksi dengan klaster. Pada modul ini, kamu akan belajar perintah-perintah yang sering digunakan Kubectl untuk membuat Deployment untuk menjalankan aplikasi kamu pada klaster Kubernetes.</p><p>Ketika kamu membuat Deployment, kamu perlu mendefinisikan Container <i>image</i> untuk aplikasi kamu dan jumlah replika yang kamu inginkan. Kamu dapat mengganti informasi tersebut nanti dengan melakukan pembaharuan Deployment kamu; Modul <a href=docs/tutorials/kubernetes-basics/scale/scale-intro/>5</a> dan <a href=/docs/tutorials/kubernetes-basics/update/update-intro/>6</a> pada <i>bootcamp</i> ini mendiskusikan bagaimana cara melakukan perluasan (<i>scale</i>) dan pembaruan Deployment kamu.</p></div><div class=col-md-4><div class="content__box content__box_fill"><p><i>Aplikasi perlu dikemas menjadi satu dengan format Container yang didukung supaya tersebar pada Kubernetes</i></p></div></div></div><div class=row><div class=col-md-8><p>Pada Deployment pertama kamu, kamu akan menggunakan aplikasi Node.js yang terkemas dalam Container Docker. (Jika kamu belum pernah mencoba membuat aplikasi Node.js dan menyebarkannya dengan Container, kamu dapat melakukannya dengan mengikuti instruksi pada <a href=/id/docs/tutorials/hello-minikube/>tutorial Hello Minikube</a>).</p><p>Sekarang kamu tahu apa itu Deployment, mari kita ke tutorial <i>online</i> dan menyebarkan aplikasi pertama kita!</p></div></div><br><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/id/docs/tutorials/kubernetes-basics/deploy-app/deploy-interactive/ role=button>Mulai Tutorial Interaktif <span class=btn__next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-f8997ec143b382fa6c9621941ea62ca3>2.2.2 - Tutorial Interaktif - Menyebarkan (Deploy) Aplikasi</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><link href=/docs/tutorials/kubernetes-basics/public/css/overrides.css rel=stylesheet><script src=https://katacoda.com/embed.js></script><div class=layout id=top><main class="content katacoda-content"><div class=row><div class=col-md-12><p>Pod merupakan unit eksekusi utama pada aplikasi Kubernetes. Setiap Pod mewakili sebagian dari beban kerja (<i>workload</i>) yang berjalan pada klaster kamu. <a href=/id/docs/concepts/workloads/pods/pod-overview/#understanding-pods>Learn more about Pods</a>.</p></div></div><br><div class=katacoda><div class=katacoda__alert>Untuk berinteraksi dengan Terminal, silahkan gunakan desktop/tablet.</div><div class=katacoda__box id=inline-terminal-1 data-katacoda-lang=id data-katacoda-id=kubernetes-bootcamp/7 data-katacoda-color=326de6 data-katacoda-secondary=273d6d data-katacoda-hideintro=false data-katacoda-prompt="Kubernetes Bootcamp Terminal" style=height:600px></div></div><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/id/docs/tutorials/kubernetes-basics/explore/explore-intro/ role=button>Lanjut ke Modul 3<span class=btn__next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-250d620a73ec8be7e1f7d835574c4596>2.3 - Menjelajahi Aplikasimu</h1></div><div class=td-content><h1 id=pg-2771f4e8c45321b17cb0114a2d266453>2.3.1 - Melihat Pod dan Node</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><div class=layout id=top><main class=content><div class=row><div class=col-md-8><h3>Tujuan</h3><ul><li>Belajar tentang Pod Kubernetes.</li><li>Belajar tentang Node Kubernetes.</li><li>Mengatasi masalah pada aplikasi-aplikasi yang digelar.</li></ul></div><div class=col-md-8><h2>Pod Kubernetes</h2><p>Ketika kamu membuat sebuah Deployment pada Modul <a href=/id/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/>2</a>, Kubernetes membuatkan sebuah <b>Pod</b> untuk menempatkan instans aplikasimu. Pod merupakan sebuah abstraksi Kubernetes yang merepresentasikan sebuah grup yang terdiri dari satu atau lebih kontainer (seperti Docker), dan beberapa sumber daya bersama untuk kontainer-kontainer itu. Sumber daya tersebut termasuk:</p><ul><li>Penyimpanan bersama, disebut Volume</li><li>Jaringan, sebagai satu alamat IP klaster unik</li><li>Informasi tentang bagaimana mejalankan tiap kontainer, seperti versi <i>image</i> atau porta spesifik yang digunakan oleh kontainer</li></ul><p>Pod memodelkan sebuah "logical host" spesifik aplikasi dan dapat berisi beberapa kontainer aplikasi berbeda yang relatif terkait erat. Contohnya, sebuah Pod mungkin terdiri atas kontainer aplikasi Node.js dan juga kontainer berbeda yang bertugas menyediakan data untuk dipublikasikan ke server web Node.js. Kontainer-kontainer dalam sebuah Pod berbagi satu alamat IP dan ruang porta, selalu terletak bersama dan terjadwal bersama, dan berjalankan dalam satu konteks bersama (<i>shared context</i>) pada Node yang sama.</p><p>Pod merupakan unit terkecil dalam platform Kubernetes. Ketika kita membuat sebuat Deployment, Deployment tersebut membuat Pod dengan kontainer-kontainer di dalamnya (bukannya dengan membuat kontainer secara langsung). Tiap Pod terikat langsung dengan Node di mana dia dijadwalkan dan tetap di sana sampai diterminasi (berdasarkan <i>restart policy</i>) atau penghapusan. Jika terjadi kegagalan pada sebuah Node, Pod indentik akan dijadwalkan di Node lain dalam klaster.</p></div><div class=col-md-4><div class="content__box content__box_lined"><h3>Ringkasan:</h3><ul><li>Pod</li><li>Node</li><li>Perintah utama kubectl</li></ul></div><div class="content__box content__box_fill"><p><i>Pod merupakan sebuah grup yang terdiri dari satu atau lebih kontainer aplikasi (seperti Docker) dan berisi penyimpanan bersama (<i>volume</i>), alamat IP dan informasi tentang bagaimana menjalankan mereka.</i></p></div></div></div><br><div class=row><div class=col-md-8><h2 style=color:#3771e3>Ikhtisar Pod</h2></div></div><div class=row><div class=col-md-8><p><img src=/docs/tutorials/kubernetes-basics/public/images/module_03_pods.svg></p></div></div><br><div class=row><div class=col-md-8><h2>Node</h2><p>Sebuah Pod selalu berjalan dalam sebuah <b>Node</b>. Node merupakan sebuah mesin pekerja (<i>worker</i>) di Kubernetes dan mungkin merupakan mesin virtual ataupun fisik, tergantung dari klaster. Tiap Node dikelola oleh control plane. Satu Node dapat memiliki beberapa Pod, dan control plane Kubernetes yang otomatis menangani penjadwalan pod seluruh Node-Node dalam klaster. Penjadwalan otomatis oleh control plane memperhitungkan tersedianya sumber daya tiap Node.</p><p>Tiap Node Kubernetes menjalankan setidaknya:</p><ul><li>Kubelet, satu proses yang bertanggung jawab untuk berkomunikasi antara control plane Kubernetes dan Node; ini juga mengelola Pod-Pod dan kontainer-kontainer yang berjalan di sebuah mesin.</li><li>Satu <i>container runtime</i>, seperti Docker, bertanggung jawab untuk menarik <i>image</i> kontainer dari register, membuka kontainer, dan menjalankan aplikasi.</li></ul></div><div class=col-md-4><div class="content__box content__box_fill"><p><i>Kontainer seharusnya hanya dijadwalkan bersama di satu Pod jika terkait erat dan membutuhkan sumber daya bersama seperti diska.</i></p></div></div></div><br><div class=row><div class=col-md-8><h2 style=color:#3771e3>Ikhtisar Node</h2></div></div><div class=row><div class=col-md-8><p><img src=/docs/tutorials/kubernetes-basics/public/images/module_03_nodes.svg></p></div></div><br><div class=row><div class=col-md-8><h2>Mengatasi masalah dengan kubectl</h2><p>Dalam Modul <a href=/id/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/>2</a>, kamu menggunakan antarmuka baris perintah kubectl. Kamu akan lanjut menggunakannya pada modul 3 untuk mendapatkan informasi tentang aplikasi-aplikasi yang digelar dan lingkungannya. Operasi yang paling umum dapat dilakukan dengan perintah kubectl berikut:</p><ul><li><b>kubectl get</b> - melihat daftar sumber daya</li><li><b>kubectl describe</b> - menampilkan detil informasi tentang suatu sumber daya</li><li><b>kubectl logs</b> - mencetak log-log dari satu kontainer dalam sebuah Pod</li><li><b>kubectl exec</b> - eksekusi sebuah perintah pada satu kontainer dalam sebuah Pod</li></ul><p>Kamu dapat menggunakan perintah ini kapan aplikasi-aplikasi digelar, apa status mereka saat ini, di mana mereka berjalan, dan apa konfigurasi mereka.</p><p>Sekarang karena kita lebih mengetahui tentang klaster kita dan baris perintahnya, mari kita menjelajah aplikasi kita.</p></div><div class=col-md-4><div class="content__box content__box_fill"><p><i>Node merupakan mesin pekerja di Kubernetes dan bisa berupa VM ataupun mesin fisik, tergantung pada klaster. Beberapa Pod dapat berjalan dalam satu Node.</i></p></div></div></div><br><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/id/docs/tutorials/kubernetes-basics/explore/explore-interactive/ role=button>Mulai Tutorial Interaktif <span class=btn__next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-4b01eab98a9844ad91131079654199dd>2.3.2 - Tutorial Interaktif - Menjelajahi Aplikasimu</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><link href=/docs/tutorials/kubernetes-basics/public/css/overrides.css rel=stylesheet><script src=https://katacoda.com/embed.js></script><div class=layout id=top><main class="content katacoda-content"><br><div class=katacoda><div class=katacoda__alert>Untuk berinteraksi dengan Terminal, tolong gunakan dalam desktop/tablet</div><div class=katacoda__box id=inline-terminal-1 data-katacoda-lang=id data-katacoda-id=kubernetes-bootcamp/4 data-katacoda-color=326de6 data-katacoda-secondary=273d6d data-katacoda-hideintro=false data-katacoda-prompt="Kubernetes Bootcamp Terminal" style=height:600px></div></div><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/id/docs/tutorials/kubernetes-basics/expose/expose-intro/ role=button>Lanjut ke Modul 4<span class=btn__next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-4b0e31c9e0eae68bbb0a358b4042ada9>2.4 - Mengekspos Aplikasimu Secara Publik</h1></div><div class=td-content><h1 id=pg-8ef4dad8f743b191a9e8c6f891cb191a>2.4.1 - Menggunakan Service untuk Mengekspos Aplikasimu</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><div class=layout id=top><main class=content><div class=row><div class=col-md-8><h3>Tujuan</h3><ul><li>Belajar tentang Service di Kubernetes</li><li>Memahami bagaimana label dan objek LabelSelector berhubungan dengan sebuah Service</li><li>Mengekspos sebuah aplikasi keluar klaster Kubernetes menggunakan sebuah Service</li></ul></div><div class=col-md-8><h3>Ikhtisar Service Kubernetes</h3><p><a href=/id/docs/concepts/workloads/pods/>Pod-Pod</a> Kubernetes itu fana. Pod pada kenyataannya punya <a href=/id/docs/concepts/workloads/pods/pod-lifecycle/>siklus hidup</a>. Ketika sebuah Node pekerja mati, Pod yang berjalan dalam Node itu juga hilang. <a href=/id/docs/concepts/workloads/controllers/replicaset/>ReplicaSet</a> mungkin kemudian secara dinamis mendorong klaster kembali ke keadaan yang diinginkan melalui penciptaan Pod baru untuk memastikan aplikasimu berjalan. Contoh lainnya, katakanlah ada <i>backend</i> pengolahan citra dengan 3 replika. Replika tersebut dapat ditukar; sistem <i>front-end</i> seharusnya tidak peduli tentang replika <i>backend</i> atau bahkan jika Pod hilang dan dibuat ulang. Walaupun demikian, tiap Pod dalam sebuah klaster Kubernetes memiliki alamat IP unik, meskipun Pod-Pod itu berada dalam satu Node yang sama, sehingga seharusnya ada jalan untuk mencocokan perubahan antara Pod-Pod itu sehingga aplikasimu tetap berfungsi.</p><p>Service di Kubernetes merupakan abstraksi yang mendefinisikan satu set Pod secara logis dan aturan untuk mengakses mereka. Service memungkinkan keterkaitan renggang antara Pod-Pod. Sebuah Service didefinisikan menggunakan YAML <a href=/id/docs/concepts/configuration/overview/#tip-konfigurasi-secara-umum>(lebih disukai)</a> atau JSON, sebagaimana semua objek Kubernetes. Kumpulan Pod yang ditargetkan oleh Service biasanya ditentukan oleh <i>LabelSelector</i> (lihat di bawah mengapa kamu mungkin ingin Service tanpa <code>selector</code> dalam <i>spec</i>).</p><p>Meskipun tiap Pod memiliki alamat IP unik, IP tersebut tidak diekpos ke luar klaster tanpa sebuah Service. Service memperbolehkan aplikasimu untuk menerima kunjungan. Service dapat diekspos dengan cara yang berbeda menggunakan <code>type</code> di ServiceSpec:<ul><li><i>ClusterIP</i> (bawaan) - Mengekspos Service dengan internal IP dalam klaster. <i>Type</i> ini membuat Service hanya bisa diakses dalam klaster.</li><li><i>NodePort</i> - Mengekspos Service dengan porta yang sama untuk tiap Node dalam klaster menggunakan NAT. Ini membuat Service dapat diakses dari luar dengan <code>&lt;NodeIP>:&lt;NodePort></code>. <i>Superset</i> dari ClusterIP.</li><li><i>LoadBalancer</i> - Membuat <i>load balancer</i> eksternal di <i>cloud</i> saat ini (jika didukung) dan memberikan IP eksternal tetap kepada Service. <i>Superset</i> dari NodePort.</li><li><i>ExternalName</i> - Mengekpos Service menggunakan nama sesuai keinginan (ditentukan oleh <code>externalName</code> dalam <i>spec</i>) dengan mengembalikan catatan CNAME dengan nama tersebut. Tidak menggunakan proksi. <i>Type</i> ini membutuhkan <code>kube-dns</code> versi v1.7 atau lebih tinggi.</li></ul><p>Informasi lebih tentang <i>type</i> Service berbeda dapat ditemukan di tutorial <a href=/docs/tutorials/services/source-ip/>Menggunakan IP pengirim</a>. Lihat juga <a href=/id/docs/concepts/services-networking/connect-applications-service>Menghubungkan aplikasi dengan Service</a>.</p><p>Selain itu, catat bahwa ada kasus penggunaan Service yang tidak mendefinisikan <code>selector</code> di <i>spec</i>. Sebuah Service yang dibuat tanpa <code>selector</code> juga tidak akan membuat objek Endpoint yang sesuai. Ini mengizinkan pengguna untuk memetakan Service secara manual ke <i>endpoint</i> spesifik. Kemungkinan lain kenapa dimungkinan tanpa <i>selector</i> adalah kamu dengan tegas menggunakan <code>type: ExternalName</code>.</p></div><div class=col-md-4><div class="content__box content__box_lined"><h3>Ringkasan</h3><ul><li>Mengekspos Pod ke kunjungan eksternal</li><li><i>Load balancing</i> kunjungan melintasi beberapa Pod</li><li>Menggunakan label</li></ul></div><div class="content__box content__box_fill"><p><i>Service Kubernetes adalah lapisan abstraksi yang mendefinisikan kumpulan Pod secara logis dan mengijinkan paparan kunjungan eksternal, <i>load balancing</i>, dan <i>service discovery</i> untuk Pod-Pod tersebut.</i></p></div></div></div><br><div class=row><div class=col-md-8><h3>Service dan Label</h3></div></div><div class=row><div class=col-md-8><p><img src=/docs/tutorials/kubernetes-basics/public/images/module_04_services.svg width=150% height=150%></p></div></div><div class=row><div class=col-md-8><p>Service mengarahkan kunjungan melintasi sekumpulan Pod. Service merupakan abstraksi yang mengizinkan Pod-Pod untuk mati dan replikasi dalam Kubernetes tanpa memengaruhi aplikasimu. Menemukan dan <i>routing</i> antara Pod dependen (seperti komponen <i>frontend</i> dan <i>backend</i>) yang ditangani oleh Service Kubernetes.</p><p>Service mencocokan satu set Pod menggunakan <a href=/id/docs/concepts/overview/working-with-objects/labels/>label dan selektor</a>, mengelompokan primitif yang mengizinkan operasi logika pada objek-objek dalam Kubernetes. Label adalah pasangan <i>key/value</i> yang melekat pada objek-objek dan dapat digunakan untuk beberapa tujuan:</p><ul><li>Menandai objek-objek untuk lingkungan <i>development</i>, <i>test</i>, dan <i>production</i></li><li>Melekatkan label versi</li><li>Klasifikasi sebuah objek dengan label-label</li></ul></div></div><br><div class=row><div class=col-md-8><p><img src=/docs/tutorials/kubernetes-basics/public/images/module_04_labels.svg></p></div></div><br><div class=row><div class=col-md-8><p>Label-label dapat dilekatkan pada objek-objek pada waktu pembuatan ataupun setelahnya. Mereka dapat diubah kapanpun. Mari kita ekspos aplikasi kita sekarang dengan sebuah Service dan menerapkan beberapa label.</p></div></div><br><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/id/docs/tutorials/kubernetes-basics/expose/expose-interactive/ role=button>Mulai Tutorial Interaktif<span class=btn__next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-352241d22effe0714772d21c7d1b512d>2.4.2 - Tutorial Interaktif - Mengekspos Aplikasimu</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><link href=/docs/tutorials/kubernetes-basics/public/css/overrides.css rel=stylesheet><script src=https://katacoda.com/embed.js></script><div class=layout id=top><main class="content katacoda-content"><div class=katacoda><div class=katacoda__alert>Untuk berinteraksi dengan Terminal, harap gunakan desktop/tablet</div><div class=katacoda__box id=inline-terminal-1 data-katacoda-lang=id data-katacoda-id=kubernetes-bootcamp/8 data-katacoda-color=326de6 data-katacoda-secondary=273d6d data-katacoda-hideintro=false data-katacoda-prompt="Kubernetes Bootcamp Terminal" style=height:600px></div></div><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/id/docs/tutorials/kubernetes-basics/scale/scale-intro/ role=button>Lanjutkan ke Modul 5<span class=btn__next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-be4996c93fb39c459a30b6669569d423>2.5 - Penyekalaan Aplikasimu</h1></div><div class=td-content><h1 id=pg-d1c15c9bd4f625adbc13149b1475287c>2.5.1 - Menjalankan Multipel Instans dari Aplikasimu</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><div class=layout id=top><main class=content><div class=row><div class=col-md-8><h3>Tujuan</h3><ul><li>Penyekalaan aplikasi menggunakan kubectl.</li></ul></div><div class=col-md-8><h3>Penyekalaan sebuah Aplikasi</h3><p>Di modul-modul sebelumnya kita telah membuat <a href=/id/docs/concepts/workloads/controllers/deployment/>Deployment</a>, dan mengeksposnya secara publik via <a href=/id/docs/concepts/services-networking/service/>Service</a>. Deployment tersebut hanya membuat satu Pod untuk menjalankan aplikasi kita. Ketika kunjungan meningkat, kita perlu melakukan penyekalaan (<i>scale</i>) aplikasi kita untuk mengikuti tingkat permintaan pengguna.</p><p><b>Penyekalaan</b> dapat dicapai dengan mengubah nilai replicas dalam Deployment</p></div><div class=col-md-4><div class="content__box content__box_lined"><h3>Ringkasan:</h3><ul><li>Penyekalaan sebuah Deployment</li></ul></div><div class="content__box content__box_fill"><p><i>Kamu dapat membuat Deployment dengan beberapa instans sekaligus dari awal dengan menggunakan parameter --replicas pada perintah kubectl create deployment</i></p></div></div></div><br><div class=row><div class=col-md-8><h2 style=color:#3771e3>Ikhtisar Penyekalaan</h2></div></div><div class=row><div class=col-md-1></div><div class=col-md-8><div id=myCarousel class=carousel data-ride=carousel data-interval=3000><ol class=carousel-indicators><li data-target=#myCarousel data-slide-to=0 class=active></li><li data-target=#myCarousel data-slide-to=1></li></ol><div class=carousel-inner role=listbox><div class="item carousel-item active"><img src=/docs/tutorials/kubernetes-basics/public/images/module_05_scaling1.svg></div><div class="item carousel-item"><img src=/docs/tutorials/kubernetes-basics/public/images/module_05_scaling2.svg></div></div><a class="left carousel-control" href=#myCarousel role=button data-slide=prev><span class=sr-only>Sebelumnya</span></a>
<a class="right carousel-control" href=#myCarousel role=button data-slide=next><span class=sr-only>Selanjutnya</span></a></div></div></div><br><div class=row><div class=col-md-8><p>Perluasan skala Deployment akan memastikan Pod baru dibuat dan dijadwalkan ke Node-Node dengan sumber daya yang tersedia. Penyekalaan akan meningkatkan jumlah Pod ke keadaan yang diinginkan. Kubernetes juga mendukung <a href=/id/docs/tasks/run-application/horizontal-pod-autoscale/><i>autoscaling</i></a> Pod, tetapi itu di luar cakupan tutorial ini. Penyekalaan ke nol juga dimungkinkan, dan tindakan ini akan mengakhiri semua Pod pada Deployment tersebut.</p><p>Menjalankan beberapa instans dari aplikasi akan membutuhkan cara untuk mendistribusikan trafik ke semuanya. Service memiliki penyeimbang beban terintegrasi yang akan mendistribusikan trafik jaringan ke semua Pod dari sebuah Deployment yang diekspos. Service akan terus memonitor Pod-Pod yang berjalan menggunakan Endpoints, untuk memastikan trafik hanya dikirim ke Pod yang tersedia.</p></div><div class=col-md-4><div class="content__box content__box_fill"><p><i>Penyekalaan dapat dicapai dengan mengubah jumlah replicas pada sebuah Deployment.</i></p></div></div></div><br><div class=row><div class=col-md-8><p>Sewaktu kamu memiliki multipel instans dari aplikasi yang berjalan, kamu akan bisa melakukan pembaruan bertahap tanpa henti. Kita akan akan membahas hal tersebut pada modul selanjutnya. Sekarang, mari kita pergi ke terminal daring dan melakukan penyekalaan terhadap aplikasi kita.</p></div></div><br><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/id/docs/tutorials/kubernetes-basics/scale/scale-interactive/ role=button>Mulai Tutorial Interaktif <span class=btn__next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-7bdb3fbaa1177ff5dfa3fe86bd35ef59>2.5.2 - Tutorial Interaktif - Penyekalaan Aplikasimu</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><link href=/docs/tutorials/kubernetes-basics/public/css/overrides.css rel=stylesheet><script src=https://katacoda.com/embed.js></script><div class=layout id=top><main class="content katacoda-content"><div class=katacoda><div class=katacoda__alert>Untuk berinteraksi dengan Terminal, harap gunakan desktop/tablet</div><div class=katacoda__box id=inline-terminal-1 data-katacoda-lang=id data-katacoda-id=kubernetes-bootcamp/5 data-katacoda-color=326de6 data-katacoda-secondary=273d6d data-katacoda-hideintro=false data-katacoda-prompt="Kubernetes Bootcamp Terminal" style=height:600px></div></div><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/id/docs/tutorials/kubernetes-basics/update/update-intro/ role=button>Lanjutkan ke Modul 6<span class=btn__next>›</span></a></div></div></main><a class=scrolltop href=#top></a></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-62b8b17dadfb55f1801cf8439e944e58>2.6 - Memperbarui Aplikasimu</h1></div><div class=td-content><h1 id=pg-12e04355145afad615ca3c38335ba019>2.6.1 - Melakukan Pembaruan Bertahap</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><div class=layout id=top><main class=content><div class=row><div class=col-md-8><h3>Tujuan</h3><ul><li>Melakukan pembaruan bertahap (<i>rolling update</i>) menggunakan kubectl.</li></ul></div><div class=col-md-8><h3>Memperbarui suatu aplikasi</h3><p>Pengguna mengharapkan aplikasi tersedia sepanjang waktu dan pengembang bisa jadi diharapkan untuk men-<i>deploy</i> versi terbaru dari aplikasi tersebut beberapa kali dalam suatu waktu. Di Kubernetes hal ini dilakukan melalui pembaruan bertahap. <b>Pembaruan bertahap</b> memungkinkan pembaruan Deployment terjadi tanpa berhenti dengan memperbarui instans Pod secara bertahap dengan versi yang baru. Pod yang baru akan dijadwalkan pada Node dengan sumber daya yang tersedia.</p><p>Dalam modul sebelumnya kita telah melakukan penyekalaan aplikasi kita untuk menjalankan beberapa instans. Hal ini dibutuhkan untuk menjalankan pembaruan tanpa mempengaruhi ketersediaan aplikasi. Secara bawaan, jumlah maksimum dari Pod lama yang akan digantikan (menjadi tidak tersedia) selama pembaruan dan jumlah maksimum Pod baru yang dapat dibuat adalah satu. Kedua opsi ini dapat dikonfigurasi dengan angka atau persentase (dari Pod). Di Kubernetes, setiap pembaruan diberi versi masing-masing dan suatu pembaruan Deployment dapat dikembalikan ke versi sebelumnya (yang stabil).</p></div><div class=col-md-4><div class="content__box content__box_lined"><h3>Ringkasan:</h3><ul><li>Memperbarui aplikasi</li></ul></div><div class="content__box content__box_fill"><p><i>Pembaruan bertahap memungkinkan pembaruan Deployment terjadi tanpa berhenti dengan memperbarui instans Pod secara bertahap dengan versi yang baru.</i></p></div></div></div><br><div class=row><div class=col-md-8><h2 style=color:#3771e3>Gambaran pembaruan bertahap</h2></div></div><div class=row><div class=col-md-1></div><div class=col-md-8><div id=myCarousel class=carousel data-ride=carousel data-interval=3000><ol class=carousel-indicators><li data-target=#myCarousel data-slide-to=0 class=active></li><li data-target=#myCarousel data-slide-to=1></li><li data-target=#myCarousel data-slide-to=2></li><li data-target=#myCarousel data-slide-to=3></li></ol><div class=carousel-inner role=listbox><div class="item carousel-item active"><img src=/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates1.svg></div><div class="item carousel-item"><img src=/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates2.svg></div><div class="item carousel-item"><img src=/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates3.svg></div><div class="item carousel-item"><img src=/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates4.svg></div></div><a class="left carousel-control" href=#myCarousel role=button data-slide=prev><span class=sr-only>Sebelumnya</span></a>
<a class="right carousel-control" href=#myCarousel role=button data-slide=next><span class=sr-only>Selanjutnya</span></a></div></div></div><br><div class=row><div class=col-md-8><p>Seperti penyekalaan aplikasi, jika suatu Deployment terekspos secara publik, maka Service akan menyeimbangkan beban trafik hanya ke Pod yang tersedia saat pembaruan berlangsung. Pod yang tersedia adalah instans yang dapat diakses oleh pengguna aplikasi.</p><p>Pembaruan bertahap memungkinan dilakukannya aktivitas-aktivitas berikut:</p><ul><li>Mempromosikan suatu aplikasi dari satu <i>environment</i> yang ke <i>environment</i> yang lain (via pembaruan kontainer <i>image</i>)</li><li>Kembali (<i>rollback</i>) ke versi-versi sebelumnya</li><li>Continuous Integration dan Continuous Delivery (CI/CD) dari aplikasi tanpa henti</li></ul></div><div class=col-md-4><div class="content__box content__box_fill"><p><i>Jika suatu Deployment terekspos secara publik, maka Service akan menyeimbangkan beban trafik hanya ke Pod yang tersedia saat pembaruan berlangsung.</i></p></div></div></div><br><div class=row><div class=col-md-8><p>Pada tutorial interaktif berikut ini, kita akan mencoba untuk memperbarui aplikasi kita ke versi terbaru dan kemudian melakukan <i>rollback</i>.</p></div></div><br><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/id/docs/tutorials/kubernetes-basics/update/update-interactive/ role=button>Mulai Tutorial Interaktif <span class=btn__next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-dddc0cb356c280e0339bcf42776987dc>2.6.2 - Tutorial Interaktif - Memperbarui Aplikasimu</h1><!doctype html><html lang=id><body><link href=/docs/tutorials/kubernetes-basics/public/css/styles.css rel=stylesheet><link href=/docs/tutorials/kubernetes-basics/public/css/overrides.css rel=stylesheet><script src=https://katacoda.com/embed.js></script><div class=layout id=top><main class="content katacoda-content"><div class=katacoda><div class=katacoda__alert>Untuk berinteraksi dengan Terminal, silahkan gunakan versi desktop/tablet</div><div class=katacoda__box id=inline-terminal-1 data-katacoda-lang=id data-katacoda-id=kubernetes-bootcamp/6 data-katacoda-color=326de6 data-katacoda-secondary=273d6d data-katacoda-hideintro=false data-katacoda-prompt="Kubernetes Bootcamp Terminal" style=height:600px></div></div><div class=row><div class=col-md-12><a class="btn btn-lg btn-success" href=/docs/tutorials/kubernetes-basics/ role=button>Kembali Mempelajari Panduan Dasar Kubernetes<span class=btn__next>›</span></a></div></div></main></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-1efbbc2c3015389f835b1661d5effb29>3 - Aplikasi Stateless</h1></div><div class=td-content><h1 id=pg-62caf420877232190a7404b8d93c6724>3.1 - Mengekspos Alamat IP Eksternal untuk Mengakses Aplikasi di dalam Klaster</h1><p>Dokumen ini menjelaskan bagaimana cara membuat objek Service Kubernetes
yang mengekspos alamat IP eksternal.</p><h2 id=sebelum-kamu-memulai>Sebelum kamu memulai</h2><ul><li><p>Instal <a href=/id/docs/tasks/tools/install-kubectl/>kubectl</a>.</p></li><li><p>Gunakan sebuah penyedia layanan cloud seperti Google Kubernetes Engine atau Amazon Web Services
untuk membuat sebuah klaster Kubernetes. Tutorial ini membuat sebuah
<a href=/id/docs/tasks/access-application-cluster/create-external-load-balancer/><em>load balancer</em> eksternal</a>,
yang membutuhkan sebuah penyedia layanan cloud.</p></li><li><p>Konfigurasi <code>kubectl</code> agar dapat berkomunikasi dengan Kubernetes API Server kamu.
Untuk informasi lebih lanjut, kamu dapat merujuk pada dokumentasi penyedia layanan cloud
yang kamu gunakan.</p></li></ul><h2 id=tujuan>Tujuan</h2><ul><li>Jalankan lima buah instans dari aplikasi Hello World.</li><li>Buatlah sebuah objek Service yang mengekspos sebuah alamat IP eksternal.</li><li>Gunakan sebuah objek Service untuk mengakses aplikasi yang sedang dijalankan.</li></ul><h2 id=membuat-sebuah-objek-service-untuk-sebuah-aplikasi-yang-dijalankan-pada-lima-buah-pod>Membuat sebuah objek Service untuk sebuah aplikasi yang dijalankan pada lima buah Pod</h2><ol><li>Jalankan sebuah aplikasi Hello World pada klaster kamu:</li></ol><div class=highlight><div class=copy-code-icon style=text-align:right><a href=https://raw.githubusercontent.com/kubernetes/website/main/content/id/examples/service/load-balancer-example.yaml download=service/load-balancer-example.yaml><code>service/load-balancer-example.yaml</code></a>
<img src=/images/copycode.svg style=max-height:24px;cursor:pointer onclick='copyCode("service-load-balancer-example-yaml")' title="Copy service/load-balancer-example.yaml to clipboard"></img></div><div class=includecode id=service-load-balancer-example-yaml><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apps/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Deployment<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/name</span>:<span style=color:#bbb> </span>load-balancer-example<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>hello-world<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>replicas</span>:<span style=color:#bbb> </span><span style=color:#666>5</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>selector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>matchLabels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>app.kubernetes.io/name</span>:<span style=color:#bbb> </span>load-balancer-example<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>template</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>app.kubernetes.io/name</span>:<span style=color:#bbb> </span>load-balancer-example<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>containers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:green;font-weight:700>image</span>:<span style=color:#bbb> </span>gcr.io/google-samples/node-hello:1.0<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>hello-world<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>ports</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>containerPort</span>:<span style=color:#bbb> </span><span style=color:#666>8080</span><span style=color:#bbb>
</span></span></span></code></pre></div></div></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl apply -f https://k8s.io/examples/service/load-balancer-example.yaml
</span></span></code></pre></div><p>Perintah di atas akan membuat sebuah
objek <a href=/id/docs/concepts/workloads/controllers/deployment/>Deployment</a>
dan sebuah objek
<a href=/id/docs/concepts/workloads/controllers/replicaset/>ReplicaSet</a>
yang diasosiasikan dengan Deployment yang dibuat. ReplicaSet memiliki lima buah
<a href=/id/docs/concepts/workloads/pods/pod/>Pod</a>,
yang masing-masing dari Pod tersebut menjalankan aplikasi Hello World.</p><ol><li><p>Tampilkan informasi mengenai Deployment:</p><pre><code> kubectl get deployments hello-world
 kubectl describe deployments hello-world
</code></pre></li><li><p>Tampilkan informasi mengenai objek ReplicaSet:</p><pre><code> kubectl get replicasets
 kubectl describe replicasets
</code></pre></li><li><p>Buatlah sebuah objek Service yang mengekspos deployment:</p><pre><code> kubectl expose deployment hello-world --type=LoadBalancer --name=my-service
</code></pre></li><li><p>Tampilkan informasi mengenai Service:</p><pre><code> kubectl get services my-service
</code></pre><p>Keluaran dari perintah di atas akan menyerupai tampilan berikut:</p><pre><code> NAME         TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)    AGE
 my-service   LoadBalancer   10.3.245.137   104.198.205.71   8080/TCP   54s
</code></pre><div class="alert alert-info note callout" role=alert><strong>Catatan:</strong> Service dengan <code>type=LoadBalancer</code> didukung oleh penyedia layanan cloud eksternal, yang tidak tercakup dalam contoh ini, silahkan merujuk pada <a href=/id/docs/concepts/services-networking/service/#loadbalancer>laman berikut</a> untuk informasi lebih lanjut.</div><div class="alert alert-info note callout" role=alert><strong>Catatan:</strong> Jika sebuah alamat IP eksternal yang ditunjukkan dalam status &lt;pending>, tunggulah hingga satu menit kemudian masukkan perintah yang sama lagi.</div></li><li><p>Tampilkan informasi detail mengenai Service:</p><pre><code> kubectl describe services my-service
</code></pre><p>Perintah di atas akan menampilkan keluaran sebagai berikut:</p><pre><code> Name:           my-service
 Namespace:      default
 Labels:         app.kubernetes.io/name=load-balancer-example
 Annotations:    &lt;none&gt;
 Selector:       app.kubernetes.io/name=load-balancer-example
 Type:           LoadBalancer
 IP:             10.3.245.137
 LoadBalancer Ingress:   104.198.205.71
 Port:           &lt;unset&gt; 8080/TCP
 NodePort:       &lt;unset&gt; 32377/TCP
 Endpoints:      10.0.0.6:8080,10.0.1.6:8080,10.0.1.7:8080 + 2 more...
 Session Affinity:   None
 Events:         &lt;none&gt;
</code></pre><p>Pastikan nilai dari alamat IP eksternal (<code>LoadBalancer Ingress</code>) diekspos
pada Service yang kamu buat. Pada contoh ini, alamat IP eksternal yang diberikan adalah 104.198.205.71.
Kemudian pastikan nilai dari <code>Port</code> dan <code>NodePort</code>. Pada contoh ini, <code>Port</code>
yang digunakan adalah 8080 dan <code>NodePort</code> adalah 32377.</p></li><li><p>Pada keluaran perintah sebelumnya, kamu dapat melihat beberapa Service dengan beberapa endpoint:
10.0.0.6:8080,10.0.1.6:8080,10.0.1.7:8080 + 2 lainnya. Berikut ini merupakan alamat IP dari Pod
dimana aplikasi tersebut dijalankan. Untuk melakukan verifikasi alamat-alamat IP yang digunakan oleh Pod,
masukkan perintah berikut:</p><pre><code> kubectl get pods --output=wide
</code></pre><p>Keluaran yang diberikan akan menyerupai:</p><pre><code> NAME                         ...  IP         NODE
 hello-world-2895499144-1jaz9 ...  10.0.1.6   gke-cluster-1-default-pool-e0b8d269-1afc
 hello-world-2895499144-2e5uh ...  10.0.1.8   gke-cluster-1-default-pool-e0b8d269-1afc
 hello-world-2895499144-9m4h1 ...  10.0.0.6   gke-cluster-1-default-pool-e0b8d269-5v7a
 hello-world-2895499144-o4z13 ...  10.0.1.7   gke-cluster-1-default-pool-e0b8d269-1afc
 hello-world-2895499144-segjf ...  10.0.2.5   gke-cluster-1-default-pool-e0b8d269-cpuc
</code></pre></li><li><p>Gunakan alamat IP eksternal (<code>LoadBalancer Ingress</code>) untuk mengakses aplikasi Hello World:</p><pre><code> curl http://&lt;external-ip&gt;:&lt;port&gt;
</code></pre><p>dimana <code>&lt;external-ip></code> adalah alamat IP eksternal (<code>LoadBalancer Ingress</code>)
dari Service kamu, dan <code>&lt;port></code> adalah nilai dari <code>Port</code> dari deskripsi Service kamu.
Jika kamu menggunakan minikube, menuliskan perintah <code>minikube service my-service</code> akan
secara otomatis membuka aplikasi Hello World pada <em>browser</em>.</p><p>Respons yang diberikan apabila permintaan ini berhasil adalah sebuah pesan sapaan:</p><pre><code> Hello Kubernetes!
</code></pre></li></ol><h2 id=bersihkan>Bersihkan</h2><p>Untuk menghapus Service, kamu dapat menggunakan perintah ini:</p><pre><code>kubectl delete services my-service
</code></pre><p>Untuk menghapus Deployment, ReplicaSet, dan Pod-Pod yang digunakan untuk
menjalankan aplikasi Hello World, kamu dapat memasukkan perintah berikut:</p><pre><code>kubectl delete deployment hello-world
</code></pre><h2 id=selanjutnya>Selanjutnya</h2><p>Pelajari lebih lanjut cara untuk
<a href=/id/docs/concepts/services-networking/connect-applications-service/>menghubungkan aplikasi dengan berbagai Service</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d6336d9712aa433eb5f0fb8cbed6bef7>4 - Aplikasi Stateful</h1></div><div class=td-content><h1 id=pg-42e39658021b706bcc9478c8cc73c4a3>4.1 - Dasar-dasar StatefulSet</h1><p>Tutorial ini memberikan pengantar untuk manajemen aplikasi dengan
<a class=glossary-tooltip title='Melakukan proses manajemen deployment dan scaling dari sebuah set Pod, serta menjamin mekanisme ordering dan keunikan dari Pod ini.' data-toggle=tooltip data-placement=top href=/docs/concepts/workloads/controllers/statefulset/ target=_blank aria-label=StatefulSet>StatefulSet</a>.
Di sini dicontohkan bagaimana cara untuk membuat, menghapus, melakukan penyekalaan,
dan memperbarui Pod dari StatefulSet.</p><h2 id=sebelum-kamu-memulai>Sebelum kamu memulai</h2><p>Sebelum memulai tutorial ini, kamu harus mengakrabkan dirimu dengan
konsep-konsep Kubernetes sebagai berikut:</p><ul><li><a href=/id/docs/concepts/workloads/pods/>Pod</a></li><li><a href=/id/docs/concepts/services-networking/dns-pod-service/>DNS klaster</a></li><li><a href=/id/docs/concepts/services-networking/service/#service-headless>Service <em>headless</em></a></li><li><a href=/id/docs/concepts/storage/persistent-volumes/>PersistentVolume</a></li><li><a href=https://github.com/kubernetes/examples/tree/main/staging/persistent-volume-provisioning/>Penyediaan PersistentVolume</a></li><li><a href=/id/docs/concepts/workloads/controllers/statefulset/>StatefulSet</a></li><li>Alat baris perintah (<em>command line tool</em>) <a href=/docs/reference/kubectl/kubectl/>kubectl</a></li></ul><div class="alert alert-info note callout" role=alert><strong>Catatan:</strong> Tutorial ini mengasumsikan bahwa klastermu telah dikonfigurasikan untuk
melakukan penyediaan PersistentVolume secara dinamis. Jika klastermu belum
dikonfigurasikan seperti itu, kamu harus menyediakan dua volume masing-masing dengan
ukuran 1 GiB sebelum memulai tutorial.</div><h2 id=tujuan>Tujuan</h2><p>StatefulSet ditujukan untuk digunakan dengan aplikasi-aplikasi <em>stateful</em>
dan sistem terdistribusi. Akan tetapi, tata kelola aplikasi-aplikasi <em>stateful</em>
dan sistem terdistribusi pada Kubernetes merupakan topik yang luas dan kompleks.
Untuk menunjukkan fitur-fitur dasar dari StatefulSet dan tidak mencampuradukkan
topik sebelum dan terakhir, kamu akan menggelar sebuah aplikasi web sederhana
menggunakan StatefulSet.</p><p>Setelah tutorial ini, kamu akan akrab hal-hal berikut:</p><ul><li>Bagaimana cara membuat sebuah StatefulSet</li><li>Bagaimana suatu StatefulSet mengelola Pod</li><li>Bagaimana cara menghapus StatefulSet</li><li>Bagaimana cara melakukan penyekalaan terhadap suatu StatefulSet</li><li>Bagaimana cara memperbarui Pod dari StatefulSet</li></ul><h2 id=membuat-sebuah-statefulset>Membuat Sebuah StatefulSet</h2><p>Mulailah dengan membuat sebuah Statefulset dengan menggunakan contoh di bawah ini.
Hal ini mirip dengan contoh yang ditunjukkan di dalam konsep
<a href=/id/docs/concepts/workloads/controllers/statefulset/>StatefulSet</a>.
Contoh ini menciptakan sebuah
<a href=/id/docs/concepts/services-networking/service/#service-headless>Service <em>headless</em></a>,
<code>nginx</code>, untuk mempublikasikan alamat IP Pod di dalam StatefulSet, <code>web</code>.</p><div class=highlight><div class=copy-code-icon style=text-align:right><a href=https://raw.githubusercontent.com/kubernetes/website/main/content/id/examples/application/web/web.yaml download=application/web/web.yaml><code>application/web/web.yaml</code></a>
<img src=/images/copycode.svg style=max-height:24px;cursor:pointer onclick='copyCode("application-web-web-yaml")' title="Copy application/web/web.yaml to clipboard"></img></div><div class=includecode id=application-web-web-yaml><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Service<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>ports</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>port</span>:<span style=color:#bbb> </span><span style=color:#666>80</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>web<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>clusterIP</span>:<span style=color:#bbb> </span>None<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>selector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>---</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apps/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>StatefulSet<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>web<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>serviceName</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;nginx&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>replicas</span>:<span style=color:#bbb> </span><span style=color:#666>2</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>selector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>matchLabels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>template</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>containers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>image</span>:<span style=color:#bbb> </span>k8s.gcr.io/nginx-slim:0.8<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>ports</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>containerPort</span>:<span style=color:#bbb> </span><span style=color:#666>80</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>          </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>web<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>volumeMounts</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>www<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>          </span><span style=color:green;font-weight:700>mountPath</span>:<span style=color:#bbb> </span>/usr/share/nginx/html<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>volumeClaimTemplates</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>www<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>accessModes</span>:<span style=color:#bbb> </span>[<span style=color:#bbb> </span><span style=color:#b44>&#34;ReadWriteOnce&#34;</span><span style=color:#bbb> </span>]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>requests</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>          </span><span style=color:green;font-weight:700>storage</span>:<span style=color:#bbb> </span>1Gi<span style=color:#bbb>
</span></span></span></code></pre></div></div></div><p>Unduh contoh di atas, dan simpan ke dalam berkas dengan nama <code>web.yaml</code>.</p><p>Kamu perlu menggunakan dua jendela terminal. Pada terminal yang pertama, gunakan perintah
<a href=/docs/reference/generated/kubectl/kubectl-commands/#get><code>kubectl get</code></a> untuk mengamati
pembuatan Pod dari StatefulSet.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><p>Pada terminal yang kedua, gunakan
<a href=/docs/reference/generated/kubectl/kubectl-commands/#apply><code>kubectl apply</code></a> untuk membuat
Service <em>headless</em> dan StatefulSet yang didefinisikan di dalam <code>web.yaml</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl apply -f web.yaml
</span></span></code></pre></div><pre tabindex=0><code>service/nginx created
statefulset.apps/web created
</code></pre><p>Perintah di atas menciptakan dua Pod, masing-masing menjalankan server web
<a href=https://www.nginx.com>NGINX</a>. Dapatkan Service <code>nginx</code>...</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get service nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      TYPE         CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
nginx     ClusterIP    None         &lt;none&gt;        80/TCP    12s
</code></pre><p>...kemudian dapatkan StatefulSet <code>web</code>, untuk memastikan keduanya berhasil dibuat:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get statefulset web
</span></span></code></pre></div><pre tabindex=0><code>NAME      DESIRED   CURRENT   AGE
web       2         1         20s
</code></pre><h3 id=pembuatan-pod-berurutan>Pembuatan Pod Berurutan</h3><p>Untuk StatefulSet dengan <em>n</em> replika, ketika Pod sedang digelar, kesemuanya
akan dibuat secara berurutan, terurut dari <em>{0..n-1}</em>. Periksa keluaran dari
perintah <code>kubectl get</code> pada terminal pertama. Pada akhirnya, keluaran yang dihasilkan
akan seperti contoh di bawah ini.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS    RESTARTS   AGE
web-0     0/1       Pending   0          0s
web-0     0/1       Pending   0         0s
web-0     0/1       ContainerCreating   0         0s
web-0     1/1       Running   0         19s
web-1     0/1       Pending   0         0s
web-1     0/1       Pending   0         0s
web-1     0/1       ContainerCreating   0         0s
web-1     1/1       Running   0         18s
</code></pre><p>Perhatikan Pod <code>web-1</code> tidak dijalankan hingga <code>web-0</code> berganti status menjadi <em>Running</em>
(lihat <a href=/id/docs/concepts/workloads/pods/pod-lifecycle/#fase-pod>Fase Pod</a>) dan <em>Ready</em>
(lihat <code>type</code> di <a href=/id/docs/concepts/workloads/pods/pod-lifecycle/#kondisi-pod>Kondisi Pod</a>).</p><h2 id=pod-pada-statefulset>Pod pada StatefulSet</h2><p>Pod pada StatefulSet memiliki satu indeks urutan unik dan satu identitas jaringan yang tetap.</p><h3 id=memeriksa-indeks-urutan-pod>Memeriksa Indeks Urutan Pod</h3><p>Dapatkan Pod dari StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS    RESTARTS   AGE
web-0     1/1       Running   0          1m
web-1     1/1       Running   0          1m
</code></pre><p>Sebagaimana telah disebutkan di dalam konsep
<a href=/id/docs/concepts/workloads/controllers/statefulset/>StatefulSet</a>,
Pod pada StatefulSet memiliki suatu identitas yang melekat (<em>sticky</em>) dan unik.
Identitas ini didasarkan pada sebuah indeks urutan yang unik yang di tetapkan
ke masing-masing Pod oleh <a class=glossary-tooltip title='Kontrol tertutup yang mengawasi kondisi bersama dari klaster melalui apiserver dan membuat perubahan yang mencoba untuk membawa kondisi saat ini ke kondisi yang diinginkan.' data-toggle=tooltip data-placement=top href=/id/docs/concepts/architecture/controller/ target=_blank aria-label=pengontrol>pengontrol</a> StatefulSet.
Nama Pod memiliki format <code>&lt;nama statefulset>-&lt;indeks urutan></code>.
Karena StatefulSet <code>web</code> memiliki dua replika, maka ada dua Pod yang tercipta, <code>web-0</code> dan <code>web-1</code>.</p><h3 id=menggunakan-identitas-jaringan-yang-tetap>Menggunakan Identitas Jaringan yang Tetap</h3><p>Setiap Pod memiliki nama hos yang tetep berdasarkan indeks urutannya. Gunakan perintah
<a href=/docs/reference/generated/kubectl/kubectl-commands/#exec><code>kubectl exec</code></a> untuk menjalankan
perintah <code>hostname</code> di tiap Pod:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a2f;font-weight:700>for</span> i in <span style=color:#666>0</span> 1; <span style=color:#a2f;font-weight:700>do</span> kubectl <span style=color:#a2f>exec</span> <span style=color:#b44>&#34;web-</span><span style=color:#b8860b>$i</span><span style=color:#b44>&#34;</span> -- sh -c <span style=color:#b44>&#39;hostname&#39;</span>; <span style=color:#a2f;font-weight:700>done</span>
</span></span></code></pre></div><pre tabindex=0><code>web-0
web-1
</code></pre><p>Gunakan perintah <a href=/docs/reference/generated/kubectl/kubectl-commands/#run><code>kubectl run</code></a> untuk
menjalankan sebuah Container yang menyediakan perintah <code>nslookup</code> dari paket <code>dnsutils</code>.
Dengan menjalankan perintah <code>nslookup</code> dengan nama hos dari Pod, kamu dapat memeriksa alamat
DNS mereka di dalam klaster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl run -i --tty --image busybox:1.28 dns-test --restart<span style=color:#666>=</span>Never --rm
</span></span></code></pre></div><p>perintah itu akan memulai sebuah <em>shell</em> baru. Pada <em>shell</em> tersebut, jalankan:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># Jalankan ini di dalam shell Container dns-test</span>
</span></span><span style=display:flex><span>nslookup web-0.nginx
</span></span></code></pre></div><p>Keluarannya akan seperti:</p><pre tabindex=0><code>Server:    10.0.0.10
Address 1: 10.0.0.10 kube-dns.kube-system.svc.cluster.local

Name:      web-0.nginx
Address 1: 10.244.1.6

nslookup web-1.nginx
Server:    10.0.0.10
Address 1: 10.0.0.10 kube-dns.kube-system.svc.cluster.local

Name:      web-1.nginx
Address 1: 10.244.2.6
</code></pre><p>(dan selanjutnya keluarlah dari <em>shell</em> Container dengan menjalankan: <code>exit</code>)</p><p>CNAME dari <em>headless service</em> mengarah ke SRV <em>record</em> (satu untuk tiap Pod yang
Running dan Ready). SRC <em>record</em> mengarah ke entri A <em>record</em> yang memuat
alamat IP Pod.</p><p>Pada salah satu terminal, amati Pod dari StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><p>Pada terminal yang lain, gunakan perintah
<a href=/docs/reference/generated/kubectl/kubectl-commands/#delete><code>kubectl delete</code></a> untuk menghapus
semua Pod pada StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete pod -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>pod &#34;web-0&#34; deleted
pod &#34;web-1&#34; deleted
</code></pre><p>Tunggu sampai StatefulSet menjalankan mereka kembali, dan untuk keduanya menjadi
Running dan Ready:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS              RESTARTS   AGE
web-0     0/1       ContainerCreating   0          0s
NAME      READY     STATUS    RESTARTS   AGE
web-0     1/1       Running   0          2s
web-1     0/1       Pending   0         0s
web-1     0/1       Pending   0         0s
web-1     0/1       ContainerCreating   0         0s
web-1     1/1       Running   0         34s
</code></pre><p>Gunakan perintah <code>kubectl exec</code> dan <code>kubectl run</code> untuk menampilkan nama hos Pod
dan entri DNS mereka dalam klaster. Pertama-tama, tampilkan nama hos Pod:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a2f;font-weight:700>for</span> i in <span style=color:#666>0</span> 1; <span style=color:#a2f;font-weight:700>do</span> kubectl <span style=color:#a2f>exec</span> web-<span style=color:#b8860b>$i</span> -- sh -c <span style=color:#b44>&#39;hostname&#39;</span>; <span style=color:#a2f;font-weight:700>done</span>
</span></span></code></pre></div><pre tabindex=0><code>web-0
web-1
</code></pre><p>selanjutnya, jalankan:</p><pre tabindex=0><code>kubectl run -i --tty --image busybox:1.28 dns-test --restart=Never --rm /bin/sh
</code></pre><p>perintah itu akan menjalankan <em>shell</em> baru.
Di dalam <em>shell</em> yang baru jalankan:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># Jalankan ini di dalam shell Container dns-test</span>
</span></span><span style=display:flex><span>nslookup web-0.nginx
</span></span></code></pre></div><p>Keluarannya akan seperti:</p><pre tabindex=0><code>Server:    10.0.0.10
Address 1: 10.0.0.10 kube-dns.kube-system.svc.cluster.local

Name:      web-0.nginx
Address 1: 10.244.1.7

nslookup web-1.nginx
Server:    10.0.0.10
Address 1: 10.0.0.10 kube-dns.kube-system.svc.cluster.local

Name:      web-1.nginx
Address 1: 10.244.2.8
</code></pre><p>(dan selanjutnya keluarlah dari <em>shell</em> Container dengan menjalankan: <code>exit</code>)</p><p>Urutan, nama hos, SRV <em>record</em>, dan nama A <em>record</em> dari Pod tidak berubah,
akan tetapi alamat IP yang terkait dengan Pod bisa jadi mengalami perubahan. Pada klaster
yang digunakan dalam tutorial ini terjadi perubahan. Karena itulah mengapa sangat penting
untuk menghindari pengaturan terhadap aplikasi lain yang terhubung ke Pod di dalam
StatefulSet menggunakan alamat IP.</p><p>Jika kamu ingin mencari dan terhubung dengan anggota aktif dari StatefulSet, kamu
perlu melakukan kueri CNAME dari Service <em>headless</em> (<code>nginx.default.svc.cluster.local</code>).
SRV <em>record</em> yang terkait dengan CNAME hanya akan memuat Pod dari StatefulSet yang
Running dan Ready.</p><p>Jika aplikasimu telah menerapkan logika koneksi yang menguji keaktifan
(<em>liveness</em>) dan kesiapan (<em>readiness</em>), kamu dapat menggunakan SRV <em>record</em> dari Pod (
<code>web-0.nginx.default.svc.cluster.local</code>,
<code>web-1.nginx.default.svc.cluster.local</code>), karena mereka tidak akan berubah, dan
aplikasimu akan bisa menemukan alamat-alamat Pod ketika mereka mengalami peralihan
ke Running dan Ready.</p><h3 id=menulis-ke-penyimpanan-tetap>Menulis ke Penyimpanan Tetap</h3><p>Dapatkan PersistentVolumeClaim untuk <code>web-0</code> dan <code>web-1</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pvc -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><p>Keluarannya akan seperti:</p><pre tabindex=0><code>NAME        STATUS    VOLUME                                     CAPACITY   ACCESSMODES   AGE
www-web-0   Bound     pvc-15c268c7-b507-11e6-932f-42010a800002   1Gi        RWO           48s
www-web-1   Bound     pvc-15c79307-b507-11e6-932f-42010a800002   1Gi        RWO           48s
</code></pre><p>Pengontrol StatefulSet membuat dua
<a class=glossary-tooltip title='Mengklaim sumber daya penyimpanan yang didefinisikan di dalam suatu PersistentVolume, sehingga PersistentVolume tersebut dapat dipasang (mounted) sebagai sebuah volume pada suatu Container.' data-toggle=tooltip data-placement=top href=/id/docs/concepts/storage/persistent-volumes/#persistentvolumeclaims target=_blank aria-label=PersistentVolumeClaim>PersistentVolumeClaim</a>
yang terikat ke dua
<a class=glossary-tooltip title='Sebuat objek API yang merepresentasikan bagian penyimpanan pada klaster. Tersedia sebagai sumber daya umum yang dapat dipasang (pluggable) yang tetap bertahan bahkan di luar siklus hidup suatu Pod.' data-toggle=tooltip data-placement=top href=/docs/concepts/storage/persistent-volumes/ target=_blank aria-label=PersistentVolume>PersistentVolume</a>.</p><p>Karena klaster yang digunakan dalam tutorial ini dikonfigurasi untuk melakukan penyediaan
PersistentVolume secara dinamis, maka PersistentVolume dibuat dan terikat secara otomatis.</p><p>Server web NGINX, secara bawaan, menyajikan berkas indeks dari
<code>/usr/share/nginx/html/index.html</code>. <em>Field</em> <code>volumeMounts</code> pada <code>spec</code> StatefulSet
memastikan direktori <code>/usr/share/nginx/html</code> didukung oleh sebuah PersistentVolume.</p><p>Tulis nama hos Pod ke dalam berkas <code>index.html</code> mereka masing-masing dan periksa
apakah server web NGINX menyajikan nama hos tersebut:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a2f;font-weight:700>for</span> i in <span style=color:#666>0</span> 1; <span style=color:#a2f;font-weight:700>do</span> kubectl <span style=color:#a2f>exec</span> <span style=color:#b44>&#34;web-</span><span style=color:#b8860b>$i</span><span style=color:#b44>&#34;</span> -- sh -c <span style=color:#b44>&#39;echo &#34;$(hostname)&#34; &gt; /usr/share/nginx/html/index.html&#39;</span>; <span style=color:#a2f;font-weight:700>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a2f;font-weight:700>for</span> i in <span style=color:#666>0</span> 1; <span style=color:#a2f;font-weight:700>do</span> kubectl <span style=color:#a2f>exec</span> -i -t <span style=color:#b44>&#34;web-</span><span style=color:#b8860b>$i</span><span style=color:#b44>&#34;</span> -- curl http://localhost/; <span style=color:#a2f;font-weight:700>done</span>
</span></span></code></pre></div><pre tabindex=0><code>web-0
web-1
</code></pre><div class="alert alert-info note callout" role=alert><strong>Catatan:</strong><p>Jika kamu melihat respon <strong>403 Forbidden</strong> untuk perintah curl di atas,
kamu perlu untuk memperbaiki izin (<em>permission</em>) dari direktori yang dipasang
oleh <code>volumeMounts</code> (disebabkan oleh sebuah
<a href=https://github.com/kubernetes/kubernetes/issues/2630><em>bug</em> ketika menggunakan volume hostPath</a>),
dengan menjalankan:</p><p><code>for i in 0 1; do kubectl exec web-$i -- chmod 755 /usr/share/nginx/html; done</code></p><p>sebelum mencoba kembali perintah <code>curl</code> di atas.</p></div><p>Di salah satu terminal, amati Pod dari StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><p>Di terminal yang lain, hapus semua Pod dari StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete pod -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>pod &#34;web-0&#34; deleted
pod &#34;web-1&#34; deleted
</code></pre><p>Periksa keluaran dari perintah <code>kubectl get</code> pada terminal yang pertama dan tunggu
semua Pod berubah menjadi Running dan Ready.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS              RESTARTS   AGE
web-0     0/1       ContainerCreating   0          0s
NAME      READY     STATUS    RESTARTS   AGE
web-0     1/1       Running   0          2s
web-1     0/1       Pending   0         0s
web-1     0/1       Pending   0         0s
web-1     0/1       ContainerCreating   0         0s
web-1     1/1       Running   0         34s
</code></pre><p>Periksa apakah server web masih terus menyajikan nama hosnya:</p><pre tabindex=0><code>for i in 0 1; do kubectl exec -i -t &#34;web-$i&#34; -- curl http://localhost/; done
</code></pre><pre tabindex=0><code>web-0
web-1
</code></pre><p>Walaupun <code>web-0</code> dan <code>web-1</code> telah dijadwalkan ulang, mereka masih menyajikan
nama hos masing-masing karena PersistentVolume yang terkait dengan
PersistentVolumeClaim-nya dipasang kembali (<em>remounted</em>) ke setiap <code>volumeMounts</code>.
Di Node manapun <code>web-0</code> dan <code>web-1</code> dijadwalkan, PersistentVolume-nya akan
dipasangkan ke titik pasang (<em>mount point</em>) yang sesuai.</p><h2 id=penyekalaan-statefulset>Penyekalaan StatefulSet</h2><p>Melakukan penyekalaan pada StatefulSet berarti meningkatkan atau mengurangi jumlah
replika. Hal ini dicapai dengan memperbarui <em>field</em> <code>replicas</code>. Kamu dapat menggunakan
<a href=/docs/reference/generated/kubectl/kubectl-commands/#scale><code>kubectl scale</code></a> atau
<a href=/docs/reference/generated/kubectl/kubectl-commands/#patch><code>kubectl patch</code></a> untuk
melakukan penyekalaan terhadap StatefulSet.</p><h3 id=penyekalaan-naik>Penyekalaan Naik</h3><p>Pada salah satu jendela terminal, amati Pod pada StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><p>Di jendela terminal yang lain gunakan perintah <code>kubectl scale</code> untuk melakukan
penyekalaan jumlah replika menjadi 5:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl scale sts web --replicas<span style=color:#666>=</span><span style=color:#666>5</span>
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps/web scaled
</code></pre><p>Periksa keluaran dari perintah <code>kubectl get</code> pada terminal pertama dan tunggu
tambahan tiga Pod yang baru berubah menjadi Running dan Ready.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS    RESTARTS   AGE
web-0     1/1       Running   0          2h
web-1     1/1       Running   0          2h
NAME      READY     STATUS    RESTARTS   AGE
web-2     0/1       Pending   0          0s
web-2     0/1       Pending   0         0s
web-2     0/1       ContainerCreating   0         0s
web-2     1/1       Running   0         19s
web-3     0/1       Pending   0         0s
web-3     0/1       Pending   0         0s
web-3     0/1       ContainerCreating   0         0s
web-3     1/1       Running   0         18s
web-4     0/1       Pending   0         0s
web-4     0/1       Pending   0         0s
web-4     0/1       ContainerCreating   0         0s
web-4     1/1       Running   0         19s
</code></pre><p>Pengontrol StatefulSet telah melakukan penyekalaan terhadap jumlah replika.
Sama seperti <a href=#pembuatan-pod-dengan-urutan>pembuatan StatefulSet</a>, pengontrol
StatefulSet membuat tiap Pod berurutan sesuai dengan indeks urutan masing-masing
dan menunggu setiap Pod yang dibuat sebelumnya menjadi Running dan Ready sebelum
menjalankan Pod berikutnya.</p><h3 id=penyekalaan-turun>Penyekalaan Turun</h3><p>Di salah satu terminal, amati Pod pada StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><p>Di terminal yang lain, gunakan perintah <code>kubectl patch</code> untuk melakukan penyekalaan
StatefulSet turun menjadi tiga replika:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl patch sts web -p <span style=color:#b44>&#39;{&#34;spec&#34;:{&#34;replicas&#34;:3}}&#39;</span>
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps/web patched
</code></pre><p>Tunggu hingga <code>web-4</code> dan <code>web-3</code> berubah menjadi Terminating.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS              RESTARTS   AGE
web-0     1/1       Running             0          3h
web-1     1/1       Running             0          3h
web-2     1/1       Running             0          55s
web-3     1/1       Running             0          36s
web-4     0/1       ContainerCreating   0          18s
NAME      READY     STATUS    RESTARTS   AGE
web-4     1/1       Running   0          19s
web-4     1/1       Terminating   0         24s
web-4     1/1       Terminating   0         24s
web-3     1/1       Terminating   0         42s
web-3     1/1       Terminating   0         42s
</code></pre><h3 id=penghentian-pod-berurutan>Penghentian Pod Berurutan</h3><p>Pengontrol menghapus satu Pod dalam satu waktu, dengan urutan terbalik dari indeks
urutannya, dan setiap Pod akan ditunggu sampai benar-benar mati terlebih dahulu
sebelum menghapus Pod berikutnya.</p><p>Dapatkan PersistentVolumeClaim dari StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pvc -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME        STATUS    VOLUME                                     CAPACITY   ACCESSMODES   AGE
www-web-0   Bound     pvc-15c268c7-b507-11e6-932f-42010a800002   1Gi        RWO           13h
www-web-1   Bound     pvc-15c79307-b507-11e6-932f-42010a800002   1Gi        RWO           13h
www-web-2   Bound     pvc-e1125b27-b508-11e6-932f-42010a800002   1Gi        RWO           13h
www-web-3   Bound     pvc-e1176df6-b508-11e6-932f-42010a800002   1Gi        RWO           13h
www-web-4   Bound     pvc-e11bb5f8-b508-11e6-932f-42010a800002   1Gi        RWO           13h
</code></pre><p>Di sana masih ada lima PersistentVolumeClaim dan lima PersistentVolume.
Ketika mengeksplorasi <a href=#menulis-ke-penyimpanan-tetap>penyimpanan tetap</a> pada Pod,
kita dapat melihat bahwa PersistentVolume yang terpasang pada Pod dari suatu StatefulSet
tidak terhapus ketika Pod-nya dihapus. Hal ini tetap berlaku ketika penghapusan Pod
terjadi karena penyekalaan turun pada suatu StatefulSet.</p><h2 id=memperbarui-statefulset>Memperbarui StatefulSet</h2><p>Di Kubernetes 1.7 dan yang lebih baru, pengontrol StatefulSet mendukung
pembaruan otomatis. Strategi yang digunakan ditentukan oleh <em>field</em>
<code>spec.updateStrategy</code> dari objek API StatefulSet. Fitur ini dapat digunakan untuk
memperbarui <em>image</em> Container, permintaan sumber daya dan/atau pembatasan, label,
dan anotasi Pod dalam suatu StatefulSet. Ada dua strategi pembaruan yang berlaku,
<code>RollingUpdate</code> dan <code>OnDelete</code>.</p><p>Pembaruan dengan <code>RollingUpdate</code> adalah strategi bawaan untuk StatefulSet.</p><h3 id=pembaruan-bertahap-rollingupdate>Pembaruan Bertahap (RollingUpdate)</h3><p>Pembaruan dengan strategi <code>RollingUpdate</code> akan memperbarui semua Pod di dalam
StatefulSet dalam urutan indeks terbalik, dengan tetap memperhatikan
jaminan dari StatefulSet.</p><p>Lakukan <em>patch</em> pada StatefulSet <code>web</code> dengan menerapkan <code>RollingUpdate</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl patch statefulset web -p <span style=color:#b44>&#39;{&#34;spec&#34;:{&#34;updateStrategy&#34;:{&#34;type&#34;:&#34;RollingUpdate&#34;}}}&#39;</span>
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps/web patched
</code></pre><p>Pada salah satu jendela terminal, <em>patch</em> StatefulSet <code>web</code> untuk mengubah
<em>image</em> Container lagi:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl patch statefulset web --type<span style=color:#666>=</span><span style=color:#b44>&#39;json&#39;</span> -p<span style=color:#666>=</span><span style=color:#b44>&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/spec/template/spec/containers/0/image&#34;, &#34;value&#34;:&#34;gcr.io/google_containers/nginx-slim:0.8&#34;}]&#39;</span>
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps/web patched
</code></pre><p>Pada terminal yang lain, amati Pod pada StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx -w
</span></span></code></pre></div><p>Keluarannya akan seperti:</p><pre tabindex=0><code>NAME      READY     STATUS    RESTARTS   AGE
web-0     1/1       Running   0          7m
web-1     1/1       Running   0          7m
web-2     1/1       Running   0          8m
web-2     1/1       Terminating   0         8m
web-2     1/1       Terminating   0         8m
web-2     0/1       Terminating   0         8m
web-2     0/1       Terminating   0         8m
web-2     0/1       Terminating   0         8m
web-2     0/1       Terminating   0         8m
web-2     0/1       Pending   0         0s
web-2     0/1       Pending   0         0s
web-2     0/1       ContainerCreating   0         0s
web-2     1/1       Running   0         19s
web-1     1/1       Terminating   0         8m
web-1     0/1       Terminating   0         8m
web-1     0/1       Terminating   0         8m
web-1     0/1       Terminating   0         8m
web-1     0/1       Pending   0         0s
web-1     0/1       Pending   0         0s
web-1     0/1       ContainerCreating   0         0s
web-1     1/1       Running   0         6s
web-0     1/1       Terminating   0         7m
web-0     1/1       Terminating   0         7m
web-0     0/1       Terminating   0         7m
web-0     0/1       Terminating   0         7m
web-0     0/1       Terminating   0         7m
web-0     0/1       Terminating   0         7m
web-0     0/1       Pending   0         0s
web-0     0/1       Pending   0         0s
web-0     0/1       ContainerCreating   0         0s
web-0     1/1       Running   0         10s
</code></pre><p>Pod dalam StatefulSet diperbarui dengan urutan indeks terbalik. Pengontrol
StatefulSet mengakhiri setiap Pod, dan menunggunya beralih menjadi Running dan Ready
sebelum melakukan pembaruan ke Pod berikutnya. Sebagai catatan, walaupun pengontrol
StatefulSet tidak akan melanjutkan pembaruan terhadap Pod berikutnya hingga penggantinya
Running dan Ready, pengontrol akan memulihkan Pod apa pun yang mengalami kegagalan selama
proses pembaruan berlangsung.</p><p>Pod yang telah menerima pembaruan akan dipulihkan ke versi yang diperbarui, sedangkan
Pod yang belum menerima pembaruan akan dipulihkan ke versi sebelumnya. Dengan cara inilah
pengontrol mencoba untuk terus mempertahankan kesehatan aplikasi dan
pembaruan tetap konsisten ditengah adanya kemungkinan kegagalan intermiten.</p><p>Dapatkan Pod untuk melihat <em>image</em> Container-nya:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a2f;font-weight:700>for</span> p in <span style=color:#666>0</span> <span style=color:#666>1</span> 2; <span style=color:#a2f;font-weight:700>do</span> kubectl get pod <span style=color:#b44>&#34;web-</span><span style=color:#b8860b>$p</span><span style=color:#b44>&#34;</span> --template <span style=color:#b44>&#39;{{range $i, $c := .spec.containers}}{{$c.image}}{{end}}&#39;</span>; echo; <span style=color:#a2f;font-weight:700>done</span>
</span></span></code></pre></div><pre tabindex=0><code>k8s.gcr.io/nginx-slim:0.8
k8s.gcr.io/nginx-slim:0.8
k8s.gcr.io/nginx-slim:0.8
</code></pre><p>Semua Pod pada StatefulSet saat ini sedang menjalankan <em>image</em> Container sebelumnya.</p><div class="alert alert-info note callout" role=alert><strong>Catatan:</strong> Kamu juga bisa menggunakan perintah <code>kubectl rollout status sts/&lt;name></code>
untuk menampilkan status pembaruan bertahap terhadap sebuah StatefulSet</div><h4 id=pembaruan-dengan-staging>Pembaruan dengan <em>Staging</em></h4><p>Kamu dapat melakukan <em>staging</em> terhadap suatu pembaruan StatefulSet dengan
menggunakan parameter <code>partition</code> dari strategi pembaruan <code>RollingUpdate</code>. Suatu
pembaruan yang di-<em>staging</em> akan akan mempertahankan semua Pod dalam StatefulSet
tersebut pada versi yang digunakan saat ini sembari mengizinkan terjadinya
perubahan pada <code>.spec.template</code> dari StatefulSet.</p><p>Lakukan <em>patch</em> terhadap StatefulSet <code>web</code> untuk menambahkan partisi pada
<em>field</em> <code>updateStrategy</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl patch statefulset web -p <span style=color:#b44>&#39;{&#34;spec&#34;:{&#34;updateStrategy&#34;:{&#34;type&#34;:&#34;RollingUpdate&#34;,&#34;rollingUpdate&#34;:{&#34;partition&#34;:3}}}}&#39;</span>
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps/web patched
</code></pre><p>Lakukan <em>patch</em> terhadap StatefulSet lagi, untuk mengubah <em>image</em> Container:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl patch statefulset web --type<span style=color:#666>=</span><span style=color:#b44>&#39;json&#39;</span> -p<span style=color:#666>=</span><span style=color:#b44>&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/spec/template/spec/containers/0/image&#34;, &#34;value&#34;:&#34;k8s.gcr.io/nginx-slim:0.7&#34;}]&#39;</span>
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps/web patched
</code></pre><p>Hapus sebuah Pod dari StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete pod web-2
</span></span></code></pre></div><pre tabindex=0><code>pod &#34;web-2&#34; deleted
</code></pre><p>Tunggu hingga Pod menjadi Running dan Ready.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx -w
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS              RESTARTS   AGE
web-0     1/1       Running             0          4m
web-1     1/1       Running             0          4m
web-2     0/1       ContainerCreating   0          11s
web-2     1/1       Running   0         18s
</code></pre><p>Dapatkan <em>image</em> Container Pod:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod web-2 --template <span style=color:#b44>&#39;{{range $i, $c := .spec.containers}}{{$c.image}}{{end}}&#39;</span>
</span></span></code></pre></div><pre tabindex=0><code>k8s.gcr.io/nginx-slim:0.8
</code></pre><p>Perhatikan, walaupun strategi pembaruan yang digunakan adalah <code>RollingUpdate</code>,
StatefulSet mengembalikan Pod dengan Container-nya yang semula. Hal ini karena
urutan Pod kurang dari nilai <code>partition</code> yang ditetapkan pada <code>updateStrategy</code>.</p><h4 id=meluncurkan-canary>Meluncurkan <em>Canary</em></h4><p>Kamu dapat meluncurkan <em>canary</em> untuk mencoba suatu perubahan dengan mengurangi
<code>partition</code> yang kamu tentukan sebelumnya di <a href=#pembaruan-dengan-staging>atas</a>.</p><p>Lakukan <em>patch</em> terhadap StatefulSet untuk mengurangi jumlah partisi:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl patch statefulset web -p <span style=color:#b44>&#39;{&#34;spec&#34;:{&#34;updateStrategy&#34;:{&#34;type&#34;:&#34;RollingUpdate&#34;,&#34;rollingUpdate&#34;:{&#34;partition&#34;:2}}}}&#39;</span>
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps/web patched
</code></pre><p>Tunggu hingga <code>web-2</code> menjadi Running dan Ready.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx -w
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS              RESTARTS   AGE
web-0     1/1       Running             0          4m
web-1     1/1       Running             0          4m
web-2     0/1       ContainerCreating   0          11s
web-2     1/1       Running   0         18s
</code></pre><p>Dapatkan <em>image</em> Container Pod:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod web-2 --template <span style=color:#b44>&#39;{{range $i, $c := .spec.containers}}{{$c.image}}{{end}}&#39;</span>
</span></span></code></pre></div><pre tabindex=0><code>k8s.gcr.io/nginx-slim:0.7
</code></pre><p>Ketika kamu mengubah <code>partition</code>, pengontrol StatefulSet secara otomatis memperbarui Pod
<code>web-2</code> karena urutan dari Pod tersebut lebih besar dari atau sama dengan
nilai <code>partition</code>.</p><p>Hapus Pod <code>web-1</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete pod web-1
</span></span></code></pre></div><pre tabindex=0><code>pod &#34;web-1&#34; deleted
</code></pre><p>Tunggu sampai Pod <code>web-1</code> menjadi Running dan Ready.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx -w
</span></span></code></pre></div><p>Keluarannya akan seperti:</p><pre tabindex=0><code>NAME      READY     STATUS        RESTARTS   AGE
web-0     1/1       Running       0          6m
web-1     0/1       Terminating   0          6m
web-2     1/1       Running       0          2m
web-1     0/1       Terminating   0         6m
web-1     0/1       Terminating   0         6m
web-1     0/1       Terminating   0         6m
web-1     0/1       Pending   0         0s
web-1     0/1       Pending   0         0s
web-1     0/1       ContainerCreating   0         0s
web-1     1/1       Running   0         18s
</code></pre><p>Dapatkan <em>image</em> Container dari Pod <code>web-1</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod web-1 --template <span style=color:#b44>&#39;{{range $i, $c := .spec.containers}}{{$c.image}}{{end}}&#39;</span>
</span></span></code></pre></div><pre tabindex=0><code>k8s.gcr.io/nginx-slim:0.8
</code></pre><p><code>web-1</code> dikembalikan ke konfigurasinya yang semula karena urutan Pod lebih kecil
dari partisi. Ketika partisi ditentukan, semua Pod dengan urutan yang lebih besar
dari atau sama dengan jumlah partisi akan diperbarui ketika <code>.spec.template</code> dari
StatefulSet diubah. Jika suatu Pod yang memiliki urutan lebih kecil dari partisi
dihapus atau diakhiri, Pod tersebut akan dikembalikan ke konfigurasinya yang semula.</p><h4 id=peluncuran-bertahap>Peluncuran Bertahap</h4><p>Kamu dapat melakukan peluncuran bertahap (misalkan peluncuran: linier, geometris, atau eksponensial)
dengan menggunakan pembaruan bertahap yang terpartisi dengan cara yang serupa
ketika kamu meluncurkan <a href=#meluncurkan-canary><em>canary</em></a>. Untuk melakukan peluncuran bertahap,
atur <code>partition</code> ke urutan di mana kamu menginginkan pengontrol untuk melakukan
pause terhadap pembaruan.</p><p>Saat ini partisi sedang di atur menjadi <code>2</code>. Ganti partisi menjadi <code>0</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl patch statefulset web -p <span style=color:#b44>&#39;{&#34;spec&#34;:{&#34;updateStrategy&#34;:{&#34;type&#34;:&#34;RollingUpdate&#34;,&#34;rollingUpdate&#34;:{&#34;partition&#34;:0}}}}&#39;</span>
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps/web patched
</code></pre><p>Tunggu semua Pod pada StatefulSet menjadi Running dan Ready.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx -w
</span></span></code></pre></div><p>Keluarannya akan seperti:</p><pre tabindex=0><code>NAME      READY     STATUS              RESTARTS   AGE
web-0     1/1       Running             0          3m
web-1     0/1       ContainerCreating   0          11s
web-2     1/1       Running             0          2m
web-1     1/1       Running   0         18s
web-0     1/1       Terminating   0         3m
web-0     1/1       Terminating   0         3m
web-0     0/1       Terminating   0         3m
web-0     0/1       Terminating   0         3m
web-0     0/1       Terminating   0         3m
web-0     0/1       Terminating   0         3m
web-0     0/1       Pending   0         0s
web-0     0/1       Pending   0         0s
web-0     0/1       ContainerCreating   0         0s
web-0     1/1       Running   0         3s
</code></pre><p>Dapatkan detail <em>image</em> Container dari Pod pada StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a2f;font-weight:700>for</span> p in <span style=color:#666>0</span> <span style=color:#666>1</span> 2; <span style=color:#a2f;font-weight:700>do</span> kubectl get pod <span style=color:#b44>&#34;web-</span><span style=color:#b8860b>$p</span><span style=color:#b44>&#34;</span> --template <span style=color:#b44>&#39;{{range $i, $c := .spec.containers}}{{$c.image}}{{end}}&#39;</span>; echo; <span style=color:#a2f;font-weight:700>done</span>
</span></span></code></pre></div><pre tabindex=0><code>k8s.gcr.io/nginx-slim:0.7
k8s.gcr.io/nginx-slim:0.7
k8s.gcr.io/nginx-slim:0.7
</code></pre><p>Dengan mengubah nilai <code>partition</code> menjadi <code>0</code>, kamu mengizinkan StatefulSet
untuk melanjutkan proses pembaruan.</p><h3 id=pembaruan-ondelete>Pembaruan OnDelete</h3><p>Strategi pembaruan <code>OnDelete</code> menerapkan mekanisme lama (versi 1.6 dan sebelumnya).
Ketika kamu memilih strategi pembaruan ini, pengontrol StatefulSet tidak akan secara
otomatis melakukan pembaruan terhadap Pod ketika suatu perubahan terjadi pada <em>field</em>
<code>.spec.template</code> pada StatefulSet. Strategi ini dapat dipilih dengan mengatur
<code>.spec.template.updateStrategy.type</code> menjadi <code>OnDelete</code>.</p><h2 id=menghapus-statefulset>Menghapus StatefulSet</h2><p>StatefulSet mendukung penghapusan tidak berjenjang (<em>non-cascading</em>) dan berjenjang (<em>cascading</em>).
Dalam penghapusan tidak berjenjang (<em>non-cascading delete</em>), Pod pada StatefulSet
tidak dihapus ketika StatefulSet terhapus. Pada penghapusan berjenjang (Cascading Delete),
StatefulSet bersama Pod-nya dihapus semua.</p><h3 id=penghapusan-tidak-berjenjang-non-cascading>Penghapusan Tidak Berjenjang (<em>Non-Cascading</em>)</h3><p>Pada salah satu jendela terminal, amati Pod pada StatefulSet.</p><pre tabindex=0><code>kubectl get pods -w -l app=nginx
</code></pre><p>Gunakan perintah <a href=/docs/reference/generated/kubectl/kubectl-commands/#delete><code>kubectl delete</code></a>
untuk menghapus StatefulSet. Pastikan kamu menambahkan parameter <code>--cascade=orphan</code> ke
perintah tersebut. Parameter ini memberitahukan Kubernetes untuk hanya menghapus StatefulSet
dan agar tidak menghapus Pod yang ada padanya.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete statefulset web --cascade<span style=color:#666>=</span>orphan
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps &#34;web&#34; deleted
</code></pre><p>Dapatkan Pod untuk melihat statusnya masing-masing:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS    RESTARTS   AGE
web-0     1/1       Running   0          6m
web-1     1/1       Running   0          7m
web-2     1/1       Running   0          5m
</code></pre><p>Walaupun <code>web</code> telah dihapus, semua Pod masih Running dan Ready.
Hapus <code>web-0</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete pod web-0
</span></span></code></pre></div><pre tabindex=0><code>pod &#34;web-0&#34; deleted
</code></pre><p>Dapatkan Pod dari StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS    RESTARTS   AGE
web-1     1/1       Running   0          10m
web-2     1/1       Running   0          7m
</code></pre><p>Karena StatefulSet <code>web</code> telah dihapus, maka <code>web-0</code> tidak dijalankan lagi.</p><p>Di salah satu terminal, amati Pod pada StatefulSet.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><p>Pada terminal yang lain, buat kembali StatefulSet. Perhatikan, terkecuali
jika kamu telah menghapus Service <code>ngingx</code> (yang seharusnya belum kamu lakukan),
kamu akan melihat sebuah galat yang mengindikasikan bahwa Service tersebut sudah ada.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl apply -f web.yaml
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps/web created
service/nginx unchanged
</code></pre><p>Abaikan galat yang terjadi. Hal itu hanya menunjukkan bahwa suatu upaya telah dilakukan
untuk membuat Service <em>headless</em> <code>nginx</code> walaupun Service tersebut sebenarnya sudah ada.</p><p>Perhatikan keluaran dari perintah <code>kubectl get</code> yang dijalankan pada terminal
yang pertama.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS    RESTARTS   AGE
web-1     1/1       Running   0          16m
web-2     1/1       Running   0          2m
NAME      READY     STATUS    RESTARTS   AGE
web-0     0/1       Pending   0          0s
web-0     0/1       Pending   0         0s
web-0     0/1       ContainerCreating   0         0s
web-0     1/1       Running   0         18s
web-2     1/1       Terminating   0         3m
web-2     0/1       Terminating   0         3m
web-2     0/1       Terminating   0         3m
web-2     0/1       Terminating   0         3m
</code></pre><p>Ketika StatefulSet <code>web</code> dibuat ulang, yang dijalankan pertama kali adalah <code>web-0</code>.
Karena <code>web-1</code> telah menjadi Running dan Ready, ketika <code>web-0</code> berubah menjadi
Running dan Ready, <code>web-0</code> mengadopsi Pod tersebut. Karena kamu membuat ulang
StatefulSet dengan <code>replicas</code> sama dengan 2, ketika <code>web-0</code> selesai dibuat ulang, dan
ketika <code>web-1</code> telah ditetapkan menjadi Running dan Ready, maka <code>web-2</code> diakhiri.</p><p>Mari kita lihat kembali konten dari berkas <code>index.html</code> yang disajikan oleh server
web Pod:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a2f;font-weight:700>for</span> i in <span style=color:#666>0</span> 1; <span style=color:#a2f;font-weight:700>do</span> kubectl <span style=color:#a2f>exec</span> -i -t <span style=color:#b44>&#34;web-</span><span style=color:#b8860b>$i</span><span style=color:#b44>&#34;</span> -- curl http://localhost/; <span style=color:#a2f;font-weight:700>done</span>
</span></span></code></pre></div><pre tabindex=0><code>web-0
web-1
</code></pre><p>Walaupun kamu sebelumnya pernah menghapus StatefulSet dan Pod <code>web-0</code>, server web
masih terus menyajikan nama hos sebelumnya yang dimasukkan ke dalam berkas
<code>index.html</code>. Hal ini terjadi karena StatefulSet tidak menghapus PersistentVolume
yang terkait dengan Pod. Ketika kamu membuat ulang StatefulSet dan menjalankan
kembali <code>web-0</code>, PersistentVolume yang digunakan sebelumnya akan dipasang kembali.</p><h3 id=penghapusan-berjenjang-cascading>Penghapusan Berjenjang (Cascading)</h3><p>Pada salah satu jendela terminal, amati Pod pada StatefulSet.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><p>Pada terminal yang lain, hapus StatefulSet lagi. Kali ini, hilangkan parameter
<code>--cascade=orphan</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete statefulset web
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps &#34;web&#34; deleted
</code></pre><p>Perhatikan keluaran dari perintah <code>kubectl get</code> yang dijalankan di terminal
yang pertama, dan tunggu semua status Pod berubah menjadi Terminating.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -w -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS    RESTARTS   AGE
web-0     1/1       Running   0          11m
web-1     1/1       Running   0          27m
NAME      READY     STATUS        RESTARTS   AGE
web-0     1/1       Terminating   0          12m
web-1     1/1       Terminating   0         29m
web-0     0/1       Terminating   0         12m
web-0     0/1       Terminating   0         12m
web-0     0/1       Terminating   0         12m
web-1     0/1       Terminating   0         29m
web-1     0/1       Terminating   0         29m
web-1     0/1       Terminating   0         29m
</code></pre><p>Seperti yang telah kamu saksikan pada bagian <a href=#penyekalaan-turun>Penyekalaan Turun</a>,
Pod diakhiri satu demi satu dengan urutan terbalik dari indeks urutan mereka. Sebelum
mengakhiri suatu Pod, pengontrol StatefulSet menunggu Pod pengganti hingga benar-benar
berakhir.</p><div class="alert alert-info note callout" role=alert><strong>Catatan:</strong> Walaupun penghapusan berjenjang menghapus suatu StatefulSet bersama Pod yang ada,
penghapusan ini tidak menghapus Service <em>headless</em> yang terkait dengan StatefulSet.
Kamu hapus menghapus Service <code>nginx</code> secara manual.</div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete service nginx
</span></span></code></pre></div><pre tabindex=0><code>service &#34;nginx&#34; deleted
</code></pre><p>Buat ulang StatefulSet dan Service <em>headless</em> sekali lagi:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl apply -f web.yaml
</span></span></code></pre></div><pre tabindex=0><code>service/nginx created
statefulset.apps/web created
</code></pre><p>Saat semua Pod StatefulSet mengalami transisi ke Running dan Ready, dapatkan
konten dari berkas <code>index.html</code> masing-masing:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a2f;font-weight:700>for</span> i in <span style=color:#666>0</span> 1; <span style=color:#a2f;font-weight:700>do</span> kubectl <span style=color:#a2f>exec</span> -i -t <span style=color:#b44>&#34;web-</span><span style=color:#b8860b>$i</span><span style=color:#b44>&#34;</span> -- curl http://localhost/; <span style=color:#a2f;font-weight:700>done</span>
</span></span></code></pre></div><pre tabindex=0><code>web-0
web-1
</code></pre><p>Walaupun kamu telah menghapus StatefulSet dan semua Pod di dalamnya, Pod dibuat
lagi dengan PersistentVolume yang sama terpasang, dan <code>web-0</code> dan <code>web-1</code> masih
menyajikan nama hos masing-masing.</p><p>Akhirnya, hapus Service <code>nginx</code>...</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete service nginx
</span></span></code></pre></div><pre tabindex=0><code>service &#34;nginx&#34; deleted
</code></pre><p>...dan StatefulSet <code>web</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete statefulset web
</span></span></code></pre></div><pre tabindex=0><code>statefulset &#34;web&#34; deleted
</code></pre><h2 id=kebijakan-manajemen-pod>Kebijakan Manajemen Pod</h2><p>Untuk beberapa sistem terdistribusi, jaminan pengurutan StatefulSet tidak
penting dan/atau tidak diharapkan. Sistem-sistem tersebut hanya membutuhkan
keunikan dan identitas. Untuk mengatasi ini, pada Kubernetes 1.7, kami
memperkenalkan <code>.spec.podManagementPolicy</code> pada objek API StatefulSet.</p><h3 id=manajemen-pod-orderedready>Manajemen Pod OrderedReady</h3><p>Manajemen Pod <code>OrderedReady</code> adalah bawaan dari StatefulSet. Manajemen
dengan cara ini memberitahukan pengontrol StatefulSet untuk menghormati
jaminan pengurutan yang sudah ditunjukkan sebelumnya.</p><h3 id=manajemen-pod-parallel>Manajemen Pod Parallel</h3><p>Manajemen Pod <code>Parallel</code> memberitahukan pengontrol StatefulSet untuk
menjalankan atau mengakhiri semua Pod secara bersamaan (paralel), dan tidak menunggu
suatu Pod menjadi Running dan Ready atau benar-benar berakhir sebelum menjalankan atau
mengakhiri Pod yang lain.</p><div class=highlight><div class=copy-code-icon style=text-align:right><a href=https://raw.githubusercontent.com/kubernetes/website/main/content/id/examples/application/web/web-parallel.yaml download=application/web/web-parallel.yaml><code>application/web/web-parallel.yaml</code></a>
<img src=/images/copycode.svg style=max-height:24px;cursor:pointer onclick='copyCode("application-web-web-parallel-yaml")' title="Copy application/web/web-parallel.yaml to clipboard"></img></div><div class=includecode id=application-web-web-parallel-yaml><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Service<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>ports</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>port</span>:<span style=color:#bbb> </span><span style=color:#666>80</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>web<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>clusterIP</span>:<span style=color:#bbb> </span>None<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>selector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>---</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apps/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>StatefulSet<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>web<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>serviceName</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;nginx&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>podManagementPolicy</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Parallel&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>replicas</span>:<span style=color:#bbb> </span><span style=color:#666>2</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>selector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>matchLabels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>template</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>containers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>image</span>:<span style=color:#bbb> </span>k8s.gcr.io/nginx-slim:0.8<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>ports</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>containerPort</span>:<span style=color:#bbb> </span><span style=color:#666>80</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>          </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>web<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>volumeMounts</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>www<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>          </span><span style=color:green;font-weight:700>mountPath</span>:<span style=color:#bbb> </span>/usr/share/nginx/html<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>volumeClaimTemplates</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>www<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>accessModes</span>:<span style=color:#bbb> </span>[<span style=color:#bbb> </span><span style=color:#b44>&#34;ReadWriteOnce&#34;</span><span style=color:#bbb> </span>]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>requests</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>          </span><span style=color:green;font-weight:700>storage</span>:<span style=color:#bbb> </span>1Gi<span style=color:#bbb>
</span></span></span></code></pre></div></div></div><p>Unduh contoh di atas, dan simpan ke sebuah berkas dengan nama <code>web-parallel.yaml</code>.</p><p>Manifes ini serupa dengan yang telah kamu unduh sebelumnya kecuali <code>.spec.podManagementPolicy</code>
dari StatefulSet <code>web</code> diatur ke <code>Parallel</code>.</p><p>Di salah satu terminal, amati Pod pada StatefulSet.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx -w
</span></span></code></pre></div><p>Pada terminal yang lain, buat StatefulSet dan Service dari manifes tadi:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl apply -f web-parallel.yaml
</span></span></code></pre></div><pre tabindex=0><code>service/nginx created
statefulset.apps/web created
</code></pre><p>Perhatikan keluaran dari perintah <code>kubectl get</code> yang kamu jalankan pada
terminal yang pertama.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx -w
</span></span></code></pre></div><pre tabindex=0><code>NAME      READY     STATUS    RESTARTS   AGE
web-0     0/1       Pending   0          0s
web-0     0/1       Pending   0         0s
web-1     0/1       Pending   0         0s
web-1     0/1       Pending   0         0s
web-0     0/1       ContainerCreating   0         0s
web-1     0/1       ContainerCreating   0         0s
web-0     1/1       Running   0         10s
web-1     1/1       Running   0         10s
</code></pre><p>Pengontrol StatefulSet menjalankan <code>web-0</code> dan <code>web-</code> berbarengan.</p><p>Biarkan terminal kedua tetap terbuka, kemudian, di jendela terminal
yang lain lakukan penyekalaan terhadap StatefulSet:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl scale statefulset/web --replicas<span style=color:#666>=</span><span style=color:#666>4</span>
</span></span></code></pre></div><pre tabindex=0><code>statefulset.apps/web scaled
</code></pre><p>Perhatikan keluaran terminal di mana perintah <code>kubectl get</code> dijalankan.</p><pre tabindex=0><code>web-3     0/1       Pending   0         0s
web-3     0/1       Pending   0         0s
web-3     0/1       Pending   0         7s
web-3     0/1       ContainerCreating   0         7s
web-2     1/1       Running   0         10s
web-3     1/1       Running   0         26s
</code></pre><p>StatefulSet menjalankan dua Pod baru dan tidak menunggu Pod pertama
menjadi Running dan Ready terlebih dahulu sebelum menjalankan Pod
yang kedua.</p><h2 id=bersihkan>Bersihkan</h2><p>Kamu harus membuka dua terminal yang siap untuk menjalankan perintah <code>kubectl</code>
sebagai bagian dari pembersihan.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete sts web
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># sts adalah singkatan dari statefulset</span>
</span></span></code></pre></div><p>Kamu dapat mengamati <code>kubectl get</code> untuk melihat semua Pod yang sedang dihapus.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx -w
</span></span></code></pre></div><pre tabindex=0><code>web-3     1/1       Terminating   0         9m
web-2     1/1       Terminating   0         9m
web-3     1/1       Terminating   0         9m
web-2     1/1       Terminating   0         9m
web-1     1/1       Terminating   0         44m
web-0     1/1       Terminating   0         44m
web-0     0/1       Terminating   0         44m
web-3     0/1       Terminating   0         9m
web-2     0/1       Terminating   0         9m
web-1     0/1       Terminating   0         44m
web-0     0/1       Terminating   0         44m
web-2     0/1       Terminating   0         9m
web-2     0/1       Terminating   0         9m
web-2     0/1       Terminating   0         9m
web-1     0/1       Terminating   0         44m
web-1     0/1       Terminating   0         44m
web-1     0/1       Terminating   0         44m
web-0     0/1       Terminating   0         44m
web-0     0/1       Terminating   0         44m
web-0     0/1       Terminating   0         44m
web-3     0/1       Terminating   0         9m
web-3     0/1       Terminating   0         9m
web-3     0/1       Terminating   0         9m
</code></pre><p>Selama penghapusan, StatefulSet menghapus semua Pod secara serentak; tidak menghentikan
Pod berdasarkan urutan indeksnya terlebih dahulu sebelum menghapus Pod tersebut.</p><p>Tutup terminal di mana perintah <code>kubectl get</code> dijalankan dan hapus Service <code>nginx</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete svc nginx
</span></span></code></pre></div><div class="alert alert-info note callout" role=alert><strong>Catatan:</strong><p>Kamu juga perlu menghapus media penyimpanan persisten untuk PersistentVolume
yang digunakan dalam tutorial ini.</p><p>Ikuti langkah-langkah yang dibutuhkan, berdasarkan lingkungan yang kamu gunakan,
konfigurasi penyimpanan, dan metode penyediaannya, untuk memastikan semua
penyimpanan dapat dimanfaatkan lagi.</p></div></div></main></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/id/docs/home/>Home</a>
<a class=text-white href=/id/community/>Komunitas</a>
<a class=text-white href=/id/case-studies/>Studi kasus</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 Para Pencipta Kubernetes | Dokumentasi didistribusikan di bawah <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a></small><br><small class=text-white>Copyright &copy; 2023 Linux Foundation &reg;. Hak cipta dilindungi. Linux Foundation telah mendaftarkan merek dagang dan pengunaannya. Perinciannya bisa dilihat pada <a href=https://www.linuxfoundation.org/trademark-usage class=light-text>halaman penggunaan merek dagang</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>