<!doctype html><html lang=vi class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=en href=https://kubernetes.io/docs/concepts/architecture/cloud-controller/><link rel=alternate hreflang=zh-cn href=https://kubernetes.io/zh-cn/docs/concepts/architecture/cloud-controller/><link rel=alternate hreflang=ko href=https://kubernetes.io/ko/docs/concepts/architecture/cloud-controller/><link rel=alternate hreflang=ja href=https://kubernetes.io/ja/docs/concepts/architecture/cloud-controller/><link rel=alternate hreflang=fr href=https://kubernetes.io/fr/docs/concepts/architecture/cloud-controller/><link rel=alternate hreflang=it href=https://kubernetes.io/it/docs/concepts/architecture/cloud-controller/><link rel=alternate hreflang=de href=https://kubernetes.io/de/docs/concepts/architecture/cloud-controller/><link rel=alternate hreflang=es href=https://kubernetes.io/es/docs/concepts/architecture/cloud-controller/><link rel=alternate hreflang=pt-br href=https://kubernetes.io/pt-br/docs/concepts/architecture/cloud-controller/><link rel=alternate hreflang=id href=https://kubernetes.io/id/docs/concepts/architecture/cloud-controller/><link rel=alternate hreflang=ru href=https://kubernetes.io/ru/docs/concepts/architecture/cloud-controller/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>Các khái niệm nền tảng của Cloud Controller Manager | Kubernetes</title><meta property="og:title" content="Các khái niệm nền tảng của Cloud Controller Manager"><meta property="og:description" content="Khái niệm Cloud Controller Manager (CCM) (để tránh nhầm lẫn với bản binary build cùng tên) được định nghĩa riêng biệt để cho phép các bên cung cấp dịch vụ cloud và thành phần chính của Kubernetes phát triển độc lập với nhau. CCM chạy đồng thời với những thành phần khác thuộc máy chủ của một cluster như Controller Manager của Kubernetes, API server, và Scheduler. Nó cũng có thể đóng vai trò như một addon cho Kubernetes."><meta property="og:type" content="article"><meta property="og:url" content="https://kubernetes.io/vi/docs/concepts/architecture/cloud-controller/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2020-06-01T09:20:09-04:00"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="Các khái niệm nền tảng của Cloud Controller Manager"><meta itemprop=description content="Khái niệm Cloud Controller Manager (CCM) (để tránh nhầm lẫn với bản binary build cùng tên) được định nghĩa riêng biệt để cho phép các bên cung cấp dịch vụ cloud và thành phần chính của Kubernetes phát triển độc lập với nhau. CCM chạy đồng thời với những thành phần khác thuộc máy chủ của một cluster như Controller Manager của Kubernetes, API server, và Scheduler. Nó cũng có thể đóng vai trò như một addon cho Kubernetes."><meta itemprop=dateModified content="2020-06-01T09:20:09-04:00"><meta itemprop=wordCount content="1425"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Các khái niệm nền tảng của Cloud Controller Manager"><meta name=twitter:description content="Khái niệm Cloud Controller Manager (CCM) (để tránh nhầm lẫn với bản binary build cùng tên) được định nghĩa riêng biệt để cho phép các bên cung cấp dịch vụ cloud và thành phần chính của Kubernetes phát triển độc lập với nhau. CCM chạy đồng thời với những thành phần khác thuộc máy chủ của một cluster như Controller Manager của Kubernetes, API server, và Scheduler. Nó cũng có thể đóng vai trò như một addon cho Kubernetes."><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content="Khái niệm Cloud Controller Manager (CCM) (để tránh nhầm lẫn với bản binary build cùng tên) được định nghĩa riêng biệt để cho phép các bên cung cấp dịch vụ cloud và thành phần chính của Kubernetes phát triển độc lập với nhau. CCM chạy đồng thời với những thành phần khác thuộc máy chủ của một cluster như Controller Manager của Kubernetes, API server, và Scheduler. Nó cũng có thể đóng vai trò như một addon cho Kubernetes."><meta property="og:description" content="Khái niệm Cloud Controller Manager (CCM) (để tránh nhầm lẫn với bản binary build cùng tên) được định nghĩa riêng biệt để cho phép các bên cung cấp dịch vụ cloud và thành phần chính của Kubernetes phát triển độc lập với nhau. CCM chạy đồng thời với những thành phần khác thuộc máy chủ của một cluster như Controller Manager của Kubernetes, API server, và Scheduler. Nó cũng có thể đóng vai trò như một addon cho Kubernetes."><meta name=twitter:description content="Khái niệm Cloud Controller Manager (CCM) (để tránh nhầm lẫn với bản binary build cùng tên) được định nghĩa riêng biệt để cho phép các bên cung cấp dịch vụ cloud và thành phần chính của Kubernetes phát triển độc lập với nhau. CCM chạy đồng thời với những thành phần khác thuộc máy chủ của một cluster như Controller Manager của Kubernetes, API server, và Scheduler. Nó cũng có thể đóng vai trò như một addon cho Kubernetes."><meta property="og:url" content="https://kubernetes.io/vi/docs/concepts/architecture/cloud-controller/"><meta property="og:title" content="Các khái niệm nền tảng của Cloud Controller Manager"><meta name=twitter:title content="Các khái niệm nền tảng của Cloud Controller Manager"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script><title>Các khái niệm nền tảng của Cloud Controller Manager | Kubernetes</title></head><body class="td-page td-documentation"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/vi/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/vi/docs/>Tài liệu</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/vi/blog/>Kubernetes Blog</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/vi/partners/>Các đối tác</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/vi/community/>Community</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/vi/case-studies/>Các Case Study</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Versions</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/vi/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/vi/docs/concepts/architecture/cloud-controller/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/vi/docs/concepts/architecture/cloud-controller/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/vi/docs/concepts/architecture/cloud-controller/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/vi/docs/concepts/architecture/cloud-controller/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/vi/docs/concepts/architecture/cloud-controller/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Tiếng Việt (Vietnamese)</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/concepts/architecture/cloud-controller/>English</a>
<a class=dropdown-item href=/zh-cn/docs/concepts/architecture/cloud-controller/>中文 (Chinese)</a>
<a class=dropdown-item href=/ko/docs/concepts/architecture/cloud-controller/>한국어 (Korean)</a>
<a class=dropdown-item href=/ja/docs/concepts/architecture/cloud-controller/>日本語 (Japanese)</a>
<a class=dropdown-item href=/fr/docs/concepts/architecture/cloud-controller/>Français (French)</a>
<a class=dropdown-item href=/it/docs/concepts/architecture/cloud-controller/>Italiano (Italian)</a>
<a class=dropdown-item href=/de/docs/concepts/architecture/cloud-controller/>Deutsch (German)</a>
<a class=dropdown-item href=/es/docs/concepts/architecture/cloud-controller/>Español (Spanish)</a>
<a class=dropdown-item href=/pt-br/docs/concepts/architecture/cloud-controller/>Português (Portuguese)</a>
<a class=dropdown-item href=/id/docs/concepts/architecture/cloud-controller/>Bahasa Indonesia</a>
<a class=dropdown-item href=/ru/docs/concepts/architecture/cloud-controller/>Русский (Russian)</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav><section class="header-hero filler"></section></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-md-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><script>$(function(){$("#td-section-nav a").removeClass("active"),$("#td-section-nav #m-vi-docs-concepts-architecture-cloud-controller").addClass("active"),$("#td-section-nav #m-vi-docs-concepts-architecture-cloud-controller-li span").addClass("td-sidebar-nav-active-item"),$("#td-section-nav #m-vi-docs-concepts-architecture-cloud-controller").parents("li").addClass("active-path"),$("#td-section-nav li.active-path").addClass("show"),$("#td-section-nav li.active-path").children("input").prop("checked",!0),$("#td-section-nav #m-vi-docs-concepts-architecture-cloud-controller-li").siblings("li").addClass("show"),$("#td-section-nav #m-vi-docs-concepts-architecture-cloud-controller-li").children("ul").children("li").addClass("show"),$("#td-sidebar-menu").toggleClass("d-none")})</script><div id=td-sidebar-menu class="td-sidebar__inner d-none"><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" name=q placeholder="&#xf002 Tìm kiếm" aria-label="Tìm kiếm" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-vi-docs-li><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-vi-docs-reference-glossary-li><input type=checkbox id=m-vi-docs-reference-glossary-check>
<label for=m-vi-docs-reference-glossary-check><a href=/vi/docs/reference/glossary/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-vi-docs-reference-glossary><span>Thuật ngữ chuẩn hóa</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-vi-docs-home-li><input type=checkbox id=m-vi-docs-home-check>
<label for=m-vi-docs-home-check><a href=/vi/docs/home/ title="Tài liệu Kubernetes" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-vi-docs-home><span>Home</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-vi-docs-home-supported-doc-versions-li><input type=checkbox id=m-vi-docs-home-supported-doc-versions-check>
<label for=m-vi-docs-home-supported-doc-versions-check><a href=/vi/docs/home/supported-doc-versions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-vi-docs-home-supported-doc-versions><span>Các phiên bản được hỗ trợ của tài liệu Kubernetes</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-vi-docs-reference-kubectl-cheatsheet-li><input type=checkbox id=m-vi-docs-reference-kubectl-cheatsheet-check>
<label for=m-vi-docs-reference-kubectl-cheatsheet-check><a href=/vi/docs/reference/kubectl/cheatsheet/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-vi-docs-reference-kubectl-cheatsheet><span>kubectl Cheat Sheet</span></a></label></li></ul></li></ul></nav></div></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://kubernetes.io/vi/docs/>Tài liệu</a></li><li class=breadcrumb-item><a href=https://kubernetes.io/vi/docs/concepts/architecture/>Kiến Trúc Cluster</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://kubernetes.io/vi/docs/concepts/architecture/cloud-controller/>Các khái niệm nền tảng của Cloud Controller Manager</a></li></ol></nav><div class=td-content><h1>Các khái niệm nền tảng của Cloud Controller Manager</h1><p>Khái niệm Cloud Controller Manager (CCM) (để tránh nhầm lẫn với bản binary build cùng tên) được định nghĩa riêng biệt để cho phép các bên cung cấp dịch vụ cloud và thành phần chính của Kubernetes phát triển độc lập với nhau. CCM chạy đồng thời với những thành phần khác thuộc máy chủ của một cluster như Controller Manager của Kubernetes, API server, và Scheduler. Nó cũng có thể đóng vai trò như một addon cho Kubernetes.</p><p>Cloud Controller Manager này được thiết kế dựa trên cơ chế plugin nhằm cho phép các bên Cloud Provider có thể tích hợp với Kubernetes một cách dễ dàng thông qua các plugin này. Đã có những bản kế hoạch được thiết kế sẵn nhằm mục đích hỗ trợ những cloud provider thay đổi từ mô hình cũ sang mô hình mới đi chung với CCM.</p><p>Tài liệu này thảo luận về những khái niệm đằng sau một CCM và đưa ra những chi tiết về chức năng liên quan của nó.</p><p>Dưới đây là kiến trúc của một Kubernetes cluster khi không đi cùng với Cloud Controller Manager:</p><p><img src=/images/docs/pre-ccm-arch.png alt="Kiến trúc CCM Kube trước đây"></p><h2 id=thiết-kế>Thiết kế</h2><p>Trong sơ đồ trên, Kubernetes và nhà cung cấp dịch vụ cloud được tích hợp thông qua một số thành phần sau:</p><ul><li>Kubelet</li><li>Kubernetes Controller Manager</li><li>Kubernetes API server</li></ul><p>CCM hợp nhất tất cả các logic phụ thuộc trên một nền tàng Cloud từ 3 thành phần trên để tạo thành một điểm tích hợp duy nhất với hệ thống Cloud. Sơ đồ kiến trúc khi đi kèm với CCM sẽ trở thành:</p><p><img src=/images/docs/post-ccm-arch.png alt="Kiến trúc CCM Kube hiện tại"></p><h2 id=các-thành-phần-của-ccm>Các thành phần của CCM</h2><p>Cloud Controller Manager phân nhỏ một số chức năng của Kubernetes controller manager (KCM) và chạy nó như một tiến trình tách biệt. Cụ thể hơn, nó phân nhỏ những controller trong Kubernetes Controller Manager phụ thuộc vào Cloud. Kubernetes Controller Manager sẽ có những controller nhỏ hơn:</p><ul><li>Node controller</li><li>Volume controller</li><li>Route controller</li><li>Service controller</li></ul><p>Tại phiên bản 1.9, CCM thực hiện chạy những controller sau từ trong danh sách trên:</p><ul><li>Node controller</li><li>Route controller</li><li>Service controller</li></ul><div class="alert alert-info note callout" role=alert><strong>Ghi chú:</strong> Volume controller được bỏ ra khỏi Cloud Controller Manager. Do độ phức tạp lớn ảnh hướng và sẽ tốn nhiều thời gian cũng như nhân lực không đáp ứng đủ cho việc tách hẳn tầng logic liên quan tới Volume từ những bên cung cấp dịch vụ, và quyết định cuối cùng là sẽ không triển khai quản lý Volume như một phần của CCM.</div><p>Kết hoạch ban đầu của dự án là hỗ trợ Volume sử dụng Cloud Controller Manager để áp dụng những Flex Volume linh hoạt nhằm dễ dàng tích hợp bổ sung thêm. Tuy nhiên, một giải pháp khác cũng đang được lên kế hoạch để thay thế Flex Volume được biết là CSI.</p><p>Sau khi xem xét về khía cạnh này, chúng tôi quyết định sẽ có một khoảng thời gian nghỉ trước khi CSI trở nên sẵn sàng cho việc sử dụng.</p><h2 id=chức-năng-của-cloud-controller-manager>Chức năng của Cloud Controller Manager</h2><p>CCM thừa hưởng những tính năng của nó từ các thành phần trong Kubernetes phụ thuộc vào các Cloud Provider. Phần kế tiếp sẽ giới thiệu những thành phần này.</p><h3 id=1-kubernetes-conntroller-manager>1. Kubernetes Conntroller Manager</h3><p>Phần lớn các tính năng của CCM bắt nguồn từ Kubernetes controller manager. Như đã đề cập ở phần trước, CCM bao gồm:</p><ul><li>Node controller</li><li>Route controller</li><li>Service controller</li></ul><h4 id=node-controller>Node controller</h4><p>Node controller có vai trò khởi tạo một Node bằng cách thu thập thông tin về những Node đang chạy trong cluster từ các cloud provider.</p><p>Node controller sẽ thực hiện những chức năng sau:</p><ol><li>Khởi tạo một Node với các nhãn region/zone.</li><li>Khởi tạo một Node với những thông tin được cung cấp từ cloud, ví dụ như loại máy và kích cỡ.</li><li>Thu thập địa chỉ mạng của Node và hostname.</li><li>Trong trường hợp một Node không có tín hiệu phản hồi, Node controller sẽ kiểm tra xem Node này có thực sự xóa khỏi hệ thống cloud hay chưa. Nếu Node đó không còn tồn tại trên cloud, controller sẽ xóa Node đó khỏi Kubernetes cluster.</li></ol><h4 id=route-controller>Route controller</h4><p>Route controller đóng vai trò cấu hình định tuyến trong nằm trong hệ thống cloud để các container trên các Node khác nhau trong Kubernetes cluster có thể giao tiếp với nhau. Route controller hiện chỉ đáp ứng được cho các Google Compute Engine cluster.</p><h4 id=service-controller>Service controller</h4><p>Service controller lắng nghe các sự kiện tạo mới, cập nhật và xoá bỏ một service. Dựa trên trạng thái hiện tại của các vụ trên Kubernetes, nó cấu hình các dịch vụ cân bằng tải trên cloud (như ELB của AWS, Google Load Balancer, hay Oracle Cloud Infrastructure LB) nhằm phản ánh trạng thái của các Service trên Kubernetes. Ngoài ra, nó đảm bảo những service backends cho các dịch vụ cần bằng tải trên cloud được cập nhật</p><h3 id=2-kubelet>2. Kubelet</h3><p>Node controller bao gồm một số tính năng phụ thuộc vào tầng cloud của Kubelet. Trước khi có CCM, Kubelet đảm nhận vai trò khởi tạo một Node với thông tin chi tiết từ cloud như địa chỉ IP, region hay instance type. Với CCM, vai trò này được CCM đảm nhận thay cho Kubelet.</p><p>Với mô hình mới này, Kubelet sẽ khởi tạo một Node nhưng không đi kèm với những thông tin từ cloud. Tuy nhiên, nó sẽ thêm vào một dấu <a class=glossary-tooltip title='Là một đối tượng bao gồm ba thuộc tính bắt buộc: key, value, và effect. Taints (dấu chờ) ngăn cản việc lập lịch cho các pod chạy trên các node hay nhóm các node.' data-toggle=tooltip data-placement=top href=/docs/concepts/configuration/taint-and-toleration/ target=_blank aria-label=Taint>Taint</a> để đánh dấu Node sẽ không được lập lịch cho tới khi CCM khởi tạo xong Node này với những thông tin cụ thể cung cấp từ Cloud, sau đó nó sẽ xóa những dấu chờ này.</p><h2 id=cơ-chế-plugin>Cơ chế Plugin</h2><p>CCM sử dụng interface trong ngôn ngữ Go cho phép triển khai trên bất kì hệ thống cloud nào cũng có thể plugged in. Cụ thể hơn, nó sử dụng CloudProvider Interface được định nghĩa ở <a href=https://github.com/kubernetes/cloud-provider/blob/9b77dc1c384685cb732b3025ed5689dd597a5971/cloud.go#L42-L62>đây</a>.</p><p>Cách triển khai của bốn controller được nêu ở trên, và một số được thực hiện như giao diện chung cho các bên cung cấp dịch vụ cloud, sẽ ở trong lõi (core) của Kubernetes. Việc triển khai dành riêng cho từng cloud provider sẽ được xây dựng bên ngoài lõi (core) và triển khai các giao diện được xác định bên trong lõi.</p><p>Để biết thêm chỉ tiết, xem <a href=/docs/tasks/administer-cluster/developing-cloud-controller-manager/>Cloud Controller Manager</a>.</p><h2 id=phân-quyền>Phân quyền</h2><p>Phần này sẽ phân nhỏ quyền truy cập cần có cho các API object cung cấp bởi CCM để thực hiện những hành động của nó.</p><h3 id=node-controller-1>Node controller</h3><p>Node controller chỉ hoạt động với các Node. Nó yêu cầu đầy đủ quyền truy cập bao gồm get, list, create, update, patch, watch, và delete một Node.</p><p>v1/Node:</p><ul><li>Get</li><li>List</li><li>Create</li><li>Update</li><li>Patch</li><li>Watch</li><li>Delete</li></ul><h3 id=route-controller-1>Route controller</h3><p>Route controller lắng nghe sự kiện tạo ra các Node và cấu hình các Route tương ứng. Nó yêu cầu có quyền truy cập get tới các đối Node.</p><p>v1/Node:</p><ul><li>Get</li></ul><h3 id=service-controller-1>Service controller</h3><p>Service controller lắng nghe các sự kiện khởi tạo, cập nhật và xóa bỏ một Service và cấu hình những endpoint phù hợp.</p><p>Để truy cập các Service, nó cần quyền list, và watch. Để cập nhật Service, nó sẽ cần patch và update.</p><p>Để thiết lập các endpoint cho các Service, nó cần quyền create, list, get, watch, và update.</p><p>v1/Service:</p><ul><li>List</li><li>Get</li><li>Watch</li><li>Patch</li><li>Update</li></ul><h3 id=các-vấn-đề-khác>Các vấn đề khác</h3><p>Việc triển khai lõi của CCM yêu cầu cần có quyền tạo mới sự kiện và đảm bảo quyền thực thi một số hành động, nó cần có quyền tạo các Service Accounts</p><p>v1/Event:</p><ul><li>Create</li><li>Patch</li><li>Update</li></ul><p>v1/ServiceAccount:</p><ul><li>Create</li></ul><p>Với RBAC ClusterRole, CCM cần có ClusterRole tối thiểu:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>rbac.authorization.k8s.io/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ClusterRole<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>cloud-controller-manager<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:#b44>&#34;&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- events<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>verbs</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- create<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- patch<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- update<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:#b44>&#34;&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- nodes<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>verbs</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:#b44>&#34;*&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:#b44>&#34;&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- nodes/status<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>verbs</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- patch<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:#b44>&#34;&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- services<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>verbs</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- list<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- patch<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- update<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- watch<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:#b44>&#34;&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- serviceaccounts<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>verbs</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- create<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:#b44>&#34;&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- persistentvolumes<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>verbs</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- get<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- list<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- update<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- watch<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:#b44>&#34;&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- endpoints<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>verbs</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- create<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- get<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- list<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- watch<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- update<span style=color:#bbb>
</span></span></span></code></pre></div><h2 id=các-nhà-cung-cấp-đã-triển-khai>Các nhà cung cấp đã triển khai</h2><p>Sau đây là danh sách các nhà cung cấp dịch vụ cloud đã triển khai CCM:</p><ul><li><a href=https://github.com/kubernetes/cloud-provider-aws>AWS</a></li><li><a href=https://github.com/kubernetes/cloud-provider-azure>Azure</a></li><li><a href=https://github.com/baidu/cloud-provider-baiducloud>BaiduCloud</a></li><li><a href=https://github.com/digitalocean/digitalocean-cloud-controller-manager>DigitalOcean</a></li><li><a href=https://github.com/kubernetes/cloud-provider-gcp>GCP</a></li><li><a href=https://github.com/linode/linode-cloud-controller-manager>Linode</a></li><li><a href=https://github.com/kubernetes/cloud-provider-openstack>OpenStack</a></li><li><a href=https://github.com/oracle/oci-cloud-controller-manager>Oracle</a></li><li><a href=https://github.com/TencentCloud/tencentcloud-cloud-controller-manager>TencentCloud</a></li></ul><h2 id=quản-lý-cluster>Quản lý Cluster</h2><p>Hướng dẫn chi tiết cho việc cấu hình và chạy CCM được cung cấp tại <a href=/docs/tasks/administer-cluster/running-cloud-controller/#cloud-controller-manager>đây</a>.</p></div><div id=pre-footer><h2>Phản hồi</h2><p class=feedback--prompt>Trang này có hữu ích?</p><button class="btn btn-primary mb-4 feedback--yes">Có</button>
<button class="btn btn-primary mb-4 feedback--no">Không</button><p class="feedback--response feedback--response__hidden">Cảm ơn vì đã phản hồi. Nếu bạn có một câu hỏi cụ thể, có thể trả lời về cách sử dụng Kubernetes, hãy hỏi nó trên
<a target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/kubernetes>Stack Overflow</a>.
Tạo một issue trên Github repo nến bạn muốn
<a class=feedback--link target=_blank rel=noopener href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">báo cáo một vấn đề</a>
hoặc
<a class=feedback--link target=_blank rel=noopener href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">đề xuất cải tiến</a>.</p></div><script>const yes=document.querySelector(".feedback--yes"),no=document.querySelector(".feedback--no");document.querySelectorAll(".feedback--link").forEach(e=>{e.href=e.href+window.location.pathname});const sendFeedback=e=>{gtag||console.log("!gtag"),gtag("event","click",{event_category:"Helpful",event_label:window.location.pathname,value:e})},disableButtons=()=>{yes.disabled=!0,yes.classList.add("feedback--button__disabled"),no.disabled=!0,no.classList.add("feedback--button__disabled")};yes.addEventListener("click",()=>{sendFeedback(1),disableButtons(),document.querySelector(".feedback--response").classList.remove("feedback--response__hidden")}),no.addEventListener("click",()=>{sendFeedback(0),disableButtons(),document.querySelector(".feedback--response").classList.remove("feedback--response__hidden")})</script><div class="text-muted mt-5 pt-3 border-top">Last modified June 01, 2020 at 9:20 AM PST: <a href=https://github.com/kubernetes/website/commit/21fd0a12f981e01c4dff0cef3fb72f1a797bbf25>add vi pages (21fd0a12f9)</a></div></main><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/kubernetes/website/edit/main/content/vi/docs/concepts/architecture/cloud-controller.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/kubernetes/website/new/main/content/vi/docs/concepts/architecture/cloud-controller.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/kubernetes/website/issues/new?title=C%c3%a1c%20kh%c3%a1i%20ni%e1%bb%87m%20n%e1%bb%81n%20t%e1%ba%a3ng%20c%e1%bb%a7a%20Cloud%20Controller%20Manager" target=_blank><i class="fab fa-github fa-fw"></i> Create an issue</a>
<a id=print href=https://kubernetes.io/vi/docs/concepts/architecture/_print/><i class="fa fa-print fa-fw"></i> Print entire section</a></div><nav id=TableOfContents><ul><li><a href=#thiết-kế>Thiết kế</a></li><li><a href=#các-thành-phần-của-ccm>Các thành phần của CCM</a></li><li><a href=#chức-năng-của-cloud-controller-manager>Chức năng của Cloud Controller Manager</a><ul><li><a href=#1-kubernetes-conntroller-manager>1. Kubernetes Conntroller Manager</a></li><li><a href=#2-kubelet>2. Kubelet</a></li></ul></li><li><a href=#cơ-chế-plugin>Cơ chế Plugin</a></li><li><a href=#phân-quyền>Phân quyền</a><ul><li><a href=#node-controller-1>Node controller</a></li><li><a href=#route-controller-1>Route controller</a></li><li><a href=#service-controller-1>Service controller</a></li><li><a href=#các-vấn-đề-khác>Các vấn đề khác</a></li></ul></li><li><a href=#các-nhà-cung-cấp-đã-triển-khai>Các nhà cung cấp đã triển khai</a></li><li><a href=#quản-lý-cluster>Quản lý Cluster</a></li></ul></nav></div></div></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/vi/docs/home/>Home</a>
<a class=text-white href=/vi/blog/>Blog</a>
<a class=text-white href=/vi/partners/>Các đối tác</a>
<a class=text-white href=/vi/community/>Community</a>
<a class=text-white href=/vi/case-studies/>Các Case Study</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 Các tác giả Kubernetes | Tài liệu được phân phối theo <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a></small><br><small class=text-white>Copyright &copy; 2023 The Linux Foundation &reg;. Đã đăng ký Bản quyền. The Linux Foundation đã đăng ký và sử dụng nhãn hiệu. Để biết danh sách các nhãn hiệu của The Linux Foundation, xem <a href=https://www.linuxfoundation.org/trademark-usage class=light-text>Trademark Usage page</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>