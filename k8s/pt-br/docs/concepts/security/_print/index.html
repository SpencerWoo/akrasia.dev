<!doctype html><html lang=pt-br class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=en href=https://kubernetes.io/docs/concepts/security/><link rel=alternate hreflang=zh-cn href=https://kubernetes.io/zh-cn/docs/concepts/security/><link rel=alternate hreflang=ko href=https://kubernetes.io/ko/docs/concepts/security/><link rel=alternate hreflang=ja href=https://kubernetes.io/ja/docs/concepts/security/><link rel=alternate hreflang=fr href=https://kubernetes.io/fr/docs/concepts/security/><link rel=alternate hreflang=es href=https://kubernetes.io/es/docs/concepts/security/><link rel=alternate hreflang=id href=https://kubernetes.io/id/docs/concepts/security/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://kubernetes.io/pt-br/docs/concepts/security/><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>Segurança | Kubernetes</title><meta property="og:title" content="Segurança"><meta property="og:description" content="Orquestração de contêineres em nível de produção"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.io/pt-br/docs/concepts/security/"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="Segurança"><meta itemprop=description content="Orquestração de contêineres em nível de produção"><meta name=twitter:card content="summary"><meta name=twitter:title content="Segurança"><meta name=twitter:description content="Orquestração de contêineres em nível de produção"><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content><meta property="og:description" content><meta name=twitter:description content><meta property="og:url" content="https://kubernetes.io/pt-br/docs/concepts/security/"><meta property="og:title" content="Segurança"><meta name=twitter:title content="Segurança"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/pt-br/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/pt-br/docs/>Documentação</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/pt-br/blog/>Kubernetes Blog</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/pt-br/partners/>Parceiros</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/pt-br/community/>Comunidade</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/pt-br/case-studies/>Casos de estudo</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Versões</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/pt-br/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/pt-br/docs/concepts/security/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/pt-br/docs/concepts/security/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/pt-br/docs/concepts/security/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/pt-br/docs/concepts/security/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/pt-br/docs/concepts/security/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Português (Portuguese)</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/concepts/security/>English</a>
<a class=dropdown-item href=/zh-cn/docs/concepts/security/>中文 (Chinese)</a>
<a class=dropdown-item href=/ko/docs/concepts/security/>한국어 (Korean)</a>
<a class=dropdown-item href=/ja/docs/concepts/security/>日本語 (Japanese)</a>
<a class=dropdown-item href=/fr/docs/concepts/security/>Français (French)</a>
<a class=dropdown-item href=/es/docs/concepts/security/>Español (Spanish)</a>
<a class=dropdown-item href=/id/docs/concepts/security/>Bahasa Indonesia</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>Essa é a versão completa de impressão dessa seção
<a href=# onclick="return print(),!1">Clique aqui para imprimir</a>.</p><p><a href=/pt-br/docs/concepts/security/>Retornar à visualização normal</a>.</p></div><h1 class=title>Segurança</h1><ul><li>1: <a href=#pg-04eeb110d75afc8acb2cf7a3db743985>Visão Geral da Segurança Cloud Native</a></li><li>2: <a href=#pg-4d77d1ae4c06aa14f54b385191627881>Controlando Acesso à API do Kubernetes</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-04eeb110d75afc8acb2cf7a3db743985>1 - Visão Geral da Segurança Cloud Native</h1><p>Esta visão geral define um modelo para pensar sobre a segurança em Kubernetes no contexto da Segurança em Cloud Native.</p><div class="alert alert-danger warning callout" role=alert><strong>Aviso:</strong> Este modelo de segurança no contêiner fornece sugestões, não prova políticas de segurança da informação.</div><h2 id=os-4c-da-segurança-cloud-native>Os 4C da Segurança Cloud Native</h2><p>Você pode pensar na segurança em camadas. Os 4C da segurança Cloud Native são a Cloud,
Clusters, Contêineres e Código.</p><div class="alert alert-info note callout" role=alert><strong>Nota:</strong> Esta abordagem em camadas aumenta a <a href=https://en.wikipedia.org/wiki/Defense_in_depth_(computing)>defesa em profundidade</a>
para segurança, que é amplamente considerada como uma boa prática de segurança para software de sistemas.</div><figure><img src=/images/docs/4c.png><figcaption><h4>Os 4C da Segurança Cloud Native</h4></figcaption></figure><p>Cada camada do modelo de segurança Cloud Native é construída sobre a próxima camada mais externa.
A camada de código se beneficia de uma base forte (Cloud, Cluster, Contêiner) de camadas seguras.
Você não pode proteger contra padrões ruins de segurança nas camadas de base através de
segurança no nível do Código.</p><h2 id=cloud>Cloud</h2><p>De muitas maneiras, a Cloud (ou servidores co-localizados, ou o datacenter corporativo) é a
<a href=https://en.wikipedia.org/wiki/Trusted_computing_base>base de computação confiável</a>
de um cluster Kubernetes. Se a camada de Cloud é vulnerável (ou
configurado de alguma maneira vulnerável), então não há garantia de que os componentes construídos
em cima desta base estejam seguros. Cada provedor de Cloud faz recomendações de segurança
para executar as cargas de trabalho com segurança nos ambientes.</p><h3 id=segurança-no-provedor-da-cloud>Segurança no provedor da Cloud</h3><p>Se você estiver executando um cluster Kubernetes em seu próprio hardware ou em um provedor de nuvem diferente,
consulte sua documentação para melhores práticas de segurança.
Aqui estão os links para as documentações de segurança dos provedores mais populares de nuvem:</p><table><caption style=display:none>Cloud provider security</caption><thead><tr><th>Provedor IaaS</th><th>Link</th></tr></thead><tbody><tr><td>Alibaba Cloud</td><td><a href=https://www.alibabacloud.com/trust-center>https://www.alibabacloud.com/trust-center</a></td></tr><tr><td>Amazon Web Services</td><td><a href=https://aws.amazon.com/security/>https://aws.amazon.com/security/</a></td></tr><tr><td>Google Cloud Platform</td><td><a href=https://cloud.google.com/security/>https://cloud.google.com/security/</a></td></tr><tr><td>IBM Cloud</td><td><a href=https://www.ibm.com/cloud/security>https://www.ibm.com/cloud/security</a></td></tr><tr><td>Microsoft Azure</td><td><a href=https://docs.microsoft.com/en-us/azure/security/azure-security>https://docs.microsoft.com/en-us/azure/security/azure-security</a></td></tr><tr><td>Oracle Cloud Infrastructure</td><td><a href=https://www.oracle.com/security/>https://www.oracle.com/security/</a></td></tr><tr><td>VMWare VSphere</td><td><a href=https://www.vmware.com/security/hardening-guides.html>https://www.vmware.com/security/hardening-guides.html</a></td></tr></tbody></table><h3 id=infrastructure-security>Segurança de Infraestrutura</h3><p>Sugestões para proteger sua infraestrutura em um cluster Kubernetes:</p><table><caption style=display:none>Infrastructure security</caption><thead><tr><th>Área de Interesse para Infraestrutura Kubernetes</th><th>Recomendação</th></tr></thead><tbody><tr><td>Acesso de rede ao servidor API (Control plane)</td><td>Todo o acesso ao control plane do Kubernetes publicamente na Internet não é permitido e é controlado por listas de controle de acesso à rede restritas ao conjunto de endereços IP necessários para administrar o cluster.</td></tr><tr><td>Acesso de rede aos Nós (nodes)</td><td>Os nós devem ser configurados para <em>só</em> aceitar conexões (por meio de listas de controle de acesso à rede) do control plane nas portas especificadas e aceitar conexões para serviços no Kubernetes do tipo NodePort e LoadBalancer. Se possível, esses nós não devem ser expostos inteiramente na Internet pública.</td></tr><tr><td>Acesso do Kubernetes à API do provedor de Cloud</td><td>Cada provedor de nuvem precisa conceder um conjunto diferente de permissões para o control plane e nós do Kubernetes. É melhor fornecer ao cluster permissão de acesso ao provedor de nuvem que segue o <a href=https://en.wikipedia.org/wiki/Principle_of_least_privilege>princípio do menor privilégio</a> para os recursos que ele precisa administrar. A <a href=https://github.com/kubernetes/kops/blob/master/docs/iam_roles.md#iam-roles>documentação do Kops</a> fornece informações sobre as políticas e roles do IAM.</td></tr><tr><td>Acesso ao etcd</td><td>O acesso ao etcd (o armazenamento de dados do Kubernetes) deve ser limitado apenas ao control plane. Dependendo de sua configuração, você deve tentar usar etcd sobre TLS. Mais informações podem ser encontradas na <a href=https://github.com/etcd-io/etcd/tree/master/Documentation>documentação do etcd</a>.</td></tr><tr><td>Encriptação etcd</td><td>Sempre que possível, é uma boa prática encriptar todas as unidades de armazenamento, mas como o etcd mantém o estado de todo o cluster (incluindo os Secrets), seu disco deve ser criptografado.</td></tr></tbody></table><h2 id=cluster>Cluster</h2><p>Existem duas áreas de preocupação para proteger o Kubernetes:</p><ul><li>Protegendo os componentes do cluster que são configuráveis.</li><li>Protegendo as aplicações que correm no cluster.</li></ul><h3 id=cluster-components>Componentes do Cluster</h3><p>Se você deseja proteger seu cluster de acesso acidental ou malicioso e adotar
boas práticas de informação, leia e siga os conselhos sobre
<a href=/docs/tasks/administer-cluster/securing-a-cluster/>protegendo seu cluster</a>.</p><h3 id=cluster-applications>Componentes no cluster (sua aplicação)</h3><p>Dependendo da superfície de ataque de sua aplicação, você pode querer se concentrar em
tópicos específicos de segurança. Por exemplo: se você estiver executando um serviço (Serviço A) que é crítico
numa cadeia de outros recursos e outra carga de trabalho separada (Serviço B) que é
vulnerável a um ataque de exaustão de recursos e, por consequência, o risco de comprometer o Serviço A
é alto se você não limitar os recursos do Serviço B. A tabela a seguir lista
áreas de atenção na segurança e recomendações para proteger cargas de trabalho em execução no Kubernetes:</p><table><thead><tr><th>Área de interesse para a segurança do Workload</th><th>Recomendação</th></tr></thead><tbody><tr><td>Autorização RBAC (acesso à API Kubernetes)</td><td><a href=https://kubernetes.io/docs/reference/access-authn-authz/rbac/>https://kubernetes.io/docs/reference/access-authn-authz/rbac/</a></td></tr><tr><td>Autenticação</td><td><a href=https://kubernetes.io/docs/concepts/security/controlling-access/>https://kubernetes.io/docs/concepts/security/controlling-access/</a></td></tr><tr><td>Gerenciamento de segredos na aplicação (e encriptando-os no etcd em repouso)</td><td><a href=https://kubernetes.io/docs/concepts/configuration/secret/>https://kubernetes.io/docs/concepts/configuration/secret/</a><br><a href=https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/>https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/</a></td></tr><tr><td>Garantir que os Pods atendem aos padrões de segurança do Pod</td><td><a href=https://kubernetes.io/docs/concepts/security/pod-security-standards/#policy-instantiation>https://kubernetes.io/docs/concepts/security/pod-security-standards/#policy-instantiation</a></td></tr><tr><td>Qualidade de serviço (e gerenciamento de recursos de cluster)</td><td><a href=https://kubernetes.io/docs/tasks/configure-pod-container/quality-service-pod/>https://kubernetes.io/docs/tasks/configure-pod-container/quality-service-pod/</a></td></tr><tr><td>Políticas de Rede</td><td><a href=https://kubernetes.io/docs/concepts/services-networking/network-policies/>https://kubernetes.io/docs/concepts/services-networking/network-policies/</a></td></tr><tr><td>TLS para Kubernetes Ingress</td><td><a href=https://kubernetes.io/docs/concepts/services-networking/ingress/#tls>https://kubernetes.io/docs/concepts/services-networking/ingress/#tls</a></td></tr></tbody></table><h2 id=contêiner>Contêiner</h2><p>A segurança do contêiner está fora do escopo deste guia. Aqui estão recomendações gerais e
links para explorar este tópico:</p><table><thead><tr><th>Área de Interesse para Contêineres</th><th>Recomendação</th></tr></thead><tbody><tr><td>Scanners de Vulnerabilidade de Contêiner e Segurança de Dependência de SO</td><td>Como parte da etapa de construção de imagem, você deve usar algum scanner em seus contêineres em busca de vulnerabilidades.</td></tr><tr><td>Assinatura Imagem e Enforcement</td><td>Assinatura de imagens de contêineres para manter um sistema de confiança para o conteúdo de seus contêineres.</td></tr><tr><td>Proibir Usuários Privilegiados</td><td>Ao construir contêineres, consulte a documentação para criar usuários dentro dos contêineres que tenham o menor nível de privilégio no sistema operacional necessário para cumprir o objetivo do contêiner.</td></tr><tr><td>Use o Contêiner em Runtime com Isolamento mais Forte</td><td>Selecione <a href=/docs/concepts/containers/runtime-class/>classes de contêiner runtime</a> com o provedor de isolamento mais forte.</td></tr></tbody></table><h2 id=código>Código</h2><p>O código da aplicação é uma das principais superfícies de ataque sobre a qual você tem maior controle.
Embora a proteção do código do aplicativo esteja fora do tópico de segurança do Kubernetes, aqui
são recomendações para proteger o código do aplicativo:</p><h3 id=segurança-de-código>Segurança de código</h3><table><caption style=display:none>Code security</caption><thead><tr><th>Área de Atenção para o Código</th><th>Recomendação</th></tr></thead><tbody><tr><td>Acesso só através de TLS</td><td>Se seu código precisar se comunicar por TCP, execute um handshake TLS com o cliente antecipadamente. Com exceção de alguns casos, encripte tudo em trânsito. Indo um passo adiante, é uma boa ideia encriptar o tráfego de rede entre os serviços. Isso pode ser feito por meio de um processo conhecido como mutual ou <a href=https://en.wikipedia.org/wiki/Mutual_authentication>mTLS</a>, que realiza uma verificação bilateral da comunicação mediante os certificados nos serviços.</td></tr><tr><td>Limitando intervalos de porta de comunicação</td><td>Essa recomendação pode ser um pouco autoexplicativa, mas, sempre que possível, você só deve expor as portas em seu serviço que são absolutamente essenciais para a comunicação ou coleta de métricas.</td></tr><tr><td>Segurança na Dependência de Terceiros</td><td>É uma boa prática verificar regularmente as bibliotecas de terceiros de sua aplicação em busca de vulnerabilidades de segurança. Cada linguagem de programação possui uma ferramenta para realizar essa verificação automaticamente.</td></tr><tr><td>Análise de Código Estático</td><td>A maioria das linguagens fornece uma maneira para analisar um extrato do código referente a quaisquer práticas de codificação potencialmente inseguras. Sempre que possível, você deve automatizar verificações usando ferramentas que podem verificar as bases de código em busca de erros de segurança comuns. Algumas das ferramentas podem ser encontradas em <a href=https://owasp.org/www-community/Source_Code_Analysis_Tools>OWASP Source Code Analysis Tools</a>.</td></tr><tr><td>Ataques de sondagem dinâmica</td><td>Existem algumas ferramentas automatizadas que você pode executar contra seu serviço para tentar alguns dos ataques mais conhecidos. Isso inclui injeção de SQL, CSRF e XSS. Uma das ferramentas de análise dinâmica mais populares é o <a href=https://owasp.org/www-project-zap/>OWASP Zed Attack proxy</a>.</td></tr></tbody></table><h2 id=próximos-passos>Próximos passos</h2><p>Saiba mais sobre os tópicos de segurança do Kubernetes:</p><ul><li><a href=/docs/concepts/security/pod-security-standards/>Padrões de segurança do Pod</a></li><li><a href=/docs/concepts/services-networking/network-policies/>Políticas de rede para Pods</a></li><li><a href=/docs/concepts/security/controlling-access>Controle de acesso à API Kubernetes</a></li><li><a href=/docs/tasks/administer-cluster/securing-a-cluster/>Protegendo seu cluster</a></li><li><a href=/docs/tasks/tls/managing-tls-in-a-cluster/>Criptografia de dados em trânsito</a> for the control plane</li><li><a href=/docs/tasks/administer-cluster/encrypt-data/>Criptografia de dados em repouso</a></li><li><a href=/docs/concepts/configuration/secret/>Secrets no Kubernetes</a></li><li><a href=/docs/concepts/containers/runtime-class>Runtime class</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-4d77d1ae4c06aa14f54b385191627881>2 - Controlando Acesso à API do Kubernetes</h1><p>Esta página fornece uma visão geral do controle de acesso à API do Kubernetes.</p><p>Usuários podem acessar a <a href=/docs/concepts/overview/kubernetes-api/>API do Kubernetes</a> utilizando <code>kubectl</code>,
bibliotecas, ou executando requisições REST. Ambos, usuários humanos e
<a href=/docs/tasks/configure-pod-container/configure-service-account/>Contas de serviço do Kubernetes</a> podem ser autorizados
a acessar à API.
Quando uma requisição chega à API, ela passa por diversos estágios,
ilustrados no seguinte diagrama:</p><p><img src=/images/docs/admin/access-control-overview.svg alt="Diagrama de etapas de tratamento de requisições enviadas a API do Kubernetes"></p><h2 id=segurança-na-camada-de-transporte>Segurança na camada de transporte</h2><p>Em um cluster Kubernetes típico, a API fica disponível na porta 443, protegida por segurança na camada de transporte (TLS).
O servidor de API apresenta um certificado. Este certificado pode ser assinado utilizando
uma autoridade privada de certificados (CA), ou baseado em uma infraestrutura de chave pública ligada
a uma autoridade de certificados reconhecida publicamente.</p><p>Se o seu cluster utiliza uma autoridade privada de certificados, voce precisa de uma cópia do certificado
da autoridade de certificados (CA) dentro do arquivo de configuração <code>~/.kube/config</code>, no lado do cliente, para que
voce possa confiar na conexão e tenha a garantia de que não há interceptação de tráfego.</p><p>O seu cliente pode apresentar o certificado de cliente TLS neste estágio.</p><h2 id=autenticação>Autenticação</h2><p>Uma vez em que a segurança na camada de transporte (TLS) é estabelecida, a requisição HTTP move para o passo de autenticação.
Isto é demonstrado no passo <strong>1</strong> no diagrama acima.
O script de criação do cluster ou configurações de administração configuram o servidor de API para executar
um ou mais módulos autenticadores.</p><p>Autenticadores são descritos em maiores detalhes em
<a href=/pt-br/docs/reference/access-authn-authz/authentication/>Autenticação</a>.</p><p>A entrada para o passo de autenticação é a requisição HTTP completa; no entanto, tipicamente
são verificados os cabeçalhos e/ou o certificado de cliente.</p><p>Módulos de autenticação incluem certificados de cliente, senhas, tokens simples,
tokens de auto-inicialização e JSON Web Tokens (utilizados para contas de serviço).</p><p>Vários módulos de autenticação podem ser especificados, em que cada um será verificado em sequência,
até que um deles tenha sucesso.</p><p>Se a requisição não pode ser autenticada, será rejeitada com o código de status HTTP 401 (não autorizado).
Caso contrário, o usuário é autenticado com um "nome de usuário" específico e o nome de usuário
está disponível para as etapas subsequentes para usar em suas decisões. Alguns autenticadores
também fornecem as associações de grupo do usuário, enquanto outros autenticadores
não o fazem.</p><p>Enquanto o Kubernetes usa nomes de usuário para decisões de controle de acesso e no registro de requisições,
ele não possui um objeto <code>user</code> nem armazena nomes de usuários ou outras informações sobre
usuários em sua API.</p><h2 id=autorização>Autorização</h2><p>Após a requisição ser autenticada como originada de um usuário específico, a requisição deve ser autorizada. Isso é mostrado no passo <strong>2</strong> no diagrama.</p><p>Uma requisição deve incluir o nome do usuário requerente, a ação requisitada e o objeto afetado pela ação. A requisição é autorizada se uma
política existente declarar que o usuário tem as devidas permissões para concluir a ação requisitada.</p><p>Por exemplo, se Bob possui a política abaixo, então ele somente poderá ler pods no namespace <code>projectCaribou</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;abac.authorization.kubernetes.io/v1beta1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;Policy&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;spec&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>&#34;user&#34;</span>: <span style=color:#b44>&#34;bob&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>&#34;namespace&#34;</span>: <span style=color:#b44>&#34;projectCaribou&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>&#34;resource&#34;</span>: <span style=color:#b44>&#34;pods&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>&#34;readonly&#34;</span>: <span style=color:#a2f;font-weight:700>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Se Bob fizer a seguinte requisição, a requisição será autorizada porque ele tem permissão para ler objetos no namespace <code>projectCaribou</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;authorization.k8s.io/v1beta1&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;SubjectAccessReview&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;spec&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;resourceAttributes&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;namespace&#34;</span>: <span style=color:#b44>&#34;projectCaribou&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;verb&#34;</span>: <span style=color:#b44>&#34;get&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;group&#34;</span>: <span style=color:#b44>&#34;unicorn.example.org&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;resource&#34;</span>: <span style=color:#b44>&#34;pods&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Se Bob fizer uma requisição para escrever (<code>create</code> ou <code>update</code>) em objetos no namespace <code>projectCaribou</code>, sua autorização será negada. Se Bob fizer uma requisição para ler (<code>get</code>) objetos em um namespace diferente, como <code>projectFish</code>, sua autorização será negada.</p><p>A autorização do Kubernetes requer que você use atributos comuns a REST para interagir com os sistemas de controle de acesso existentes em toda uma organização ou em todo o provedor de nuvem utilizado. É importante usar a formatação REST porque esses sistemas de controle podem interagir com outras APIs além da API do Kubernetes.</p><p>O Kubernetes oferece suporte a vários módulos de autorização, como o modo de controle de acesso baseado em atributos (ABAC), o modo de controle de acesso baseado em função (RBAC) e o modo Webhook. Quando um administrador cria um cluster, ele configura os módulos de autorização que devem ser utilizados no servidor de API. Se mais de um módulo de autorização for configurado, o Kubernetes verificará cada módulo e, se algum módulo autorizar a requisição, a requisição poderá prosseguir. Se todos os módulos negarem a requisição, a requisição será negada (com código de status HTTP 403 - Acesso Proibido).</p><p>Para saber mais sobre a autorização do Kubernetes, incluindo detalhes sobre como criar políticas usando os módulos de autorização compatíveis, consulte <a href=/pt-br/docs/reference/access-authn-authz/authorization/>Visão Geral de Autorização</a>.</p><h2 id=controle-de-admissão>Controle de admissão</h2><p>Os módulos de controle de admissão são módulos de software que podem modificar ou rejeitar requisições.
Além dos atributos disponíveis para os módulos de Autorização, os módulos do controlador de admissão
podem acessar o conteúdo do objeto que está sendo criado ou modificado.</p><p>Os controladores de admissão atuam em requisições que criam, modificam, excluem ou age como um proxy para outro objeto.
Os controladores de admissão não agem em requisições que apenas leem objetos.
Quando vários controladores de admissão são configurados, eles são chamados em ordem.</p><p>Isso é mostrado como etapa <strong>3</strong> no diagrama.</p><p>Ao contrário dos módulos de autenticação e autorização, se algum módulo controlador de admissão
rejeita, a solicitação é imediatamente rejeitada.</p><p>Além de rejeitar objetos, os controladores de admissão também podem definir valores padrão complexos para
campos.</p><p>Os módulos de Controle de Admissão disponíveis são descritos em <a href=/docs/reference/access-authn-authz/admission-controllers/>Using Admission Controllers</a>.</p><p>Após uma requisição passar por todos os controladores de admissão, ela é validada usando as rotinas de validação
para o objeto de API correspondente e, em seguida, gravados no armazenamento de objetos (mostrado como etapa <strong>4</strong> no diagrama).</p><h2 id=auditoria>Auditoria</h2><p>A auditoria do Kubernetes fornece um conjunto de registros cronológicos relevantes para a segurança que documentam a sequência de ações em um cluster.
O cluster audita as atividades geradas pelos usuários, pelos aplicativos que usam a API do Kubernetes e pela própria camada de gerenciamento.</p><p>Para mais informações, consulte <a href=/docs/tasks/debug/debug-cluster/audit/>Auditing</a>.</p><h2 id=portas-e-ips-do-servidor-de-api>Portas e IPs do servidor de API</h2><p>A discussão anterior se aplica a requisições enviadas para a porta segura do servidor de API
(o caso típico). O servidor de API pode realmente servir em 2 portas.</p><p>Por padrão, o servidor da API Kubernetes atende HTTP em 2 portas:</p><ol><li><p>Porta <code>localhost</code>:</p><ul><li>destina-se a testes e auto-inicialização e a outros componentes do nó mestre
(scheduler, controller-manager) para falar com a API</li><li>sem segurança na camada de transporte (TLS)</li><li>o padrão é a porta 8080</li><li>IP padrão é localhost, mude com a flag <code>--insecure-bind-address</code>.</li><li>a requisição <strong>ignora</strong> os módulos de autenticação e autorização .</li><li>requisição tratada pelo(s) módulo(s) de controle de admissão.</li><li>protegido pela necessidade de ter acesso ao host</li></ul></li><li><p>“Porta segura”:</p><ul><li>utilize sempre que possível</li><li>utiliza segurança na camada de transporte (TLS). Defina o certificado com <code>--tls-cert-file</code> e a chave com a flag <code>--tls-private-key-file</code>.</li><li>o padrão é a porta 6443, mude com a flag <code>--secure-port</code>.</li><li>IP padrão é a primeira interface de rede não localhost, mude com a flag <code>--bind-address</code>.</li><li>requisição tratada pelos módulos de autenticação e autorização.</li><li>requisição tratada pelo(s) módulo(s) de controle de admissão.</li><li>módulos de autenticação e autorização executados.</li></ul></li></ol><h2 id=próximos-passos>Próximos passos</h2><p>Consulte mais documentação sobre autenticação, autorização e controle de acesso à API:</p><ul><li><a href=/pt-br/docs/reference/access-authn-authz/authentication/>Autenticação</a><ul><li><a href=/pt-br/docs/reference/access-authn-authz/bootstrap-tokens/>Autenticando com Tokens de Inicialização</a></li></ul></li><li><a href=/docs/reference/access-authn-authz/admission-controllers/>Using Admission Controllers</a><ul><li><a href=/docs/reference/access-authn-authz/extensible-admission-controllers/>Dynamic Admission Control</a></li></ul></li><li><a href=/pt-br/docs/reference/access-authn-authz/authorization/>Autorização</a><ul><li><a href=/docs/reference/access-authn-authz/rbac/>Using RBAC Authorization</a></li><li><a href=/docs/reference/access-authn-authz/abac/>Using ABAC Authorization</a></li><li><a href=/docs/reference/access-authn-authz/node/>Using Node Authorization</a></li><li><a href=/docs/reference/access-authn-authz/webhook/>Webhook Mode</a></li></ul></li><li><a href=/docs/reference/access-authn-authz/certificate-signing-requests/>Certificate Signing Requests</a><ul><li>incluindo <a href=/docs/reference/access-authn-authz/certificate-signing-requests/#approval-rejection>Approval or rejection of Certificate Signing Requests</a>
e <a href=/docs/reference/access-authn-authz/certificate-signing-requests/#signing>Signing certificates</a></li></ul></li><li>Contas de serviço<ul><li><a href=/docs/tasks/configure-pod-container/configure-service-account/>Configure Service Accounts for Pods</a></li><li><a href=/docs/reference/access-authn-authz/service-accounts-admin/>Managing Service Accounts</a></li></ul></li></ul><p>Você pode aprender mais sobre:</p><ul><li>como os pods podem usar <a href=/docs/concepts/configuration/secret/>Secrets</a> para obter credenciais de API.</li></ul></div></main></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/pt-br/docs/home/>Home</a>
<a class=text-white href=/pt-br/blog/>Blog</a>
<a class=text-white href=/pt-br/partners/>Parceiros</a>
<a class=text-white href=/pt-br/community/>Comunidade</a>
<a class=text-white href=/pt-br/case-studies/>Casos de estudo</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 Os autores do Kubernetes | Documentação Distribuída sob <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a></small><br><small class=text-white>Copyright &copy; 2023 A Fundação Linux &reg;. Todos os direitos reservados. A Linux Foundation tem marcas registradas e usa marcas registradas. Para uma lista de marcas registradas da The Linux Foundation, por favor, veja nossa <a href=https://www.linuxfoundation.org/trademark-usage class=light-text>Página de uso de marca registrada</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>