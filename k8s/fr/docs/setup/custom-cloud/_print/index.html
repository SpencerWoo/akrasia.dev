<!doctype html><html lang=fr class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=es href=https://kubernetes.io/es/docs/setup/custom-cloud/><link rel=alternate hreflang=ru href=https://kubernetes.io/ru/docs/setup/custom-cloud/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://kubernetes.io/fr/docs/setup/custom-cloud/><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>Solutions Cloud personnalisées | Kubernetes</title><meta property="og:title" content="Solutions Cloud personnalisées"><meta property="og:description" content="Solutions Cloud personnalisées"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.io/fr/docs/setup/custom-cloud/"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="Solutions Cloud personnalisées"><meta itemprop=description content="Solutions Cloud personnalisées"><meta name=twitter:card content="summary"><meta name=twitter:title content="Solutions Cloud personnalisées"><meta name=twitter:description content="Solutions Cloud personnalisées"><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content="Solutions Cloud personnalisées"><meta property="og:description" content="Solutions Cloud personnalisées"><meta name=twitter:description content="Solutions Cloud personnalisées"><meta property="og:url" content="https://kubernetes.io/fr/docs/setup/custom-cloud/"><meta property="og:title" content="Solutions Cloud personnalisées"><meta name=twitter:title content="Solutions Cloud personnalisées"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/fr/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/fr/docs/>Documentation</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/fr/blog/>Blog de Kubernetes</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/fr/partners/>Partenaires</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/fr/community/>Communauté</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/fr/case-studies/>Études de cas</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Versions</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/fr/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/fr/docs/setup/custom-cloud/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/fr/docs/setup/custom-cloud/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/fr/docs/setup/custom-cloud/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/fr/docs/setup/custom-cloud/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/fr/docs/setup/custom-cloud/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Français (French)</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/es/docs/setup/custom-cloud/>Español (Spanish)</a>
<a class=dropdown-item href=/ru/docs/setup/custom-cloud/>Русский (Russian)</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>Version imprimable multipages.
<a href=# onclick="return print(),!1">Cliquer ici pour imprimer</a>.</p><p><a href=/fr/docs/setup/custom-cloud/>Retour à la version par défaut</a>.</p></div><h1 class=title>Solutions Cloud personnalisées</h1><div class=lead>Solutions Cloud personnalisées</div><ul><li>1: <a href=#pg-296711f0f3b239d2d549acc6ba48190e>CoreOS sur AWS ou GCE</a></li><li>2: <a href=#pg-b5fede6c0a528c69bb32a7bf68641aa1>Installer Kubernetes avec Kubespray (on-premises et fournisseurs de cloud)</a></li><li>3: <a href=#pg-750e22dae37d8ac366b101811e01cc34>Installer Kubernetes sur AWS avec kops</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-296711f0f3b239d2d549acc6ba48190e>1 - CoreOS sur AWS ou GCE</h1><div class=lead>Installation Kubernetes CoreOS sur AWS GCE</div><p>Il existe plusieurs guides permettant d'utiliser Kubernetes avec <a href=https://coreos.com/kubernetes/docs/latest/>CoreOS</a>.</p><h2 id=guides-officiels-coreos>Guides officiels CoreOS</h2><p>Ces guides sont maintenus par CoreOS et déploient Kubernetes à la "façon CoreOS" avec du TLS, le composant complémentaire pour le DNS interne, etc. Ces guides passent les tests de conformité Kubernetes et nous vous recommendons de [les tester vous-même] (<a href=https://coreos.com/kubernetes/docs/latest/conformance-tests.html)>https://coreos.com/kubernetes/docs/latest/conformance-tests.html)</a>.</p><ul><li><p><a href=https://coreos.com/kubernetes/docs/latest/kubernetes-on-aws.html><strong>Multi-noeuds sur AWS</strong></a></p><p>Guide et outil en ligne de commande pour créer un cluster multi-noeuds sur AWS.
CloudFormation est utilisé pour créer un noeud maitre ("master") et plusieurs noeuds de type "worker".</p></li><li><p><a href=https://coreos.com/kubernetes/docs/latest/kubernetes-on-baremetal.html#automated-provisioning><strong>Multi-noeuds sur serveurs physiques (Bare Metal)</strong></a></p><p>Guide et service HTTP / API pour l'initialisation et l'installation d’un cluster à plusieurs nœuds bare metal à partir d'un PXE.
<a href=https://coreos.com/ignition/docs/latest/>Ignition</a> est utilisé pour provisionner un cluster composé d'un master et de plusieurs workers lors du démarrage initial des serveurs.</p></li><li><p><a href=https://coreos.com/kubernetes/docs/latest/kubernetes-on-vagrant.html><strong>Multi-noeuds sur Vagrant</strong></a></p><p>Guide pour l'installation d'un cluster multi-noeuds sur Vagrant.
L'outil de déploiement permet de configurer indépendemment le nombre de noeuds etcd, masters et workers afin d'obtenir un control plane en haute disponibilité.</p></li><li><p><a href=https://coreos.com/kubernetes/docs/latest/kubernetes-on-vagrant-single.html><strong>Noeud unique sur Vagrant</strong></a></p><p>C'est la façon la plus rapide d'installer un environnement de développement local Kubernetes.
Il suffit simplement de <code>git clone</code>, <code>vagrant up</code> puis configurer <code>kubectl</code>.</p></li><li><p><a href=https://coreos.com/kubernetes/docs/latest/getting-started.html><strong>Guide complet pas à pas</strong></a></p><p>Un guide générique qui permet de déployer un cluster en haute disponibilité (avec du TLS) sur n'importe cloud ou sur du bare metal.
Répéter les étapes pour obtenir plus de noeuds master ou worker</p></li></ul><h2 id=guide-de-la-communauté>Guide de la communauté</h2><p>Ces guides sont maintenus par des membres de la communauté et couvrent des besoins et cas d'usages spécifiques. Ils proposent différentes manières de configurer Kubernetes sur CoreOS.</p><ul><li><p><a href=https://github.com/rimusz/coreos-multi-node-k8s-gce/blob/master/README.md><strong>Cluster multi-noeuds facile sur Google Compute Engine</strong></a></p><p>Installation scriptée d'un master unique et de plusieurs workers sur GCE.
Les composants Kubernetes sont gérés par <a href=https://github.com/coreos/fleet>fleet</a></p></li><li><p><a href=https://github.com/errordeveloper/weave-demos/blob/master/poseidon/README.md><strong>Cluster multi-noeuds en utilisant cloud-config et Weave sur Vagrant</strong></a></p><p>Configure un cluster de 3 machines sur Vagrant, le réseau du cluster étant fourni par Weave.</p></li><li><p><a href=https://github.com/pires/kubernetes-vagrant-coreos-cluster/blob/master/README.md><strong>Cluster multi-noeuds en utilisant cloud-config et Vagrant</strong></a></p><p>Configure un cluster local composé d'un master et de plusieurs workers sur l'hyperviseur de votre choix: VirtualBox, Parallels, ou VMware</p></li><li><p><a href=https://github.com/rimusz/kube-solo-osx/blob/master/README.md><strong>Cluster d'un seul noeud en utilisant une application macOS</strong></a></p><p>Guide permettant d'obtenir un cluster d'un seul noeud faisant office de master et worker et contrôlé par une application macOS menubar.
(basé sur xhyve et CoreOS)</p></li><li><p><a href=https://github.com/rimusz/coreos-osx-gui-kubernetes-cluster/blob/master/README.md><strong>Cluster multi-noeuds avec Vagrant et fleet en utilisant une petite application macOS</strong></a></p><p>Guide permettant d'obtenir un cluster composé d'un master, de plusieurs workers contrôlés par une application macOS menubar.</p></li><li><p><a href=https://github.com/xavierbaude/VMware-coreos-multi-nodes-Kubernetes><strong>Multi-node cluster using cloud-config, CoreOS and VMware ESXi</strong></a></p><p>Configure un cluster composé d'un master et de plusieurs workers sur VMWare ESXi</p></li><li><p><a href=https://github.com/johscheuer/theforeman-coreos-kubernetes><strong>Cluster Unique/Multi noeuds en utilisant cloud-config, CoreOS et Foreman</strong></a></p><p>Configure un cluster composé d'un ou de plusieurs noeuds avec <a href=https://theforeman.org>Foreman</a>.</p></li></ul><h2 id=niveau-de-support>Niveau de support</h2><table><thead><tr><th>IaaS Provider</th><th>Config. Mgmt</th><th>OS</th><th>Networking</th><th>Docs</th><th>Conforms</th><th>Support Level</th></tr></thead><tbody><tr><td>GCE</td><td>CoreOS</td><td>CoreOS</td><td>flannel</td><td><a href=/docs/getting-started-guides/coreos>docs</a></td><td></td><td>Community (<a href=https://github.com/pires>@pires</a>)</td></tr><tr><td>Vagrant</td><td>CoreOS</td><td>CoreOS</td><td>flannel</td><td><a href=/docs/getting-started-guides/coreos>docs</a></td><td></td><td>Community (<a href=https://github.com/pires>@pires</a>, <a href=https://github.com/AntonioMeireles>@AntonioMeireles</a>)</td></tr></tbody></table><p>Pour le niveau de support de toutes les solutions se référer au <a href=/docs/getting-started-guides/#table-of-solutions>Tableau des solutions</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b5fede6c0a528c69bb32a7bf68641aa1>2 - Installer Kubernetes avec Kubespray (on-premises et fournisseurs de cloud)</h1><div class=lead>Installation de Kubernetes avec Kubespray</div><p>Cette documentation permet d'installer rapidement un cluster Kubernetes hébergé sur GCE, Azure, Openstack, AWS, vSphere, Oracle Cloud Infrastructure (expérimental) ou sur des serveurs physiques (bare metal) grâce à <a href=https://github.com/kubernetes-incubator/kubespray>Kubespray</a>.</p><p>Kubespray se base sur des outils de provisioning, des <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/docs/ansible.md>paramètres</a> et playbooks <a href=https://docs.ansible.com/>Ansible</a> ainsi que sur des connaissances spécifiques à Kubernetes et l'installation de systèmes d'exploitation afin de fournir:</p><ul><li>Un cluster en haute disponibilité</li><li>des composants modulables</li><li>Le support des principales distributions Linux:<ul><li>Container Linux de CoreOS</li><li>Debian Jessie, Stretch, Wheezy</li><li>Ubuntu 16.04, 18.04, 20.04, 22.04</li><li>CentOS/RHEL 7, 8</li><li>Fedora/CentOS Atomic</li><li>openSUSE Leap 42.3/Tumbleweed</li></ul></li><li>des tests d'intégration continue</li></ul><p>Afin de choisir l'outil le mieux adapté à votre besoin, veuillez lire <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/docs/comparisons.md>cette comparaison</a> avec <a href=/docs/admin/kubeadm/>kubeadm</a> et <a href=../kops>kops</a>.</p><h2 id=créer-un-cluster>Créer un cluster</h2><h3 id=1-5-prérequis>(1/5) Prérequis</h3><p>Les serveurs doivent être installés en s'assurant des éléments suivants:</p><ul><li><strong>Ansible v2.11 (ou version plus récente) et python-netaddr installés sur la machine qui exécutera les commandes Ansible</strong></li><li><strong>Jinja 2.11 (ou version plus récente) est nécessaire pour exécuter les playbooks Ansible</strong></li><li>Les serveurs cibles doivent avoir <strong>accès à Internet</strong> afin de télécharger les images Docker. Autrement, une configuration supplémentaire est nécessaire, (se référer à <a href=https://github.com/kubernetes-sigs/kubespray/blob/master/docs/downloads.md#offline-environment>Offline Environment</a>)</li><li>Les serveurs cibles doivent être configurés afin d'autoriser le transfert IPv4 (<strong>IPv4 forwarding</strong>)</li><li><strong>Votre clé ssh doit être copiée</strong> sur tous les serveurs faisant partie de votre inventaire Ansible.</li><li>La configuration du <strong>pare-feu n'est pas gérée</strong>. Vous devrez vous en charger en utilisant votre méthode habituelle. Afin d'éviter tout problème pendant l'installation nous vous conseillons de le désacttiver.</li><li>Si Kubespray est exécuté avec un utilisateur autre que "root", une méthode d'autorisation appropriée devra être configurée sur les serveurs cibles (exemple: sudo). Il faudra aussi utiliser le paramètre <code>ansible_become</code> ou ajouter <code>--become</code> ou <code>b</code> à la ligne de commande.</li></ul><p>Afin de vous aider à préparer votre de votre environnement, Kubespray fournit les outils suivants:</p><ul><li>Scripts <a href=https://www.terraform.io/>Terraform</a> pour les fournisseurs de cloud suivants:<ul><li><a href=https://github.com/kubernetes-incubator/kubespray/tree/master/contrib/terraform/aws>AWS</a></li><li><a href=https://github.com/kubernetes-incubator/kubespray/tree/master/contrib/terraform/openstack>OpenStack</a></li></ul></li></ul><h3 id=2-5-construire-un-fichier-d-inventaire-ansible>(2/5) Construire un fichier d'inventaire Ansible</h3><p>Lorsque vos serveurs sont disponibles, créez un fichier d'inventaire Ansible (<a href=https://docs.ansible.com/ansible/latest/network/getting_started/first_inventory.html>inventory</a>).
Vous pouvez le créer manuellement ou en utilisant un script d'inventaire dynamique. Pour plus d'informations se référer à <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/docs/getting-started.md#building-your-own-inventory>Building your own inventory</a>.</p><h3 id=3-5-préparation-au-déploiement-de-votre-cluster>(3/5) Préparation au déploiement de votre cluster</h3><p>Kubespray permet de personnaliser de nombreux éléments:</p><ul><li>Choix du mode: kubeadm ou non-kubeadm</li><li>Plugins CNI (réseau)</li><li>Configuration du DNS</li><li>Choix du control plane: natif/binaire ou dans un conteneur docker/rkt</li><li>Version de chaque composant</li><li>"route reflectors" Calico</li><li>Moteur de conteneur<ul><li>docker</li><li>rkt</li><li>cri-o</li></ul></li><li>Méthode de génération des certificats (<strong>Vault n'étant plus maintenu</strong>)</li></ul><p>Ces paramètres Kubespray peuvent être définis dans un fichier de <a href=http://docs.ansible.com/ansible/playbooks_variables.html>variables</a>.
Si vous venez juste de commencer à utiliser Kubespray nous vous recommandons d'utiliser les paramètres par défaut pour déployer votre cluster et découvrir Kubernetes</p><h3 id=4-5-déployer-un-cluster>(4/5) Déployer un Cluster</h3><p>Vous pouvez ensuite lancer le déploiement de votre cluster:</p><p>Déploiement du cluster en utilisant l'outil en ligne de commande <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/docs/getting-started.md#starting-custom-deployment>ansible-playbook</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ansible-playbook -i your/inventory/hosts.ini cluster.yml -b -v <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>  --private-key<span style=color:#666>=</span>~/.ssh/private_key
</span></span></code></pre></div><p>Pour des déploiements plus importants (>100 noeuds) quelques <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/docs/large-deployments.md>ajustements</a> peuvent être nécessaires afin d'obtenir de meilleurs résultats.</p><h3 id=5-5-vérifier-le-déploiement>(5/5) Vérifier le déploiement</h3><p>Kubespray fournit le moyen de vérifier la connectivité inter-pods ainsi que la résolution DNS grâce à <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/docs/netcheck.md>Netchecker</a>.
Les pods netchecker-agents s'assurent que la résolution DNS (services Kubernetes) ainsi que le ping entre les pods fonctionnent correctement.
Ces pods reproduisent un comportement similaire à celui des autres applications et offrent un indicateur de santé du cluster.</p><h2 id=opérations-sur-le-cluster>Opérations sur le cluster</h2><p>Kubespray fournit des playbooks supplémentaires qui permettent de gérer votre cluster: <em>scale</em> et <em>upgrade</em>.</p><h3 id=mise-à-l-échelle-du-cluster>Mise à l'échelle du cluster</h3><p>Vous pouvez ajouter des noeuds à votre cluster en exécutant le playbook <code>scale</code>. Pour plus d'informations se référer à <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/docs/getting-started.md#adding-nodes>Adding nodes</a>.
vous pouvez retirer des noeuds de votre cluster en exécutant le playbook <code>remove-node</code>. Se référer à <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/docs/getting-started.md#remove-nodes>Remove nodes</a>.</p><h3 id=mise-à-jour-du-cluster>Mise à jour du cluster</h3><p>Vous pouvez mettre à jour votre cluster en exécutant le playbook <code>upgrade-cluster</code>. Pour plus d'informations se référer à <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/docs/upgrades.md>Upgrades</a>.</p><h2 id=nettoyage>Nettoyage</h2><p>Vous pouvez réinitialiser vos noeuds et supprimer tous les composants installés par Kubespray en utilisant le playbook <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/reset.yml>reset</a>.</p><div class="alert alert-warning caution callout" role=alert><strong>Avertissement:</strong> Quand vous utilisez le playbook <code>reset</code>, assurez-vous de ne pas cibler accidentellement un cluster de production !</div><h2 id=retours>Retours</h2><ul><li>Channel Slack: <a href=https://kubernetes.slack.com/messages/kubespray/>#kubespray</a></li><li><a href=https://github.com/kubernetes-incubator/kubespray/issues>Issues GitHub</a></li></ul><h2 id=a-suivre>A suivre</h2><p>Jetez un oeil aux travaux prévus sur Kubespray: <a href=https://github.com/kubernetes-incubator/kubespray/blob/master/docs/roadmap.md>roadmap</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-750e22dae37d8ac366b101811e01cc34>3 - Installer Kubernetes sur AWS avec kops</h1><div class=lead>Installation Kubernetes avec kops sur AWS</div><p>Cette documentation pour un démarrage rapide montre comment facilement installer un cluster Kubernetes sur AWS.
L'outil utilisé est <a href=https://github.com/kubernetes/kops><code>kops</code></a>.</p><p>kops est un système de provisionnement dont les principes sont:</p><ul><li>Une installation totalement automatisée</li><li>Utilisation du DNS pour identifier les clusters</li><li>Auto-guérison: tous les composants tournent dans des groupe de mise à l'échelle automatique (auto-scaling)</li><li>Support de plusieurs systèmes d'exploitation (Debian, Ubuntu 16.04 supportés, Centos & RHEL, Amazon Linux et CoreOS) - se référer à <a href=https://github.com/kubernetes/kops/blob/master/docs/images.md>images.md</a></li><li>Haute disponibilité - se référer à <a href=https://github.com/kubernetes/kops/blob/master/docs/high_availability.md>high_availability.md</a></li><li>Peut provisionner directement, ou générer des manifests terraform - se référer à <a href=https://github.com/kubernetes/kops/blob/master/docs/terraform.md>terraform.md</a></li></ul><p>Si ces principes ne vous conviennent pas, vous préférerez probablement construire votre propre cluster selon votre convenance grâce à <a href=/docs/admin/kubeadm/>kubeadm</a>.</p><h2 id=créer-un-cluster>Créer un cluster</h2><h3 id=1-5-installer-kops>(1/5) Installer kops</h3><h4 id=pré-requis>Pré-requis</h4><p>Il est nécessaire d'avoir <a href=/docs/tasks/tools/install-kubectl/>kubectl</a> d'installé pour que kops puisse fonctionner.</p><h4 id=installation>Installation</h4><p>Télécharger kops à partir de la <a href=https://github.com/kubernetes/kops/releases>page de releases</a> (Il est aussi facile à construire à partir des sources):</p><p>Sur macOS:</p><p>Téléchargez la dernière version avec la commande:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -LO https://github.com/kubernetes/kops/releases/download/<span style=color:#a2f;font-weight:700>$(</span>curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d <span style=color:#b44>&#39;&#34;&#39;</span> -f 4<span style=color:#a2f;font-weight:700>)</span>/kops-darwin-amd64
</span></span></code></pre></div><p>Pour télécharger une version spécifique, remplacez le</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a2f;font-weight:700>$(</span>curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d <span style=color:#b44>&#39;&#34;&#39;</span> -f 4<span style=color:#a2f;font-weight:700>)</span>
</span></span></code></pre></div><p>partie de la commande avec la version spécifique.</p><p>Par exemple, pour télécharger la version 1.15.0 de kops, tapez:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -LO  https://github.com/kubernetes/kops/releases/download/1.15.0/kops-darwin-amd64
</span></span></code></pre></div><p>Rendre le binaire exécutable kops.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>chmod +x kops-darwin-amd64
</span></span></code></pre></div><p>Déplacez le fichier binaire kops dans votre chemin.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo mv kops-darwin-amd64 /usr/local/bin/kops
</span></span></code></pre></div><p>Vous pouvez également installer kops en utilisant [Homebrew] (<a href=https://brew.sh/)>https://brew.sh/)</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>brew update <span style=color:#666>&amp;&amp;</span> brew install kops
</span></span></code></pre></div><p>Sur Linux:</p><p>Téléchargez la dernière version avec la commande:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -LO https://github.com/kubernetes/kops/releases/download/<span style=color:#a2f;font-weight:700>$(</span>curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d <span style=color:#b44>&#39;&#34;&#39;</span> -f 4<span style=color:#a2f;font-weight:700>)</span>/kops-linux-amd64
</span></span></code></pre></div><p>Pour télécharger une version spécifique, remplacez le</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a2f;font-weight:700>$(</span>curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d <span style=color:#b44>&#39;&#34;&#39;</span> -f 4<span style=color:#a2f;font-weight:700>)</span>
</span></span></code></pre></div><p>partie de la commande avec la version spécifique.</p><p>Par exemple, pour télécharger la version 1.15.0 de kops, tapez:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -LO  https://github.com/kubernetes/kops/releases/download/1.15.0/kops-linux-amd64
</span></span></code></pre></div><p>Rendre le binaire exécutable kops</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>chmod +x kops-linux-amd64
</span></span></code></pre></div><p>Déplacez le fichier binaire kops dans votre chemin.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo mv kops-linux-amd64 /usr/local/bin/kops
</span></span></code></pre></div><p>Vous pouvez également installer kops en utilisant [Homebrew] (<a href=https://docs.brew.sh/Homebrew-on-Linux)>https://docs.brew.sh/Homebrew-on-Linux)</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>brew update <span style=color:#666>&amp;&amp;</span> brew install kops
</span></span></code></pre></div><h3 id=2-5-créer-un-domaine-route53-pour-votre-cluster>(2/5) Créer un domaine route53 pour votre cluster</h3><p>kops utilise le DNS pour la découverte, que ce soit à l'intérieur du cluster ou pour pouvoir communiquer avec l'API de kubernetes à partir des clients.</p><p>Pour kops le nom du cluster doit impérativement être un nom de domaine valide.
De cette façon vous ne confondrez pas vos cluster et vous pourrez les partager avec vos collègues sans ambiguïté. Par ailleurs vous pourrez vous y connecter sans avoir à vous rappeler une adresse IP.</p><p>Vous pouvez, et vous devriez certainement, utiliser des sous-domaines afin de séparer vos clusters.
Dans notre exemple nous utiliserons <code>useast1.dev.example.com</code>. Le point d'accès au serveur API sera donc <code>api.useast1.dev.example.com</code>.</p><p>Une zone hébergée Route53 peut servir les sous-domaines. Votre zone hébergée pourrait être <code>useast1.dev.example.com</code>,
mais aussi <code>dev.example.com</code> ou même <code>example.com</code>. kops fonctionne avec n'importe lequel d'entre eux, le choix dépend de vos contraintes d'organisation (ex: Vous êtes autorisés à créer des enregistrements dns dans <code>dev.example.com</code> mais pas dans <code>example.com</code>)</p><p>Supposons que vous utilisiez <code>dev.example.com</code> comme zone hébergée. Vous créeriez cette zone hébergée en utilisant la <a href=http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/CreatingNewSubdomain.html>méthode normal</a>, ou avec une ligne de commande telle que <code>aws route53 create-hosted-zone --name dev.example.com --caller-reference 1</code>.</p><p>Vous devrez ensuite configurer vos enregistrements NS dans le domaine parent afin que vous puissiez résoudre dans ce domaine.
Vous créeriez donc des enregistrements NS dans le domaine <code>example.com</code> pour <code>dev</code>.
S'il s'agit d'un nom de domaine racine, vous devrez configurer les enregistrements NS chez votre hébergeur de nom de domaine (là où vous avez acheté votre nom de domaine <code>example.com</code>).</p><p>Cette étape est délicate, soyez vigilants (c’est la première cause de problèmes !). Vous pouvez vérifier que
votre cluster est configuré correctement avec l'outil dig, en exécutant:</p><p><code>dig NS dev.example.com</code></p><p>Vous devriez voir les 4 enregistrements NS attribués à votre zone hébergée sur Route53.</p><h3 id=3-5-créez-un-conteneur-bucket-s3-pour-stocker-l-état-de-vos-clusters>(3/5) Créez un conteneur (bucket) S3 pour stocker l'état de vos clusters.</h3><p>kops vous permet de gérer vos clusters même lorsque ceux-ci sont déjà installés. Pour ce faire, il est nécessaire de conserver une trace des clusters que vous avez créé, avec leur configuration, les clés qu’ils utilisent, etc. Ces informations sont stockées dans un bucket S3. Les autorisations S3 sont utilisées pour contrôler l'accès au bucket.</p><p>Plusieurs clusters peuvent utiliser le même bucket S3 et vous pouvez aussi le partager avec vos collègues qui
administrer les mêmes clusters - c'est beaucoup plus facile que de faire circuler des fichiers kubecfg.
Cependant quiconque ayant accès au bucket S3 aura un accès complet (permissions élevées) à tous vos clusters. Vous souhaiterez donc limiter l'accès à l'équipe opérationnelle.</p><p>Plus généralement, vous auriez un bucket S3 pour chaque équipe ops (et le nom correspondrait souvent
au nom de la zone hébergée ci-dessus!)</p><p>Dans notre exemple, nous avons choisi <code>dev.example.com</code> comme zone hébergée. Nous allons donc choisir <code>clusters.dev.example.com</code> comm le nom du bucket S3.</p><ul><li><p>Exportez <code>AWS_PROFILE</code> (si vous devez sélectionner un profil pour que l'outil en ligne de commande d'AWS fonctionne).</p></li><li><p>Créez le compartiment S3 en utilisant <code>aws s3 mb s3://clusters.dev.example.com</code></p></li><li><p>Vous pouvez <code>export KOPS_STATE_STORE=s3://clusters.dev.example.com</code> afin que kops utilise cet emplacement par défaut.
  Nous vous suggérons de le mettre dans votre profil bash ou similaire.</p></li></ul><h3 id=4-5-construisez-votre-configuration-de-cluster>(4/5) Construisez votre configuration de cluster</h3><p>Exécutez "kops create cluster" pour créer votre configuration de cluster:</p><p><code>kops create cluster --zones=us-east-1c useast1.dev.example.com</code></p><p>kops créera la configuration pour votre cluster. Notez que cela génère uniquement la configuration, la création des ressources cloud se fait à l'étape suivante avec <code>kops update cluster</code>. Cela vous permettra d'analyser la configuration ou de la modifier avant de l'appliquer.</p><p>Voici quelques commandes qui vous permettent de visualiser ou éditer:</p><ul><li>Listez vos clusters avec: <code>kops get cluster</code></li><li>Éditez ce cluster avec: <code>kops edit cluster useast1.dev.example.com</code></li><li>Modifiez votre groupe d'instances de nœuds: <code>kops edit ig --name=useast1.dev.example.com nodes</code></li><li>Éditez votre groupe d'instances maître (master): <code>kops edit ig --name=useast1.dev.example.com master-us-east-1c</code></li></ul><p>Si vous utilisez kops pour la première fois, prenez quelques minutes pour les essayer! Un groupe d'instances est un
ensemble d'instances, qui seront enregistrées en tant que noeuds kubernetes. Sur AWS, cela est implémenté via des groupes de mise à l'échelle automatique (auto-scaling).
Vous pouvez avoir plusieurs groupes d'instances, par exemple si vous voulez des nœuds combinant des instances ponctuelles (spot instances) et à la demande, ou éventuellement des instances GPU et non-GPU.</p><h3 id=5-5-créer-le-cluster-dans-aws>(5/5) Créer le cluster dans AWS</h3><p>Exécutez "kops update cluster" pour créer votre cluster dans AWS :</p><p><code>kops update cluster useast1.dev.example.com --yes</code></p><p>Cela prend quelques secondes à s'exécuter, et ensuite votre cluster prendra probablement quelques minutes pour être réellement opérationnel.
<code>kops update cluster</code> sera l'outil que vous utiliserez à chaque fois que vous modifierez la configuration de votre cluster.
Il applique les modifications que vous avez apportées à la configuration sur votre cluster (reconfiguration d'AWS ou de kubernetes au besoin).</p><p>Par exemple, après un <code>kops edit ig nodes</code>, puis un <code>kops update cluster --yes</code> pour appliquer votre configuration, parfois, vous devrez également exécuter un <code>kops rolling-update cluster</code> pour déployer la configuration immédiatement.</p><p>Sans l'argument <code>--yes</code>, <code>kops update cluster</code> vous montrera un aperçu de ce qu’il va faire. C'est pratique
pour les clusters de production !</p><h3 id=explorer-d-autres-composants-additionnels-add-ons>Explorer d'autres composants additionnels (add-ons)</h3><p>Reportez-vous à la [liste des add-ons] (/docs/concepts/cluster-administration/addons/) pour explorer d'autres add-ons, y compris des outils de journalisation, de surveillance, de stratégie réseau, de visualisation ou de contrôle de votre cluster Kubernetes.</p><h2 id=nettoyer>Nettoyer</h2><ul><li>Pour supprimer votre cluster: <code>kops delete cluster useast1.dev.example.com --yes</code></li></ul><h2 id=retour-d-information>Retour d'information</h2><ul><li>Channel Slack: [#kops-users] (<a href=https://kubernetes.slack.com/messages/kops-users/>https://kubernetes.slack.com/messages/kops-users/</a>)</li><li>[Problèmes GitHub] (<a href=https://github.com/kubernetes/kops/issues>https://github.com/kubernetes/kops/issues</a>)</li></ul><h2 id=a-suivre>A suivre</h2><ul><li>En apprendre davantages sur les <a href=/docs/concepts/>concepts</a> Kubernetes et <a href=/docs/user-guide/kubectl-overview/><code>kubectl</code></a>.</li><li>En savoir plus sur les <a href=https://github.com/kubernetes/kops>utilisations avancées</a> de <code>kops</code>.</li><li>Pour les bonnes pratiques et les options de configuration avancées de <code>kops</code> se référer à la <a href=https://github.com/kubernetes/kops>documentation</a></li></ul></div></main></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/fr/docs/home/>Accueil</a>
<a class=text-white href=/fr/blog/>Blog</a>
<a class=text-white href=/fr/partners/>Partenaires</a>
<a class=text-white href=/fr/community/>Communauté</a>
<a class=text-white href=/fr/case-studies/>Études de cas</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a></small><br><small class=text-white>Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage class=light-text>Trademark Usage page</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>