<!doctype html><html lang=ja class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=en href=https://kubernetes.io/docs/setup/learning-environment/><link rel=alternate hreflang=zh-cn href=https://kubernetes.io/zh-cn/docs/setup/learning-environment/><link rel=alternate hreflang=ko href=https://kubernetes.io/ko/docs/setup/learning-environment/><link rel=alternate hreflang=fr href=https://kubernetes.io/fr/docs/setup/learning-environment/><link rel=alternate hreflang=id href=https://kubernetes.io/id/docs/setup/learning-environment/><link rel=alternate hreflang=hi href=https://kubernetes.io/hi/docs/setup/learning-environment/><link rel=alternate hreflang=ru href=https://kubernetes.io/ru/docs/setup/learning-environment/><link rel=alternate hreflang=uk href=https://kubernetes.io/uk/docs/setup/learning-environment/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://kubernetes.io/ja/docs/setup/learning-environment/><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>学習環境 | Kubernetes</title><meta property="og:title" content="学習環境"><meta property="og:description" content="プロダクショングレードのコンテナ管理基盤"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.io/ja/docs/setup/learning-environment/"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="学習環境"><meta itemprop=description content="プロダクショングレードのコンテナ管理基盤"><meta name=twitter:card content="summary"><meta name=twitter:title content="学習環境"><meta name=twitter:description content="プロダクショングレードのコンテナ管理基盤"><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content><meta property="og:description" content><meta name=twitter:description content><meta property="og:url" content="https://kubernetes.io/ja/docs/setup/learning-environment/"><meta property="og:title" content="学習環境"><meta name=twitter:title content="学習環境"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/ja/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/ja/docs/>ドキュメント</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/ja/blog/>Blogs</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/ja/training/>トレーニング</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/ja/partners/>パートナー</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/ja/community/>コミュニティ</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/ja/case-studies/>ケーススタディ</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>バージョン</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/ja/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/ja/docs/setup/learning-environment/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/ja/docs/setup/learning-environment/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/ja/docs/setup/learning-environment/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/ja/docs/setup/learning-environment/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/ja/docs/setup/learning-environment/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>日本語 (Japanese)</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/setup/learning-environment/>English</a>
<a class=dropdown-item href=/zh-cn/docs/setup/learning-environment/>中文 (Chinese)</a>
<a class=dropdown-item href=/ko/docs/setup/learning-environment/>한국어 (Korean)</a>
<a class=dropdown-item href=/fr/docs/setup/learning-environment/>Français (French)</a>
<a class=dropdown-item href=/id/docs/setup/learning-environment/>Bahasa Indonesia</a>
<a class=dropdown-item href=/hi/docs/setup/learning-environment/>हिन्दी (Hindi)</a>
<a class=dropdown-item href=/ru/docs/setup/learning-environment/>Русский (Russian)</a>
<a class=dropdown-item href=/uk/docs/setup/learning-environment/>Українська (Ukrainian)</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>これは、このセクションの複数ページの印刷可能なビューです。
<a href=# onclick="return print(),!1">印刷するには、ここをクリックしてください</a>.</p><p><a href=/ja/docs/setup/learning-environment/>このページの通常のビューに戻る</a>.</p></div><h1 class=title>学習環境</h1><ul><li>1: <a href=#pg-8b996bf57bd8e67340235da1a1fb8e95>Minikubeを使用してローカル環境でKubernetesを動かす</a></li><li>2: <a href=#pg-861dedab439fb9a133b35009a34655ec>Kindを使用してKubernetesをインストールする</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-8b996bf57bd8e67340235da1a1fb8e95>1 - Minikubeを使用してローカル環境でKubernetesを動かす</h1><p>Minikubeはローカル環境でKubernetesを簡単に実行するためのツールです。Kubernetesを試したり日々の開発への使用を検討するユーザー向けに、PC上のVM内でシングルノードのKubernetesクラスタを実行することができます。</p><h2 id=minikubeの機能>Minikubeの機能</h2><p>MinikubeのサポートするKubernetesの機能:</p><ul><li>DNS</li><li>NodePort</li><li>ConfigMapとSecret</li><li>ダッシュボード</li><li>コンテナランタイム: Docker、<a href=https://cri-o.io/>CRI-O</a>および<a href=https://github.com/containerd/containerd>containerd</a></li><li>CNI (Container Network Interface) の有効化</li><li>Ingress</li></ul><h2 id=インストール>インストール</h2><p>ツールのインストールについて知りたい場合は、公式の<a href=https://minikube.sigs.k8s.io/docs/start/>Get Started!</a>のガイドに従ってください。</p><h2 id=クイックスタート>クイックスタート</h2><p>これはMinikubeの起動、使用、削除をローカルで実施する簡単なデモです。下記の手順に従って、Minikubeを起動し試してください。</p><ol><li><p>Minikubeを起動し、クラスターを作成します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube start
</span></span></code></pre></div><p>出力はこのようになります:</p><pre tabindex=0><code>Starting local Kubernetes cluster...
Running pre-create checks...
Creating machine...
Starting local Kubernetes cluster...
</code></pre><p>特定のKubernetesのバージョン、VM、コンテナランタイム上でクラスターを起動するための詳細は、<a href=#starting-a-cluster>クラスターの起動</a>を参照してください。</p></li><li><p>kubectlを使用してクラスターと対話できるようになります。詳細は<a href=#interacting-with-your-cluster>クラスターに触れてみよう</a>を参照してください。</p><p>単純なHTTPサーバーである<code>echoserver</code>という既存のイメージを使用して、Kubernetes Deploymentを作りましょう。そして<code>--port</code>を使用して8080番ポートで公開しましょう。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl create deployment hello-minikube --image<span style=color:#666>=</span>k8s.gcr.io/echoserver:1.10
</span></span></code></pre></div><p>出力はこのようになります:</p><pre tabindex=0><code>deployment.apps/hello-minikube created
</code></pre></li><li><p><code>hello-minikube</code>Deploymentに接続するために、Serviceとして公開します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl expose deployment hello-minikube --type<span style=color:#666>=</span>NodePort --port<span style=color:#666>=</span><span style=color:#666>8080</span>
</span></span></code></pre></div><p><code>--type=NodePort</code>オプションで、Serviceのタイプを指定します。</p><p>出力はこのようになります:</p><pre tabindex=0><code>service/hello-minikube exposed
</code></pre></li><li><p><code>hello-minikube</code>Podが起動開始されましたが、公開したService経由で接続する前にPodが起動完了になるまで待つ必要があります。</p><p>Podが稼働しているか確認します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod
</span></span></code></pre></div><p><code>STATUS</code>に<code>ContainerCreating</code>と表示されている場合、Podはまだ作成中です:</p><pre tabindex=0><code>NAME                              READY     STATUS              RESTARTS   AGE
hello-minikube-3383150820-vctvh   0/1       ContainerCreating   0          3s
</code></pre><p><code>STATUS</code>に<code>Running</code>と表示されている場合、Podは稼働中です:</p><pre tabindex=0><code>NAME                              READY     STATUS    RESTARTS   AGE
hello-minikube-3383150820-vctvh   1/1       Running   0          13s
</code></pre></li><li><p>Serviceの詳細を確認するため、公開したServiceのURLを取得します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube service hello-minikube --url
</span></span></code></pre></div></li><li><p>ローカル環境のクラスターについて詳細を確認するには、出力から得たURLをブラウザー上でコピーアンドペーストしてください。</p><p>出力はこのようになります:</p><pre tabindex=0><code>Hostname: hello-minikube-7c77b68cff-8wdzq

Pod Information:
 -no pod information available-

Server values:
 server_version=nginx: 1.13.3 - lua: 10008

Request Information:
 client_address=172.17.0.1
 method=GET
 real path=/
 query=
 request_version=1.1
 request_scheme=http
 request_uri=http://192.168.99.100:8080/

Request Headers:
	accept=*/*
	host=192.168.99.100:30674
	user-agent=curl/7.47.0

Request Body:
	-no body in request-
</code></pre><p>Serviceやクラスターをこれ以上稼働させない場合、削除する事ができます。</p></li><li><p><code>hello-minikube</code>Serviceを削除します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete services hello-minikube
</span></span></code></pre></div><p>出力はこのようになります:</p><pre tabindex=0><code>service &#34;hello-minikube&#34; deleted
</code></pre></li><li><p><code>hello-minikube</code>Deploymentを削除します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete deployment hello-minikube
</span></span></code></pre></div><p>出力はこのようになります:</p><pre tabindex=0><code>deployment.extensions &#34;hello-minikube&#34; deleted
</code></pre></li><li><p>ローカル環境のMinikubeクラスターを停止します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube stop
</span></span></code></pre></div><p>出力はこのようになります:</p><pre tabindex=0><code>Stopping &#34;minikube&#34;...
&#34;minikube&#34; stopped.
</code></pre><p>詳細は<a href=#stopping-a-cluster>クラスターの停止</a>を参照ください。</p></li><li><p>ローカルのMinikubeクラスターを削除します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube delete
</span></span></code></pre></div><p>出力はこのようになります:</p><pre tabindex=0><code>Deleting &#34;minikube&#34; ...
The &#34;minikube&#34; cluster has been deleted.
</code></pre><p>詳細は<a href=#deleting-a-cluster>クラスターの削除</a>を参照ください。</p></li></ol><h2 id=クラスターの管理>クラスターの管理</h2><h3 id=starting-a-cluster>クラスターの起動</h3><p><code>minikube start</code>コマンドを使用してクラスターを起動することができます。
このコマンドはシングルノードのKubernetesクラスターを実行する仮想マシンを作成・設定します。
また、このクラスターと通信する<a href=/ja/docs/reference/kubectl/overview/>kubectl</a>のインストールも設定します。</p><div class="alert alert-info note callout" role=alert><strong>備考:</strong><p>もしWebプロキシーを通している場合、そのプロキシー情報を<code>minikube start</code>コマンドに渡す必要があります:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#b8860b>https_proxy</span><span style=color:#666>=</span>&lt;my proxy&gt; minikube start --docker-env <span style=color:#b8860b>http_proxy</span><span style=color:#666>=</span>&lt;my proxy&gt; --docker-env <span style=color:#b8860b>https_proxy</span><span style=color:#666>=</span>&lt;my proxy&gt; --docker-env <span style=color:#b8860b>no_proxy</span><span style=color:#666>=</span>192.168.99.0/24
</span></span></code></pre></div><p>残念なことに、ただ環境変数を設定するだけではうまく動作しません。</p><p>Minikubeは"minikube"コンテキストも作成し、そのコンテキストをデフォルト設定としてkubectlに設定します。
あとでコンテキストを切り戻すには、このコマンドを実行してください: <code>kubectl config use-context minikube</code></p></div><h4 id=kubernetesバージョンの指定>Kubernetesバージョンの指定</h4><p><code>minikube start</code>コマンドに<code>--kubernetes-version</code>文字列を追加することで、
MinikubeにKubernetesの特定のバージョンを指定することができます。
例えば、v1.25.0のバージョンを実行するには以下を実行します:</p><pre tabindex=0><code>minikube start --kubernetes-version v1.25.0
</code></pre><h4 id=vmドライバーの指定>VMドライバーの指定</h4><p>もしVMドライバーを変更したい場合は、<code>--driver=&lt;enter_driver_name></code>フラグを<code>minikube start</code>に設定してください。例えば、コマンドは以下のようになります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube start --driver<span style=color:#666>=</span>&lt;driver_name&gt;
</span></span></code></pre></div><p>Minikubeは以下のドライバーをサポートしています:<div class="alert alert-info note callout" role=alert><strong>備考:</strong> サポートされているドライバーとプラグインのインストールの詳細については<a href=https://minikube.sigs.k8s.io/docs/reference/drivers/>DRIVERS</a>を参照してください。</div></p><ul><li>docker (<a href=https://minikube.sigs.k8s.io/docs/drivers/docker/>driver installation</a>)</li><li>virtualbox (<a href=https://minikube.sigs.k8s.io/docs/drivers/virtualbox/>driver installation</a>)</li><li>podman (<a href=https://minikube.sigs.k8s.io/docs/drivers/podman/>driver installation</a>) (実験的)</li><li>vmwarefusion</li><li>kvm2 (<a href=https://minikube.sigs.k8s.io/docs/reference/drivers/kvm2/>driver installation</a>)</li><li>hyperkit (<a href=https://minikube.sigs.k8s.io/docs/reference/drivers/hyperkit/>driver installation</a>)</li><li>hyperv (<a href=https://minikube.sigs.k8s.io/docs/reference/drivers/hyperv/>driver installation</a>)
注意: 以下のIPは動的であり、変更される可能性があります。IPは<code>minikube ip</code>で取得することができます。</li><li>vmware (<a href=https://minikube.sigs.k8s.io/docs/reference/drivers/vmware/>driver installation</a>) (VMware unified driver)</li><li>parallels (<a href=https://minikube.sigs.k8s.io/docs/reference/drivers/parallels/>driver installation</a>)</li><li>none (VMではなくホスト上でKubernetesコンポーネントを起動。このドライバーを使用するには<a class=glossary-tooltip title=Dockerは、コンテナとして知られる、オペレーティングシステムレベルでの仮想化を提供するソフトウェア技術です。 data-toggle=tooltip data-placement=top href=https://docs.docker.com/engine/ target=_blank aria-label=Docker>Docker</a>とLinux環境を必要とします)</li></ul><div class="alert alert-warning caution callout" role=alert><strong>注意:</strong> <code>none</code>ドライバーを使用する場合、一部のKubernetesのコンポーネントは特権付きのコンテナとして稼働するため、Minikube環境外に副作用をもたらします。
この副作用から、<code>none</code>ドライバーは、個人の作業環境では推奨されません。</div><h3 id=コンテナランタイムの代替>コンテナランタイムの代替</h3><p>下記のコンテナランタイム上でMinikubeを起動できます。</p><ul class="nav nav-tabs" id=container-runtimes role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#container-runtimes-0 role=tab aria-controls=container-runtimes-0 aria-selected=true>containerd</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#container-runtimes-1 role=tab aria-controls=container-runtimes-1>CRI-O</a></li></ul><div class=tab-content id=container-runtimes><div id=container-runtimes-0 class="tab-pane show active" role=tabpanel aria-labelledby=container-runtimes-0><p><p><a href=https://github.com/containerd/containerd>containerd</a> をコンテナランタイムとして使用するには以下を実行してください:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>minikube start <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --network-plugin<span style=color:#666>=</span>cni <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --enable-default-cni <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --container-runtime<span style=color:#666>=</span>containerd <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --bootstrapper<span style=color:#666>=</span>kubeadm
</span></span></code></pre></div><p>もしくは拡張バージョンを使用することもできます:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>minikube start <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --network-plugin<span style=color:#666>=</span>cni <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --enable-default-cni <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --extra-config<span style=color:#666>=</span>kubelet.container-runtime<span style=color:#666>=</span>remote <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --extra-config<span style=color:#666>=</span>kubelet.container-runtime-endpoint<span style=color:#666>=</span>unix:///run/containerd/containerd.sock <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --extra-config<span style=color:#666>=</span>kubelet.image-service-endpoint<span style=color:#666>=</span>unix:///run/containerd/containerd.sock <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --bootstrapper<span style=color:#666>=</span>kubeadm
</span></span></code></pre></div></div><div id=container-runtimes-1 class=tab-pane role=tabpanel aria-labelledby=container-runtimes-1><p><p><a href=https://cri-o.io/>CRI-O</a>をコンテナランタイムとして使用するには以下を実行してください:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>minikube start <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --network-plugin<span style=color:#666>=</span>cni <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --enable-default-cni <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --container-runtime<span style=color:#666>=</span>cri-o <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --bootstrapper<span style=color:#666>=</span>kubeadm
</span></span></code></pre></div><p>もしくは拡張バージョンを使用することもできます:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>minikube start <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --network-plugin<span style=color:#666>=</span>cni <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --enable-default-cni <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --extra-config<span style=color:#666>=</span>kubelet.container-runtime<span style=color:#666>=</span>remote <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --extra-config<span style=color:#666>=</span>kubelet.container-runtime-endpoint<span style=color:#666>=</span>/var/run/crio.sock <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --extra-config<span style=color:#666>=</span>kubelet.image-service-endpoint<span style=color:#666>=</span>/var/run/crio.sock <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>    --bootstrapper<span style=color:#666>=</span>kubeadm
</span></span></code></pre></div></div></div><h3 id=dockerデーモンの再利用によるローカルイメージの使用>Dockerデーモンの再利用によるローカルイメージの使用</h3><p>Kubernetesの単一のVMを使用する場合、Minikube組み込みのDockerデーモンの再利用がおすすめです。ホストマシン上にDockerレジストリを構築してイメージをプッシュする必要がなく、ローカルでの実験を加速させるMinikubeと同じDockerデーモンの中に構築することができます。</p><div class="alert alert-info note callout" role=alert><strong>備考:</strong> Dockerイメージに'latest'以外のタグを付け、そのタグを使用してイメージをプルしてください。イメージのバージョンを指定しなければ<code>Always</code>のプルイメージポリシーにより<code>:latest</code>と仮定され、もしデフォルトのDockerレジストリ(通常はDockerHub)にどのバージョンのDockerイメージもまだ存在しない場合には、<code>ErrImagePull</code>になる恐れがあります。</div><p>Mac/LinuxのホストでDockerデーモンを操作できるようにするには、<code>minikube docker-env</code>を実行します。</p><p>これにより、MinikubeのVM内のDockerデーモンと通信しているホストのMac/LinuxマシンのコマンドラインでDockerを使用できるようになります:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker ps
</span></span></code></pre></div><div class="alert alert-info note callout" role=alert><strong>備考:</strong><p>CentOS 7では、Dockerが以下のエラーを出力することがあります:</p><pre tabindex=0><code>Could not read CA certificate &#34;/etc/docker/ca.pem&#34;: open /etc/docker/ca.pem: no such file or directory
</code></pre><p>修正方法としては、/etc/sysconfig/dockerを更新してMinikube環境の変更が確実に反映されるようにすることです:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&lt; <span style=color:#b8860b>DOCKER_CERT_PATH</span><span style=color:#666>=</span>/etc/docker
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>&gt; <span style=color:#a2f;font-weight:700>if</span> <span style=color:#666>[</span> -z <span style=color:#b44>&#34;</span><span style=color:#b68;font-weight:700>${</span><span style=color:#b8860b>DOCKER_CERT_PATH</span><span style=color:#b68;font-weight:700>}</span><span style=color:#b44>&#34;</span> <span style=color:#666>]</span>; <span style=color:#a2f;font-weight:700>then</span>
</span></span><span style=display:flex><span>&gt;   <span style=color:#b8860b>DOCKER_CERT_PATH</span><span style=color:#666>=</span>/etc/docker
</span></span><span style=display:flex><span>&gt; <span style=color:#a2f;font-weight:700>fi</span>
</span></span></code></pre></div></div><h3 id=kubernetesの設定>Kubernetesの設定</h3><p>Minikubeにはユーザーが任意の値でKubernetesコンポーネントを設定することを可能にする "configurator" 機能があります。
この機能を使うには、<code>minikube start</code> コマンドに <code>--extra-config</code> フラグを使うことができます。</p><p>このフラグは繰り返されるので、複数のオプションを設定するためにいくつかの異なる値を使って何度も渡すことができます。</p><p>このフラグは <code>component.key=value</code> 形式の文字列を取ります。<code>component</code> は下記のリストの文字列の1つです。
<code>key</code>は設定構造体上の値で、 <code>value</code> は設定する値です。</p><p>各コンポーネントのKubernetes <code>componentconfigs</code> のドキュメントを調べることで有効なキーを見つけることができます。
サポートされている各設定のドキュメントは次のとおりです:</p><ul><li><a href=https://godoc.org/k8s.io/kubernetes/pkg/kubelet/apis/config#KubeletConfiguration>kubelet</a></li><li><a href=https://godoc.org/k8s.io/kubernetes/cmd/kube-apiserver/app/options#ServerRunOptions>apiserver</a></li><li><a href=https://godoc.org/k8s.io/kubernetes/pkg/proxy/apis/config#KubeProxyConfiguration>proxy</a></li><li><a href=https://godoc.org/k8s.io/kubernetes/pkg/controller/apis/config#KubeControllerManagerConfiguration>controller-manager</a></li><li><a href=https://godoc.org/github.com/coreos/etcd/etcdserver#ServerConfig>etcd</a></li><li><a href=https://godoc.org/k8s.io/kubernetes/pkg/scheduler/apis/config#KubeSchedulerConfiguration>scheduler</a></li></ul><h4 id=例>例</h4><p>Kubeletの <code>MaxPods</code> 設定を5に変更するには、このフラグを渡します: <code>--extra-config=kubelet.MaxPods=5</code></p><p>この機能はネストした構造体もサポートします。スケジューラーの <code>LeaderElection.LeaderElect</code> を <code>true</code> に設定するには、このフラグを渡します: <code>--extra-config=scheduler.LeaderElection.LeaderElect=true</code></p><p><code>apiserver</code> の <code>AuthorizationMode</code> を <code>RABC</code> に設定するには、このフラグを使います: <code>--extra-config=apiserver.authorization-mode=RBAC</code>.</p><h3 id=stopping-a-cluster>クラスターの停止</h3><p><code>minikube stop</code> コマンドを使ってクラスターを停止することができます。
このコマンドはMinikube仮想マシンをシャットダウンしますが、すべてのクラスターの状態とデータを保存します。
クラスターを再起動すると、以前の状態に復元されます。</p><h3 id=deleting-a-cluster>クラスターの削除</h3><p><code>minikube delete</code> コマンドを使ってクラスターを削除することができます。
このコマンドはMinikube仮想マシンをシャットダウンして削除します。データや状態は保存されません。</p><h3 id=upgrading-minikube>minikubeのアップグレード</h3><p>macOSを使用し<a href=https://brew.sh/>Brew Package Manager</a>がインストールされている場合、以下を実行します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>brew update
</span></span><span style=display:flex><span>brew upgrade minikube
</span></span></code></pre></div><h2 id=interacting-with-your-cluster>クラスターに触れてみよう</h2><h3 id=kubectl>Kubectl</h3><p><code>minikube start</code> コマンドは "minikube" という<a href=/docs/reference/generated/kubectl/kubectl-commands#-em-set-context-em->kubectl context</a>を作成します。
このコンテキストはMinikubeクラスターと通信するための設定が含まれています。</p><p>Minikubeはこのコンテキストを自動的にデフォルトに設定しますが、将来的に設定を切り戻す場合には次のコマンドを実行してください:</p><p><code>kubectl config use-context minikube</code></p><p>もしくは各コマンドにコンテキストを次のように渡します:</p><p><code>kubectl get pods --context=minikube</code></p><h3 id=ダッシュボード>ダッシュボード</h3><p><a href=/ja/docs/tasks/access-application-cluster/web-ui-dashboard/>Kubernetes Dashboard</a>にアクセスするには、Minikubeを起動してアドレスを取得した後、シェルでこのコマンドを実行してください:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube dashboard
</span></span></code></pre></div><h3 id=サービス>サービス</h3><p>ノードポート経由で公開されているサービスにアクセスするには、Minikubeを起動してアドレスを取得した後、シェルでこのコマンドを実行してください:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube service <span style=color:#666>[</span>-n NAMESPACE<span style=color:#666>]</span> <span style=color:#666>[</span>--url<span style=color:#666>]</span> NAME
</span></span></code></pre></div><h2 id=ネットワーク>ネットワーク</h2><p>MinikubeのVMは <code>minikube ip</code>コマンドで取得できるホストオンリーIPアドレスを介してホストシステムに公開されます。
NodePort上では、 <code>NodePort</code> タイプのどのサービスもそのIPアドレスを介してアクセスできます。</p><p>サービスのNodePortを決定するには、<code>kubectl</code> コマンドを次のように使用します:</p><p><code>kubectl get service $SERVICE --output='jsonpath="{.spec.ports[0].nodePort}"'</code></p><h2 id=永続ボリューム>永続ボリューム</h2><p>Minikubeは <code>hostPath</code> タイプの<a href=/docs/concepts/storage/persistent-volumes/>PersistentVolumes</a>をサポートします。
このPersistentVolumesはMinikubeのVM内のディレクトリーにマッピングされます。</p><p>MinikubeのVMはtmpfsで起動するため、ほとんどのディレクトリーは再起動しても持続しません (<code>minikube stop</code>)。
しかし、Minikubeは以下のホストディレクトリーに保存されているファイルを保持するように設定されています:</p><ul><li><code>/data</code></li><li><code>/var/lib/minikube</code></li><li><code>/var/lib/docker</code></li></ul><p>以下は <code>/data</code> ディレクトリのデータを永続化するPersistentVolumeの設定例です:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>PersistentVolume<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>pv0001<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>accessModes</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- ReadWriteOnce<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>capacity</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>storage</span>:<span style=color:#bbb> </span>5Gi<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>hostPath</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>path</span>:<span style=color:#bbb> </span>/data/pv0001/<span style=color:#bbb>
</span></span></span></code></pre></div><h2 id=ホストフォルダーのマウント>ホストフォルダーのマウント</h2><p>一部のドライバーはVM内にホストフォルダーをマウントするため、VMとホストの間でファイルを簡単に共有できます。これらは現時点では設定可能ではなく、使用しているドライバーとOSによって異なります。</p><div class="alert alert-info note callout" role=alert><strong>備考:</strong> ホストフォルダーの共有はKVMドライバーにはまだ実装されていません。</div><table><thead><tr><th>Driver</th><th>OS</th><th>HostFolder</th><th>VM</th></tr></thead><tbody><tr><td>VirtualBox</td><td>Linux</td><td>/home</td><td>/hosthome</td></tr><tr><td>VirtualBox</td><td>macOS</td><td>/Users</td><td>/Users</td></tr><tr><td>VirtualBox</td><td>Windows</td><td>C://Users</td><td>/c/Users</td></tr><tr><td>VMware Fusion</td><td>macOS</td><td>/Users</td><td>/mnt/hgfs/Users</td></tr><tr><td>Xhyve</td><td>macOS</td><td>/Users</td><td>/Users</td></tr></tbody></table><h2 id=プライベートコンテナレジストリ>プライベートコンテナレジストリ</h2><p>プライベートコンテナレジストリにアクセスするには、<a href=/docs/concepts/containers/images/>このページ</a>の手順に従ってください。</p><p><code>ImagePullSecrets</code> を使用することをおすすめしますが、MinikubeのVM内でアクセス設定したい場合には、<code>/home/docker</code> ディレクトリに <code>.dockercfg</code> を置くか、または <code>/home/docker/.docker</code> ディレクトリに <code>config.json</code> を置いてください。</p><h2 id=アドオン>アドオン</h2><p>カスタムアドオンを正しく起動または再起動させるには、
Minikubeで起動したいアドオンを <code>~/.minikube/addons</code> ディレクトリに置きます。
このフォルダ内のアドオンはMinikubeのVMに移動され、Minikubeが起動または再起動されるたびにアドオンが起動されます。</p><h2 id=httpプロキシ経由のminikube利用>HTTPプロキシ経由のMinikube利用</h2><p>MinikubeはKubernetesとDockerデーモンを含む仮想マシンを作成します。
KubernetesがDockerを使用してコンテナをスケジュールしようとする際、Dockerデーモンはコンテナをプルするために外部ネットワークを必要とする場合があります。</p><p>HTTPプロキシーを通している場合には、プロキシー設定をDockerに提供する必要があります。
これを行うには、<code>minikube start</code> に必要な環境変数をフラグとして渡します。</p><p>例:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>minikube start --docker-env <span style=color:#b8860b>http_proxy</span><span style=color:#666>=</span>http://<span style=color:#b8860b>$YOURPROXY</span>:PORT <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>               --docker-env <span style=color:#b8860b>https_proxy</span><span style=color:#666>=</span>https://<span style=color:#b8860b>$YOURPROXY</span>:PORT
</span></span></code></pre></div><p>仮想マシンのアドレスが192.168.99.100の場合、プロキシーの設定により <code>kubectl</code> が直接アクセスできない可能性があります。
このIPアドレスのプロキシー設定を迂回するには、以下のようにno_proxy設定を変更する必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a2f>export</span> <span style=color:#b8860b>no_proxy</span><span style=color:#666>=</span><span style=color:#b8860b>$no_proxy</span>,<span style=color:#a2f;font-weight:700>$(</span>minikube ip<span style=color:#a2f;font-weight:700>)</span>
</span></span></code></pre></div><h2 id=既知の問題>既知の問題</h2><p>複数ノードを必要とする機能はMinikubeでは動作しません。</p><h2 id=設計>設計</h2><p>MinikubeはVMのプロビジョニングに<a href=https://github.com/docker/machine/tree/master/libmachine>libmachine</a>を使用し、<a href=https://github.com/kubernetes/kubeadm>kubeadm</a>をKubernetesクラスターのプロビジョニングに使用します。</p><p>Minikubeの詳細については、<a href=https://git.k8s.io/community/contributors/design-proposals/cluster-lifecycle/local-cluster-ux.md>proposal</a>を参照してください。</p><h2 id=追加リンク集>追加リンク集</h2><ul><li><strong>目標と非目標</strong>: Minikubeプロジェクトの目標と非目標については、<a href=https://minikube.sigs.k8s.io/docs/contrib/roadmap/>ロードマップ</a>を参照してください。</li><li><strong>開発ガイド</strong>: プルリクエストを送る方法の概要については、<a href=https://minikube.sigs.k8s.io/docs/contrib/>コントリビュートする</a>を参照してください。</li><li><strong>Minikubeのビルド</strong>: Minikubeをソースからビルド/テストする方法については、<a href=https://minikube.sigs.k8s.io/docs/contrib/building/>ビルドガイド</a>を参照してください。</li><li><strong>新しい依存性の追加</strong>: Minikubeに新しい依存性を追加する方法については、<a href=https://minikube.sigs.k8s.io/docs/contrib/drivers/>依存性追加ガイド</a>を参照してください。</li><li><strong>新しいアドオンの追加</strong>: Minikubeに新しいアドオンを追加する方法については、<a href=https://minikube.sigs.k8s.io/docs/contrib/addons/>アドオン追加ガイド</a>を参照してください。</li><li><strong>MicroK8s</strong>: 仮想マシンを実行したくないLinuxユーザーは代わりに<a href=https://microk8s.io/>MicroK8s</a>を検討してみてください。</li></ul><h2 id=コミュニティ>コミュニティ</h2><p>コントリビューションや質問、コメントは歓迎・奨励されています! Minikubeの開発者は<a href=https://kubernetes.slack.com>Slack</a>の<code>#minikube</code>チャンネルにいます(Slackへの招待状は<a href=http://slack.kubernetes.io/>こちら</a>)。<a href=https://groups.google.com/a/kubernetes.io/g/dev/>dev@kubernetes Google Groupsメーリングリスト</a>もあります。メーリングリストに投稿する際は件名の最初に "minikube: " をつけてください。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-861dedab439fb9a133b35009a34655ec>2 - Kindを使用してKubernetesをインストールする</h1><p>Kindは、Dockerコンテナをノードとして使用して、ローカルのKubernetesクラスターを実行するためのツールです。</p><h2 id=インストール>インストール</h2><p><a href=https://kind.sigs.k8s.io/docs/user/quick-start/>Kindをインストールする</a>を参照してください。</p></div></main></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/ja/docs/home/>ホーム</a>
<a class=text-white href=/ja/blog/>Blogs</a>
<a class=text-white href=/ja/training/>トレーニング</a>
<a class=text-white href=/ja/partners/>パートナー</a>
<a class=text-white href=/ja/community/>コミュニティ</a>
<a class=text-white href=/ja/case-studies/>ケーススタディ</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a></small><br><small class=text-white>Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage class=light-text>Trademark Usage page</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>