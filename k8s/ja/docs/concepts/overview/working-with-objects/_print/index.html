<!doctype html><html lang=ja class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=en href=https://kubernetes.io/docs/concepts/overview/working-with-objects/><link rel=alternate hreflang=zh-cn href=https://kubernetes.io/zh-cn/docs/concepts/overview/working-with-objects/><link rel=alternate hreflang=ko href=https://kubernetes.io/ko/docs/concepts/overview/working-with-objects/><link rel=alternate hreflang=fr href=https://kubernetes.io/fr/docs/concepts/overview/working-with-objects/><link rel=alternate hreflang=es href=https://kubernetes.io/es/docs/concepts/overview/working-with-objects/><link rel=alternate hreflang=pt-br href=https://kubernetes.io/pt-br/docs/concepts/overview/working-with-objects/><link rel=alternate hreflang=id href=https://kubernetes.io/id/docs/concepts/overview/working-with-objects/><link rel=alternate hreflang=ru href=https://kubernetes.io/ru/docs/concepts/overview/working-with-objects/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://kubernetes.io/ja/docs/concepts/overview/working-with-objects/><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>Kubernetesオブジェクトを利用する | Kubernetes</title><meta property="og:title" content="Kubernetesオブジェクトを利用する"><meta property="og:description" content="Kubernetesオブジェクトは、Kubernetes上で永続的なエンティティです。Kubernetesはこれらのエンティティを使い、クラスターの状態を表現します。 Kubernetesオブジェクトモデルと、これらのオブジェクトの利用方法について学びます。
"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.io/ja/docs/concepts/overview/working-with-objects/"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="Kubernetesオブジェクトを利用する"><meta itemprop=description content="Kubernetesオブジェクトは、Kubernetes上で永続的なエンティティです。Kubernetesはこれらのエンティティを使い、クラスターの状態を表現します。 Kubernetesオブジェクトモデルと、これらのオブジェクトの利用方法について学びます。
"><meta name=twitter:card content="summary"><meta name=twitter:title content="Kubernetesオブジェクトを利用する"><meta name=twitter:description content="Kubernetesオブジェクトは、Kubernetes上で永続的なエンティティです。Kubernetesはこれらのエンティティを使い、クラスターの状態を表現します。 Kubernetesオブジェクトモデルと、これらのオブジェクトの利用方法について学びます。
"><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content="Kubernetesオブジェクトは、Kubernetes上で永続的なエンティティです。Kubernetesはこれらのエンティティを使い、クラスターの状態を表現します。 Kubernetesオブジェクトモデルと、これらのオブジェクトの利用方法について学びます。
"><meta property="og:description" content="Kubernetesオブジェクトは、Kubernetes上で永続的なエンティティです。Kubernetesはこれらのエンティティを使い、クラスターの状態を表現します。 Kubernetesオブジェクトモデルと、これらのオブジェクトの利用方法について学びます。
"><meta name=twitter:description content="Kubernetesオブジェクトは、Kubernetes上で永続的なエンティティです。Kubernetesはこれらのエンティティを使い、クラスターの状態を表現します。 Kubernetesオブジェクトモデルと、これらのオブジェクトの利用方法について学びます。
"><meta property="og:url" content="https://kubernetes.io/ja/docs/concepts/overview/working-with-objects/"><meta property="og:title" content="Kubernetesオブジェクトを利用する"><meta name=twitter:title content="Kubernetesオブジェクトを利用する"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/ja/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/ja/docs/>ドキュメント</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/ja/blog/>Blogs</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/ja/training/>トレーニング</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/ja/partners/>パートナー</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/ja/community/>コミュニティ</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/ja/case-studies/>ケーススタディ</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>バージョン</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/ja/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/ja/docs/concepts/overview/working-with-objects/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/ja/docs/concepts/overview/working-with-objects/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/ja/docs/concepts/overview/working-with-objects/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/ja/docs/concepts/overview/working-with-objects/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/ja/docs/concepts/overview/working-with-objects/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>日本語 (Japanese)</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/concepts/overview/working-with-objects/>English</a>
<a class=dropdown-item href=/zh-cn/docs/concepts/overview/working-with-objects/>中文 (Chinese)</a>
<a class=dropdown-item href=/ko/docs/concepts/overview/working-with-objects/>한국어 (Korean)</a>
<a class=dropdown-item href=/fr/docs/concepts/overview/working-with-objects/>Français (French)</a>
<a class=dropdown-item href=/es/docs/concepts/overview/working-with-objects/>Español (Spanish)</a>
<a class=dropdown-item href=/pt-br/docs/concepts/overview/working-with-objects/>Português (Portuguese)</a>
<a class=dropdown-item href=/id/docs/concepts/overview/working-with-objects/>Bahasa Indonesia</a>
<a class=dropdown-item href=/ru/docs/concepts/overview/working-with-objects/>Русский (Russian)</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>これは、このセクションの複数ページの印刷可能なビューです。
<a href=# onclick="return print(),!1">印刷するには、ここをクリックしてください</a>.</p><p><a href=/ja/docs/concepts/overview/working-with-objects/>このページの通常のビューに戻る</a>.</p></div><h1 class=title>Kubernetesオブジェクトを利用する</h1><div class=lead>Kubernetesオブジェクトは、Kubernetes上で永続的なエンティティです。Kubernetesはこれらのエンティティを使い、クラスターの状態を表現します。 Kubernetesオブジェクトモデルと、これらのオブジェクトの利用方法について学びます。</div><ul><li>1: <a href=#pg-9f5adfa77f48c50d5cc81155a3cecb98>Kubernetesオブジェクトを理解する</a></li><li>2: <a href=#pg-6751db8ff5409476de8225d17d6c42dd>Kubernetesオブジェクト管理</a></li><li>3: <a href=#pg-f37749a83c2916b63279ea60f3cfe53e>オブジェクトの名前とID</a></li><li>4: <a href=#pg-1127165f472b7181b9c1d5a0b187d620>Namespace(名前空間)</a></li><li>5: <a href=#pg-f1dec4557fb8ffbac9f11390aaaf9fa4>ラベル(Labels)とセレクター(Selectors)</a></li><li>6: <a href=#pg-93cd7a1d4e1623e2bf01afc49a5af69c>アノテーション(Annotations)</a></li><li>7: <a href=#pg-046c03090d47bc4b89b818dc645c3865>フィールドセレクター(Field Selectors)</a></li><li>8: <a href=#pg-5dd62c6a4a481b4cf1ac50f6799eb581>推奨ラベル(Recommended Labels)</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-9f5adfa77f48c50d5cc81155a3cecb98>1 - Kubernetesオブジェクトを理解する</h1><p>このページでは、KubernetesオブジェクトがKubernetes APIでどのように表現されているか、またそれらを<code>.yaml</code>フォーマットでどのように表現するかを説明します。</p><h2 id=kubernetes-objects>Kubernetesオブジェクトを理解する</h2><p><em>Kubernetesオブジェクト</em> は、Kubernetes上で永続的なエンティティです。Kubernetesはこれらのエンティティを使い、クラスターの状態を表現します。具体的に言うと、下記のような内容が表現できます:</p><ul><li>どのようなコンテナ化されたアプリケーションが稼働しているか(またそれらはどのノード上で動いているか)</li><li>それらのアプリケーションから利用可能なリソース</li><li>アプリケーションがどのように振る舞うかのポリシー、例えば再起動、アップグレード、耐障害性ポリシーなど</li></ul><p>Kubernetesオブジェクトは「意図の記録」です。一度オブジェクトを作成すると、Kubernetesは常にそのオブジェクトが存在し続けるように動きます。オブジェクトを作成することで、Kubernetesに対し効果的にあなたのクラスターのワークロードがこのようになっていて欲しいと伝えているのです。これが、あなたのクラスターの<strong>望ましい状態</strong>です。</p><p>Kubernetesオブジェクトを操作するには、作成、変更、または削除に関わらず<a href=/ja/docs/concepts/overview/kubernetes-api/>Kubernetes API</a>を使う必要があるでしょう。例えば<code>kubectl</code>コマンドラインインターフェースを使った場合、このCLIが処理に必要なKubernetes API命令を、あなたに代わり発行します。あなたのプログラムから<a href=/docs/reference/using-api/client-libraries/>クライアントライブラリ</a>を利用し、直接Kubernetes APIを利用することも可能です。</p><h3 id=オブジェクトのspec-仕様-とstatus-状態>オブジェクトのspec(仕様)とstatus(状態)</h3><p>ほとんどのKubernetesオブジェクトは、オブジェクトの設定を管理する２つの入れ子になったオブジェクトのフィールドを持っています。それはオブジェクト <em><code>spec</code></em> とオブジェクト <em><code>status</code></em> です。<code>spec</code>を持っているオブジェクトに関しては、オブジェクト作成時に<code>spec</code>を設定する必要があり、望ましい状態としてオブジェクトに持たせたい特徴を記述する必要があります。</p><p><code>status</code> オブジェクトはオブジェクトの <em>現在の状態</em> を示し、その情報はKubernetesシステムとそのコンポーネントにより提供、更新されます。Kubernetes<a class=glossary-tooltip title=コンテナのライフサイクルを定義、展開、管理するためのAPIとインターフェイスを公開するコンテナオーケストレーションレイヤーです。 data-toggle=tooltip data-placement=top href='/ja/docs/reference/glossary/?all=true#term-control-plane' target=_blank aria-label=コントロールプレーン>コントロールプレーン</a>は、あなたから指定された望ましい状態と現在の状態が一致するよう常にかつ積極的に管理をします。</p><p>例えば、KubernetesのDeploymentはクラスター上で稼働するアプリケーションを表現するオブジェクトです。Deploymentを作成するとき、アプリケーションの複製を３つ稼働させるようDeploymentのspecで指定するかもしれません。KubernetesはDeploymentのspecを読み取り、指定されたアプリケーションを３つ起動し、現在の状態がspecに一致するようにします。もしこれらのインスタンスでどれかが落ちた場合(statusが変わる)、Kubernetesはspecと、statusの違いに反応し、修正しようとします。この場合は、落ちたインスタンスの代わりのインスタンスを立ち上げます。</p><p>spec、status、metadataに関するさらなる情報は、<a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md>Kubernetes API Conventions</a>をご確認ください。</p><h3 id=kubernetesオブジェクトを記述する>Kubernetesオブジェクトを記述する</h3><p>Kubernetesでオブジェクトを作成する場合、オブジェクトの基本的な情報(例えば名前)と共に、望ましい状態を記述したオブジェクトのspecを渡さなければいけません。KubernetesAPIを利用しオブジェクトを作成する場合(直接APIを呼ぶか、<code>kubectl</code>を利用するかに関わらず)、APIリクエストはそれらの情報をJSON形式でリクエストのBody部に含んでいなければなりません。</p><p>ここで、KubernetesのDeploymentに必要なフィールドとオブジェクトのspecを記載した<code>.yaml</code>ファイルの例を示します:</p><div class=highlight><div class=copy-code-icon style=text-align:right><a href=https://raw.githubusercontent.com/kubernetes/website/main/content/ja/examples/application/deployment.yaml download=application/deployment.yaml><code>application/deployment.yaml</code></a>
<img src=/images/copycode.svg style=max-height:24px;cursor:pointer onclick='copyCode("application-deployment-yaml")' title="Copy application/deployment.yaml to clipboard"></img></div><div class=includecode id=application-deployment-yaml><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apps/v1<span style=color:#bbb> </span><span style=color:#080;font-style:italic># for versions before 1.9.0 use apps/v1beta2</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Deployment<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx-deployment<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>selector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>matchLabels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>replicas</span>:<span style=color:#bbb> </span><span style=color:#666>2</span><span style=color:#bbb> </span><span style=color:#080;font-style:italic># tells deployment to run 2 pods matching the template</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>template</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>containers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>image</span>:<span style=color:#bbb> </span>nginx:1.14.2<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>ports</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- <span style=color:green;font-weight:700>containerPort</span>:<span style=color:#bbb> </span><span style=color:#666>80</span><span style=color:#bbb>
</span></span></span></code></pre></div></div></div><p>上に示した<code>.yaml</code>ファイルを利用してDeploymentを作成するには、<code>kubectl</code>コマンドラインインターフェースに含まれている<a href=/docs/reference/generated/kubectl/kubectl-commands#apply><code>kubectl apply</code></a>コマンドに<code>.yaml</code>ファイルを引数に指定し、実行します。ここで例を示します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl apply -f https://k8s.io/examples/application/deployment.yaml --record
</span></span></code></pre></div><p>出力結果は、下記に似た形になります:</p><pre tabindex=0><code>deployment.apps/nginx-deployment created
</code></pre><h3 id=必須フィールド>必須フィールド</h3><p>Kubernetesオブジェクトを<code>.yaml</code>ファイルに記載して作成する場合、下記に示すフィールドに値をセットしておく必要があります:</p><ul><li><code>apiVersion</code> - どのバージョンのKubernetesAPIを利用してオブジェクトを作成するか</li><li><code>kind</code> - どの種類のオブジェクトを作成するか</li><li><code>metadata</code> - オブジェクトを一意に特定するための情報、文字列の<code>name</code>、<code>UID</code>、また任意の<code>namespace</code>が該当する</li><li><code>spec</code> - オブジェクトの望ましい状態</li></ul><p><code>spec</code>の正確なフォーマットは、Kubernetesオブジェクトごとに異なり、オブジェクトごとに特有な入れ子のフィールドを持っています。<a href=/docs/reference/generated/kubernetes-api/v1.25/>Kubernetes API リファレンス</a>が、Kubernetesで作成できる全てのオブジェクトに関するspecのフォーマットを探すのに役立ちます。
例えば、<code>Pod</code>オブジェクトに関する<code>spec</code>のフォーマットは<a href=/docs/reference/generated/kubernetes-api/v1.25/#podspec-v1-core>PodSpec v1 core</a>を、また<code>Deployment</code>オブジェクトに関する<code>spec</code>のフォーマットは<a href=/docs/reference/generated/kubernetes-api/v1.25/#deploymentspec-v1-apps>DeploymentSpec v1 apps</a>をご確認ください。</p><h2 id=次の項目>次の項目</h2><ul><li>最も重要、かつ基本的なKubernetesオブジェクト群を学びましょう、例えば、<a href=/ja/docs/concepts/workloads/pods/>Pod</a>です。</li><li>Kubernetesの<a href=/ja/docs/concepts/architecture/controller/>コントローラー</a>を学びましょう。</li><li><a href=/docs/reference/using-api/>Using the Kubernetes API</a>はこのページでは取り上げていない他のAPIについて説明します。</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-6751db8ff5409476de8225d17d6c42dd>2 - Kubernetesオブジェクト管理</h1><p><code>kubectl</code>コマンドラインツールは、Kubernetesオブジェクトを作成、管理するためにいくつかの異なる方法をサポートしています。
このドキュメントでは、それらの異なるアプローチごとの概要を提供します。
Kubectlを使ったオブジェクト管理の詳細は、<a href=https://kubectl.docs.kubernetes.io>Kubectl book</a>を参照してください。</p><h2 id=管理手法>管理手法</h2><div class="alert alert-danger warning callout" role=alert><strong>警告:</strong> Kubernetesのオブジェクトは、いずれか一つの手法で管理してください。
同じオブジェクトに対して、複数の手法を組み合わせた場合、未定義の挙動をもたらします。</div><table><thead><tr><th>管理手法</th><th>何を対象にするか</th><th>推奨環境</th><th>サポートライター</th><th>学習曲線</th></tr></thead><tbody><tr><td>命令型コマンド</td><td>現行のオブジェクト</td><td>開発用プロジェクト</td><td>1+</td><td>緩やか</td></tr><tr><td>命令型オブジェクト設定</td><td>個々のファイル</td><td>本番用プロジェクト</td><td>1</td><td>中程度</td></tr><tr><td>宣言型オブジェクト設定</td><td>ファイルのディレクトリ</td><td>本番用プロジェクト</td><td>1+</td><td>急</td></tr></tbody></table><h2 id=命令型コマンド>命令型コマンド</h2><p>命令型コマンドを使う場合、ユーザーはクラスター内の現行のオブジェクトに対して処理を行います。
ユーザーは<code>kubectl</code>コマンドに処理内容を引数、もしくはフラグで指定します。</p><p>これはKubernetesの使い始め、またはクラスターに対して一度限りのタスクを行う際の最も簡単な手法です。
なぜなら、この手法は現行のオブジェクトに対して直接操作ができ、以前の設定履歴は提供されないからです。</p><h3 id=例>例</h3><p>Deploymentオブジェクトを作成し、nginxコンテナの単一インスタンスを起動します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl run nginx --image nginx
</span></span></code></pre></div><p>同じことを異なる構文で行います:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl create deployment nginx --image nginx
</span></span></code></pre></div><h3 id=トレードオフ>トレードオフ</h3><p>オブジェクト設定手法に対する長所:</p><ul><li>コマンドは簡潔、簡単に学ぶことができ、そして覚えやすいです</li><li>コマンドではクラスタの設定を変えるのに、わずか1ステップしか必要としません</li></ul><p>オブジェクト設定手法に対する短所:</p><ul><li>コマンドは変更レビュープロセスと連携しません</li><li>コマンドは変更に伴う監査証跡を提供しません</li><li>コマンドは現行がどうなっているかという情報を除き、レコードのソースを提供しません</li><li>コマンドはオブジェクトを作成するためのテンプレートを提供しません</li></ul><h2 id=命令型オブジェクト設定>命令型オブジェクト設定</h2><p>命令型オブジェクト設定では、kubectlコマンドに処理内容(create、replaceなど)、任意のフラグ、そして最低1つのファイル名を指定します。
指定されたファイルは、YAMLまたはJSON形式でオブジェクトの全ての定義情報を含んでいなければいけません。</p><p>オブジェクト定義の詳細は、<a href=/docs/reference/generated/kubernetes-api/v1.25/>APIリファレンス</a>を参照してください。</p><div class="alert alert-danger warning callout" role=alert><strong>警告:</strong> 命令型の<code>replace</code>コマンドは、既存の構成情報を新しく提供された設定に置き換え、設定ファイルに無いオブジェクトの全ての変更を削除します。
このアプローチは、構成情報が設定ファイルとは無関係に更新されるリソースタイプでは使用しないでください。
例えば、タイプが<code>LoadBalancer</code>のServiceオブジェクトにおける<code>externalIPs</code>フィールドは、設定ファイルとは無関係に、クラスターによって更新されます。</div><h3 id=例-1>例</h3><p>設定ファイルに定義されたオブジェクトを作成します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl create -f nginx.yaml
</span></span></code></pre></div><p>設定ファイルに定義されたオブジェクトを削除します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl delete -f nginx.yaml -f redis.yaml
</span></span></code></pre></div><p>設定ファイルに定義された情報で、現行の設定を上書き更新します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl replace -f nginx.yaml
</span></span></code></pre></div><h3 id=トレードオフ-1>トレードオフ</h3><p>命令型コマンド手法に対する長所:</p><ul><li>オブジェクト設定をGitのような、ソースコード管理システムに格納することができます</li><li>オブジェクト設定の変更内容をプッシュする前にレビュー、監査証跡を残すようなプロセスと連携することができます</li><li>オブジェクト設定は新しいオブジェクトを作る際のテンプレートを提供します</li></ul><p>命令型コマンド手法に対する短所:</p><ul><li>オブジェクト設定ではオブジェクトスキーマの基礎的な理解が必要です</li><li>オブジェクト設定ではYAMLファイルを書くという、追加のステップが必要です</li></ul><p>宣言型オブジェクト設定手法に対する長所:</p><ul><li>命令型オブジェクト設定の振る舞いは、よりシンプルで簡単に理解ができます</li><li>Kubernetesバージョン1.5においては、命令型オブジェクト設定の方がより成熟しています</li></ul><p>宣言型オブジェクト設定手法に対する短所:</p><ul><li>命令型オブジェクト設定は各ファイルごとに設定を書くには最も適していますが、ディレクトリには適していません</li><li>現行オブジェクトの更新は設定ファイルに対して反映しなければなりません。反映されない場合、次の置き換え時に更新内容が失われてしまいます</li></ul><h2 id=宣言型オブジェクト設定>宣言型オブジェクト設定</h2><p>宣言型オブジェクト設定を利用する場合、ユーザーはローカルに置かれている設定ファイルを操作します。
しかし、ユーザーはファイルに対する操作内容を指定しません。作成、更新、そして削除といった操作はオブジェクトごとに<code>kubectl</code>が検出します。
この仕組みが、異なるオブジェクトごとに異なる操作をディレクトリに対して行うことを可能にしています。</p><div class="alert alert-info note callout" role=alert><strong>備考:</strong> 宣言型オブジェクト設定は、他の人が行った変更が設定ファイルにマージされなかったとしても、それらの変更を保持します。
これは、<code>replace</code>API操作のように、全てのオブジェクト設定を置き換えるわけではなく、<code>patch</code>API操作による、変更箇所のみの更新が可能にしています。</div><h3 id=例-2>例</h3><p><code>config</code>ディレクトリ配下にある全てのオブジェクト設定ファイルを処理し、作成、または現行オブジェクトへのパッチを行います。
まず、<code>diff</code>でどのような変更が行われるかを確認した後に適用します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl diff -f configs/
</span></span><span style=display:flex><span>kubectl apply -f configs/
</span></span></code></pre></div><p>再帰的にディレクトリを処理します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl diff -R -f configs/
</span></span><span style=display:flex><span>kubectl apply -R -f configs/
</span></span></code></pre></div><h3 id=トレードオフ-2>トレードオフ</h3><p>命令型オブジェクト設定手法に対する長所:</p><ul><li>現行オブジェクトに直接行われた変更が、それらが設定ファイルに反映されていなかったとしても、保持されます</li><li>宣言型オブジェクト設定は、ディレクトリごとの処理をより良くサポートしており、自動的にオブジェクトごとに操作のタイプ(作成、パッチ、削除)を検出します</li></ul><p>命令型オブジェクト設定手法に対する短所:</p><ul><li>宣言型オブジェクト設定は、デバッグ、そして想定外の結果が出たときに理解するのが困難です</li><li>差分を利用した一部のみの更新は、複雑なマージ、パッチの操作が必要です</li></ul><h2 id=次の項目>次の項目</h2><ul><li><a href=/docs/tasks/manage-kubernetes-objects/imperative-command/>命令型コマンドを利用したKubernetesオブジェクトの管理</a></li><li><a href=/docs/tasks/manage-kubernetes-objects/imperative-config/>オブジェクト設定(命令型)を利用したKubernetesオブジェクトの管理</a></li><li><a href=/docs/tasks/manage-kubernetes-objects/declarative-config/>オブジェクト設定(宣言型)を利用したKubernetesオブジェクトの管理</a></li><li><a href=/docs/tasks/manage-kubernetes-objects/kustomization/>Kustomize(宣言型)を利用したKubernetesオブジェクトの管理</a></li><li><a href=/docs/reference/generated/kubectl/kubectl-commands/>Kubectlコマンドリファレンス</a></li><li><a href=https://kubectl.docs.kubernetes.io>Kubectl Book</a></li><li><a href=/docs/reference/generated/kubernetes-api/v1.25/>Kubernetes APIリファレンス</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-f37749a83c2916b63279ea60f3cfe53e>3 - オブジェクトの名前とID</h1><p>クラスター内の各オブジェクトには、そのタイプのリソースに固有の<a href=#names><em>名前</em></a>があります。すべてのKubernetesオブジェクトには、クラスター全体で一意の<a href=#uids><em>UID</em></a>もあります。</p><p>たとえば、同じ<a href=/ja/docs/concepts/overview/working-with-objects/namespaces/>名前空間</a>内に<code>myapp-1234</code>という名前のPodは1つしか含められませんが、<code>myapp-1234</code>という名前の1つのPodと1つのDeploymentを含めることができます。</p><p>ユーザーが一意ではない属性を付与するために、Kubernetesは<a href=/ja/docs/concepts/overview/working-with-objects/labels/>ラベル</a>と<a href=/ja/docs/concepts/overview/working-with-objects/annotations/>アノテーション</a>を提供しています。</p><h2 id=names>名前</h2><p>クライアントから提供され、リソースURL内のオブジェクトを参照する文字列です。例えば<code>/api/v1/pods/何らかの名前</code>のようになります。</p><p>同じ種類のオブジェクトは、同じ名前を同時に持つことはできません。しかし、オブジェクトを削除することで、旧オブジェクトと同じ名前で新しいオブジェクトを作成できます。</p><p>次の3つの命名規則がよく使われます。</p><h3 id=dns-subdomain-names>DNSサブドメイン名</h3><p>ほとんどのリソースタイプには、<a href=https://tools.ietf.org/html/rfc1123>RFC 1123</a>で定義されているDNSサブドメイン名として使用できる名前が必要です。
つまり、名前は次のとおりでなければなりません:</p><ul><li>253文字以内</li><li>英小文字、数字、「-」または「.」のみを含む</li><li>英数字で始まる</li><li>英数字で終わる</li></ul><h3 id=dns-label-names>DNSラベル名</h3><p>一部のリソースタイプでは、<a href=https://tools.ietf.org/html/rfc1123>RFC 1123</a>で定義されているDNSラベル標準に従う名前が必要です。
つまり、名前は次のとおりでなければなりません:</p><ul><li>63文字以内</li><li>英小文字、数字または「-」のみを含む</li><li>英数字で始まる</li><li>英数字で終わる</li></ul><h3 id=path-segment-names>パスセグメント名</h3><p>一部のリソースタイプでは、名前をパスセグメントとして安全にエンコードできるようにする必要があります。
つまり、名前を「.」や「..」にすることはできず、名前に「/」または「%」を含めることはできません。</p><p>以下は、<code>nginx-demo</code>という名前のPodのマニフェストの例です。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Pod<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx-demo<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>containers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>image</span>:<span style=color:#bbb> </span>nginx:1.14.2<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>ports</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:green;font-weight:700>containerPort</span>:<span style=color:#bbb> </span><span style=color:#666>80</span><span style=color:#bbb>
</span></span></span></code></pre></div><div class="alert alert-info note callout" role=alert><strong>備考:</strong> 一部のリソースタイプには、名前に追加の制限があります。</div><h2 id=uids>UID</h2><p>オブジェクトを一意に識別するためのKubernetesが生成する文字列です。</p><p>Kubernetesクラスターの生存期間中にわたって生成された全てのオブジェクトは、異なるUIDを持っています。これは類似のエンティティの、同一時間軸での存在を区別するのが目的です。</p><p>Kubernetes UIDは、UUIDのことを指します。
UUIDは、ISO/IEC 9834-8およびITU-T X.667として標準化されています。</p><h2 id=次の項目>次の項目</h2><ul><li>Kubernetesの<a href=/ja/docs/concepts/overview/working-with-objects/labels/>ラベル</a>についてお読みください。</li><li><a href=https://git.k8s.io/design-proposals-archive/architecture/identifiers.md>Kubernetesの識別子と名前</a>デザインドキュメントをご覧ください。</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-1127165f472b7181b9c1d5a0b187d620>4 - Namespace(名前空間)</h1><p>Kubernetesは、同一の物理クラスター上で複数の仮想クラスターの動作をサポートします。
この仮想クラスターをNamespaceと呼びます。</p><h2 id=複数のnamespaceを使う時>複数のNamespaceを使う時</h2><p>Namespaceは、複数のチーム・プロジェクトにまたがる多くのユーザーがいる環境での使用を目的としています。
数人から数十人しかユーザーのいないクラスターに対して、あなたはNamespaceを作成したり、考える必要は全くありません。
Kubernetesが提供するNamespaceの機能が必要となった時に、Namespaceの使用を始めてください。</p><p>Namespaceは名前空間のスコープを提供します。リソース名は単一のNamespace内ではユニークである必要がありますが、Namespace全体ではその必要はありません。Namespaceは相互にネストすることはできず、各Kubernetesリソースは1つのNamespaceにのみ存在できます。</p><p>Namespaceは、複数のユーザーの間でクラスターリソースを分割する方法です。(これは<a href=/docs/concepts/policy/resource-quotas/>リソースクォータ</a>を介して分割します。)</p><p>同じアプリケーションの異なるバージョンなど、少し違うリソースをただ分割するだけに、複数のNamespaceを使う必要はありません。
同一のNamespace内でリソースを区別するためには<a href=/ja/docs/concepts/overview/working-with-objects/labels/>ラベル</a>を使用してください。</p><h2 id=namespaceを利用する>Namespaceを利用する</h2><p>Namespaceの作成と削除方法は<a href=/docs/tasks/administer-cluster/namespaces/>Namespaceの管理ガイドドキュメント</a>に記載されています。</p><div class="alert alert-info note callout" role=alert><strong>備考:</strong> プレフィックス<code>kube-</code>を持つNamespaceは、KubernetesシステムのNamespaceとして予約されているため利用は避けてください。</div><h3 id=namespaceの表示>Namespaceの表示</h3><p>ユーザーは、以下の方法で単一クラスター内の現在のNamespaceの一覧を表示できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get namespace
</span></span></code></pre></div><pre tabindex=0><code>NAME              STATUS   AGE
default           Active   1d
kube-node-lease   Active   1d
kube-system       Active   1d
kube-public       Active   1d
</code></pre><p>Kubernetesの起動時には4つの初期Namespaceが作成されています。</p><ul><li><code>default</code> 他にNamespaceを持っていないオブジェクトのためのデフォルトNamespace</li><li><code>kube-system</code> Kubernetesシステムによって作成されたオブジェクトのためのNamespace</li><li><code>kube-public</code> このNamespaceは自動的に作成され、全てのユーザーから読み取り可能です。(認証されていないユーザーも含みます。)
このNamespaceは、リソースをクラスター全体を通じてパブリックに表示・読み取り可能にするため、ほとんどクラスターによって使用される用途で予約されます。 このNamespaceのパブリックな側面は単なる慣例であり、要件ではありません。</li><li><code>kube-node-lease</code> クラスターのスケールに応じたノードハートビートのパフォーマンスを向上させる各ノードに関連したLeaseオブジェクトのためのNamespace。</li></ul><h3 id=namespaceの設定>Namespaceの設定</h3><p>現在のリクエストのNamespaceを設定するには、<code>--namespace</code>フラグを使用します。</p><p>例:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl run nginx --image<span style=color:#666>=</span>nginx --namespace<span style=color:#666>=</span>&lt;insert-namespace-name-here&gt;
</span></span><span style=display:flex><span>kubectl get pods --namespace<span style=color:#666>=</span>&lt;insert-namespace-name-here&gt;
</span></span></code></pre></div><h3 id=namespace設定の永続化>Namespace設定の永続化</h3><p>ユーザーはあるコンテキストのその後のコマンドで使うために、コンテキスト内で永続的にNamespaceを保存できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl config set-context --current --namespace<span style=color:#666>=</span>&lt;insert-namespace-name-here&gt;
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Validate it</span>
</span></span><span style=display:flex><span>kubectl config view --minify | grep namespace:
</span></span></code></pre></div><h2 id=namespaceとdns>NamespaceとDNS</h2><p>ユーザーが<a href=/ja/docs/concepts/services-networking/service/>Service</a>を作成するとき、Serviceは対応する<a href=/ja/docs/concepts/services-networking/dns-pod-service/>DNSエントリ</a>を作成します。
このエントリは<code>&lt;service-name>.&lt;namespace-name>.svc.cluster.local</code>という形式になり、これはもしあるコンテナがただ<code>&lt;service-name></code>を指定していた場合、Namespace内のローカルのServiceに対して名前解決されます。
これはデベロップメント、ステージング、プロダクションといった複数のNamespaceをまたいで同じ設定を使う時に効果的です。
もしユーザーがNamespaceをまたいでアクセスしたい時、 完全修飾ドメイン名(FQDN)を指定する必要があります。</p><h2 id=すべてのオブジェクトはnamespaceに属しているとは限らない>すべてのオブジェクトはNamespaceに属しているとは限らない</h2><p>ほとんどのKubernetesリソース(例えば、Pod、Service、ReplicationControllerなど)はいくつかのNamespaceにあります。
しかしNamespaceのリソースそれ自体は単一のNamespace内にありません。
そして<a href=/ja/docs/concepts/architecture/nodes/>Node</a>やPersistentVolumeのような低レベルのリソースはどのNamespaceにも属していません。</p><p>どのKubernetesリソースがNamespaceに属しているか、属していないかを見るためには、以下のコマンドで確認できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># Namespaceに属しているもの</span>
</span></span><span style=display:flex><span>kubectl api-resources --namespaced<span style=color:#666>=</span><span style=color:#a2f>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Namespaceに属していないもの</span>
</span></span><span style=display:flex><span>kubectl api-resources --namespaced<span style=color:#666>=</span><span style=color:#a2f>false</span>
</span></span></code></pre></div><h2 id=次の項目>次の項目</h2><ul><li><a href=/docs/tasks/administer-cluster/namespaces/#creating-a-new-namespace>新しいNamespaceの作成</a>について学習してください。</li><li><a href=/docs/tasks/administer-cluster/namespaces/#deleting-a-namespace>Namespaceの削除</a>について学習してください。</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-f1dec4557fb8ffbac9f11390aaaf9fa4>5 - ラベル(Labels)とセレクター(Selectors)</h1><p><em>ラベル(Labels)</em> はPodなどのオブジェクトに割り当てられたキーとバリューのペアです。<br>ラベルはユーザーに関連した意味のあるオブジェクトの属性を指定するために使われることを目的としています。しかしKubernetesのコアシステムに対して直接的にその意味を暗示するものではありません。<br>ラベルはオブジェクトのサブセットを選択し、グルーピングするために使うことができます。また、ラベルはオブジェクトの作成時に割り当てられ、その後いつでも追加、修正ができます。<br>各オブジェクトはキーとバリューのラベルのセットを定義できます。各キーは、単一のオブジェクトに対してはユニークである必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#b44>&#34;metadata&#34;</span><span>:</span> {
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;labels&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;key1&#34;</span> : <span style=color:#b44>&#34;value1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;key2&#34;</span> : <span style=color:#b44>&#34;value2&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ラベルは効率的な検索・閲覧を可能にし、UIやCLI上での利用に最適です。
識別用途でない情報は、<a href=/ja/docs/concepts/overview/working-with-objects/annotations/>アノテーション</a>を用いて記録されるべきです。</p><h2 id=ラベルを使う動機>ラベルを使う動機</h2><p>ラベルは、クライアントにそのマッピング情報を保存することを要求することなく、ユーザー独自の組織構造をシステムオブジェクト上で疎結合にマッピングできます。</p><p>サービスデプロイメントとバッチ処理のパイプラインは多くの場合、多次元のエンティティとなります(例: 複数のパーティション、Deployment、リリーストラック、ティアー、ティアー毎のマイクロサービスなど)<br>管理は分野横断的な操作が必要になることが多く、それによって厳密な階層表現、特にユーザーによるものでなく、インフラストラクチャーによって定義された厳格な階層のカプセル化が破られます。</p><p>ラベルの例:</p><ul><li><code>"release" : "stable"</code>, <code>"release" : "canary"</code></li><li><code>"environment" : "dev"</code>, <code>"environment" : "qa"</code>, <code>"environment" : "production"</code></li><li><code>"tier" : "frontend"</code>, <code>"tier" : "backend"</code>, <code>"tier" : "cache"</code></li><li><code>"partition" : "customerA"</code>, <code>"partition" : "customerB"</code></li><li><code>"track" : "daily"</code>, <code>"track" : "weekly"</code></li></ul><p>これらは単によく使われるラベルの例です。ユーザーは自由に規約を決めることができます。
ラベルのキーは、ある1つのオブジェクトに対してユニークである必要があることは覚えておかなくてはなりません。</p><h2 id=syntax-and-character-set>構文と文字セット</h2><p>ラベルは、キーとバリューのベアです。正しいラベルキーは2つのセグメントを持ちます。<br>それは<code>/</code>によって分割されたオプショナルなプレフィックスと名前です。<br>名前セグメントは必須で、63文字以下である必要があり、文字列の最初と最後は英数字(<code>[a-z0-9A-Z]</code>)で、文字列の間ではこれに加えてダッシュ(<code>-</code>)、アンダースコア(<code>_</code>)、ドット(<code>.</code>)を使うことができます。<br>プレフィックスはオプションです。もしプレフィックスが指定されていた場合、プレフィックスはDNSサブドメイン形式である必要があり、それはドット(<code>.</code>)で区切られたDNSラベルのセットで、253文字以下である必要があり、最後にスラッシュ(<code>/</code>)が続きます。</p><p>もしプレフィックスが省略された場合、ラベルキーはそのユーザーに対してプライベートであると推定されます。<br>エンドユーザーのオブジェクトにラベルを追加するような自動化されたシステムコンポーネント(例: <code>kube-scheduler</code> <code>kube-controller-manager</code> <code>kube-apiserver</code> <code>kubectl</code>やその他のサードパーティツール)は、プレフィックスを指定しなくてはなりません。</p><p><code>kubernetes.io/</code>と<code>k8s.io/</code>プレフィックスは、Kubernetesコアコンポーネントのために予約されています。</p><p>正しいラベル値は63文字以下の長さで、空文字か、もしくは開始と終了が英数字(<code>[a-z0-9A-Z]</code>)で、文字列の間がダッシュ(<code>-</code>)、アンダースコア(<code>_</code>)、ドット(<code>.</code>)と英数字である文字列を使うことができます。</p><p>例えば、<code>environment: production</code>と<code>app: nginx</code>の2つのラベルを持つPodの設定ファイルは下記のようになります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Pod<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>label-demo<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>environment</span>:<span style=color:#bbb> </span>production<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>containers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>image</span>:<span style=color:#bbb> </span>nginx:1.14.2<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>ports</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:green;font-weight:700>containerPort</span>:<span style=color:#bbb> </span><span style=color:#666>80</span><span style=color:#bbb>
</span></span></span></code></pre></div><h2 id=label-selectors>ラベルセレクター</h2><p><a href=/ja/docs/concepts/overview/working-with-objects/names/>名前とUID</a>とは異なり、ラベルはユニーク性を提供しません。通常、多くのオブジェクトが同じラベルを保持することを想定します。</p><p><em>ラベルセレクター</em> を介して、クライアントとユーザーはオブジェクトのセットを指定できます。ラベルセレクターはKubernetesにおいてコアなグルーピング機能となります。</p><p>Kubernetes APIは現在2タイプのセレクターをサポートしています。<br>それは<em>等価ベース(equality-based)</em> と<em>集合ベース(set-based)</em> です。<br>単一のラベルセレクターは、コンマ区切りの複数の<em>要件(requirements)</em> で構成されています。<br>複数の要件がある場合、コンマセパレーターは論理積 <em>AND</em>(<code>&&</code>)オペレーターと同様にふるまい、全ての要件を満たす必要があります。</p><p>空文字の場合や、指定なしのセレクターに関するセマンティクスは、コンテキストに依存します。
そしてセレクターを使うAPIタイプは、それらのセレクターの妥当性とそれらが示す意味をドキュメントに記載するべきです。</p><div class="alert alert-info note callout" role=alert><strong>備考:</strong> ReplicaSetなど、いくつかのAPIタイプにおいて、2つのインスタンスのラベルセレクターは単一の名前空間において重複してはいけません。重複していると、コントローラがそれらのラベルセレクターがコンフリクトした操作とみなし、どれだけの数のレプリカを稼働させるべきか決めることができなくなります。</div><div class="alert alert-warning caution callout" role=alert><strong>注意:</strong> 等価ベース、集合ベースともに、論理OR (<code>||</code>) オペレーターは存在しません。フィルターステートメントが意図した通りになっていることを確認してください。</div><h3 id=等価ベース-equality-based-の要件-requirement><em>等価ベース(Equality-based)</em> の要件(requirement)</h3><p><em>等価ベース(Equality-based)</em> もしくは<em>不等ベース(Inequality-based)</em> の要件は、ラベルキーとラベル値によるフィルタリングを可能にします。<br>要件に一致したオブジェクトは、指定されたラベルの全てを満たさなくてはいけませんが、それらのオブジェクトはさらに追加のラベルも持つことができます。<br>そして等価ベースの要件においては、3つの種類のオペレーターの利用が許可されています。<code>=</code>、<code>==</code>、<code>!=</code>となります。<br>最初の2つのオペレーター(<code>=</code>、<code>==</code>)は<em>等価(Equality)</em> を表現し(この2つは単なる同義語)、最後の1つ(<code>!=</code>)は<em>不等(Inequality)</em> を意味します。<br>例えば</p><pre tabindex=0><code>environment = production
tier != frontend
</code></pre><p>最初の例は、キーが<code>environment</code>で、値が<code>production</code>である全てのリソースを対象にします。<br>次の例は、キーが<code>tier</code>で、値が<code>frontend</code>とは異なるリソースと、<code>tier</code>という名前のキーを持たない全てのリソースを対象にします。<br>コンマセパレーター<code>,</code>を使って、<code>production</code>の中から、<code>frontend</code>のものを除外するようにフィルターすることもできます。<br><code>environment=production,tier!=frontend</code></p><p>等価ベースのラベル要件の1つの使用シナリオとして、PodにおけるNodeの選択要件を指定するケースがあります。<br>例えば、下記のサンプルPodは、ラベル<code>accelerator=nvidia-tesla-p100</code>をもったNodeを選択します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Pod<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>cuda-test<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>containers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>cuda-test<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>image</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;k8s.gcr.io/cuda-vector-add:v0.1&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>limits</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>          </span><span style=color:green;font-weight:700>nvidia.com/gpu</span>:<span style=color:#bbb> </span><span style=color:#666>1</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>nodeSelector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>accelerator</span>:<span style=color:#bbb> </span>nvidia-tesla-p100<span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=集合ベース-set-based-の要件-requirement><em>集合ベース(Set-based)</em> の要件(requirement)</h3><p><em>集合ベース(Set-based)</em> のラベルの要件は値のセットによってキーをフィルタリングします。<br><code>in</code>、<code>notin</code>、<code>exists</code>の3つのオペレーターをサポートしています(キーを特定するのみ)。</p><p>例えば:</p><pre tabindex=0><code>environment in (production, qa)
tier notin (frontend, backend)
partition
!partition
</code></pre><ul><li>最初の例では、キーが<code>environment</code>で、値が<code>production</code>か<code>qa</code>に等しいリソースを全て選択します。</li><li>第2の例では、キーが<code>tier</code>で、値が<code>frontend</code>と<code>backend</code>以外のもの、そして<code>tier</code>キーを持たないリソースを全て選択します。</li><li>第3の例では、<code>partition</code>というキーをもつラベルを全て選択し、値はチェックしません。</li><li>第4の例では、<code>partition</code>というキーを持たないラベルを全て選択し、値はチェックしません。</li></ul><p>同様に、コンマセパレーターは、<em>AND</em> オペレーターと同様にふるまいます。そのため、<code>partition</code>と<code>environment</code>キーの値がともに<code>qa</code>でないラベルを選択するには、<code>partition,environment notin (qa)</code>と記述することで可能です。<br><em>集合ベース</em> のラベルセレクターは、<code>environment=production</code>という記述が<code>environment in (production)</code>と等しいため、一般的な等価形式となります。 <code>!=</code>と<code>notin</code>も同様に等価となります。</p><p><em>集合ベース</em> の要件は、<em>等価ベース</em> の要件と混在できます。<br>例えば:<br><code>partition in (customerA, customerB),environment!=qa</code>.</p><h2 id=api>API</h2><h3 id=listとwatchによるフィルタリング>LISTとWATCHによるフィルタリング</h3><p>LISTとWATCHオペレーションは、単一のクエリパラメータを使うことによって返されるオブジェクトのセットをフィルターするためのラベルセレクターを指定できます。<br><em>集合ベース</em> と<em>等価ベース</em> のどちらの要件も許可されています(ここでは、URLクエリストリング内で出現します)。</p><ul><li><em>等価ベース</em> での要件: <code>?labelSelector=environment%3Dproduction,tier%3Dfrontend</code></li><li><em>集合ベース</em> での要件: <code>?labelSelector=environment+in+%28production%2Cqa%29%2Ctier+in+%28frontend%29</code></li></ul><p>上記の2つの形式のラベルセレクターはRESTクライアントを介してリストにしたり、もしくは確認するために使われます。<br>例えば、<code>kubectl</code>によって<code>apiserver</code>をターゲットにし、<em>等価ベース</em> の要件でフィルターすると以下のように書けます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -l <span style=color:#b8860b>environment</span><span style=color:#666>=</span>production,tier<span style=color:#666>=</span>frontend
</span></span></code></pre></div><p>もしくは、<em>集合ベース</em> の要件を指定すると以下のようになります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -l <span style=color:#b44>&#39;environment in (production),tier in (frontend)&#39;</span>
</span></span></code></pre></div><p>すでに言及したように、<em>集合ベース</em> の要件は、<em>等価ベース</em> の要件より表現力があります。<br>例えば、値に対する <em>OR</em> オペレーターを実装して以下のように書けます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -l <span style=color:#b44>&#39;environment in (production, qa)&#39;</span>
</span></span></code></pre></div><p>もしくは、<em>exists</em> オペレーターを介して、否定マッチングによる制限もできます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -l <span style=color:#b44>&#39;environment,environment notin (frontend)&#39;</span>
</span></span></code></pre></div><h3 id=apiオブジェクトに参照を設定する>APIオブジェクトに参照を設定する</h3><p><a href=/ja/docs/concepts/services-networking/service/><code>Service</code></a> と <a href=/docs/concepts/workloads/controllers/replicationcontroller/><code>ReplicationController</code></a>のような、いくつかのKubernetesオブジェクトでは、ラベルセレクターを<a href=/ja/docs/concepts/workloads/pods/>Pod</a>のような他のリソースのセットを指定するのにも使われます。</p><h4 id=serviceとreplicationcontroller>ServiceとReplicationController</h4><p><code>Service</code>が対象とするPodの集合は、ラベルセレクターによって定義されます。<br>同様に、<code>ReplicationController</code>が管理するべきPod数についてもラベルセレクターを使って定義されます。</p><p>それぞれのオブジェクトに対するラベルセレクターはマップを使って<code>json</code>もしくは<code>yaml</code>形式のファイルで定義され、<em>等価ベース</em> のセレクターのみサポートされています。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#b44>&#34;selector&#34;</span><span>:</span> {
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;component&#34;</span> : <span style=color:#b44>&#34;redis&#34;</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>もしくは</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>selector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>component</span>:<span style=color:#bbb> </span>redis<span style=color:#bbb>
</span></span></span></code></pre></div><p>このセレクター(それぞれ<code>json</code>または<code>yaml</code>形式)は、<code>component=redis</code>または<code>component in (redis)</code>と等価です。</p><h4 id=集合ベース-の要件指定をサポートするリソース><em>集合ベース</em> の要件指定をサポートするリソース</h4><p><a href=/docs/concepts/workloads/controllers/job/><code>Job</code></a>や<a href=/ja/docs/concepts/workloads/controllers/deployment/><code>Deployment</code></a>、<a href=/ja/docs/concepts/workloads/controllers/replicaset/><code>ReplicaSet</code></a>や<a href=/ja/docs/concepts/workloads/controllers/daemonset/><code>DaemonSet</code></a>などの比較的新しいリソースは、<em>集合ベース</em> での要件指定もサポートしています。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>selector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>matchLabels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>component</span>:<span style=color:#bbb> </span>redis<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>matchExpressions</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:green;font-weight:700>key: tier, operator: In, values</span>:<span style=color:#bbb> </span>[cache]}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:green;font-weight:700>key: environment, operator: NotIn, values</span>:<span style=color:#bbb> </span>[dev]}<span style=color:#bbb>
</span></span></span></code></pre></div><p><code>matchLabels</code>は、<code>{key,value}</code>ペアのマップです。<code>matchLabels</code>内の単一の<code>{key,value}</code>は、<code>matchExpressions</code>の要素と等しく、それは、<code>key</code>フィールドがキー名で、<code>operator</code>が"In"で、<code>values</code>配列は単に"値"を保持します。<br><code>matchExpressions</code>はPodセレクター要件のリストです。対応しているオペレーターは<code>In</code>、<code>NotIn</code>、<code>Exists</code>と<code>DoesNotExist</code>です。<code>values</code>のセットは、<code>In</code>と<code>NotIn</code>オペレーターにおいては空文字を許容しません。<br><code>matchLabels</code>と<code>matchExpressions</code>の両方によって指定された全ての要件指定はANDで判定されます。つまり要件にマッチするには指定された全ての要件を満たす必要があります。</p><h4 id=nodeのセットを選択する>Nodeのセットを選択する</h4><p>ラベルを選択するための1つのユースケースはPodがスケジュールできるNodeのセットを制限することです。<br>さらなる情報に関しては、<a href=/ja/docs/concepts/scheduling-eviction/assign-pod-node/>Node選定</a> のドキュメントを参照してください。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-93cd7a1d4e1623e2bf01afc49a5af69c>6 - アノテーション(Annotations)</h1><p>ユーザーは、識別用途でない任意のメタデータをオブジェクトに割り当てるためにアノテーションを使用できます。ツールやライブラリなどのクライアントは、このメタデータを取得できます。</p><h2 id=オブジェクトにメタデータを割り当てる>オブジェクトにメタデータを割り当てる</h2><p>ユーザーは、Kubernetesオブジェクトに対してラベルやアノテーションの両方またはどちらか一方を割り当てることができます。
ラベルはオブジェクトの選択や、特定の条件を満たしたオブジェクトの集合を探すことに使うことができます。
それと対照的に、アノテーションはオブジェクトを識別、または選択するために使用されません。
アノテーション内のメタデータは大小様々で、構造化されているものや、そうでないものも設定でき、ラベルでは許可されていない文字も含むことができます。</p><p>アノテーションは、ラベルと同様に、キーとバリューのマップとなります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#b44>&#34;metadata&#34;</span><span>:</span> {
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;annotations&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;key1&#34;</span> : <span style=color:#b44>&#34;value1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;key2&#34;</span> : <span style=color:#b44>&#34;value2&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>下記は、アノテーション内で記録できる情報の例です。</p><ul><li><p>宣言的設定レイヤによって管理されているフィールド。これらのフィールドをアノテーションとして割り当てることで、クライアントもしくはサーバによってセットされたデフォルト値、オートサイジングやオートスケーリングシステムによってセットされたフィールドや、自動生成のフィールドなどと区別することができます。</p></li><li><p>ビルド、リリースやタイムスタンプのようなイメージの情報、リリースID、gitのブランチ、PR番号、イメージハッシュ、レジストリアドレスなど</p></li><li><p>ロギング、監視、分析用のポインタ、もしくは監査用リポジトリ</p></li><li><p>デバッグ目的で使用されるためのクライアントライブラリやツールの情報。例えば、名前、バージョン、ビルド情報など。</p></li><li><p>他のエコシステムのコンポーネントからの関連オブジェクトのURLなど、ユーザーやツール、システムの出所情報。</p></li><li><p>軽量ロールアウトツールのメタデータ。　例えば設定やチェックポイントなど。</p></li><li><p>情報をどこで確認できるかを示すためのもの。例えばチームのウェブサイト、責任者の電話番号や、ページャー番号やディレクトリエンティティなど。</p></li><li><p>システムのふるまいの変更や、標準ではない機能を利用可能にするために、エンドユーザーがシステムに対して指定する値</p></li></ul><p>アノテーションを使用するかわりに、ユーザーはこのようなタイプの情報を外部のデータベースやディレクトリに保存することもできます。しかし、それによりデプロイ、管理、イントロスペクションを行うためのクライアンライブラリやツールの生成が非常に難しくなります。</p><h2 id=構文と文字セット>構文と文字セット</h2><p><em>アノテーション</em> はキーとバリューのペアです。有効なアノテーションのキーの形式は2つのセグメントがあります。
プレフィックス(オプション)と名前で、それらはスラッシュ<code>/</code>で区切られます。
名前セグメントは必須で、63文字以下である必要があり、文字列の最初と最後は英数字(<code>[a-z0-9A-Z]</code>)と、文字列の間にダッシュ(<code>-</code>)、アンダースコア(<code>_</code>)、ドット(<code>.</code>)を使うことができます。
プレフィックスはオプションです。もしプレフィックスが指定されていた場合、プレフィックスはDNSサブドメイン形式である必要があり、それはドット(<code>.</code>)で区切られたDNSラベルのセットで、253文字以下である必要があり、最後にスラッシュ(<code>/</code>)が続きます。</p><p>もしプレフィックスが除外された場合、アノテーションキーはそのユーザーに対してプライベートであると推定されます。
エンドユーザーのオブジェクトにアノテーションを追加するような自動化されたシステムコンポーネント(例: <code>kube-scheduler</code> <code>kube-controller-manager</code> <code>kube-apiserver</code> <code>kubectl</code>やその他のサードパーティツール)は、プレフィックスを指定しなくてはなりません。</p><p><code>kubernetes.io/</code>と<code>k8s.io/</code>プレフィックスは、Kubernetesコアコンポーネントのために予約されています。</p><p>たとえば、<code>imageregistry: https://hub.docker.com/</code>というアノテーションが付いたPodの構成ファイルは次のとおりです:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Pod<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>annotations-demo<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>annotations</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>imageregistry</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;https://hub.docker.com/&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>containers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>image</span>:<span style=color:#bbb> </span>nginx:1.14.2<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>ports</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:green;font-weight:700>containerPort</span>:<span style=color:#bbb> </span><span style=color:#666>80</span><span style=color:#bbb>
</span></span></span></code></pre></div><h2 id=次の項目>次の項目</h2><p><a href=/ja/docs/concepts/overview/working-with-objects/labels/>ラベルとセレクター</a>について学習してください。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-046c03090d47bc4b89b818dc645c3865>7 - フィールドセレクター(Field Selectors)</h1><p><em>フィールドセレクター(Field Selectors)</em> は、1つかそれ以上のリソースフィールドの値を元に<a href=/ja/docs/concepts/overview/working-with-objects/kubernetes-objects>Kubernetesリソースを選択</a>するためのものです。<br>フィールドセレクタークエリの例は以下の通りです。</p><ul><li><code>metadata.name=my-service</code></li><li><code>metadata.namespace!=default</code></li><li><code>status.phase=Pending</code></li></ul><p>下記の<code>kubectl</code>コマンドは、<a href=/ja/docs/concepts/workloads/pods/pod-lifecycle/#pod-phase><code>status.phase</code></a>フィールドの値が<code>Running</code>である全てのPodを選択します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods --field-selector status.phase<span style=color:#666>=</span>Running
</span></span></code></pre></div><div class="alert alert-info note callout" role=alert><strong>備考:</strong> フィールドセレクターは本質的にリソースの <em>フィルター</em> となります。デフォルトでは、セレクター/フィルターが指定されていない場合は、全てのタイプのリソースが取得されます。これは、<code>kubectl</code>クエリの<code>kubectl get pods</code>と<code>kubectl get pods --field-selector ""</code>が同じであることを意味します。</div><h2 id=サポートされているフィールド>サポートされているフィールド</h2><p>サポートされているフィールドセレクターはKubernetesリソースタイプによって異なります。全てのリソースタイプは<code>metadata.name</code>と<code>metadata.namespace</code>フィールドをサポートしています。サポートされていないフィールドセレクターの使用をするとエラーとなります。<br>例えば以下の通りです。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get ingress --field-selector foo.bar<span style=color:#666>=</span>baz
</span></span></code></pre></div><pre tabindex=0><code>Error from server (BadRequest): Unable to find &#34;ingresses&#34; that match label selector &#34;&#34;, field selector &#34;foo.bar=baz&#34;: &#34;foo.bar&#34; is not a known field selector: only &#34;metadata.name&#34;, &#34;metadata.namespace&#34;
</code></pre><h2 id=サポートされているオペレーター>サポートされているオペレーター</h2><p>ユーザーは、<code>=</code>、<code>==</code>や<code>!=</code>といったオペレーターをフィールドセレクターと組み合わせて使用できます。(<code>=</code>と<code>==</code>は同義)<br>例として、下記の<code>kubectl</code>コマンドは<code>default</code>ネームスペースに属していない全てのKubernetes Serviceを選択します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get services  --all-namespaces --field-selector metadata.namespace!<span style=color:#666>=</span>default
</span></span></code></pre></div><h2 id=連結されたセレクター>連結されたセレクター</h2><p><a href=/docs/concepts/overview/working-with-objects/labels>ラベル</a>や他のセレクターと同様に、フィールドセレクターはコンマ区切りのリストとして連結することができます。<br>下記の<code>kubectl</code>コマンドは、<code>status.phase</code>が<code>Runnning</code>でなく、かつ<code>spec.restartPolicy</code>フィールドが<code>Always</code>に等しいような全てのPodを選択します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods --field-selector<span style=color:#666>=</span>status.phase!<span style=color:#666>=</span>Running,spec.restartPolicy<span style=color:#666>=</span>Always
</span></span></code></pre></div><h2 id=複数のリソースタイプ>複数のリソースタイプ</h2><p>ユーザーは複数のリソースタイプにまたがったフィールドセレクターを利用できます。<br>下記の<code>kubectl</code>コマンドは、<code>default</code>ネームスペースに属していない全てのStatefulSetとServiceを選択します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get statefulsets,services --field-selector metadata.namespace!<span style=color:#666>=</span>default
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5dd62c6a4a481b4cf1ac50f6799eb581>8 - 推奨ラベル(Recommended Labels)</h1><p>ユーザーはkubectlやダッシュボード以外に、多くのツールでKubernetesオブジェクトの管理と可視化ができます。共通のラベルセットにより、全てのツールにおいて解釈可能な共通のマナーに沿ってオブジェクトを表現することで、ツールの相互運用を可能にします。</p><p>ツール化に対するサポートに加えて、推奨ラベルはクエリ可能な方法でアプリケーションを表現します。</p><p>メタデータは、<em>アプリケーション</em> のコンセプトを中心に構成されています。KubernetesはPaaS(Platform as a Service)でなく、アプリケーションの公式な概念を持たず、またそれを強制することはありません。
そのかわり、アプリケーションは、非公式で、メタデータによって表現されています。単一のアプリケーションが有する項目に対する定義は厳密に決められていません。</p><div class="alert alert-info note callout" role=alert><strong>備考:</strong> ラベルには推奨ラベルというものがあります。それらのラベルはアプリケーションの管理を容易にします。しかしコア機能のツール化において必須のものではありません。</div><p>共有されたラベルとアノテーションは、<code>app.kubernetes.io</code>という共通のプレフィックスを持ちます。プレフィックスの無いラベルはユーザーに対してプライベートなものになります。その共有されたプレフィックスは、共有ラベルがユーザーのカスタムラベルに干渉しないことを保証します。</p><h2 id=ラベル>ラベル</h2><p>これらの推奨ラベルの利点を最大限得るためには、全てのリソースオブジェクトに対して推奨ラベルが適用されるべきです。</p><table><thead><tr><th>キー</th><th>説明</th><th>例</th><th>型</th></tr></thead><tbody><tr><td><code>app.kubernetes.io/name</code></td><td>アプリケーション名</td><td><code>mysql</code></td><td>文字列</td></tr><tr><td><code>app.kubernetes.io/instance</code></td><td>アプリケーションのインスタンスを特定するための固有名</td><td><code>mysql-abcxzy</code></td><td>文字列</td></tr><tr><td><code>app.kubernetes.io/version</code></td><td>アプリケーションの現在のバージョン (例: セマンティックバージョン、リビジョンのハッシュなど)</td><td><code>5.7.21</code></td><td>文字列</td></tr><tr><td><code>app.kubernetes.io/component</code></td><td>アーキテクチャ内のコンポーネント</td><td><code>database</code></td><td>文字列</td></tr><tr><td><code>app.kubernetes.io/part-of</code></td><td>このアプリケーションによって構成される上位レベルのアプリケーション</td><td><code>wordpress</code></td><td>文字列</td></tr><tr><td><code>app.kubernetes.io/managed-by</code></td><td>このアプリケーションの操作を管理するために使われているツール</td><td><code>helm</code></td><td>文字列</td></tr></tbody></table><p>これらのラベルが実際にどう使われているかを表すために、下記のStatefulSetのオブジェクトを考えましょう。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apps/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>StatefulSet<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/name</span>:<span style=color:#bbb> </span>mysql<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/instance</span>:<span style=color:#bbb> </span>mysql-abcxzy<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/version</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;5.7.21&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/component</span>:<span style=color:#bbb> </span>database<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/part-of</span>:<span style=color:#bbb> </span>wordpress<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/managed-by</span>:<span style=color:#bbb> </span>helm<span style=color:#bbb>
</span></span></span></code></pre></div><h2 id=アプリケーションとアプリケーションのインスタンス>アプリケーションとアプリケーションのインスタンス</h2><p>単一のアプリケーションは、Kubernetesクラスタ内で、いくつかのケースでは同一の名前空間に対して1回または複数回インストールされることがあります。
例えば、WordPressは複数のウェブサイトがあれば、それぞれ別のWordPressが複数回インストールされることがあります。</p><p>アプリケーション名と、アプリケーションのインスタンス名はそれぞれ別に記録されます。
例えば、WordPressは<code>app.kubernetes.io/name</code>に<code>wordpress</code>と記述され、インスタンス名に関しては<code>app.kubernetes.io/instance</code>に<code>wordpress-abcxzy</code>と記述されます。この仕組みはアプリケーションと、アプリケーションのインスタンスを特定可能にします。全てのアプリケーションインスタンスは固有の名前を持たなければなりません。</p><h2 id=ラベルの使用例>ラベルの使用例</h2><p>ここでは、ラベルの異なる使用例を示します。これらの例はそれぞれシステムの複雑さが異なります。</p><h3 id=シンプルなステートレスサービス>シンプルなステートレスサービス</h3><p><code>Deployment</code>と<code>Service</code>オブジェクトを使って、シンプルなステートレスサービスをデプロイするケースを考えます。下記の2つのスニペットはラベルが最もシンプルな形式においてどのように使われるかをあらわします。</p><p>下記の<code>Deployment</code>は、アプリケーションを稼働させるポッドを管理するのに使われます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apps/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Deployment<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/name</span>:<span style=color:#bbb> </span>myservice<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/instance</span>:<span style=color:#bbb> </span>myservice-abcxzy<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span></span></span></code></pre></div><p>下記の<code>Service</code>は、アプリケーションを公開するために使われます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Service<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/name</span>:<span style=color:#bbb> </span>myservice<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/instance</span>:<span style=color:#bbb> </span>myservice-abcxzy<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=データベースを使ったウェブアプリケーション>データベースを使ったウェブアプリケーション</h3><p>次にもう少し複雑なアプリケーションについて考えます。データベース(MySQL)を使ったウェブアプリケーション(WordPress)で、Helmを使ってインストールします。
下記のスニペットは、このアプリケーションをデプロイするために使うオブジェクト設定の出だし部分です。</p><p>はじめに下記の<code>Deployment</code>は、WordPressのために使われます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apps/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Deployment<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/name</span>:<span style=color:#bbb> </span>wordpress<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/instance</span>:<span style=color:#bbb> </span>wordpress-abcxzy<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/version</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;4.9.4&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/managed-by</span>:<span style=color:#bbb> </span>helm<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/component</span>:<span style=color:#bbb> </span>server<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/part-of</span>:<span style=color:#bbb> </span>wordpress<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span></span></span></code></pre></div><p>下記の<code>Service</code>は、WordPressを公開するために使われます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Service<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/name</span>:<span style=color:#bbb> </span>wordpress<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/instance</span>:<span style=color:#bbb> </span>wordpress-abcxzy<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/version</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;4.9.4&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/managed-by</span>:<span style=color:#bbb> </span>helm<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/component</span>:<span style=color:#bbb> </span>server<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/part-of</span>:<span style=color:#bbb> </span>wordpress<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span></span></span></code></pre></div><p>MySQLは<code>StatefulSet</code>として公開され、MySQL自身と、MySQLが属する親アプリケーションのメタデータを持ちます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apps/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>StatefulSet<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/name</span>:<span style=color:#bbb> </span>mysql<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/instance</span>:<span style=color:#bbb> </span>mysql-abcxzy<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/version</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;5.7.21&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/managed-by</span>:<span style=color:#bbb> </span>helm<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/component</span>:<span style=color:#bbb> </span>database<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/part-of</span>:<span style=color:#bbb> </span>wordpress<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span></span></span></code></pre></div><p>この<code>Service</code>はMySQLをWordPressアプリケーションの一部として公開します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Service<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/name</span>:<span style=color:#bbb> </span>mysql<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/instance</span>:<span style=color:#bbb> </span>mysql-abcxzy<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/version</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;5.7.21&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/managed-by</span>:<span style=color:#bbb> </span>helm<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/component</span>:<span style=color:#bbb> </span>database<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>app.kubernetes.io/part-of</span>:<span style=color:#bbb> </span>wordpress<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span></span></span></code></pre></div><p>MySQLの<code>StatefulSet</code>と<code>Service</code>により、MySQLとWordPressに関するより広範な情報が含まれていることに気づくでしょう。</p></div></main></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/ja/docs/home/>ホーム</a>
<a class=text-white href=/ja/blog/>Blogs</a>
<a class=text-white href=/ja/training/>トレーニング</a>
<a class=text-white href=/ja/partners/>パートナー</a>
<a class=text-white href=/ja/community/>コミュニティ</a>
<a class=text-white href=/ja/case-studies/>ケーススタディ</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a></small><br><small class=text-white>Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage class=light-text>Trademark Usage page</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>