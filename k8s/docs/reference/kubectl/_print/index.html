<!doctype html><html lang=en class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=zh-cn href=https://kubernetes.io/zh-cn/docs/reference/kubectl/><link rel=alternate hreflang=ko href=https://kubernetes.io/ko/docs/reference/kubectl/><link rel=alternate hreflang=ja href=https://kubernetes.io/ja/docs/reference/kubectl/><link rel=alternate hreflang=fr href=https://kubernetes.io/fr/docs/reference/kubectl/><link rel=alternate hreflang=de href=https://kubernetes.io/de/docs/reference/kubectl/><link rel=alternate hreflang=es href=https://kubernetes.io/es/docs/reference/kubectl/><link rel=alternate hreflang=pt-br href=https://kubernetes.io/pt-br/docs/reference/kubectl/><link rel=alternate hreflang=id href=https://kubernetes.io/id/docs/reference/kubectl/><link rel=alternate hreflang=ru href=https://kubernetes.io/ru/docs/reference/kubectl/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://kubernetes.io/docs/reference/kubectl/><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>Command line tool (kubectl) | Kubernetes</title><meta property="og:title" content="Command line tool (kubectl)"><meta property="og:description" content="Production-Grade Container Orchestration"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.io/docs/reference/kubectl/"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="Command line tool (kubectl)"><meta itemprop=description content="Production-Grade Container Orchestration"><meta name=twitter:card content="summary"><meta name=twitter:title content="Command line tool (kubectl)"><meta name=twitter:description content="Production-Grade Container Orchestration"><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content="Kubernetes provides a command line tool for communicating with a Kubernetes cluster's control plane, using the Kubernetes API.
This tool is named kubectl.
For configuration, kubectl looks for a file named config in the $HOME/.kube directory. You can specify other kubeconfig files by setting the KUBECONFIG environment variable or by setting the --kubeconfig flag.
This overview covers kubectl syntax, describes the command operations, and provides common examples. For details about each command, including all the supported flags and subcommands, see the kubectl reference documentation."><meta property="og:description" content="Kubernetes provides a command line tool for communicating with a Kubernetes cluster's control plane, using the Kubernetes API.
This tool is named kubectl.
For configuration, kubectl looks for a file named config in the $HOME/.kube directory. You can specify other kubeconfig files by setting the KUBECONFIG environment variable or by setting the --kubeconfig flag.
This overview covers kubectl syntax, describes the command operations, and provides common examples. For details about each command, including all the supported flags and subcommands, see the kubectl reference documentation."><meta name=twitter:description content="Kubernetes provides a command line tool for communicating with a Kubernetes cluster's control plane, using the Kubernetes API.
This tool is named kubectl.
For configuration, kubectl looks for a file named config in the $HOME/.kube directory. You can specify other kubeconfig files by setting the KUBECONFIG environment variable or by setting the --kubeconfig flag.
This overview covers kubectl syntax, describes the command operations, and provides common examples. For details about each command, including all the supported flags and subcommands, see the kubectl reference documentation."><meta property="og:url" content="https://kubernetes.io/docs/reference/kubectl/"><meta property="og:title" content="Command line tool (kubectl)"><meta name=twitter:title content="Command line tool (kubectl)"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/docs/>Documentation</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/blog/>Kubernetes Blog</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/training/>Training</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/partners/>Partners</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/community/>Community</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/case-studies/>Case Studies</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Versions</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/docs/reference/kubectl/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/docs/reference/kubectl/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/docs/reference/kubectl/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/docs/reference/kubectl/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/docs/reference/kubectl/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh-cn/docs/reference/kubectl/>中文 (Chinese)</a>
<a class=dropdown-item href=/ko/docs/reference/kubectl/>한국어 (Korean)</a>
<a class=dropdown-item href=/ja/docs/reference/kubectl/>日本語 (Japanese)</a>
<a class=dropdown-item href=/fr/docs/reference/kubectl/>Français (French)</a>
<a class=dropdown-item href=/de/docs/reference/kubectl/>Deutsch (German)</a>
<a class=dropdown-item href=/es/docs/reference/kubectl/>Español (Spanish)</a>
<a class=dropdown-item href=/pt-br/docs/reference/kubectl/>Português (Portuguese)</a>
<a class=dropdown-item href=/id/docs/reference/kubectl/>Bahasa Indonesia</a>
<a class=dropdown-item href=/ru/docs/reference/kubectl/>Русский (Russian)</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/reference/kubectl/>Return to the regular view of this page</a>.</p></div><h1 class=title>Command line tool (kubectl)</h1><ul><li>1: <a href=#pg-8aba901ac13f124e5782b90ddb166ee2>kubectl Cheat Sheet</a></li><li>2: <a href=#pg-d7ffbf04ffbefb241fd0722423b80f5a>kubectl Commands</a></li><li>3: <a href=#pg-4d3e62632c189fcc3c1357cd8fb8799c>kubectl</a></li><li>4: <a href=#pg-a938176c695852fe70362c29cf615f1c>JSONPath Support</a></li><li>5: <a href=#pg-a7abc09192597e614b58f8b552b682f5>kubectl for Docker Users</a></li><li>6: <a href=#pg-8de6aceb8bf692c06cced446bac5bc92>kubectl Usage Conventions</a></li></ul><div class=content><p>Kubernetes provides a command line tool for communicating with a Kubernetes cluster's
<a class=glossary-tooltip title='The container orchestration layer that exposes the API and interfaces to define, deploy, and manage the lifecycle of containers.' data-toggle=tooltip data-placement=top href='/docs/reference/glossary/?all=true#term-control-plane' target=_blank aria-label='control plane'>control plane</a>,
using the Kubernetes API.</p><p>This tool is named <code>kubectl</code>.</p><p>For configuration, <code>kubectl</code> looks for a file named <code>config</code> in the <code>$HOME/.kube</code> directory.
You can specify other <a href=/docs/concepts/configuration/organize-cluster-access-kubeconfig/>kubeconfig</a>
files by setting the <code>KUBECONFIG</code> environment variable or by setting the
<a href=/docs/concepts/configuration/organize-cluster-access-kubeconfig/><code>--kubeconfig</code></a> flag.</p><p>This overview covers <code>kubectl</code> syntax, describes the command operations, and provides common examples.
For details about each command, including all the supported flags and subcommands, see the
<a href=/docs/reference/generated/kubectl/kubectl-commands/>kubectl</a> reference documentation.</p><p>For installation instructions, see <a href=/docs/tasks/tools/#kubectl>Installing kubectl</a>;
for a quick guide, see the <a href=/docs/reference/kubectl/cheatsheet/>cheat sheet</a>.
If you're used to using the <code>docker</code> command-line tool, <a href=/docs/reference/kubectl/docker-cli-to-kubectl/><code>kubectl</code> for Docker Users</a> explains some equivalent commands for Kubernetes.</p><h2 id=syntax>Syntax</h2><p>Use the following syntax to run <code>kubectl</code> commands from your terminal window:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl <span style=color:#666>[</span>command<span style=color:#666>]</span> <span style=color:#666>[</span>TYPE<span style=color:#666>]</span> <span style=color:#666>[</span>NAME<span style=color:#666>]</span> <span style=color:#666>[</span>flags<span style=color:#666>]</span>
</span></span></code></pre></div><p>where <code>command</code>, <code>TYPE</code>, <code>NAME</code>, and <code>flags</code> are:</p><ul><li><p><code>command</code>: Specifies the operation that you want to perform on one or more resources,
for example <code>create</code>, <code>get</code>, <code>describe</code>, <code>delete</code>.</p></li><li><p><code>TYPE</code>: Specifies the <a href=#resource-types>resource type</a>. Resource types are case-insensitive and
you can specify the singular, plural, or abbreviated forms.
For example, the following commands produce the same output:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod pod1
</span></span><span style=display:flex><span>kubectl get pods pod1
</span></span><span style=display:flex><span>kubectl get po pod1
</span></span></code></pre></div></li><li><p><code>NAME</code>: Specifies the name of the resource. Names are case-sensitive. If the name is omitted, details for all resources are displayed, for example <code>kubectl get pods</code>.</p><p>When performing an operation on multiple resources, you can specify each resource by type and name or specify one or more files:</p><ul><li><p>To specify resources by type and name:</p><ul><li><p>To group resources if they are all the same type: <code>TYPE1 name1 name2 name&lt;#></code>.<br>Example: <code>kubectl get pod example-pod1 example-pod2</code></p></li><li><p>To specify multiple resource types individually: <code>TYPE1/name1 TYPE1/name2 TYPE2/name3 TYPE&lt;#>/name&lt;#></code>.<br>Example: <code>kubectl get pod/example-pod1 replicationcontroller/example-rc1</code></p></li></ul></li><li><p>To specify resources with one or more files: <code>-f file1 -f file2 -f file&lt;#></code></p><ul><li><a href=/docs/concepts/configuration/overview/#general-configuration-tips>Use YAML rather than JSON</a> since YAML tends to be more user-friendly, especially for configuration files.<br>Example: <code>kubectl get -f ./pod.yaml</code></li></ul></li></ul></li><li><p><code>flags</code>: Specifies optional flags. For example, you can use the <code>-s</code> or <code>--server</code> flags to specify the address and port of the Kubernetes API server.<br></p></li></ul><div class="alert alert-warning caution callout" role=alert><strong>Caution:</strong> Flags that you specify from the command line override default values and any corresponding environment variables.</div><p>If you need help, run <code>kubectl help</code> from the terminal window.</p><h2 id=in-cluster-authentication-and-namespace-overrides>In-cluster authentication and namespace overrides</h2><p>By default <code>kubectl</code> will first determine if it is running within a pod, and thus in a cluster. It starts by checking for the <code>KUBERNETES_SERVICE_HOST</code> and <code>KUBERNETES_SERVICE_PORT</code> environment variables and the existence of a service account token file at <code>/var/run/secrets/kubernetes.io/serviceaccount/token</code>. If all three are found in-cluster authentication is assumed.</p><p>To maintain backwards compatibility, if the <code>POD_NAMESPACE</code> environment variable is set during in-cluster authentication it will override the default namespace from the service account token. Any manifests or tools relying on namespace defaulting will be affected by this.</p><p><strong><code>POD_NAMESPACE</code> environment variable</strong></p><p>If the <code>POD_NAMESPACE</code> environment variable is set, cli operations on namespaced resources will default to the variable value. For example, if the variable is set to <code>seattle</code>, <code>kubectl get pods</code> would return pods in the <code>seattle</code> namespace. This is because pods are a namespaced resource, and no namespace was provided in the command. Review the output of <code>kubectl api-resources</code> to determine if a resource is namespaced.</p><p>Explicit use of <code>--namespace &lt;value></code> overrides this behavior.</p><p><strong>How kubectl handles ServiceAccount tokens</strong></p><p>If:</p><ul><li>there is Kubernetes service account token file mounted at
<code>/var/run/secrets/kubernetes.io/serviceaccount/token</code>, and</li><li>the <code>KUBERNETES_SERVICE_HOST</code> environment variable is set, and</li><li>the <code>KUBERNETES_SERVICE_PORT</code> environment variable is set, and</li><li>you don't explicitly specify a namespace on the kubectl command line</li></ul><p>then kubectl assumes it is running in your cluster. The kubectl tool looks up the
namespace of that ServiceAccount (this is the same as the namespace of the Pod)
and acts against that namespace. This is different from what happens outside of a
cluster; when kubectl runs outside a cluster and you don't specify a namespace,
the kubectl command acts against the namespace set for the current context in your
client configuration. To change the default namespace for your kubectl you can use the
following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl config set-context --current --namespace<span style=color:#666>=</span>&lt;namespace-name&gt;
</span></span></code></pre></div><h2 id=operations>Operations</h2><p>The following table includes short descriptions and the general syntax for all of the <code>kubectl</code> operations:</p><table><thead><tr><th>Operation</th><th>Syntax</th><th>Description</th></tr></thead><tbody><tr><td><code>alpha</code></td><td><code>kubectl alpha SUBCOMMAND [flags]</code></td><td>List the available commands that correspond to alpha features, which are not enabled in Kubernetes clusters by default.</td></tr><tr><td><code>annotate</code></td><td><code>kubectl annotate (-f FILENAME | TYPE NAME | TYPE/NAME) KEY_1=VAL_1 ... KEY_N=VAL_N [--overwrite] [--all] [--resource-version=version] [flags]</code></td><td>Add or update the annotations of one or more resources.</td></tr><tr><td><code>api-resources</code></td><td><code>kubectl api-resources [flags]</code></td><td>List the API resources that are available.</td></tr><tr><td><code>api-versions</code></td><td><code>kubectl api-versions [flags]</code></td><td>List the API versions that are available.</td></tr><tr><td><code>apply</code></td><td><code>kubectl apply -f FILENAME [flags]</code></td><td>Apply a configuration change to a resource from a file or stdin.</td></tr><tr><td><code>attach</code></td><td><code>kubectl attach POD -c CONTAINER [-i] [-t] [flags]</code></td><td>Attach to a running container either to view the output stream or interact with the container (stdin).</td></tr><tr><td><code>auth</code></td><td><code>kubectl auth [flags] [options]</code></td><td>Inspect authorization.</td></tr><tr><td><code>autoscale</code></td><td><code>kubectl autoscale (-f FILENAME | TYPE NAME | TYPE/NAME) [--min=MINPODS] --max=MAXPODS [--cpu-percent=CPU] [flags]</code></td><td>Automatically scale the set of pods that are managed by a replication controller.</td></tr><tr><td><code>certificate</code></td><td><code>kubectl certificate SUBCOMMAND [options]</code></td><td>Modify certificate resources.</td></tr><tr><td><code>cluster-info</code></td><td><code>kubectl cluster-info [flags]</code></td><td>Display endpoint information about the master and services in the cluster.</td></tr><tr><td><code>completion</code></td><td><code>kubectl completion SHELL [options]</code></td><td>Output shell completion code for the specified shell (bash or zsh).</td></tr><tr><td><code>config</code></td><td><code>kubectl config SUBCOMMAND [flags]</code></td><td>Modifies kubeconfig files. See the individual subcommands for details.</td></tr><tr><td><code>convert</code></td><td><code>kubectl convert -f FILENAME [options]</code></td><td>Convert config files between different API versions. Both YAML and JSON formats are accepted. Note - requires <code>kubectl-convert</code> plugin to be installed.</td></tr><tr><td><code>cordon</code></td><td><code>kubectl cordon NODE [options]</code></td><td>Mark node as unschedulable.</td></tr><tr><td><code>cp</code></td><td><code>kubectl cp &lt;file-spec-src> &lt;file-spec-dest> [options]</code></td><td>Copy files and directories to and from containers.</td></tr><tr><td><code>create</code></td><td><code>kubectl create -f FILENAME [flags]</code></td><td>Create one or more resources from a file or stdin.</td></tr><tr><td><code>delete</code></td><td><code>kubectl delete (-f FILENAME | TYPE [NAME | /NAME | -l label | --all]) [flags]</code></td><td>Delete resources either from a file, stdin, or specifying label selectors, names, resource selectors, or resources.</td></tr><tr><td><code>describe</code></td><td><code>kubectl describe (-f FILENAME | TYPE [NAME_PREFIX | /NAME | -l label]) [flags]</code></td><td>Display the detailed state of one or more resources.</td></tr><tr><td><code>diff</code></td><td><code>kubectl diff -f FILENAME [flags]</code></td><td>Diff file or stdin against live configuration.</td></tr><tr><td><code>drain</code></td><td><code>kubectl drain NODE [options]</code></td><td>Drain node in preparation for maintenance.</td></tr><tr><td><code>edit</code></td><td><code>kubectl edit (-f FILENAME | TYPE NAME | TYPE/NAME) [flags]</code></td><td>Edit and update the definition of one or more resources on the server by using the default editor.</td></tr><tr><td><code>exec</code></td><td><code>kubectl exec POD [-c CONTAINER] [-i] [-t] [flags] [-- COMMAND [args...]]</code></td><td>Execute a command against a container in a pod.</td></tr><tr><td><code>explain</code></td><td><code>kubectl explain [--recursive=false] [flags]</code></td><td>Get documentation of various resources. For instance pods, nodes, services, etc.</td></tr><tr><td><code>expose</code></td><td><code>kubectl expose (-f FILENAME | TYPE NAME | TYPE/NAME) [--port=port] [--protocol=TCP|UDP] [--target-port=number-or-name] [--name=name] [--external-ip=external-ip-of-service] [--type=type] [flags]</code></td><td>Expose a replication controller, service, or pod as a new Kubernetes service.</td></tr><tr><td><code>get</code></td><td><code>kubectl get (-f FILENAME | TYPE [NAME | /NAME | -l label]) [--watch] [--sort-by=FIELD] [[-o | --output]=OUTPUT_FORMAT] [flags]</code></td><td>List one or more resources.</td></tr><tr><td><code>kustomize</code></td><td><code>kubectl kustomize &lt;dir> [flags] [options]</code></td><td>List a set of API resources generated from instructions in a kustomization.yaml file. The argument must be the path to the directory containing the file, or a git repository URL with a path suffix specifying same with respect to the repository root.</td></tr><tr><td><code>label</code></td><td><code>kubectl label (-f FILENAME | TYPE NAME | TYPE/NAME) KEY_1=VAL_1 ... KEY_N=VAL_N [--overwrite] [--all] [--resource-version=version] [flags]</code></td><td>Add or update the labels of one or more resources.</td></tr><tr><td><code>logs</code></td><td><code>kubectl logs POD [-c CONTAINER] [--follow] [flags]</code></td><td>Print the logs for a container in a pod.</td></tr><tr><td><code>options</code></td><td><code>kubectl options</code></td><td>List of global command-line options, which apply to all commands.</td></tr><tr><td><code>patch</code></td><td><code>kubectl patch (-f FILENAME | TYPE NAME | TYPE/NAME) --patch PATCH [flags]</code></td><td>Update one or more fields of a resource by using the strategic merge patch process.</td></tr><tr><td><code>plugin</code></td><td><code>kubectl plugin [flags] [options]</code></td><td>Provides utilities for interacting with plugins.</td></tr><tr><td><code>port-forward</code></td><td><code>kubectl port-forward POD [LOCAL_PORT:]REMOTE_PORT [...[LOCAL_PORT_N:]REMOTE_PORT_N] [flags]</code></td><td>Forward one or more local ports to a pod.</td></tr><tr><td><code>proxy</code></td><td><code>kubectl proxy [--port=PORT] [--www=static-dir] [--www-prefix=prefix] [--api-prefix=prefix] [flags]</code></td><td>Run a proxy to the Kubernetes API server.</td></tr><tr><td><code>replace</code></td><td><code>kubectl replace -f FILENAME</code></td><td>Replace a resource from a file or stdin.</td></tr><tr><td><code>rollout</code></td><td><code>kubectl rollout SUBCOMMAND [options]</code></td><td>Manage the rollout of a resource. Valid resource types include: deployments, daemonsets and statefulsets.</td></tr><tr><td><code>run</code></td><td><code>kubectl run NAME --image=image [--env="key=value"] [--port=port] [--dry-run=server|client|none] [--overrides=inline-json] [flags]</code></td><td>Run a specified image on the cluster.</td></tr><tr><td><code>scale</code></td><td><code>kubectl scale (-f FILENAME | TYPE NAME | TYPE/NAME) --replicas=COUNT [--resource-version=version] [--current-replicas=count] [flags]</code></td><td>Update the size of the specified replication controller.</td></tr><tr><td><code>set</code></td><td><code>kubectl set SUBCOMMAND [options]</code></td><td>Configure application resources.</td></tr><tr><td><code>taint</code></td><td><code>kubectl taint NODE NAME KEY_1=VAL_1:TAINT_EFFECT_1 ... KEY_N=VAL_N:TAINT_EFFECT_N [options]</code></td><td>Update the taints on one or more nodes.</td></tr><tr><td><code>top</code></td><td><code>kubectl top [flags] [options]</code></td><td>Display Resource (CPU/Memory/Storage) usage.</td></tr><tr><td><code>uncordon</code></td><td><code>kubectl uncordon NODE [options]</code></td><td>Mark node as schedulable.</td></tr><tr><td><code>version</code></td><td><code>kubectl version [--client] [flags]</code></td><td>Display the Kubernetes version running on the client and server.</td></tr><tr><td><code>wait</code></td><td><code>kubectl wait ([-f FILENAME] | resource.group/resource.name | resource.group [(-l label | --all)]) [--for=delete|--for condition=available] [options]</code></td><td>Experimental: Wait for a specific condition on one or many resources.</td></tr></tbody></table><p>To learn more about command operations, see the <a href=/docs/reference/kubectl/kubectl/>kubectl</a> reference documentation.</p><h2 id=resource-types>Resource types</h2><p>The following table includes a list of all the supported resource types and their abbreviated aliases.</p><p>(This output can be retrieved from <code>kubectl api-resources</code>, and was accurate as of Kubernetes 1.25.0)</p><table><thead><tr><th>NAME</th><th>SHORTNAMES</th><th>APIVERSION</th><th>NAMESPACED</th><th>KIND</th></tr></thead><tbody><tr><td><code>bindings</code></td><td></td><td>v1</td><td>true</td><td>Binding</td></tr><tr><td><code>componentstatuses</code></td><td><code>cs</code></td><td>v1</td><td>false</td><td>ComponentStatus</td></tr><tr><td><code>configmaps</code></td><td><code>cm</code></td><td>v1</td><td>true</td><td>ConfigMap</td></tr><tr><td><code>endpoints</code></td><td><code>ep</code></td><td>v1</td><td>true</td><td>Endpoints</td></tr><tr><td><code>events</code></td><td><code>ev</code></td><td>v1</td><td>true</td><td>Event</td></tr><tr><td><code>limitranges</code></td><td><code>limits</code></td><td>v1</td><td>true</td><td>LimitRange</td></tr><tr><td><code>namespaces</code></td><td><code>ns</code></td><td>v1</td><td>false</td><td>Namespace</td></tr><tr><td><code>nodes</code></td><td><code>no</code></td><td>v1</td><td>false</td><td>Node</td></tr><tr><td><code>persistentvolumeclaims</code></td><td><code>pvc</code></td><td>v1</td><td>true</td><td>PersistentVolumeClaim</td></tr><tr><td><code>persistentvolumes</code></td><td><code>pv</code></td><td>v1</td><td>false</td><td>PersistentVolume</td></tr><tr><td><code>pods</code></td><td><code>po</code></td><td>v1</td><td>true</td><td>Pod</td></tr><tr><td><code>podtemplates</code></td><td></td><td>v1</td><td>true</td><td>PodTemplate</td></tr><tr><td><code>replicationcontrollers</code></td><td><code>rc</code></td><td>v1</td><td>true</td><td>ReplicationController</td></tr><tr><td><code>resourcequotas</code></td><td><code>quota</code></td><td>v1</td><td>true</td><td>ResourceQuota</td></tr><tr><td><code>secrets</code></td><td></td><td>v1</td><td>true</td><td>Secret</td></tr><tr><td><code>serviceaccounts</code></td><td><code>sa</code></td><td>v1</td><td>true</td><td>ServiceAccount</td></tr><tr><td><code>services</code></td><td><code>svc</code></td><td>v1</td><td>true</td><td>Service</td></tr><tr><td><code>mutatingwebhookconfigurations</code></td><td></td><td>admissionregistration.k8s.io/v1</td><td>false</td><td>MutatingWebhookConfiguration</td></tr><tr><td><code>validatingwebhookconfigurations</code></td><td></td><td>admissionregistration.k8s.io/v1</td><td>false</td><td>ValidatingWebhookConfiguration</td></tr><tr><td><code>customresourcedefinitions</code></td><td><code>crd,crds</code></td><td>apiextensions.k8s.io/v1</td><td>false</td><td>CustomResourceDefinition</td></tr><tr><td><code>apiservices</code></td><td></td><td>apiregistration.k8s.io/v1</td><td>false</td><td>APIService</td></tr><tr><td><code>controllerrevisions</code></td><td></td><td>apps/v1</td><td>true</td><td>ControllerRevision</td></tr><tr><td><code>daemonsets</code></td><td><code>ds</code></td><td>apps/v1</td><td>true</td><td>DaemonSet</td></tr><tr><td><code>deployments</code></td><td><code>deploy</code></td><td>apps/v1</td><td>true</td><td>Deployment</td></tr><tr><td><code>replicasets</code></td><td><code>rs</code></td><td>apps/v1</td><td>true</td><td>ReplicaSet</td></tr><tr><td><code>statefulsets</code></td><td><code>sts</code></td><td>apps/v1</td><td>true</td><td>StatefulSet</td></tr><tr><td><code>tokenreviews</code></td><td></td><td>authentication.k8s.io/v1</td><td>false</td><td>TokenReview</td></tr><tr><td><code>localsubjectaccessreviews</code></td><td></td><td>authorization.k8s.io/v1</td><td>true</td><td>LocalSubjectAccessReview</td></tr><tr><td><code>selfsubjectaccessreviews</code></td><td></td><td>authorization.k8s.io/v1</td><td>false</td><td>SelfSubjectAccessReview</td></tr><tr><td><code>selfsubjectrulesreviews</code></td><td></td><td>authorization.k8s.io/v1</td><td>false</td><td>SelfSubjectRulesReview</td></tr><tr><td><code>subjectaccessreviews</code></td><td></td><td>authorization.k8s.io/v1</td><td>false</td><td>SubjectAccessReview</td></tr><tr><td><code>horizontalpodautoscalers</code></td><td><code>hpa</code></td><td>autoscaling/v2</td><td>true</td><td>HorizontalPodAutoscaler</td></tr><tr><td><code>cronjobs</code></td><td><code>cj</code></td><td>batch/v1</td><td>true</td><td>CronJob</td></tr><tr><td><code>jobs</code></td><td></td><td>batch/v1</td><td>true</td><td>Job</td></tr><tr><td><code>certificatesigningrequests</code></td><td><code>csr</code></td><td>certificates.k8s.io/v1</td><td>false</td><td>CertificateSigningRequest</td></tr><tr><td><code>leases</code></td><td></td><td>coordination.k8s.io/v1</td><td>true</td><td>Lease</td></tr><tr><td><code>endpointslices</code></td><td></td><td>discovery.k8s.io/v1</td><td>true</td><td>EndpointSlice</td></tr><tr><td><code>events</code></td><td><code>ev</code></td><td>events.k8s.io/v1</td><td>true</td><td>Event</td></tr><tr><td><code>flowschemas</code></td><td></td><td>flowcontrol.apiserver.k8s.io/v1beta2</td><td>false</td><td>FlowSchema</td></tr><tr><td><code>prioritylevelconfigurations</code></td><td></td><td>flowcontrol.apiserver.k8s.io/v1beta2</td><td>false</td><td>PriorityLevelConfiguration</td></tr><tr><td><code>ingressclasses</code></td><td></td><td>networking.k8s.io/v1</td><td>false</td><td>IngressClass</td></tr><tr><td><code>ingresses</code></td><td><code>ing</code></td><td>networking.k8s.io/v1</td><td>true</td><td>Ingress</td></tr><tr><td><code>networkpolicies</code></td><td><code>netpol</code></td><td>networking.k8s.io/v1</td><td>true</td><td>NetworkPolicy</td></tr><tr><td><code>runtimeclasses</code></td><td></td><td>node.k8s.io/v1</td><td>false</td><td>RuntimeClass</td></tr><tr><td><code>poddisruptionbudgets</code></td><td><code>pdb</code></td><td>policy/v1</td><td>true</td><td>PodDisruptionBudget</td></tr><tr><td><code>podsecuritypolicies</code></td><td><code>psp</code></td><td>policy/v1beta1</td><td>false</td><td>PodSecurityPolicy</td></tr><tr><td><code>clusterrolebindings</code></td><td></td><td>rbac.authorization.k8s.io/v1</td><td>false</td><td>ClusterRoleBinding</td></tr><tr><td><code>clusterroles</code></td><td></td><td>rbac.authorization.k8s.io/v1</td><td>false</td><td>ClusterRole</td></tr><tr><td><code>rolebindings</code></td><td></td><td>rbac.authorization.k8s.io/v1</td><td>true</td><td>RoleBinding</td></tr><tr><td><code>roles</code></td><td></td><td>rbac.authorization.k8s.io/v1</td><td>true</td><td>Role</td></tr><tr><td><code>priorityclasses</code></td><td><code>pc</code></td><td>scheduling.k8s.io/v1</td><td>false</td><td>PriorityClass</td></tr><tr><td><code>csidrivers</code></td><td></td><td>storage.k8s.io/v1</td><td>false</td><td>CSIDriver</td></tr><tr><td><code>csinodes</code></td><td></td><td>storage.k8s.io/v1</td><td>false</td><td>CSINode</td></tr><tr><td><code>csistoragecapacities</code></td><td></td><td>storage.k8s.io/v1</td><td>true</td><td>CSIStorageCapacity</td></tr><tr><td><code>storageclasses</code></td><td><code>sc</code></td><td>storage.k8s.io/v1</td><td>false</td><td>StorageClass</td></tr><tr><td><code>volumeattachments</code></td><td></td><td>storage.k8s.io/v1</td><td>false</td><td>VolumeAttachment</td></tr></tbody></table><h2 id=output-options>Output options</h2><p>Use the following sections for information about how you can format or sort the output of certain commands. For details about which commands support the various output options, see the <a href=/docs/reference/kubectl/kubectl/>kubectl</a> reference documentation.</p><h3 id=formatting-output>Formatting output</h3><p>The default output format for all <code>kubectl</code> commands is the human readable plain-text format. To output details to your terminal window in a specific format, you can add either the <code>-o</code> or <code>--output</code> flags to a supported <code>kubectl</code> command.</p><h4 id=syntax-1>Syntax</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl <span style=color:#666>[</span>command<span style=color:#666>]</span> <span style=color:#666>[</span>TYPE<span style=color:#666>]</span> <span style=color:#666>[</span>NAME<span style=color:#666>]</span> -o &lt;output_format&gt;
</span></span></code></pre></div><p>Depending on the <code>kubectl</code> operation, the following output formats are supported:</p><table><thead><tr><th>Output format</th><th>Description</th></tr></thead><tbody><tr><td><code>-o custom-columns=&lt;spec></code></td><td>Print a table using a comma separated list of <a href=#custom-columns>custom columns</a>.</td></tr><tr><td><code>-o custom-columns-file=&lt;filename></code></td><td>Print a table using the <a href=#custom-columns>custom columns</a> template in the <code>&lt;filename></code> file.</td></tr><tr><td><code>-o json</code></td><td>Output a JSON formatted API object.</td></tr><tr><td><code>-o jsonpath=&lt;template></code></td><td>Print the fields defined in a <a href=/docs/reference/kubectl/jsonpath/>jsonpath</a> expression.</td></tr><tr><td><code>-o jsonpath-file=&lt;filename></code></td><td>Print the fields defined by the <a href=/docs/reference/kubectl/jsonpath/>jsonpath</a> expression in the <code>&lt;filename></code> file.</td></tr><tr><td><code>-o name</code></td><td>Print only the resource name and nothing else.</td></tr><tr><td><code>-o wide</code></td><td>Output in the plain-text format with any additional information. For pods, the node name is included.</td></tr><tr><td><code>-o yaml</code></td><td>Output a YAML formatted API object.</td></tr></tbody></table><h5 id=example>Example</h5><p>In this example, the following command outputs the details for a single pod as a YAML formatted object:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod web-pod-13je7 -o yaml
</span></span></code></pre></div><p>Remember: See the <a href=/docs/reference/kubectl/kubectl/>kubectl</a> reference documentation
for details about which output format is supported by each command.</p><h4 id=custom-columns>Custom columns</h4><p>To define custom columns and output only the details that you want into a table, you can use the <code>custom-columns</code> option.
You can choose to define the custom columns inline or use a template file: <code>-o custom-columns=&lt;spec></code> or <code>-o custom-columns-file=&lt;filename></code>.</p><h5 id=examples>Examples</h5><p>Inline:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods &lt;pod-name&gt; -o custom-columns<span style=color:#666>=</span>NAME:.metadata.name,RSRC:.metadata.resourceVersion
</span></span></code></pre></div><p>Template file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods &lt;pod-name&gt; -o custom-columns-file<span style=color:#666>=</span>template.txt
</span></span></code></pre></div><p>where the <code>template.txt</code> file contains:</p><pre tabindex=0><code>NAME          RSRC
metadata.name metadata.resourceVersion
</code></pre><p>The result of running either command is similar to:</p><pre tabindex=0><code>NAME           RSRC
submit-queue   610995
</code></pre><h4 id=server-side-columns>Server-side columns</h4><p><code>kubectl</code> supports receiving specific column information from the server about objects.
This means that for any given resource, the server will return columns and rows relevant to that resource, for the client to print.
This allows for consistent human-readable output across clients used against the same cluster, by having the server encapsulate the details of printing.</p><p>This feature is enabled by default. To disable it, add the
<code>--server-print=false</code> flag to the <code>kubectl get</code> command.</p><h5 id=examples-1>Examples</h5><p>To print information about the status of a pod, use a command like the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods &lt;pod-name&gt; --server-print<span style=color:#666>=</span><span style=color:#a2f>false</span>
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex=0><code>NAME       AGE
pod-name   1m
</code></pre><h3 id=sorting-list-objects>Sorting list objects</h3><p>To output objects to a sorted list in your terminal window, you can add the <code>--sort-by</code> flag to a supported <code>kubectl</code> command. Sort your objects by specifying any numeric or string field with the <code>--sort-by</code> flag. To specify a field, use a <a href=/docs/reference/kubectl/jsonpath/>jsonpath</a> expression.</p><h4 id=syntax-2>Syntax</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl <span style=color:#666>[</span>command<span style=color:#666>]</span> <span style=color:#666>[</span>TYPE<span style=color:#666>]</span> <span style=color:#666>[</span>NAME<span style=color:#666>]</span> --sort-by<span style=color:#666>=</span>&lt;jsonpath_exp&gt;
</span></span></code></pre></div><h5 id=example-1>Example</h5><p>To print a list of pods sorted by name, you run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods --sort-by<span style=color:#666>=</span>.metadata.name
</span></span></code></pre></div><h2 id=examples-common-operations>Examples: Common operations</h2><p>Use the following set of examples to help you familiarize yourself with running the commonly used <code>kubectl</code> operations:</p><p><code>kubectl apply</code> - Apply or Update a resource from a file or stdin.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># Create a service using the definition in example-service.yaml.</span>
</span></span><span style=display:flex><span>kubectl apply -f example-service.yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Create a replication controller using the definition in example-controller.yaml.</span>
</span></span><span style=display:flex><span>kubectl apply -f example-controller.yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Create the objects that are defined in any .yaml, .yml, or .json file within the &lt;directory&gt; directory.</span>
</span></span><span style=display:flex><span>kubectl apply -f &lt;directory&gt;
</span></span></code></pre></div><p><code>kubectl get</code> - List one or more resources.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># List all pods in plain-text output format.</span>
</span></span><span style=display:flex><span>kubectl get pods
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List all pods in plain-text output format and include additional information (such as node name).</span>
</span></span><span style=display:flex><span>kubectl get pods -o wide
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List the replication controller with the specified name in plain-text output format. Tip: You can shorten and replace the &#39;replicationcontroller&#39; resource type with the alias &#39;rc&#39;.</span>
</span></span><span style=display:flex><span>kubectl get replicationcontroller &lt;rc-name&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List all replication controllers and services together in plain-text output format.</span>
</span></span><span style=display:flex><span>kubectl get rc,services
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List all daemon sets in plain-text output format.</span>
</span></span><span style=display:flex><span>kubectl get ds
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List all pods running on node server01</span>
</span></span><span style=display:flex><span>kubectl get pods --field-selector<span style=color:#666>=</span>spec.nodeName<span style=color:#666>=</span>server01
</span></span></code></pre></div><p><code>kubectl describe</code> - Display detailed state of one or more resources, including the uninitialized ones by default.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># Display the details of the node with name &lt;node-name&gt;.</span>
</span></span><span style=display:flex><span>kubectl describe nodes &lt;node-name&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Display the details of the pod with name &lt;pod-name&gt;.</span>
</span></span><span style=display:flex><span>kubectl describe pods/&lt;pod-name&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Display the details of all the pods that are managed by the replication controller named &lt;rc-name&gt;.</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Remember: Any pods that are created by the replication controller get prefixed with the name of the replication controller.</span>
</span></span><span style=display:flex><span>kubectl describe pods &lt;rc-name&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Describe all pods</span>
</span></span><span style=display:flex><span>kubectl describe pods
</span></span></code></pre></div><div class="alert alert-info note callout" role=alert><strong>Note:</strong> The <code>kubectl get</code> command is usually used for retrieving one or more
resources of the same resource type. It features a rich set of flags that allows
you to customize the output format using the <code>-o</code> or <code>--output</code> flag, for example.
You can specify the <code>-w</code> or <code>--watch</code> flag to start watching updates to a particular
object. The <code>kubectl describe</code> command is more focused on describing the many
related aspects of a specified resource. It may invoke several API calls to the
API server to build a view for the user. For example, the <code>kubectl describe node</code>
command retrieves not only the information about the node, but also a summary of
the pods running on it, the events generated for the node etc.</div><p><code>kubectl delete</code> - Delete resources either from a file, stdin, or specifying label selectors, names, resource selectors, or resources.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># Delete a pod using the type and name specified in the pod.yaml file.</span>
</span></span><span style=display:flex><span>kubectl delete -f pod.yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Delete all the pods and services that have the label &#39;&lt;label-key&gt;=&lt;label-value&gt;&#39;.</span>
</span></span><span style=display:flex><span>kubectl delete pods,services -l &lt;label-key&gt;<span style=color:#666>=</span>&lt;label-value&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Delete all pods, including uninitialized ones.</span>
</span></span><span style=display:flex><span>kubectl delete pods --all
</span></span></code></pre></div><p><code>kubectl exec</code> - Execute a command against a container in a pod.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># Get output from running &#39;date&#39; from pod &lt;pod-name&gt;. By default, output is from the first container.</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#a2f>exec</span> &lt;pod-name&gt; -- date
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Get output from running &#39;date&#39; in container &lt;container-name&gt; of pod &lt;pod-name&gt;.</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#a2f>exec</span> &lt;pod-name&gt; -c &lt;container-name&gt; -- date
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Get an interactive TTY and run /bin/bash from pod &lt;pod-name&gt;. By default, output is from the first container.</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#a2f>exec</span> -ti &lt;pod-name&gt; -- /bin/bash
</span></span></code></pre></div><p><code>kubectl logs</code> - Print the logs for a container in a pod.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># Return a snapshot of the logs from pod &lt;pod-name&gt;.</span>
</span></span><span style=display:flex><span>kubectl logs &lt;pod-name&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Start streaming the logs from pod &lt;pod-name&gt;. This is similar to the &#39;tail -f&#39; Linux command.</span>
</span></span><span style=display:flex><span>kubectl logs -f &lt;pod-name&gt;
</span></span></code></pre></div><p><code>kubectl diff</code> - View a diff of the proposed updates to a cluster.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># Diff resources included in &#34;pod.json&#34;.</span>
</span></span><span style=display:flex><span>kubectl diff -f pod.json
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Diff file read from stdin.</span>
</span></span><span style=display:flex><span>cat service.yaml | kubectl diff -f -
</span></span></code></pre></div><h2 id=examples-creating-and-using-plugins>Examples: Creating and using plugins</h2><p>Use the following set of examples to help you familiarize yourself with writing and using <code>kubectl</code> plugins:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># create a simple plugin in any language and name the resulting executable file</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># so that it begins with the prefix &#34;kubectl-&#34;</span>
</span></span><span style=display:flex><span>cat ./kubectl-hello
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#080></span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># this plugin prints the words &#34;hello world&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a2f>echo</span> <span style=color:#b44>&#34;hello world&#34;</span>
</span></span></code></pre></div><p>With a plugin written, let's make it executable:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod a+x ./kubectl-hello
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># and move it to a location in our PATH</span>
</span></span><span style=display:flex><span>sudo mv ./kubectl-hello /usr/local/bin
</span></span><span style=display:flex><span>sudo chown root:root /usr/local/bin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># You have now created and &#34;installed&#34; a kubectl plugin.</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># You can begin using this plugin by invoking it from kubectl as if it were a regular command</span>
</span></span><span style=display:flex><span>kubectl hello
</span></span></code></pre></div><pre tabindex=0><code>hello world
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># You can &#34;uninstall&#34; a plugin, by removing it from the folder in your</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># $PATH where you placed it</span>
</span></span><span style=display:flex><span>sudo rm /usr/local/bin/kubectl-hello
</span></span></code></pre></div><p>In order to view all of the plugins that are available to <code>kubectl</code>, use
the <code>kubectl plugin list</code> subcommand:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl plugin list
</span></span></code></pre></div><p>The output is similar to:</p><pre tabindex=0><code>The following kubectl-compatible plugins are available:

/usr/local/bin/kubectl-hello
/usr/local/bin/kubectl-foo
/usr/local/bin/kubectl-bar
</code></pre><p><code>kubectl plugin list</code> also warns you about plugins that are not
executable, or that are shadowed by other plugins; for example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo chmod -x /usr/local/bin/kubectl-foo <span style=color:#080;font-style:italic># remove execute permission</span>
</span></span><span style=display:flex><span>kubectl plugin list
</span></span></code></pre></div><pre tabindex=0><code>The following kubectl-compatible plugins are available:

/usr/local/bin/kubectl-hello
/usr/local/bin/kubectl-foo
  - warning: /usr/local/bin/kubectl-foo identified as a plugin, but it is not executable
/usr/local/bin/kubectl-bar

error: one plugin warning was found
</code></pre><p>You can think of plugins as a means to build more complex functionality on top
of the existing kubectl commands:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cat ./kubectl-whoami
</span></span></code></pre></div><p>The next few examples assume that you already made <code>kubectl-whoami</code> have
the following contents:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#080></span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># this plugin makes use of the `kubectl config` command in order to output</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># information about the current user, based on the currently selected context</span>
</span></span><span style=display:flex><span>kubectl config view --template<span style=color:#666>=</span><span style=color:#b44>&#39;{{ range .contexts }}{{ if eq .name &#34;&#39;</span><span style=color:#a2f;font-weight:700>$(</span>kubectl config current-context<span style=color:#a2f;font-weight:700>)</span><span style=color:#b44>&#39;&#34; }}Current user: {{ printf &#34;%s\n&#34; .context.user }}{{ end }}{{ end }}&#39;</span>
</span></span></code></pre></div><p>Running the above command gives you an output containing the user for the
current context in your KUBECONFIG file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># make the file executable</span>
</span></span><span style=display:flex><span>sudo chmod +x ./kubectl-whoami
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># and move it into your PATH</span>
</span></span><span style=display:flex><span>sudo mv ./kubectl-whoami /usr/local/bin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl whoami
</span></span><span style=display:flex><span>Current user: plugins-user
</span></span></code></pre></div><h2 id=what-s-next>What's next</h2><ul><li>Read the <code>kubectl</code> reference documentation:<ul><li>the kubectl <a href=/docs/reference/kubectl/kubectl/>command reference</a></li><li>the <a href=/docs/reference/generated/kubectl/kubectl-commands/>command line arguments</a> reference</li></ul></li><li>Learn about <a href=/docs/reference/kubectl/conventions/><code>kubectl</code> usage conventions</a></li><li>Read about <a href=/docs/reference/kubectl/jsonpath/>JSONPath support</a> in kubectl</li><li>Read about how to <a href=/docs/tasks/extend-kubectl/kubectl-plugins>extend kubectl with plugins</a><ul><li>To find out more about plugins, take a look at the <a href=https://github.com/kubernetes/sample-cli-plugin>example CLI plugin</a>.</li></ul></li></ul></div></div><div class=td-content style=page-break-before:always><h1 id=pg-8aba901ac13f124e5782b90ddb166ee2>1 - kubectl Cheat Sheet</h1><p>This page contains a list of commonly used <code>kubectl</code> commands and flags.</p><h2 id=kubectl-autocomplete>Kubectl autocomplete</h2><h3 id=bash>BASH</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#a2f>source</span> &lt;<span style=color:#666>(</span>kubectl completion bash<span style=color:#666>)</span> <span style=color:#080;font-style:italic># set up autocomplete in bash into the current shell, bash-completion package should be installed first.</span>
</span></span><span style=display:flex><span><span style=color:#a2f>echo</span> <span style=color:#b44>&#34;source &lt;(kubectl completion bash)&#34;</span> &gt;&gt; ~/.bashrc <span style=color:#080;font-style:italic># add autocomplete permanently to your bash shell.</span>
</span></span></code></pre></div><p>You can also use a shorthand alias for <code>kubectl</code> that also works with completion:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#a2f>alias</span> <span style=color:#b8860b>k</span><span style=color:#666>=</span>kubectl
</span></span><span style=display:flex><span><span style=color:#a2f>complete</span> -o default -F __start_kubectl k
</span></span></code></pre></div><h3 id=zsh>ZSH</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#a2f>source</span> &lt;<span style=color:#666>(</span>kubectl completion zsh<span style=color:#666>)</span>  <span style=color:#080;font-style:italic># set up autocomplete in zsh into the current shell</span>
</span></span><span style=display:flex><span><span style=color:#a2f>echo</span> <span style=color:#b44>&#39;[[ $commands[kubectl] ]] &amp;&amp; source &lt;(kubectl completion zsh)&#39;</span> &gt;&gt; ~/.zshrc <span style=color:#080;font-style:italic># add autocomplete permanently to your zsh shell</span>
</span></span></code></pre></div><h3 id=a-note-on-all-namespaces>A note on <code>--all-namespaces</code></h3><p>Appending <code>--all-namespaces</code> happens frequently enough where you should be aware of the shorthand for <code>--all-namespaces</code>:</p><p><code>kubectl -A</code></p><h2 id=kubectl-context-and-configuration>Kubectl context and configuration</h2><p>Set which Kubernetes cluster <code>kubectl</code> communicates with and modifies configuration
information. See <a href=/docs/tasks/access-application-cluster/configure-access-multiple-clusters/>Authenticating Across Clusters with kubeconfig</a> documentation for
detailed config file information.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl config view <span style=color:#080;font-style:italic># Show Merged kubeconfig settings.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># use multiple kubeconfig files at the same time and view merged config</span>
</span></span><span style=display:flex><span><span style=color:#b8860b>KUBECONFIG</span><span style=color:#666>=</span>~/.kube/config:~/.kube/kubconfig2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl config view
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># get the password for the e2e user</span>
</span></span><span style=display:flex><span>kubectl config view -o <span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{.users[?(@.name == &#34;e2e&#34;)].user.password}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl config view -o <span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{.users[].name}&#39;</span>    <span style=color:#080;font-style:italic># display the first user</span>
</span></span><span style=display:flex><span>kubectl config view -o <span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{.users[*].name}&#39;</span>   <span style=color:#080;font-style:italic># get a list of users</span>
</span></span><span style=display:flex><span>kubectl config get-contexts                          <span style=color:#080;font-style:italic># display list of contexts</span>
</span></span><span style=display:flex><span>kubectl config current-context                       <span style=color:#080;font-style:italic># display the current-context</span>
</span></span><span style=display:flex><span>kubectl config use-context my-cluster-name           <span style=color:#080;font-style:italic># set the default context to my-cluster-name</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl config set-cluster my-cluster-name           <span style=color:#080;font-style:italic># set a cluster entry in the kubeconfig</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># configure the URL to a proxy server to use for requests made by this client in the kubeconfig</span>
</span></span><span style=display:flex><span>kubectl config set-cluster my-cluster-name --proxy-url<span style=color:#666>=</span>my-proxy-url
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># add a new user to your kubeconf that supports basic auth</span>
</span></span><span style=display:flex><span>kubectl config set-credentials kubeuser/foo.kubernetes.com --username<span style=color:#666>=</span>kubeuser --password<span style=color:#666>=</span>kubepassword
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># permanently save the namespace for all subsequent kubectl commands in that context.</span>
</span></span><span style=display:flex><span>kubectl config set-context --current --namespace<span style=color:#666>=</span>ggckad-s2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># set a context utilizing a specific username and namespace.</span>
</span></span><span style=display:flex><span>kubectl config set-context gce --user<span style=color:#666>=</span>cluster-admin --namespace<span style=color:#666>=</span>foo <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>  <span style=color:#666>&amp;&amp;</span> kubectl config use-context gce
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl config <span style=color:#a2f>unset</span> users.foo                       <span style=color:#080;font-style:italic># delete user foo</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># short alias to set/show context/namespace (only works for bash and bash-compatible shells, current context to be set before using kn to set namespace) </span>
</span></span><span style=display:flex><span><span style=color:#a2f>alias</span> <span style=color:#b8860b>kx</span><span style=color:#666>=</span><span style=color:#b44>&#39;f() { [ &#34;$1&#34; ] &amp;&amp; kubectl config use-context $1 || kubectl config current-context ; } ; f&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a2f>alias</span> <span style=color:#b8860b>kn</span><span style=color:#666>=</span><span style=color:#b44>&#39;f() { [ &#34;$1&#34; ] &amp;&amp; kubectl config set-context --current --namespace $1 || kubectl config view --minify | grep namespace | cut -d&#34; &#34; -f6 ; } ; f&#39;</span>
</span></span></code></pre></div><h2 id=kubectl-apply>Kubectl apply</h2><p><code>apply</code> manages applications through files defining Kubernetes resources. It creates and updates resources in a cluster through running <code>kubectl apply</code>. This is the recommended way of managing Kubernetes applications on production. See <a href=https://kubectl.docs.kubernetes.io>Kubectl Book</a>.</p><h2 id=creating-objects>Creating objects</h2><p>Kubernetes manifests can be defined in YAML or JSON. The file extension <code>.yaml</code>,
<code>.yml</code>, and <code>.json</code> can be used.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f ./my-manifest.yaml            <span style=color:#080;font-style:italic># create resource(s)</span>
</span></span><span style=display:flex><span>kubectl apply -f ./my1.yaml -f ./my2.yaml      <span style=color:#080;font-style:italic># create from multiple files</span>
</span></span><span style=display:flex><span>kubectl apply -f ./dir                         <span style=color:#080;font-style:italic># create resource(s) in all manifest files in dir</span>
</span></span><span style=display:flex><span>kubectl apply -f https://git.io/vPieo          <span style=color:#080;font-style:italic># create resource(s) from url</span>
</span></span><span style=display:flex><span>kubectl create deployment nginx --image<span style=color:#666>=</span>nginx  <span style=color:#080;font-style:italic># start a single instance of nginx</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># create a Job which prints &#34;Hello World&#34;</span>
</span></span><span style=display:flex><span>kubectl create job hello --image<span style=color:#666>=</span>busybox:1.28 -- <span style=color:#a2f>echo</span> <span style=color:#b44>&#34;Hello World&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># create a CronJob that prints &#34;Hello World&#34; every minute</span>
</span></span><span style=display:flex><span>kubectl create cronjob hello --image<span style=color:#666>=</span>busybox:1.28   --schedule<span style=color:#666>=</span><span style=color:#b44>&#34;*/1 * * * *&#34;</span> -- <span style=color:#a2f>echo</span> <span style=color:#b44>&#34;Hello World&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl explain pods                           <span style=color:#080;font-style:italic># get the documentation for pod manifests</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Create multiple YAML objects from stdin</span>
</span></span><span style=display:flex><span>cat <span style=color:#b44>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style=display:flex><span><span style=color:#b44>apiVersion: v1
</span></span></span><span style=display:flex><span><span style=color:#b44>kind: Pod
</span></span></span><span style=display:flex><span><span style=color:#b44>metadata:
</span></span></span><span style=display:flex><span><span style=color:#b44>  name: busybox-sleep
</span></span></span><span style=display:flex><span><span style=color:#b44>spec:
</span></span></span><span style=display:flex><span><span style=color:#b44>  containers:
</span></span></span><span style=display:flex><span><span style=color:#b44>  - name: busybox
</span></span></span><span style=display:flex><span><span style=color:#b44>    image: busybox:1.28
</span></span></span><span style=display:flex><span><span style=color:#b44>    args:
</span></span></span><span style=display:flex><span><span style=color:#b44>    - sleep
</span></span></span><span style=display:flex><span><span style=color:#b44>    - &#34;1000000&#34;
</span></span></span><span style=display:flex><span><span style=color:#b44>---
</span></span></span><span style=display:flex><span><span style=color:#b44>apiVersion: v1
</span></span></span><span style=display:flex><span><span style=color:#b44>kind: Pod
</span></span></span><span style=display:flex><span><span style=color:#b44>metadata:
</span></span></span><span style=display:flex><span><span style=color:#b44>  name: busybox-sleep-less
</span></span></span><span style=display:flex><span><span style=color:#b44>spec:
</span></span></span><span style=display:flex><span><span style=color:#b44>  containers:
</span></span></span><span style=display:flex><span><span style=color:#b44>  - name: busybox
</span></span></span><span style=display:flex><span><span style=color:#b44>    image: busybox:1.28
</span></span></span><span style=display:flex><span><span style=color:#b44>    args:
</span></span></span><span style=display:flex><span><span style=color:#b44>    - sleep
</span></span></span><span style=display:flex><span><span style=color:#b44>    - &#34;1000&#34;
</span></span></span><span style=display:flex><span><span style=color:#b44>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Create a secret with several keys</span>
</span></span><span style=display:flex><span>cat <span style=color:#b44>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style=display:flex><span><span style=color:#b44>apiVersion: v1
</span></span></span><span style=display:flex><span><span style=color:#b44>kind: Secret
</span></span></span><span style=display:flex><span><span style=color:#b44>metadata:
</span></span></span><span style=display:flex><span><span style=color:#b44>  name: mysecret
</span></span></span><span style=display:flex><span><span style=color:#b44>type: Opaque
</span></span></span><span style=display:flex><span><span style=color:#b44>data:
</span></span></span><span style=display:flex><span><span style=color:#b44>  password: $(echo -n &#34;s33msi4&#34; | base64 -w0)
</span></span></span><span style=display:flex><span><span style=color:#b44>  username: $(echo -n &#34;jane&#34; | base64 -w0)
</span></span></span><span style=display:flex><span><span style=color:#b44>EOF</span>
</span></span></code></pre></div><h2 id=viewing-and-finding-resources>Viewing and finding resources</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#080;font-style:italic># Get commands with basic output</span>
</span></span><span style=display:flex><span>kubectl get services                          <span style=color:#080;font-style:italic># List all services in the namespace</span>
</span></span><span style=display:flex><span>kubectl get pods --all-namespaces             <span style=color:#080;font-style:italic># List all pods in all namespaces</span>
</span></span><span style=display:flex><span>kubectl get pods -o wide                      <span style=color:#080;font-style:italic># List all pods in the current namespace, with more details</span>
</span></span><span style=display:flex><span>kubectl get deployment my-dep                 <span style=color:#080;font-style:italic># List a particular deployment</span>
</span></span><span style=display:flex><span>kubectl get pods                              <span style=color:#080;font-style:italic># List all pods in the namespace</span>
</span></span><span style=display:flex><span>kubectl get pod my-pod -o yaml                <span style=color:#080;font-style:italic># Get a pod&#39;s YAML</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Describe commands with verbose output</span>
</span></span><span style=display:flex><span>kubectl describe nodes my-node
</span></span><span style=display:flex><span>kubectl describe pods my-pod
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List Services Sorted by Name</span>
</span></span><span style=display:flex><span>kubectl get services --sort-by<span style=color:#666>=</span>.metadata.name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List pods Sorted by Restart Count</span>
</span></span><span style=display:flex><span>kubectl get pods --sort-by<span style=color:#666>=</span><span style=color:#b44>&#39;.status.containerStatuses[0].restartCount&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List PersistentVolumes sorted by capacity</span>
</span></span><span style=display:flex><span>kubectl get pv --sort-by<span style=color:#666>=</span>.spec.capacity.storage
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Get the version label of all pods with label app=cassandra</span>
</span></span><span style=display:flex><span>kubectl get pods --selector<span style=color:#666>=</span><span style=color:#b8860b>app</span><span style=color:#666>=</span>cassandra -o <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>  <span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{.items[*].metadata.labels.version}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Retrieve the value of a key with dots, e.g. &#39;ca.crt&#39;</span>
</span></span><span style=display:flex><span>kubectl get configmap myconfig <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>  -o <span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{.data.ca\.crt}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Retrieve a base64 encoded value with dashes instead of underscores.</span>
</span></span><span style=display:flex><span>kubectl get secret my-secret --template<span style=color:#666>=</span><span style=color:#b44>&#39;{{index .data &#34;key-name-with-dashes&#34;}}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Get all worker nodes (use a selector to exclude results that have a label</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># named &#39;node-role.kubernetes.io/control-plane&#39;)</span>
</span></span><span style=display:flex><span>kubectl get node --selector<span style=color:#666>=</span><span style=color:#b44>&#39;!node-role.kubernetes.io/control-plane&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Get all running pods in the namespace</span>
</span></span><span style=display:flex><span>kubectl get pods --field-selector<span style=color:#666>=</span>status.phase<span style=color:#666>=</span>Running
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Get ExternalIPs of all nodes</span>
</span></span><span style=display:flex><span>kubectl get nodes -o <span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{.items[*].status.addresses[?(@.type==&#34;ExternalIP&#34;)].address}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List Names of Pods that belong to Particular RC</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># &#34;jq&#34; command useful for transformations that are too complex for jsonpath, it can be found at https://stedolan.github.io/jq/</span>
</span></span><span style=display:flex><span><span style=color:#b8860b>sel</span><span style=color:#666>=</span><span style=color:#b68;font-weight:700>${</span><span style=color:#a2f;font-weight:700>$(</span>kubectl get rc my-rc --output<span style=color:#666>=</span>json | jq -j <span style=color:#b44>&#39;.spec.selector | to_entries | .[] | &#34;\(.key)=\(.value),&#34;&#39;</span><span style=color:#a2f;font-weight:700>)</span>%?<span style=color:#b68;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#a2f>echo</span> <span style=color:#a2f;font-weight:700>$(</span>kubectl get pods --selector<span style=color:#666>=</span><span style=color:#b8860b>$sel</span> --output<span style=color:#666>=</span><span style=color:#b8860b>jsonpath</span><span style=color:#666>={</span>.items..metadata.name<span style=color:#666>}</span><span style=color:#a2f;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Show labels for all pods (or any other Kubernetes object that supports labelling)</span>
</span></span><span style=display:flex><span>kubectl get pods --show-labels
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Check which nodes are ready</span>
</span></span><span style=display:flex><span><span style=color:#b8860b>JSONPATH</span><span style=color:#666>=</span><span style=color:#b44>&#39;{range .items[*]}{@.metadata.name}:{range @.status.conditions[*]}{@.type}={@.status};{end}{end}&#39;</span> <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span> <span style=color:#666>&amp;&amp;</span> kubectl get nodes -o <span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#34;</span><span style=color:#b8860b>$JSONPATH</span><span style=color:#b44>&#34;</span> | grep <span style=color:#b44>&#34;Ready=True&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Output decoded secrets without external tools</span>
</span></span><span style=display:flex><span>kubectl get secret my-secret -o go-template<span style=color:#666>=</span><span style=color:#b44>&#39;{{range $k,$v := .data}}{{&#34;### &#34;}}{{$k}}{{&#34;\n&#34;}}{{$v|base64decode}}{{&#34;\n\n&#34;}}{{end}}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List all Secrets currently in use by a pod</span>
</span></span><span style=display:flex><span>kubectl get pods -o json | jq <span style=color:#b44>&#39;.items[].spec.containers[].env[]?.valueFrom.secretKeyRef.name&#39;</span> | grep -v null | sort | uniq
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List all containerIDs of initContainer of all pods</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Helpful when cleaning up stopped containers, while avoiding removal of initContainers.</span>
</span></span><span style=display:flex><span>kubectl get pods --all-namespaces -o <span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{range .items[*].status.initContainerStatuses[*]}{.containerID}{&#34;\n&#34;}{end}&#39;</span> | cut -d/ -f3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># List Events sorted by timestamp</span>
</span></span><span style=display:flex><span>kubectl get events --sort-by<span style=color:#666>=</span>.metadata.creationTimestamp
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Compares the current state of the cluster against the state that the cluster would be in if the manifest was applied.</span>
</span></span><span style=display:flex><span>kubectl diff -f ./my-manifest.yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Produce a period-delimited tree of all keys returned for nodes</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Helpful when locating a key within a complex nested JSON structure</span>
</span></span><span style=display:flex><span>kubectl get nodes -o json | jq -c <span style=color:#b44>&#39;paths|join(&#34;.&#34;)&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Produce a period-delimited tree of all keys returned for pods, etc</span>
</span></span><span style=display:flex><span>kubectl get pods -o json | jq -c <span style=color:#b44>&#39;paths|join(&#34;.&#34;)&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Produce ENV for all pods, assuming you have a default container for the pods, default namespace and the `env` command is supported.</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Helpful when running any supported command across all pods, not just `env`</span>
</span></span><span style=display:flex><span><span style=color:#a2f;font-weight:700>for</span> pod in <span style=color:#a2f;font-weight:700>$(</span>kubectl get po --output<span style=color:#666>=</span><span style=color:#b8860b>jsonpath</span><span style=color:#666>={</span>.items..metadata.name<span style=color:#666>}</span><span style=color:#a2f;font-weight:700>)</span>; <span style=color:#a2f;font-weight:700>do</span> <span style=color:#a2f>echo</span> <span style=color:#b8860b>$pod</span> <span style=color:#666>&amp;&amp;</span> kubectl <span style=color:#a2f>exec</span> -it <span style=color:#b8860b>$pod</span> -- env; <span style=color:#a2f;font-weight:700>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Get a deployment&#39;s status subresource</span>
</span></span><span style=display:flex><span>kubectl get deployment nginx-deployment --subresource<span style=color:#666>=</span>status
</span></span></code></pre></div><h2 id=updating-resources>Updating resources</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl <span style=color:#a2f>set</span> image deployment/frontend <span style=color:#b8860b>www</span><span style=color:#666>=</span>image:v2               <span style=color:#080;font-style:italic># Rolling update &#34;www&#34; containers of &#34;frontend&#34; deployment, updating the image</span>
</span></span><span style=display:flex><span>kubectl rollout <span style=color:#a2f>history</span> deployment/frontend                      <span style=color:#080;font-style:italic># Check the history of deployments including the revision</span>
</span></span><span style=display:flex><span>kubectl rollout undo deployment/frontend                         <span style=color:#080;font-style:italic># Rollback to the previous deployment</span>
</span></span><span style=display:flex><span>kubectl rollout undo deployment/frontend --to-revision<span style=color:#666>=</span><span style=color:#666>2</span>         <span style=color:#080;font-style:italic># Rollback to a specific revision</span>
</span></span><span style=display:flex><span>kubectl rollout status -w deployment/frontend                    <span style=color:#080;font-style:italic># Watch rolling update status of &#34;frontend&#34; deployment until completion</span>
</span></span><span style=display:flex><span>kubectl rollout restart deployment/frontend                      <span style=color:#080;font-style:italic># Rolling restart of the &#34;frontend&#34; deployment</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat pod.json | kubectl replace -f -                              <span style=color:#080;font-style:italic># Replace a pod based on the JSON passed into stdin</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Force replace, delete and then re-create the resource. Will cause a service outage.</span>
</span></span><span style=display:flex><span>kubectl replace --force -f ./pod.json
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Create a service for a replicated nginx, which serves on port 80 and connects to the containers on port 8000</span>
</span></span><span style=display:flex><span>kubectl expose rc nginx --port<span style=color:#666>=</span><span style=color:#666>80</span> --target-port<span style=color:#666>=</span><span style=color:#666>8000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Update a single-container pod&#39;s image version (tag) to v4</span>
</span></span><span style=display:flex><span>kubectl get pod mypod -o yaml | sed <span style=color:#b44>&#39;s/\(image: myimage\):.*$/\1:v4/&#39;</span> | kubectl replace -f -
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl label pods my-pod new-label<span style=color:#666>=</span>awesome                      <span style=color:#080;font-style:italic># Add a Label</span>
</span></span><span style=display:flex><span>kubectl label pods my-pod new-label-                             <span style=color:#080;font-style:italic># Remove a label</span>
</span></span><span style=display:flex><span>kubectl annotate pods my-pod icon-url<span style=color:#666>=</span>http://goo.gl/XXBTWq       <span style=color:#080;font-style:italic># Add an annotation</span>
</span></span><span style=display:flex><span>kubectl autoscale deployment foo --min<span style=color:#666>=</span><span style=color:#666>2</span> --max<span style=color:#666>=</span><span style=color:#666>10</span>                <span style=color:#080;font-style:italic># Auto scale a deployment &#34;foo&#34;</span>
</span></span></code></pre></div><h2 id=patching-resources>Patching resources</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#080;font-style:italic># Partially update a node</span>
</span></span><span style=display:flex><span>kubectl patch node k8s-node-1 -p <span style=color:#b44>&#39;{&#34;spec&#34;:{&#34;unschedulable&#34;:true}}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Update a container&#39;s image; spec.containers[*].name is required because it&#39;s a merge key</span>
</span></span><span style=display:flex><span>kubectl patch pod valid-pod -p <span style=color:#b44>&#39;{&#34;spec&#34;:{&#34;containers&#34;:[{&#34;name&#34;:&#34;kubernetes-serve-hostname&#34;,&#34;image&#34;:&#34;new image&#34;}]}}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Update a container&#39;s image using a json patch with positional arrays</span>
</span></span><span style=display:flex><span>kubectl patch pod valid-pod --type<span style=color:#666>=</span><span style=color:#b44>&#39;json&#39;</span> -p<span style=color:#666>=</span><span style=color:#b44>&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/spec/containers/0/image&#34;, &#34;value&#34;:&#34;new image&#34;}]&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Disable a deployment livenessProbe using a json patch with positional arrays</span>
</span></span><span style=display:flex><span>kubectl patch deployment valid-deployment  --type json   -p<span style=color:#666>=</span><span style=color:#b44>&#39;[{&#34;op&#34;: &#34;remove&#34;, &#34;path&#34;: &#34;/spec/template/spec/containers/0/livenessProbe&#34;}]&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Add a new element to a positional array</span>
</span></span><span style=display:flex><span>kubectl patch sa default --type<span style=color:#666>=</span><span style=color:#b44>&#39;json&#39;</span> -p<span style=color:#666>=</span><span style=color:#b44>&#39;[{&#34;op&#34;: &#34;add&#34;, &#34;path&#34;: &#34;/secrets/1&#34;, &#34;value&#34;: {&#34;name&#34;: &#34;whatever&#34; } }]&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Update a deployment&#39;s replica count by patching its scale subresource</span>
</span></span><span style=display:flex><span>kubectl patch deployment nginx-deployment --subresource<span style=color:#666>=</span><span style=color:#b44>&#39;scale&#39;</span> --type<span style=color:#666>=</span><span style=color:#b44>&#39;merge&#39;</span> -p <span style=color:#b44>&#39;{&#34;spec&#34;:{&#34;replicas&#34;:2}}&#39;</span>
</span></span></code></pre></div><h2 id=editing-resources>Editing resources</h2><p>Edit any API resource in your preferred editor.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl edit svc/docker-registry                      <span style=color:#080;font-style:italic># Edit the service named docker-registry</span>
</span></span><span style=display:flex><span><span style=color:#b8860b>KUBE_EDITOR</span><span style=color:#666>=</span><span style=color:#b44>&#34;nano&#34;</span> kubectl edit svc/docker-registry   <span style=color:#080;font-style:italic># Use an alternative editor</span>
</span></span></code></pre></div><h2 id=scaling-resources>Scaling resources</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl scale --replicas<span style=color:#666>=</span><span style=color:#666>3</span> rs/foo                                 <span style=color:#080;font-style:italic># Scale a replicaset named &#39;foo&#39; to 3</span>
</span></span><span style=display:flex><span>kubectl scale --replicas<span style=color:#666>=</span><span style=color:#666>3</span> -f foo.yaml                            <span style=color:#080;font-style:italic># Scale a resource specified in &#34;foo.yaml&#34; to 3</span>
</span></span><span style=display:flex><span>kubectl scale --current-replicas<span style=color:#666>=</span><span style=color:#666>2</span> --replicas<span style=color:#666>=</span><span style=color:#666>3</span> deployment/mysql  <span style=color:#080;font-style:italic># If the deployment named mysql&#39;s current size is 2, scale mysql to 3</span>
</span></span><span style=display:flex><span>kubectl scale --replicas<span style=color:#666>=</span><span style=color:#666>5</span> rc/foo rc/bar rc/baz                   <span style=color:#080;font-style:italic># Scale multiple replication controllers</span>
</span></span></code></pre></div><h2 id=deleting-resources>Deleting resources</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl delete -f ./pod.json                                      <span style=color:#080;font-style:italic># Delete a pod using the type and name specified in pod.json</span>
</span></span><span style=display:flex><span>kubectl delete pod unwanted --now                                 <span style=color:#080;font-style:italic># Delete a pod with no grace period</span>
</span></span><span style=display:flex><span>kubectl delete pod,service baz foo                                <span style=color:#080;font-style:italic># Delete pods and services with same names &#34;baz&#34; and &#34;foo&#34;</span>
</span></span><span style=display:flex><span>kubectl delete pods,services -l <span style=color:#b8860b>name</span><span style=color:#666>=</span>myLabel                      <span style=color:#080;font-style:italic># Delete pods and services with label name=myLabel</span>
</span></span><span style=display:flex><span>kubectl -n my-ns delete pod,svc --all                             <span style=color:#080;font-style:italic># Delete all pods and services in namespace my-ns,</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Delete all pods matching the awk pattern1 or pattern2</span>
</span></span><span style=display:flex><span>kubectl get pods  -n mynamespace --no-headers<span style=color:#666>=</span><span style=color:#a2f>true</span> | awk <span style=color:#b44>&#39;/pattern1|pattern2/{print $1}&#39;</span> | xargs  kubectl delete -n mynamespace pod
</span></span></code></pre></div><h2 id=interacting-with-running-pods>Interacting with running Pods</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl logs my-pod                                 <span style=color:#080;font-style:italic># dump pod logs (stdout)</span>
</span></span><span style=display:flex><span>kubectl logs -l <span style=color:#b8860b>name</span><span style=color:#666>=</span>myLabel                        <span style=color:#080;font-style:italic># dump pod logs, with label name=myLabel (stdout)</span>
</span></span><span style=display:flex><span>kubectl logs my-pod --previous                      <span style=color:#080;font-style:italic># dump pod logs (stdout) for a previous instantiation of a container</span>
</span></span><span style=display:flex><span>kubectl logs my-pod -c my-container                 <span style=color:#080;font-style:italic># dump pod container logs (stdout, multi-container case)</span>
</span></span><span style=display:flex><span>kubectl logs -l <span style=color:#b8860b>name</span><span style=color:#666>=</span>myLabel -c my-container        <span style=color:#080;font-style:italic># dump pod logs, with label name=myLabel (stdout)</span>
</span></span><span style=display:flex><span>kubectl logs my-pod -c my-container --previous      <span style=color:#080;font-style:italic># dump pod container logs (stdout, multi-container case) for a previous instantiation of a container</span>
</span></span><span style=display:flex><span>kubectl logs -f my-pod                              <span style=color:#080;font-style:italic># stream pod logs (stdout)</span>
</span></span><span style=display:flex><span>kubectl logs -f my-pod -c my-container              <span style=color:#080;font-style:italic># stream pod container logs (stdout, multi-container case)</span>
</span></span><span style=display:flex><span>kubectl logs -f -l <span style=color:#b8860b>name</span><span style=color:#666>=</span>myLabel --all-containers    <span style=color:#080;font-style:italic># stream all pods logs with label name=myLabel (stdout)</span>
</span></span><span style=display:flex><span>kubectl run -i --tty busybox --image<span style=color:#666>=</span>busybox:1.28 -- sh  <span style=color:#080;font-style:italic># Run pod as interactive shell</span>
</span></span><span style=display:flex><span>kubectl run nginx --image<span style=color:#666>=</span>nginx -n mynamespace      <span style=color:#080;font-style:italic># Start a single instance of nginx pod in the namespace of mynamespace</span>
</span></span><span style=display:flex><span>kubectl run nginx --image<span style=color:#666>=</span>nginx --dry-run<span style=color:#666>=</span>client -o yaml &gt; pod.yaml
</span></span><span style=display:flex><span>                                                    <span style=color:#080;font-style:italic># Generate spec for running pod nginx and write it into a file called pod.yaml</span>
</span></span><span style=display:flex><span>kubectl attach my-pod -i                            <span style=color:#080;font-style:italic># Attach to Running Container</span>
</span></span><span style=display:flex><span>kubectl port-forward my-pod 5000:6000               <span style=color:#080;font-style:italic># Listen on port 5000 on the local machine and forward to port 6000 on my-pod</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#a2f>exec</span> my-pod -- ls /                         <span style=color:#080;font-style:italic># Run command in existing pod (1 container case)</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#a2f>exec</span> --stdin --tty my-pod -- /bin/sh        <span style=color:#080;font-style:italic># Interactive shell access to a running pod (1 container case)</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#a2f>exec</span> my-pod -c my-container -- ls /         <span style=color:#080;font-style:italic># Run command in existing pod (multi-container case)</span>
</span></span><span style=display:flex><span>kubectl top pod POD_NAME --containers               <span style=color:#080;font-style:italic># Show metrics for a given pod and its containers</span>
</span></span><span style=display:flex><span>kubectl top pod POD_NAME --sort-by<span style=color:#666>=</span>cpu              <span style=color:#080;font-style:italic># Show metrics for a given pod and sort it by &#39;cpu&#39; or &#39;memory&#39;</span>
</span></span></code></pre></div><h2 id=copying-files-and-directories-to-and-from-containers>Copying files and directories to and from containers</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl cp /tmp/foo_dir my-pod:/tmp/bar_dir            <span style=color:#080;font-style:italic># Copy /tmp/foo_dir local directory to /tmp/bar_dir in a remote pod in the current namespace</span>
</span></span><span style=display:flex><span>kubectl cp /tmp/foo my-pod:/tmp/bar -c my-container    <span style=color:#080;font-style:italic># Copy /tmp/foo local file to /tmp/bar in a remote pod in a specific container</span>
</span></span><span style=display:flex><span>kubectl cp /tmp/foo my-namespace/my-pod:/tmp/bar       <span style=color:#080;font-style:italic># Copy /tmp/foo local file to /tmp/bar in a remote pod in namespace my-namespace</span>
</span></span><span style=display:flex><span>kubectl cp my-namespace/my-pod:/tmp/foo /tmp/bar       <span style=color:#080;font-style:italic># Copy /tmp/foo from a remote pod to /tmp/bar locally</span>
</span></span></code></pre></div><div class="alert alert-info note callout" role=alert><strong>Note:</strong> <code>kubectl cp</code> requires that the 'tar' binary is present in your container image. If 'tar' is not present, <code>kubectl cp</code> will fail.
For advanced use cases, such as symlinks, wildcard expansion or file mode preservation consider using <code>kubectl exec</code>.</div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar cf - /tmp/foo | kubectl <span style=color:#a2f>exec</span> -i -n my-namespace my-pod -- tar xf - -C /tmp/bar           <span style=color:#080;font-style:italic># Copy /tmp/foo local file to /tmp/bar in a remote pod in namespace my-namespace</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#a2f>exec</span> -n my-namespace my-pod -- tar cf - /tmp/foo | tar xf - -C /tmp/bar    <span style=color:#080;font-style:italic># Copy /tmp/foo from a remote pod to /tmp/bar locally</span>
</span></span></code></pre></div><h2 id=interacting-with-deployments-and-services>Interacting with Deployments and Services</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl logs deploy/my-deployment                         <span style=color:#080;font-style:italic># dump Pod logs for a Deployment (single-container case)</span>
</span></span><span style=display:flex><span>kubectl logs deploy/my-deployment -c my-container         <span style=color:#080;font-style:italic># dump Pod logs for a Deployment (multi-container case)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl port-forward svc/my-service <span style=color:#666>5000</span>                  <span style=color:#080;font-style:italic># listen on local port 5000 and forward to port 5000 on Service backend</span>
</span></span><span style=display:flex><span>kubectl port-forward svc/my-service 5000:my-service-port  <span style=color:#080;font-style:italic># listen on local port 5000 and forward to Service target port with name &lt;my-service-port&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl port-forward deploy/my-deployment 5000:6000       <span style=color:#080;font-style:italic># listen on local port 5000 and forward to port 6000 on a Pod created by &lt;my-deployment&gt;</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#a2f>exec</span> deploy/my-deployment -- ls                   <span style=color:#080;font-style:italic># run command in first Pod and first container in Deployment (single- or multi-container cases)</span>
</span></span></code></pre></div><h2 id=interacting-with-nodes-and-cluster>Interacting with Nodes and cluster</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl cordon my-node                                                <span style=color:#080;font-style:italic># Mark my-node as unschedulable</span>
</span></span><span style=display:flex><span>kubectl drain my-node                                                 <span style=color:#080;font-style:italic># Drain my-node in preparation for maintenance</span>
</span></span><span style=display:flex><span>kubectl uncordon my-node                                              <span style=color:#080;font-style:italic># Mark my-node as schedulable</span>
</span></span><span style=display:flex><span>kubectl top node my-node                                              <span style=color:#080;font-style:italic># Show metrics for a given node</span>
</span></span><span style=display:flex><span>kubectl cluster-info                                                  <span style=color:#080;font-style:italic># Display addresses of the master and services</span>
</span></span><span style=display:flex><span>kubectl cluster-info dump                                             <span style=color:#080;font-style:italic># Dump current cluster state to stdout</span>
</span></span><span style=display:flex><span>kubectl cluster-info dump --output-directory<span style=color:#666>=</span>/path/to/cluster-state   <span style=color:#080;font-style:italic># Dump current cluster state to /path/to/cluster-state</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># View existing taints on which exist on current nodes.</span>
</span></span><span style=display:flex><span>kubectl get nodes -o<span style=color:#666>=</span><span style=color:#b44>&#39;custom-columns=NodeName:.metadata.name,TaintKey:.spec.taints[*].key,TaintValue:.spec.taints[*].value,TaintEffect:.spec.taints[*].effect&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># If a taint with that key and effect already exists, its value is replaced as specified.</span>
</span></span><span style=display:flex><span>kubectl taint nodes foo <span style=color:#b8860b>dedicated</span><span style=color:#666>=</span>special-user:NoSchedule
</span></span></code></pre></div><h3 id=resource-types>Resource types</h3><p>List all supported resource types along with their shortnames, <a href=/docs/concepts/overview/kubernetes-api/#api-groups-and-versioning>API group</a>, whether they are <a href=/docs/concepts/overview/working-with-objects/namespaces>namespaced</a>, and <a href=/docs/concepts/overview/working-with-objects/kubernetes-objects>Kind</a>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl api-resources
</span></span></code></pre></div><p>Other operations for exploring API resources:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl api-resources --namespaced<span style=color:#666>=</span><span style=color:#a2f>true</span>      <span style=color:#080;font-style:italic># All namespaced resources</span>
</span></span><span style=display:flex><span>kubectl api-resources --namespaced<span style=color:#666>=</span><span style=color:#a2f>false</span>     <span style=color:#080;font-style:italic># All non-namespaced resources</span>
</span></span><span style=display:flex><span>kubectl api-resources -o name                <span style=color:#080;font-style:italic># All resources with simple output (only the resource name)</span>
</span></span><span style=display:flex><span>kubectl api-resources -o wide                <span style=color:#080;font-style:italic># All resources with expanded (aka &#34;wide&#34;) output</span>
</span></span><span style=display:flex><span>kubectl api-resources --verbs<span style=color:#666>=</span>list,get       <span style=color:#080;font-style:italic># All resources that support the &#34;list&#34; and &#34;get&#34; request verbs</span>
</span></span><span style=display:flex><span>kubectl api-resources --api-group<span style=color:#666>=</span>extensions <span style=color:#080;font-style:italic># All resources in the &#34;extensions&#34; API group</span>
</span></span></code></pre></div><h3 id=formatting-output>Formatting output</h3><p>To output details to your terminal window in a specific format, add the <code>-o</code> (or <code>--output</code>) flag to a supported <code>kubectl</code> command.</p><table><thead><tr><th>Output format</th><th>Description</th></tr></thead><tbody><tr><td><code>-o=custom-columns=&lt;spec></code></td><td>Print a table using a comma separated list of custom columns</td></tr><tr><td><code>-o=custom-columns-file=&lt;filename></code></td><td>Print a table using the custom columns template in the <code>&lt;filename></code> file</td></tr><tr><td><code>-o=json</code></td><td>Output a JSON formatted API object</td></tr><tr><td><code>-o=jsonpath=&lt;template></code></td><td>Print the fields defined in a <a href=/docs/reference/kubectl/jsonpath>jsonpath</a> expression</td></tr><tr><td><code>-o=jsonpath-file=&lt;filename></code></td><td>Print the fields defined by the <a href=/docs/reference/kubectl/jsonpath>jsonpath</a> expression in the <code>&lt;filename></code> file</td></tr><tr><td><code>-o=name</code></td><td>Print only the resource name and nothing else</td></tr><tr><td><code>-o=wide</code></td><td>Output in the plain-text format with any additional information, and for pods, the node name is included</td></tr><tr><td><code>-o=yaml</code></td><td>Output a YAML formatted API object</td></tr></tbody></table><p>Examples using <code>-o=custom-columns</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#080;font-style:italic># All images running in a cluster</span>
</span></span><span style=display:flex><span>kubectl get pods -A -o<span style=color:#666>=</span>custom-columns<span style=color:#666>=</span><span style=color:#b44>&#39;DATA:spec.containers[*].image&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># All images running in namespace: default, grouped by Pod</span>
</span></span><span style=display:flex><span>kubectl get pods --namespace default --output<span style=color:#666>=</span>custom-columns<span style=color:#666>=</span><span style=color:#b44>&#34;NAME:.metadata.name,IMAGE:.spec.containers[*].image&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#080;font-style:italic># All images excluding &#34;registry.k8s.io/coredns:1.6.2&#34;</span>
</span></span><span style=display:flex><span>kubectl get pods -A -o<span style=color:#666>=</span>custom-columns<span style=color:#666>=</span><span style=color:#b44>&#39;DATA:spec.containers[?(@.image!=&#34;registry.k8s.io/coredns:1.6.2&#34;)].image&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># All fields under metadata regardless of name</span>
</span></span><span style=display:flex><span>kubectl get pods -A -o<span style=color:#666>=</span>custom-columns<span style=color:#666>=</span><span style=color:#b44>&#39;DATA:metadata.*&#39;</span>
</span></span></code></pre></div><p>More examples in the kubectl <a href=/docs/reference/kubectl/#custom-columns>reference documentation</a>.</p><h3 id=kubectl-output-verbosity-and-debugging>Kubectl output verbosity and debugging</h3><p>Kubectl verbosity is controlled with the <code>-v</code> or <code>--v</code> flags followed by an integer representing the log level. General Kubernetes logging conventions and the associated log levels are described <a href=https://github.com/kubernetes/community/blob/master/contributors/devel/sig-instrumentation/logging.md>here</a>.</p><table><thead><tr><th>Verbosity</th><th>Description</th></tr></thead><tbody><tr><td><code>--v=0</code></td><td>Generally useful for this to <em>always</em> be visible to a cluster operator.</td></tr><tr><td><code>--v=1</code></td><td>A reasonable default log level if you don't want verbosity.</td></tr><tr><td><code>--v=2</code></td><td>Useful steady state information about the service and important log messages that may correlate to significant changes in the system. This is the recommended default log level for most systems.</td></tr><tr><td><code>--v=3</code></td><td>Extended information about changes.</td></tr><tr><td><code>--v=4</code></td><td>Debug level verbosity.</td></tr><tr><td><code>--v=5</code></td><td>Trace level verbosity.</td></tr><tr><td><code>--v=6</code></td><td>Display requested resources.</td></tr><tr><td><code>--v=7</code></td><td>Display HTTP request headers.</td></tr><tr><td><code>--v=8</code></td><td>Display HTTP request contents.</td></tr><tr><td><code>--v=9</code></td><td>Display HTTP request contents without truncation of contents.</td></tr></tbody></table><h2 id=what-s-next>What's next</h2><ul><li><p>Read the <a href=/docs/reference/kubectl/>kubectl overview</a> and learn about <a href=/docs/reference/kubectl/jsonpath>JsonPath</a>.</p></li><li><p>See <a href=/docs/reference/kubectl/kubectl/>kubectl</a> options.</p></li><li><p>Also read <a href=/docs/reference/kubectl/conventions/>kubectl Usage Conventions</a> to understand how to use kubectl in reusable scripts.</p></li><li><p>See more community <a href=https://github.com/dennyzhang/cheatsheet-kubernetes-A4>kubectl cheatsheets</a>.</p></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-d7ffbf04ffbefb241fd0722423b80f5a>2 - kubectl Commands</h1><p><a href=/docs/reference/generated/kubectl/kubectl-commands/>kubectl Command Reference</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-4d3e62632c189fcc3c1357cd8fb8799c>3 - kubectl</h1><h2 id=synopsis>Synopsis</h2><p>kubectl controls the Kubernetes cluster manager.</p><p>Find more information at: <a href=https://kubernetes.io/docs/reference/kubectl/overview/>https://kubernetes.io/docs/reference/kubectl/overview/</a></p><pre tabindex=0><code>kubectl [flags]
</code></pre><h2 id=options>Options</h2><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--add-dir-header</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>If true, adds the file directory to the header of the log messages</td></tr><tr><td colspan=2>--alsologtostderr</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>log to standard error as well as files</td></tr><tr><td colspan=2>--as string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Username to impersonate for the operation</td></tr><tr><td colspan=2>--as-group stringArray</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Group to impersonate for the operation, this flag can be repeated to specify multiple groups.</td></tr><tr><td colspan=2>--azure-container-registry-config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Path to the file containing Azure container registry configuration information.</td></tr><tr><td colspan=2>--cache-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: "$HOME/.kube/cache"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Default cache directory</td></tr><tr><td colspan=2>--certificate-authority string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Path to a cert file for the certificate authority</td></tr><tr><td colspan=2>--client-certificate string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Path to a client certificate file for TLS</td></tr><tr><td colspan=2>--client-key string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Path to a client key file for TLS</td></tr><tr><td colspan=2>--cloud-provider-gce-l7lb-src-cidrs cidrs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: 130.211.0.0/22,35.191.0.0/16</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>CIDRs opened in GCE firewall for L7 LB traffic proxy & health checks</td></tr><tr><td colspan=2>--cloud-provider-gce-lb-src-cidrs cidrs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: 130.211.0.0/22,209.85.152.0/22,209.85.204.0/22,35.191.0.0/16</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>CIDRs opened in GCE firewall for L4 LB traffic proxy & health checks</td></tr><tr><td colspan=2>--cluster string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>The name of the kubeconfig cluster to use</td></tr><tr><td colspan=2>--context string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>The name of the kubeconfig context to use</td></tr><tr><td colspan=2>--default-not-ready-toleration-seconds int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: 300</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Indicates the tolerationSeconds of the toleration for notReady:NoExecute that is added by default to every pod that does not already have such a toleration.</td></tr><tr><td colspan=2>--default-unreachable-toleration-seconds int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: 300</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Indicates the tolerationSeconds of the toleration for unreachable:NoExecute that is added by default to every pod that does not already have such a toleration.</td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>help for kubectl</td></tr><tr><td colspan=2>--insecure-skip-tls-verify</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>If true, the server's certificate will not be checked for validity. This will make your HTTPS connections insecure</td></tr><tr><td colspan=2>--kubeconfig string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Path to the kubeconfig file to use for CLI requests.</td></tr><tr><td colspan=2>--log-backtrace-at traceLocation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: :0</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>when logging hits line file:N, emit a stack trace</td></tr><tr><td colspan=2>--log-dir string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>If non-empty, write log files in this directory</td></tr><tr><td colspan=2>--log-file string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>If non-empty, use this log file</td></tr><tr><td colspan=2>--log-file-max-size uint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: 1800</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Defines the maximum size a log file can grow to. Unit is megabytes. If the value is 0, the maximum file size is unlimited.</td></tr><tr><td colspan=2>--log-flush-frequency duration&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: 5s</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Maximum number of seconds between log flushes</td></tr><tr><td colspan=2>--logtostderr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: true</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>log to standard error instead of files</td></tr><tr><td colspan=2>--match-server-version</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Require server version to match client version</td></tr><tr><td colspan=2>-n, --namespace string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>If present, the namespace scope for this CLI request</td></tr><tr><td colspan=2>--one-output</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>If true, only write logs to their native severity level (vs also writing to each lower severity level</td></tr><tr><td colspan=2>--password string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Password for basic authentication to the API server</td></tr><tr><td colspan=2>--profile string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: "none"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Name of profile to capture. One of (none|cpu|heap|goroutine|threadcreate|block|mutex)</td></tr><tr><td colspan=2>--profile-output string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: "profile.pprof"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Name of the file to write the profile to</td></tr><tr><td colspan=2>--request-timeout string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: "0"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>The length of time to wait before giving up on a single server request. Non-zero values should contain a corresponding time unit (e.g. 1s, 2m, 3h). A value of zero means don't timeout requests.</td></tr><tr><td colspan=2>-s, --server string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>The address and port of the Kubernetes API server</td></tr><tr><td colspan=2>--skip-headers</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>If true, avoid header prefixes in the log messages</td></tr><tr><td colspan=2>--skip-log-headers</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>If true, avoid headers when opening log files</td></tr><tr><td colspan=2>--stderrthreshold severity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: 2</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>logs at or above this threshold go to stderr</td></tr><tr><td colspan=2>--tls-server-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Server name to use for server certificate validation. If it is not provided, the hostname used to contact the server is used</td></tr><tr><td colspan=2>--token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Bearer token for authentication to the API server</td></tr><tr><td colspan=2>--user string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>The name of the kubeconfig user to use</td></tr><tr><td colspan=2>--username string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Username for basic authentication to the API server</td></tr><tr><td colspan=2>-v, --v Level</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>number for the log level verbosity</td></tr><tr><td colspan=2>--version version[=true]</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Print version information and quit</td></tr><tr><td colspan=2>--vmodule moduleSpec</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>comma-separated list of pattern=N settings for file-filtered logging</td></tr><tr><td colspan=2>--warnings-as-errors</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Treat warnings received from the server as errors and exit with a non-zero exit code</td></tr></tbody></table><h2 id=environment-variables>Environment variables</h2><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>KUBECONFIG</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>Path to the kubectl configuration ("kubeconfig") file. Default: "$HOME/.kube/config"</td></tr><tr><td colspan=2>KUBECTL_COMMAND_HEADERS</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>When set to false, turns off extra HTTP headers detailing invoked kubectl command (Kubernetes version v1.22 or later)</td></tr></tbody></table><h2 id=see-also>See Also</h2><ul><li><a href=/docs/reference/generated/kubectl/kubectl-commands#annotate>kubectl annotate</a> - Update the annotations on a resource</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#api-resources>kubectl api-resources</a> - Print the supported API resources on the server</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#api-versions>kubectl api-versions</a> - Print the supported API versions on the server, in the form of "group/version"</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#apply>kubectl apply</a> - Apply a configuration to a resource by filename or stdin</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#attach>kubectl attach</a> - Attach to a running container</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#auth>kubectl auth</a> - Inspect authorization</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#autoscale>kubectl autoscale</a> - Auto-scale a Deployment, ReplicaSet, or ReplicationController</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#certificate>kubectl certificate</a> - Modify certificate resources.</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#cluster-info>kubectl cluster-info</a> - Display cluster info</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#completion>kubectl completion</a> - Output shell completion code for the specified shell (bash or zsh)</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#config>kubectl config</a> - Modify kubeconfig files</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#cordon>kubectl cordon</a> - Mark node as unschedulable</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#cp>kubectl cp</a> - Copy files and directories to and from containers.</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#create>kubectl create</a> - Create a resource from a file or from stdin.</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#debug>kubectl debug</a> - Create debugging sessions for troubleshooting workloads and nodes</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#delete>kubectl delete</a> - Delete resources by filenames, stdin, resources and names, or by resources and label selector</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#describe>kubectl describe</a> - Show details of a specific resource or group of resources</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#diff>kubectl diff</a> - Diff live version against would-be applied version</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#drain>kubectl drain</a> - Drain node in preparation for maintenance</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#edit>kubectl edit</a> - Edit a resource on the server</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#exec>kubectl exec</a> - Execute a command in a container</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#explain>kubectl explain</a> - Documentation of resources</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#expose>kubectl expose</a> - Take a replication controller, service, deployment or pod and expose it as a new Kubernetes Service</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#get>kubectl get</a> - Display one or many resources</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#kustomize>kubectl kustomize</a> - Build a kustomization target from a directory or a remote url.</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#label>kubectl label</a> - Update the labels on a resource</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#logs>kubectl logs</a> - Print the logs for a container in a pod</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#options>kubectl options</a> - Print the list of flags inherited by all commands</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#patch>kubectl patch</a> - Update field(s) of a resource</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#plugin>kubectl plugin</a> - Provides utilities for interacting with plugins.</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#port-forward>kubectl port-forward</a> - Forward one or more local ports to a pod</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#proxy>kubectl proxy</a> - Run a proxy to the Kubernetes API server</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#replace>kubectl replace</a> - Replace a resource by filename or stdin</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#rollout>kubectl rollout</a> - Manage the rollout of a resource</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#run>kubectl run</a> - Run a particular image on the cluster</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#scale>kubectl scale</a> - Set a new size for a Deployment, ReplicaSet or Replication Controller</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#set>kubectl set</a> - Set specific features on objects</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#taint>kubectl taint</a> - Update the taints on one or more nodes</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#top>kubectl top</a> - Display Resource (CPU/Memory/Storage) usage.</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#uncordon>kubectl uncordon</a> - Mark node as schedulable</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#version>kubectl version</a> - Print the client and server version information</li><li><a href=/docs/reference/generated/kubectl/kubectl-commands#wait>kubectl wait</a> - Experimental: Wait for a specific condition on one or many resources.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-a938176c695852fe70362c29cf615f1c>4 - JSONPath Support</h1><p>Kubectl supports JSONPath template.</p><p>JSONPath template is composed of JSONPath expressions enclosed by curly braces {}.
Kubectl uses JSONPath expressions to filter on specific fields in the JSON object and format the output.
In addition to the original JSONPath template syntax, the following functions and syntax are valid:</p><ol><li>Use double quotes to quote text inside JSONPath expressions.</li><li>Use the <code>range</code>, <code>end</code> operators to iterate lists.</li><li>Use negative slice indices to step backwards through a list. Negative indices do not "wrap around" a list and are valid as long as <code>-index + listLength >= 0</code>.</li></ol><div class="alert alert-info note callout" role=alert><strong>Note:</strong><ul><li><p>The <code>$</code> operator is optional since the expression always starts from the root object by default.</p></li><li><p>The result object is printed as its String() function.</p></li></ul></div><p>Given the JSON input:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;List&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;items&#34;</span>:[
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;kind&#34;</span>:<span style=color:#b44>&#34;None&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;metadata&#34;</span>:{<span style=color:green;font-weight:700>&#34;name&#34;</span>:<span style=color:#b44>&#34;127.0.0.1&#34;</span>},
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;status&#34;</span>:{
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>&#34;capacity&#34;</span>:{<span style=color:green;font-weight:700>&#34;cpu&#34;</span>:<span style=color:#b44>&#34;4&#34;</span>},
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>&#34;addresses&#34;</span>:[{<span style=color:green;font-weight:700>&#34;type&#34;</span>: <span style=color:#b44>&#34;LegacyHostIP&#34;</span>, <span style=color:green;font-weight:700>&#34;address&#34;</span>:<span style=color:#b44>&#34;127.0.0.1&#34;</span>}]
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;kind&#34;</span>:<span style=color:#b44>&#34;None&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;metadata&#34;</span>:{<span style=color:green;font-weight:700>&#34;name&#34;</span>:<span style=color:#b44>&#34;127.0.0.2&#34;</span>},
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;status&#34;</span>:{
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>&#34;capacity&#34;</span>:{<span style=color:green;font-weight:700>&#34;cpu&#34;</span>:<span style=color:#b44>&#34;8&#34;</span>},
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>&#34;addresses&#34;</span>:[
</span></span><span style=display:flex><span>          {<span style=color:green;font-weight:700>&#34;type&#34;</span>: <span style=color:#b44>&#34;LegacyHostIP&#34;</span>, <span style=color:green;font-weight:700>&#34;address&#34;</span>:<span style=color:#b44>&#34;127.0.0.2&#34;</span>},
</span></span><span style=display:flex><span>          {<span style=color:green;font-weight:700>&#34;type&#34;</span>: <span style=color:#b44>&#34;another&#34;</span>, <span style=color:green;font-weight:700>&#34;address&#34;</span>:<span style=color:#b44>&#34;127.0.0.3&#34;</span>}
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;users&#34;</span>:[
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;name&#34;</span>: <span style=color:#b44>&#34;myself&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;user&#34;</span>: {}
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;name&#34;</span>: <span style=color:#b44>&#34;e2e&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:green;font-weight:700>&#34;user&#34;</span>: {<span style=color:green;font-weight:700>&#34;username&#34;</span>: <span style=color:#b44>&#34;admin&#34;</span>, <span style=color:green;font-weight:700>&#34;password&#34;</span>: <span style=color:#b44>&#34;secret&#34;</span>}
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><table><thead><tr><th>Function</th><th>Description</th><th>Example</th><th>Result</th></tr></thead><tbody><tr><td><code>text</code></td><td>the plain text</td><td><code>kind is {.kind}</code></td><td><code>kind is List</code></td></tr><tr><td><code>@</code></td><td>the current object</td><td><code>{@}</code></td><td>the same as input</td></tr><tr><td><code>.</code> or <code>[]</code></td><td>child operator</td><td><code>{.kind}</code>, <code>{['kind']}</code> or <code>{['name\.type']}</code></td><td><code>List</code></td></tr><tr><td><code>..</code></td><td>recursive descent</td><td><code>{..name}</code></td><td><code>127.0.0.1 127.0.0.2 myself e2e</code></td></tr><tr><td><code>*</code></td><td>wildcard. Get all objects</td><td><code>{.items[*].metadata.name}</code></td><td><code>[127.0.0.1 127.0.0.2]</code></td></tr><tr><td><code>[start:end:step]</code></td><td>subscript operator</td><td><code>{.users[0].name}</code></td><td><code>myself</code></td></tr><tr><td><code>[,]</code></td><td>union operator</td><td><code>{.items[*]['metadata.name', 'status.capacity']}</code></td><td><code>127.0.0.1 127.0.0.2 map[cpu:4] map[cpu:8]</code></td></tr><tr><td><code>?()</code></td><td>filter</td><td><code>{.users[?(@.name=="e2e")].user.password}</code></td><td><code>secret</code></td></tr><tr><td><code>range</code>, <code>end</code></td><td>iterate list</td><td><code>{range .items[*]}[{.metadata.name}, {.status.capacity}] {end}</code></td><td><code>[127.0.0.1, map[cpu:4]] [127.0.0.2, map[cpu:8]]</code></td></tr><tr><td><code>''</code></td><td>quote interpreted string</td><td><code>{range .items[*]}{.metadata.name}{'\t'}{end}</code></td><td><code>127.0.0.1 127.0.0.2</code></td></tr></tbody></table><p>Examples using <code>kubectl</code> and JSONPath expressions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods -o json
</span></span><span style=display:flex><span>kubectl get pods -o<span style=color:#666>=</span><span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{@}&#39;</span>
</span></span><span style=display:flex><span>kubectl get pods -o<span style=color:#666>=</span><span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{.items[0]}&#39;</span>
</span></span><span style=display:flex><span>kubectl get pods -o<span style=color:#666>=</span><span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{.items[0].metadata.name}&#39;</span>
</span></span><span style=display:flex><span>kubectl get pods -o<span style=color:#666>=</span><span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#34;{.items[*][&#39;metadata.name&#39;, &#39;status.capacity&#39;]}&#34;</span>
</span></span><span style=display:flex><span>kubectl get pods -o<span style=color:#666>=</span><span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{range .items[*]}{.metadata.name}{&#34;\t&#34;}{.status.startTime}{&#34;\n&#34;}{end}&#39;</span>
</span></span></code></pre></div><div class="alert alert-info note callout" role=alert><strong>Note:</strong><p>On Windows, you must <em>double</em> quote any JSONPath template that contains spaces (not single quote as shown above for bash). This in turn means that you must use a single quote or escaped double quote around any literals in the template. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmd data-lang=cmd><span style=display:flex><span>kubectl get pods -o=jsonpath=<span style=color:#b44>&#34;{range .items[*]}{.metadata.name}{&#39;\t&#39;}{.status.startTime}{&#39;\n&#39;}{end}&#34;</span>
</span></span><span style=display:flex><span>kubectl get pods -o=jsonpath=<span style=color:#b44>&#34;{range .items[*]}{.metadata.name}{\&#34;</span>\t\<span style=color:#b44>&#34;}{.status.startTime}{\&#34;</span>\n\<span style=color:#b44>&#34;}{end}&#34;</span>
</span></span></code></pre></div></div><div class="alert alert-info note callout" role=alert><strong>Note:</strong><p>JSONPath regular expressions are not supported. If you want to match using regular expressions, you can use a tool such as <code>jq</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># kubectl does not support regular expressions for JSONpath output</span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># The following command does not work</span>
</span></span><span style=display:flex><span>kubectl get pods -o <span style=color:#b8860b>jsonpath</span><span style=color:#666>=</span><span style=color:#b44>&#39;{.items[?(@.metadata.name=~/^test$/)].metadata.name}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># The following command achieves the desired result</span>
</span></span><span style=display:flex><span>kubectl get pods -o json | jq -r <span style=color:#b44>&#39;.items[] | select(.metadata.name | test(&#34;test-&#34;)).spec.containers[].image&#39;</span>
</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-a7abc09192597e614b58f8b552b682f5>5 - kubectl for Docker Users</h1><p>You can use the Kubernetes command line tool <code>kubectl</code> to interact with the API Server. Using kubectl is straightforward if you are familiar with the Docker command line tool. However, there are a few differences between the Docker commands and the kubectl commands. The following sections show a Docker sub-command and describe the equivalent <code>kubectl</code> command.</p><h2 id=docker-run>docker run</h2><p>To run an nginx Deployment and expose the Deployment, see <a href=/docs/reference/generated/kubectl/kubectl-commands#-em-deployment-em->kubectl create deployment</a>.
docker:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker run -d --restart<span style=color:#666>=</span>always -e <span style=color:#b8860b>DOMAIN</span><span style=color:#666>=</span>cluster --name nginx-app -p 80:80 nginx
</span></span></code></pre></div><pre tabindex=0><code>55c103fa129692154a7652490236fee9be47d70a8dd562281ae7d2f9a339a6db
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker ps
</span></span></code></pre></div><pre tabindex=0><code>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                NAMES
55c103fa1296        nginx               &#34;nginx -g &#39;daemon of…&#34;   9 seconds ago       Up 9 seconds        0.0.0.0:80-&gt;80/tcp   nginx-app
</code></pre><p>kubectl:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># start the pod running nginx</span>
</span></span><span style=display:flex><span>kubectl create deployment --image<span style=color:#666>=</span>nginx nginx-app
</span></span></code></pre></div><pre tabindex=0><code>deployment.apps/nginx-app created
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># add env to nginx-app</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#a2f>set</span> env deployment/nginx-app  <span style=color:#b8860b>DOMAIN</span><span style=color:#666>=</span>cluster
</span></span></code></pre></div><pre tabindex=0><code>deployment.apps/nginx-app env updated
</code></pre><div class="alert alert-info note callout" role=alert><strong>Note:</strong> <code>kubectl</code> commands print the type and name of the resource created or mutated, which can then be used in subsequent commands. You can expose a new Service after a Deployment is created.</div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#080;font-style:italic># expose a port through with a service</span>
</span></span><span style=display:flex><span>kubectl expose deployment nginx-app --port<span style=color:#666>=</span><span style=color:#666>80</span> --name<span style=color:#666>=</span>nginx-http
</span></span></code></pre></div><pre tabindex=0><code>service &#34;nginx-http&#34; exposed
</code></pre><p>By using kubectl, you can create a <a href=/docs/concepts/workloads/controllers/deployment/>Deployment</a> to ensure that N pods are running nginx, where N is the number of replicas stated in the spec and defaults to 1. You can also create a <a href=/docs/concepts/services-networking/service/>service</a> with a selector that matches the pod labels. For more information, see <a href=/docs/tasks/access-application-cluster/service-access-application-cluster>Use a Service to Access an Application in a Cluster</a>.</p><p>By default images run in the background, similar to <code>docker run -d ...</code>. To run things in the foreground, use <a href=/docs/reference/generated/kubectl/kubectl-commands/#run><code>kubectl run</code></a> to create pod:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl run <span style=color:#666>[</span>-i<span style=color:#666>]</span> <span style=color:#666>[</span>--tty<span style=color:#666>]</span> --attach &lt;name&gt; --image<span style=color:#666>=</span>&lt;image&gt;
</span></span></code></pre></div><p>Unlike <code>docker run ...</code>, if you specify <code>--attach</code>, then you attach <code>stdin</code>, <code>stdout</code> and <code>stderr</code>. You cannot control which streams are attached (<code>docker -a ...</code>).
To detach from the container, you can type the escape sequence Ctrl+P followed by Ctrl+Q.</p><h2 id=docker-ps>docker ps</h2><p>To list what is currently running, see <a href=/docs/reference/generated/kubectl/kubectl-commands/#get>kubectl get</a>.</p><p>docker:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker ps -a
</span></span></code></pre></div><pre tabindex=0><code>CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS                     PORTS                NAMES
14636241935f        ubuntu:16.04        &#34;echo test&#34;              5 seconds ago        Exited (0) 5 seconds ago                        cocky_fermi
55c103fa1296        nginx               &#34;nginx -g &#39;daemon of…&#34;   About a minute ago   Up About a minute          0.0.0.0:80-&gt;80/tcp   nginx-app
</code></pre><p>kubectl:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get po
</span></span></code></pre></div><pre tabindex=0><code>NAME                        READY     STATUS      RESTARTS   AGE
nginx-app-8df569cb7-4gd89   1/1       Running     0          3m
ubuntu                      0/1       Completed   0          20s
</code></pre><h2 id=docker-attach>docker attach</h2><p>To attach a process that is already running in a container, see <a href=/docs/reference/generated/kubectl/kubectl-commands/#attach>kubectl attach</a>.</p><p>docker:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker ps
</span></span></code></pre></div><pre tabindex=0><code>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                NAMES
55c103fa1296        nginx               &#34;nginx -g &#39;daemon of…&#34;   5 minutes ago       Up 5 minutes        0.0.0.0:80-&gt;80/tcp   nginx-app
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker attach 55c103fa1296
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>kubectl:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pods
</span></span></code></pre></div><pre tabindex=0><code>NAME              READY     STATUS    RESTARTS   AGE
nginx-app-5jyvm   1/1       Running   0          10m
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl attach -it nginx-app-5jyvm
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>To detach from the container, you can type the escape sequence Ctrl+P followed by Ctrl+Q.</p><h2 id=docker-exec>docker exec</h2><p>To execute a command in a container, see <a href=/docs/reference/generated/kubectl/kubectl-commands/#exec>kubectl exec</a>.</p><p>docker:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker ps
</span></span></code></pre></div><pre tabindex=0><code>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                NAMES
55c103fa1296        nginx               &#34;nginx -g &#39;daemon of…&#34;   6 minutes ago       Up 6 minutes        0.0.0.0:80-&gt;80/tcp   nginx-app
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker <span style=color:#a2f>exec</span> 55c103fa1296 cat /etc/hostname
</span></span></code></pre></div><pre tabindex=0><code>55c103fa1296
</code></pre><p>kubectl:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get po
</span></span></code></pre></div><pre tabindex=0><code>NAME              READY     STATUS    RESTARTS   AGE
nginx-app-5jyvm   1/1       Running   0          10m
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl <span style=color:#a2f>exec</span> nginx-app-5jyvm -- cat /etc/hostname
</span></span></code></pre></div><pre tabindex=0><code>nginx-app-5jyvm
</code></pre><p>To use interactive commands.</p><p>docker:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker <span style=color:#a2f>exec</span> -ti 55c103fa1296 /bin/sh
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># exit</span>
</span></span></code></pre></div><p>kubectl:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl <span style=color:#a2f>exec</span> -ti nginx-app-5jyvm -- /bin/sh
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># exit</span>
</span></span></code></pre></div><p>For more information, see <a href=/docs/tasks/debug/debug-application/get-shell-running-container/>Get a Shell to a Running Container</a>.</p><h2 id=docker-logs>docker logs</h2><p>To follow stdout/stderr of a process that is running, see <a href=/docs/reference/generated/kubectl/kubectl-commands/#logs>kubectl logs</a>.</p><p>docker:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker logs -f a9e
</span></span></code></pre></div><pre tabindex=0><code>192.168.9.1 - - [14/Jul/2015:01:04:02 +0000] &#34;GET / HTTP/1.1&#34; 200 612 &#34;-&#34; &#34;curl/7.35.0&#34; &#34;-&#34;
192.168.9.1 - - [14/Jul/2015:01:04:03 +0000] &#34;GET / HTTP/1.1&#34; 200 612 &#34;-&#34; &#34;curl/7.35.0&#34; &#34;-&#34;
</code></pre><p>kubectl:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl logs -f nginx-app-zibvs
</span></span></code></pre></div><pre tabindex=0><code>10.240.63.110 - - [14/Jul/2015:01:09:01 +0000] &#34;GET / HTTP/1.1&#34; 200 612 &#34;-&#34; &#34;curl/7.26.0&#34; &#34;-&#34;
10.240.63.110 - - [14/Jul/2015:01:09:02 +0000] &#34;GET / HTTP/1.1&#34; 200 612 &#34;-&#34; &#34;curl/7.26.0&#34; &#34;-&#34;
</code></pre><p>There is a slight difference between pods and containers; by default pods do not terminate if their processes exit. Instead the pods restart the process. This is similar to the docker run option <code>--restart=always</code> with one major difference. In docker, the output for each invocation of the process is concatenated, but for Kubernetes, each invocation is separate. To see the output from a previous run in Kubernetes, do this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl logs --previous nginx-app-zibvs
</span></span></code></pre></div><pre tabindex=0><code>10.240.63.110 - - [14/Jul/2015:01:09:01 +0000] &#34;GET / HTTP/1.1&#34; 200 612 &#34;-&#34; &#34;curl/7.26.0&#34; &#34;-&#34;
10.240.63.110 - - [14/Jul/2015:01:09:02 +0000] &#34;GET / HTTP/1.1&#34; 200 612 &#34;-&#34; &#34;curl/7.26.0&#34; &#34;-&#34;
</code></pre><p>For more information, see <a href=/docs/concepts/cluster-administration/logging/>Logging Architecture</a>.</p><h2 id=docker-stop-and-docker-rm>docker stop and docker rm</h2><p>To stop and delete a running process, see <a href=/docs/reference/generated/kubectl/kubectl-commands/#delete>kubectl delete</a>.</p><p>docker:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker ps
</span></span></code></pre></div><pre tabindex=0><code>CONTAINER ID        IMAGE               COMMAND                CREATED             STATUS              PORTS                         NAMES
a9ec34d98787        nginx               &#34;nginx -g &#39;daemon of&#34;  22 hours ago        Up 22 hours         0.0.0.0:80-&gt;80/tcp, 443/tcp   nginx-app
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker stop a9ec34d98787
</span></span></code></pre></div><pre tabindex=0><code>a9ec34d98787
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker rm a9ec34d98787
</span></span></code></pre></div><pre tabindex=0><code>a9ec34d98787
</code></pre><p>kubectl:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get deployment nginx-app
</span></span></code></pre></div><pre tabindex=0><code>NAME         READY   UP-TO-DATE   AVAILABLE   AGE
nginx-app    1/1     1            1           2m
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get po -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx-app
</span></span></code></pre></div><pre tabindex=0><code>NAME                         READY     STATUS    RESTARTS   AGE
nginx-app-2883164633-aklf7   1/1       Running   0          2m
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl delete deployment nginx-app
</span></span></code></pre></div><pre tabindex=0><code>deployment &#34;nginx-app&#34; deleted
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get po -l <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx-app
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic># Return nothing</span>
</span></span></code></pre></div><div class="alert alert-info note callout" role=alert><strong>Note:</strong> When you use kubectl, you don't delete the pod directly. You have to first delete the Deployment that owns the pod. If you delete the pod directly, the Deployment recreates the pod.</div><h2 id=docker-login>docker login</h2><p>There is no direct analog of <code>docker login</code> in kubectl. If you are interested in using Kubernetes with a private registry, see <a href=/docs/concepts/containers/images/#using-a-private-registry>Using a Private Registry</a>.</p><h2 id=docker-version>docker version</h2><p>To get the version of client and server, see <a href=/docs/reference/generated/kubectl/kubectl-commands/#version>kubectl version</a>.</p><p>docker:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker version
</span></span></code></pre></div><pre tabindex=0><code>Client version: 1.7.0
Client API version: 1.19
Go version (client): go1.4.2
Git commit (client): 0baf609
OS/Arch (client): linux/amd64
Server version: 1.7.0
Server API version: 1.19
Go version (server): go1.4.2
Git commit (server): 0baf609
OS/Arch (server): linux/amd64
</code></pre><p>kubectl:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl version
</span></span></code></pre></div><pre tabindex=0><code>Client Version: version.Info{Major:&#34;1&#34;, Minor:&#34;6&#34;, GitVersion:&#34;v1.6.9+a3d1dfa6f4335&#34;, GitCommit:&#34;9b77fed11a9843ce3780f70dd251e92901c43072&#34;, GitTreeState:&#34;dirty&#34;, BuildDate:&#34;2017-08-29T20:32:58Z&#34;, OpenPaasKubernetesVersion:&#34;v1.03.02&#34;, GoVersion:&#34;go1.7.5&#34;, Compiler:&#34;gc&#34;, Platform:&#34;linux/amd64&#34;}
Server Version: version.Info{Major:&#34;1&#34;, Minor:&#34;6&#34;, GitVersion:&#34;v1.6.9+a3d1dfa6f4335&#34;, GitCommit:&#34;9b77fed11a9843ce3780f70dd251e92901c43072&#34;, GitTreeState:&#34;dirty&#34;, BuildDate:&#34;2017-08-29T20:32:58Z&#34;, OpenPaasKubernetesVersion:&#34;v1.03.02&#34;, GoVersion:&#34;go1.7.5&#34;, Compiler:&#34;gc&#34;, Platform:&#34;linux/amd64&#34;}
</code></pre><h2 id=docker-info>docker info</h2><p>To get miscellaneous information about the environment and configuration, see <a href=/docs/reference/generated/kubectl/kubectl-commands/#cluster-info>kubectl cluster-info</a>.</p><p>docker:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker info
</span></span></code></pre></div><pre tabindex=0><code>Containers: 40
Images: 168
Storage Driver: aufs
 Root Dir: /usr/local/google/docker/aufs
 Backing Filesystem: extfs
 Dirs: 248
 Dirperm1 Supported: false
Execution Driver: native-0.2
Logging Driver: json-file
Kernel Version: 3.13.0-53-generic
Operating System: Ubuntu 14.04.2 LTS
CPUs: 12
Total Memory: 31.32 GiB
Name: k8s-is-fun.mtv.corp.google.com
ID: ADUV:GCYR:B3VJ:HMPO:LNPQ:KD5S:YKFQ:76VN:IANZ:7TFV:ZBF4:BYJO
WARNING: No swap limit support
</code></pre><p>kubectl:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl cluster-info
</span></span></code></pre></div><pre tabindex=0><code>Kubernetes master is running at https://203.0.113.141
KubeDNS is running at https://203.0.113.141/api/v1/namespaces/kube-system/services/kube-dns/proxy
kubernetes-dashboard is running at https://203.0.113.141/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy
Grafana is running at https://203.0.113.141/api/v1/namespaces/kube-system/services/monitoring-grafana/proxy
Heapster is running at https://203.0.113.141/api/v1/namespaces/kube-system/services/monitoring-heapster/proxy
InfluxDB is running at https://203.0.113.141/api/v1/namespaces/kube-system/services/monitoring-influxdb/proxy
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-8de6aceb8bf692c06cced446bac5bc92>6 - kubectl Usage Conventions</h1><p>Recommended usage conventions for <code>kubectl</code>.</p><h2 id=using-kubectl-in-reusable-scripts>Using <code>kubectl</code> in Reusable Scripts</h2><p>For a stable output in a script:</p><ul><li>Request one of the machine-oriented output forms, such as <code>-o name</code>, <code>-o json</code>, <code>-o yaml</code>, <code>-o go-template</code>, or <code>-o jsonpath</code>.</li><li>Fully-qualify the version. For example, <code>jobs.v1.batch/myjob</code>. This will ensure that kubectl does not use its default version that can change over time.</li><li>Don't rely on context, preferences, or other implicit states.</li></ul><h2 id=subresources>Subresources</h2><ul><li>You can use the <code>--subresource</code> alpha flag for kubectl commands like <code>get</code>, <code>patch</code>,
<code>edit</code> and <code>replace</code> to fetch and update subresources for all resources that
support them. Currently, only the <code>status</code> and <code>scale</code> subresources are supported.</li><li>The API contract against a subresource is identical to a full resource. While updating the
<code>status</code> subresource to a new value, keep in mind that the subresource could be potentially
reconciled by a controller to a different value.</li></ul><h2 id=best-practices>Best Practices</h2><h3 id=kubectl-run><code>kubectl run</code></h3><p>For <code>kubectl run</code> to satisfy infrastructure as code:</p><ul><li>Tag the image with a version-specific tag and don't move that tag to a new version. For example, use <code>:v1234</code>, <code>v1.2.3</code>, <code>r03062016-1-4</code>, rather than <code>:latest</code> (For more information, see <a href=/docs/concepts/configuration/overview/#container-images>Best Practices for Configuration</a>).</li><li>Check in the script for an image that is heavily parameterized.</li><li>Switch to configuration files checked into source control for features that are needed, but not expressible via <code>kubectl run</code> flags.</li></ul><p>You can use the <code>--dry-run=client</code> flag to preview the object that would be sent to your cluster, without really submitting it.</p><h3 id=kubectl-apply><code>kubectl apply</code></h3><ul><li>You can use <code>kubectl apply</code> to create or update resources. For more information about using kubectl apply to update resources, see <a href=https://kubectl.docs.kubernetes.io>Kubectl Book</a>.</li></ul></div></main></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/docs/home/>Home</a>
<a class=text-white href=/blog/>Blog</a>
<a class=text-white href=/training/>Training</a>
<a class=text-white href=/partners/>Partners</a>
<a class=text-white href=/community/>Community</a>
<a class=text-white href=/case-studies/>Case Studies</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a></small><br><small class=text-white>Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage class=light-text>Trademark Usage page</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>