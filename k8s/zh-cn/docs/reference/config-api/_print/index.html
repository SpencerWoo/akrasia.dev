<!doctype html><html lang=zh-cn class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=en href=https://kubernetes.io/docs/reference/config-api/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://kubernetes.io/zh-cn/docs/reference/config-api/><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>配置 API | Kubernetes</title><meta property="og:title" content="配置 API"><meta property="og:description" content="生产级别的容器编排系统"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.io/zh-cn/docs/reference/config-api/"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="配置 API"><meta itemprop=description content="生产级别的容器编排系统"><meta name=twitter:card content="summary"><meta name=twitter:title content="配置 API"><meta name=twitter:description content="生产级别的容器编排系统"><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content><meta property="og:description" content><meta name=twitter:description content><meta property="og:url" content="https://kubernetes.io/zh-cn/docs/reference/config-api/"><meta property="og:title" content="配置 API"><meta name=twitter:title content="配置 API"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/zh-cn/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/zh-cn/docs/>文档</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/blog/>Kubernetes 博客</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/training/>培训</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/partners/>合作伙伴</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/community/>社区</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/case-studies/>案例分析</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>版本列表</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh-cn/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/zh-cn/docs/reference/config-api/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/zh-cn/docs/reference/config-api/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/zh-cn/docs/reference/config-api/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/zh-cn/docs/reference/config-api/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/zh-cn/docs/reference/config-api/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文 (Chinese)</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/reference/config-api/>English</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/zh-cn/docs/reference/config-api/>返回本页常规视图</a>.</p></div><h1 class=title>配置 API</h1><ul><li>1: <a href=#pg-a63fdf5efd92a82e9c74e1e086e59c3e>Event Rate Limit Configuration (v1alpha1)</a></li><li>2: <a href=#pg-3359f37c1d47e9efe5555937171c3227>Image Policy API (v1alpha1)</a></li><li>3: <a href=#pg-8f61883225b6bed85530d1904e148392>kube-apiserver Audit 配置 (v1)</a></li><li>4: <a href=#pg-eaf7c149d8e3f45225002d76aa5af774>kube-apiserver 加密配置 (v1)</a></li><li>5: <a href=#pg-fd52840184e93a463355aa21a234f263>kube-apiserver 配置 (v1)</a></li><li>6: <a href=#pg-e9edd8df1106a991be062e37a9ef87b5>kube-apiserver 配置 (v1alpha1)</a></li><li>7: <a href=#pg-d8644f8d8b33ff33a31c8b55065eaf37>kube-proxy 配置 (v1alpha1)</a></li><li>8: <a href=#pg-456399fc52f4b81000285e4118542dfc>kube-scheduler 配置 (v1)</a></li><li>9: <a href=#pg-5cf379787cc3cd6f11182678610e6b5e>kube-scheduler 配置 (v1beta2)</a></li><li>10: <a href=#pg-2d4b71a4502f9ff672631862fe08b182>kube-scheduler 配置 (v1beta3)</a></li><li>11: <a href=#pg-81f4b8f1501e8345c99315695078a771>kubeadm 配置 (v1beta2)</a></li><li>12: <a href=#pg-675226e13e76ef189fe0156f7e52353a>kubeadm 配置 (v1beta3)</a></li><li>13: <a href=#pg-ff8df22fdbe264eadb88465e7f7aa54a>Kubelet CredentialProvider (v1alpha1)</a></li><li>14: <a href=#pg-68959ec750ddda035c500cdc0fddfcfa>Kubelet CredentialProvider (v1beta1)</a></li><li>15: <a href=#pg-f0a175531432662368ed2e01f663b35f>Kubelet 配置 (v1alpha1)</a></li><li>16: <a href=#pg-aaa2b8b78fe84a05914c155652d10956>Kubelet 配置 (v1beta1)</a></li><li>17: <a href=#pg-74f43b2a33c21414f1ed8c359b37d326>WebhookAdmission 配置 (v1)</a></li><li>18: <a href=#pg-eee842643d4d2c372827920430a15614>客户端身份认证（Client Authentication） (v1)</a></li><li>19: <a href=#pg-2896357fe4f62fe85522254410e0be7d>客户端身份认证（Client Authentication）(v1beta1)</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-a63fdf5efd92a82e9c74e1e086e59c3e>1 - Event Rate Limit Configuration (v1alpha1)</h1><h2 id=resource-types>资源类型</h2><ul><li><a href=#eventratelimit-admission-k8s-io-v1alpha1-Configuration>Configuration</a></li></ul><h2 id=eventratelimit-admission-k8s-io-v1alpha1-Configuration><code>Configuration</code></h2><p>Configuration 为 EventRateLimit 准入控制器提供配置数据。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>eventratelimit.admission.k8s.io/v1alpha1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>Configuration</code></td></tr><tr><td><code>limits</code> <b>[Required]</b><br><a href=#eventratelimit-admission-k8s-io-v1alpha1-Limit><code>[]Limit</code></a></td><td><p>limits 是为所接收到的事件查询设置的限制。可以针对服务器端接收到的事件设置限制，
按逐个名字空间、逐个用户、或逐个来源+对象组合的方式均可以。
至少需要设置一种限制。</p></td></tr></tbody></table><h2 id=eventratelimit-admission-k8s-io-v1alpha1-Limit><code>Limit</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#eventratelimit-admission-k8s-io-v1alpha1-Configuration>Configuration</a></li></ul><p>Limit 是为特定限制类型提供的配置数据。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>type</code> <b>[必需]</b><br><a href=#eventratelimit-admission-k8s-io-v1alpha1-LimitType><code>LimitType</code></a></td><td><p>type 是此配置所适用的限制的类型。</p></td></tr><tr><td><code>qps</code> <b>[必需]</b><br><code>int32</code></td><td><p>qps 是针对此类型的限制每秒钟所允许的事件查询次数。qps 和 burst
字段一起用来确定是否特定的事件查询会被接受。qps 确定的是当超出查询数量的
burst 值时可以接受的查询个数。</p></td></tr><tr><td><code>burst</code> <b>[必需]</b><br><code>int32</code></td><td><p>burst 是针对此类型限制的突发事件查询数量。qps 和 burst 字段一起使用可用来确定特定的事件查询是否被接受。
burst 字段确定针对特定的事件桶（bucket）可以接受的规模上限。
例如，如果 burst 是 10，qps 是 3，那么准入控制器会在接收 10 个查询之后阻塞所有查询。
每秒钟可以额外允许 3 个查询。如果这一限额未被用尽，则剩余的限额会被顺延到下一秒钟，
直到再次达到 10 个限额的上限。</p></td></tr><tr><td><code>cacheSize</code><br><code>int32</code></td><td><p>cacheSize 是此类型限制的 LRU 缓存的规模。如果某个事件桶（bucket）被从缓存中剔除，
该事件桶所对应的限额也会被重置。如果后来再次收到针对某个已被剔除的事件桶的查询，
则该事件桶会重新以干净的状态进入缓存，因而获得全量的突发查询配额。</p><p>默认的缓存大小是 4096。</p><p>如果 limitType 是 “server”，则 cacheSize 设置会被忽略。</p></td></tr></tbody></table><h2 id=eventratelimit-admission-k8s-io-v1alpha1-LimitType><code>LimitType</code></h2><p>（<code>string</code> 类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#eventratelimit-admission-k8s-io-v1alpha1-Limit>Limit</a></li></ul><p>LimitType 是限制类型（例如：per-namespace）。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-3359f37c1d47e9efe5555937171c3227>2 - Image Policy API (v1alpha1)</h1><h2 id=resource-types>资源类型</h2><ul><li><a href=#imagepolicy-k8s-io-v1alpha1-ImageReview>ImageReview</a></li></ul><h2 id=imagepolicy-k8s-io-v1alpha1-ImageReview><code>ImageReview</code></h2><p>ImageReview 检查某个 Pod 中是否可以使用某些镜像。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>imagepolicy.k8s.io/v1alpha1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>ImageReview</code></td></tr><tr><td><code>metadata</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#objectmeta-v1-meta><code>meta/v1.ObjectMeta</code></a></td><td><p>标准的对象元数据。更多信息：https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata</p>参阅 Kubernetes API 文档了解 <code>metadata</code> 字段的内容。</td></tr><tr><td><code>spec</code> <b>[必需]</b><br><a href=#imagepolicy-k8s-io-v1alpha1-ImageReviewSpec><code>ImageReviewSpec</code></a></td><td><p>spec 中包含与被评估的 Pod 相关的信息。</p></td></tr><tr><td><code>status</code><br><a href=#imagepolicy-k8s-io-v1alpha1-ImageReviewStatus><code>ImageReviewStatus</code></a></td><td><p>status 由后台负责填充，用来标明 Pod 是否会被准入。</p></td></tr></tbody></table><h2 id=imagepolicy-k8s-io-v1alpha1-ImageReviewContainerSpec><code>ImageReviewContainerSpec</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#imagepolicy-k8s-io-v1alpha1-ImageReviewSpec>ImageReviewSpec</a></li></ul><p>ImageReviewContainerSpec 是对 Pod 创建请求中的某容器的描述。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>image</code><br><code>string</code></td><td><p>此字段的格式可以是 image:tag 或 image@SHA:012345679abcdef。</p></td></tr></tbody></table><h2 id=imagepolicy-k8s-io-v1alpha1-ImageReviewSpec><code>ImageReviewSpec</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#imagepolicy-k8s-io-v1alpha1-ImageReview>ImageReview</a></li></ul><p>ImageReviewSpec 是对 Pod 创建请求的描述。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>containers</code><br><a href=#imagepolicy-k8s-io-v1alpha1-ImageReviewContainerSpec><code>[]ImageReviewContainerSpec</code></a></td><td><p>containers 是一个列表，其中包含正被创建的 Pod 中各容器的信息子集。</p></td></tr><tr><td><code>annotations</code><br><code>map[string]string</code></td><td><p>annotations 是一个键值对列表，内容抽取自 Pod 的注解（annotations）。
其中仅包含与模式 <code>*.image-policy.k8s.io/*</code> 匹配的键。
每个 Webhook 后端要负责决定如何解释这些注解（如果有的话）。</p></td></tr><tr><td><code>namespace</code><br><code>string</code></td><td><p>namespace 是 Pod 创建所针对的名字空间。</p></td></tr></tbody></table><h2 id=imagepolicy-k8s-io-v1alpha1-ImageReviewStatus><code>ImageReviewStatus</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#imagepolicy-k8s-io-v1alpha1-ImageReview>ImageReview</a></li></ul><p>ImageReviewStatus 是针对 Pod 创建请求所作的评估结果。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>allowed</code> <b>[必需]</b><br><code>bool</code></td><td><p>allowed 表明所有镜像都可以被运行。</p></td></tr><tr><td><code>reason</code><br><code>string</code></td><td><p>若 <code>allowed</code> 不是 false，<code>reason</code> 应该为空。
否则其中应包含出错信息的简短描述。Kubernetes 在向用户展示此信息时可能会截断过长的错误文字。</p></td></tr><tr><td><code>auditAnnotations</code><br><code>map[string]string</code></td><td><p>auditAnnotations 会被通过 <code>AddAnnotation</code> 添加到准入控制器的 attributes 对象上。
注解键应该不含前缀，换言之，准入控制器会添加合适的前缀。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-8f61883225b6bed85530d1904e148392>3 - kube-apiserver Audit 配置 (v1)</h1><h2 id=resource-types>资源类型</h2><ul><li><a href=#audit-k8s-io-v1-Event>Event</a></li><li><a href=#audit-k8s-io-v1-EventList>EventList</a></li><li><a href=#audit-k8s-io-v1-Policy>Policy</a></li><li><a href=#audit-k8s-io-v1-PolicyList>PolicyList</a></li></ul><h2 id=audit-k8s-io-v1-Event><code>Event</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#audit-k8s-io-v1-EventList>EventList</a></li></ul><p>Event 结构包含可出现在 API 审计日志中的所有信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>audit.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>Event</code></td></tr><tr><td><code>level</code> <b>[必需]</b><br><a href=#audit-k8s-io-v1-Level><code>Level</code></a></td><td><p>生成事件所对应的审计级别。</p></td></tr><tr><td><code>auditID</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/types#UID><code>k8s.io/apimachinery/pkg/types.UID</code></a></td><td><p>为每个请求所生成的唯一审计 ID。</p></td></tr><tr><td><code>stage</code> <b>[必需]</b><br><a href=#audit-k8s-io-v1-Stage><code>Stage</code></a></td><td><p>生成此事件时请求的处理阶段。</p></td></tr><tr><td><code>requestURI</code> <b>[必需]</b><br><code>string</code></td><td><p>requestURI 是客户端发送到服务器端的请求 URI。</p></td></tr><tr><td><code>verb</code> <b>[必需]</b><br><code>string</code></td><td><p>verb 是与请求对应的 Kubernetes 动词。对于非资源请求，此字段为 HTTP 方法的小写形式。</p></td></tr><tr><td><code>user</code> <b>[必需]</b><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#userinfo-v1-authentication><code>authentication/v1.UserInfo</code></a></td><td><p>关于认证用户的信息。</p></td></tr><tr><td><code>impersonatedUser</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#userinfo-v1-authentication><code>authentication/v1.UserInfo</code></a></td><td><p>关于所伪装（impersonated）的用户的信息。</p></td></tr><tr><td><code>sourceIPs</code><br><code>[]string</code></td><td><p>发起请求和中间代理的源 IP 地址。
源 IP 从以下（按顺序）列出：</p><ol><li>X-Forwarded-For 请求标头 IP</li><li>X-Real-Ip 标头，如果 X-Forwarded-For 列表中不存在</li><li>连接的远程地址，如果它无法与此处列表中的最后一个 IP（X-Forwarded-For 或 X-Real-Ip）匹配。
注意：除最后一个 IP 外的所有 IP 均可由客户端任意设置。</li></ol></td></tr><tr><td><code>userAgent</code><br><code>string</code></td><td><p>userAgent 中记录客户端所报告的用户代理（User Agent）字符串。
注意 userAgent 信息是由客户端提供的，一定不要信任。</p></td></tr><tr><td><code>objectRef</code><br><a href=#audit-k8s-io-v1-ObjectReference><code>ObjectReference</code></a></td><td><p>此请求所指向的对象引用。对于 List 类型的请求或者非资源请求，此字段可忽略。</p></td></tr><tr><td><code>responseStatus</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#status-v1-meta><code>meta/v1.Status</code></a></td><td><p>响应的状态，当 responseObject 不是 Status 类型时被赋值。
对于成功的请求，此字段仅包含 code 和 statusSuccess。
对于非 Status 类型的错误响应，此字段会被自动赋值为出错信息。</p></td></tr><tr><td><code>requestObject</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/runtime#Unknown><code>k8s.io/apimachinery/pkg/runtime.Unknown</code></a></td><td><p>来自请求的 API 对象，以 JSON 格式呈现。requestObject 在请求中按原样记录
（可能会采用 JSON 重新编码），之后会进入版本转换、默认值填充、准入控制以及
配置信息合并等阶段。此对象为外部版本化的对象类型，甚至其自身可能并不是一个
合法的对象。对于非资源请求，此字段被忽略。
只有当审计级别为 Request 或更高的时候才会记录。</p></td></tr><tr><td><code>responseObject</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/runtime#Unknown><code>k8s.io/apimachinery/pkg/runtime.Unknown</code></a></td><td><p>响应中包含的 API 对象，以 JSON 格式呈现。requestObject 是在被转换为外部类型
并序列化为 JSON 格式之后才被记录的。
对于非资源请求，此字段会被忽略。
只有审计级别为 Response 时才会记录。</p></td></tr><tr><td><code>requestReceivedTimestamp</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#microtime-v1-meta><code>meta/v1.MicroTime</code></a></td><td><p>请求到达 API 服务器时的时间。</p></td></tr><tr><td><code>stageTimestamp</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#microtime-v1-meta><code>meta/v1.MicroTime</code></a></td><td><p>请求到达当前审计阶段时的时间。</p></td></tr><tr><td><code>annotations</code><br><code>map[string]string</code></td><td><p>annotations 是一个无结构的键-值映射，其中保存的是一个审计事件。
该事件可以由请求处理链路上的插件来设置，包括身份认证插件、鉴权插件以及
准入控制插件等。
注意这些注解是针对审计事件本身的，与所提交的对象中的 metadata.annotations
之间不存在对应关系。
映射中的键名应该唯一性地标识生成该事件的组件，从而避免名字上的冲突
（例如 podsecuritypolicy.admission.k8s.io/policy）。
映射中的键值应该比较简洁。
当审计级别为 Metadata 时会包含 annotations 字段。</p></td></tr></tbody></table><h2 id=audit-k8s-io-v1-EventList><code>EventList</code></h2><p>EventList 是审计事件（Event）的列表。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>audit.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>EventList</code></td></tr><tr><td><code>metadata</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#listmeta-v1-meta><code>meta/v1.ListMeta</code></a></td><td><span class=text-muted>列表结构元数据</span></td></tr><tr><td><code>items</code> <b>[必需]</b><br><a href=#audit-k8s-io-v1-Event><code>[]Event</code></a></td><td><span class=text-muted>事件对象列表</span></td></tr></tbody></table><h2 id=audit-k8s-io-v1-Policy><code>Policy</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#audit-k8s-io-v1-PolicyList>PolicyList</a></li></ul><p>Policy 定义的是审计日志的配置以及不同类型请求的日志记录规则。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>audit.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>Policy</code></td></tr><tr><td><code>metadata</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#objectmeta-v1-meta><code>meta/v1.ObjectMeta</code></a></td><td><p>包含 <code>metadata</code> 字段是为了便于与 API 基础设施之间实现互操作。</p>参考 Kubernetes API 文档了解 <code>metadata</code> 字段的详细信息。</td></tr><tr><td><code>rules</code> <b>[必需]</b><br><a href=#audit-k8s-io-v1-PolicyRule><code>[]PolicyRule</code></a></td><td><p>字段 rules 设置请求要被记录的审计级别（level）。
每个请求可能会与多条规则相匹配；发生这种状况时遵从第一条匹配规则。
默认的审计级别是 None，不过可以在列表的末尾使用一条全抓（catch-all）规则
重载其设置。
列表中的规则（PolicyRule）是严格有序的。</p></td></tr><tr><td><code>omitStages</code><br><a href=#audit-k8s-io-v1-Stage><code>[]Stage</code></a></td><td><p>字段 omitStages 是一个阶段（Stage）列表，其中包含无须生成事件的阶段。
注意这一选项也可以通过每条规则来设置。
审计组件最终会忽略出现在 omitStages 中阶段，也会忽略规则中的阶段。</p></td></tr><tr><td><code>omitManagedFields</code><br><code>bool</code></td><td><p>omitManagedFields 标明将请求和响应主体写入 API 审计日志时，是否省略其托管字段。
此字段值用作全局默认值 - 'true' 值将省略托管字段，否则托管字段将包含在 API 审计日志中。
请注意，也可以按规则指定此值，在这种情况下，规则中指定的值将覆盖全局默认值。</p></td></tr></tbody></table><h2 id=audit-k8s-io-v1-PolicyList><code>PolicyList</code></h2><p>PolicyList 是由审计策略（Policy）组成的列表。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>audit.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>PolicyList</code></td></tr><tr><td><code>metadata</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#listmeta-v1-meta><code>meta/v1.ListMeta</code></a></td><td><span class=text-muted>列表结构元数据。</span></td></tr><tr><td><code>items</code> <b>[必需]</b><br><a href=#audit-k8s-io-v1-Policy><code>[]Policy</code></a></td><td><span class=text-muted>策略（Policy）对象列表。</span></td></tr></tbody></table><h2 id=audit-k8s-io-v1-GroupResources><code>GroupResources</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#audit-k8s-io-v1-PolicyRule>PolicyRule</a></li></ul><p>GroupResources 代表的是某 API 组中的资源类别。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>group</code><br><code>string</code></td><td>字段 group 给出包含资源的 API 组的名称。
空字符串代表 <code>core</code> API 组。</td></tr><tr><td><code>resources</code><br><code>[]string</code></td><td><p>字段 resources 是此规则所适用的资源的列表。</p><br><p>例如：<br>'pods' 匹配 Pods；<br>'pods/log' 匹配 Pods 的 log 子资源；<br>'&#8727;' 匹配所有资源及其子资源；<br>'pods/&#8727;' 匹配 Pods 的所有子资源；<br>'&#8727;/scale' 匹配所有的 scale 子资源。<br><br></p><p>如果存在通配符，则合法性检查逻辑会确保 resources 中的条目不会彼此重叠。</p><br><p>空的列表意味着规则适用于该 API 组中的所有资源及其子资源。</p></td></tr><tr><td><code>resourceNames</code><br><code>[]string</code></td><td><p>字段 resourceNames 是策略将匹配的资源实例名称列表。
使用此字段时，<code>resources</code> 必须指定。
空的 resourceNames 列表意味着资源的所有实例都会匹配到此策略。</p></td></tr></tbody></table><h2 id=audit-k8s-io-v1-Level><code>Level</code></h2><p><code>string</code> 数据类型的别名。</p><p><strong>出现在：</strong></p><ul><li><a href=#audit-k8s-io-v1-Event>Event</a></li><li><a href=#audit-k8s-io-v1-PolicyRule>PolicyRule</a></li></ul><p>Level 定义的是审计过程中在日志内记录的信息量。</p><h2 id=audit-k8s-io-v1-ObjectReference><code>ObjectReference</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#audit-k8s-io-v1-Event>Event</a></li></ul><p>ObjectReference 包含的是用来检查或修改所引用对象时将需要的全部信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>resource</code><br><code>string</code></td><td><span class=text-muted>资源类别。</span></td></tr><tr><td><code>namespace</code><br><code>string</code></td><td><span class=text-muted>资源对象所在名字空间。</span></td></tr><tr><td><code>name</code><br><code>string</code></td><td><span class=text-muted>资源对象名称。</span></td></tr><tr><td><code>uid</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/types#UID><code>k8s.io/apimachinery/pkg/types.UID</code></a></td><td><span class=text-muted>资源对象的唯一标识（UID）。</span></td></tr><tr><td><code>apiGroup</code><br><code>string</code></td><td><p>字段 apiGroup 给出包含所引用对象的 API 组的名称。
空字符串代表 <code>core</code> API 组。</p></td></tr><tr><td><code>apiVersion</code><br><code>string</code></td><td><p>字段 apiVersion 是包含所引用对象的 API 组的版本。</p></td></tr><tr><td><code>resourceVersion</code><br><code>string</code></td><td><span class=text-muted>资源对象自身的版本值。</span></td></tr><tr><td><code>subresource</code><br><code>string</code></td><td><span class=text-muted>子资源的类别。</span></td></tr></tbody></table><h2 id=audit-k8s-io-v1-PolicyRule><code>PolicyRule</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#audit-k8s-io-v1-Policy>Policy</a></li></ul><p>PolicyRule 包含一个映射，基于元数据将请求映射到某审计级别。
请求必须与每个字段所定义的规则都匹配（即 rules 的交集）才被视为匹配。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>level</code> <b>[必需]</b><br><a href=#audit-k8s-io-v1-Level><code>Level</code></a></td><td><p>与此规则匹配的请求所对应的日志记录级别（Level）。</p></td></tr><tr><td><code>users</code><br><code>[]string</code></td><td><p>根据身份认证所确定的用户名的列表，给出此规则所适用的用户。
空列表意味着适用于所有用户。</p></td></tr><tr><td><code>userGroups</code><br><code>[]string</code></td><td><p>此规则所适用的用户组的列表。如果用户是所列用户组中任一用户组的成员，则视为匹配。
空列表意味着适用于所有用户组。</p></td></tr><tr><td><code>verbs</code><br><code>[]string</code></td><td><p>此规则所适用的动词（verb）列表。
空列表意味着适用于所有动词。</p></td></tr><tr><td><code>resources</code><br><a href=#audit-k8s-io-v1-GroupResources><code>[]GroupResources</code></a></td><td><p>此规则所适用的资源类别列表。
空列表意味着适用于 API 组中的所有资源类别。</p></td></tr><tr><td><code>namespaces</code><br><code>[]string</code></td><td><p>此规则所适用的名字空间列表。
空字符串（""）意味着适用于非名字空间作用域的资源。
空列表意味着适用于所有名字空间。</p></td></tr><tr><td><code>nonResourceURLs</code><br><code>[]string</code></td><td><p>字段 nonResourceURLs 给出一组需要被审计的 URL 路径。
允许使用 &#8727;，但只能作为路径中最后一个完整分段。<br>例如：<br>"/metrics" - 记录对 API 服务器度量值（metrics）的所有请求；<br>"/healthz&#8727;" - 记录所有健康检查请求。</p></td></tr><tr><td><code>omitStages</code><br><a href=#audit-k8s-io-v1-Stage><code>[]Stage</code></a></td><td><p>字段 omitStages 是一个阶段（Stage）列表，针对所列的阶段服务器不会生成审计事件。
注意这一选项也可以在策略（Policy）级别指定。服务器审计组件会忽略
omitStages 中给出的阶段，也会忽略策略中给出的阶段。
空列表意味着不对阶段作任何限制。</p></td></tr><tr><td><code>omitManagedFields</code><br><code>bool</code></td><td><p>omitManagedFields 决定将请求和响应主体写入 API 审计日志时，是否省略其托管字段。</p><ul><li>值为 'true' 将从 API 审计日志中删除托管字段</li><li>值为 'false' 表示托管字段应包含在 API 审计日志中
请注意，如果指定此规则中的值将覆盖全局默认值。
如果未指定，则使用 policy.omitManagedFields 中指定的全局默认值。</li></ul></td></tr></tbody></table><h2 id=audit-k8s-io-v1-Stage><code>Stage</code></h2><p><code>string</code> 数据类型的别名。</p><p><strong>出现在：</strong></p><ul><li><a href=#audit-k8s-io-v1-Event>Event</a></li><li><a href=#audit-k8s-io-v1-Policy>Policy</a></li><li><a href=#audit-k8s-io-v1-PolicyRule>PolicyRule</a></li></ul><p>Stage 定义在请求处理过程中可以生成审计事件的阶段。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-eaf7c149d8e3f45225002d76aa5af774>4 - kube-apiserver 加密配置 (v1)</h1><p>包 v1 是 API 的 v1 版本。</p><h2 id=资源类型>资源类型</h2><ul><li><a href=#apiserver-config-k8s-io-v1-EncryptionConfiguration>EncryptionConfiguration</a></li></ul><h2 id=apiserver-config-k8s-io-v1-EncryptionConfiguration><code>EncryptionConfiguration</code></h2><p>EncryptionConfiguration 为加密驱动保存完整的配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>apiserver.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>EncryptionConfiguration</code></td></tr><tr><td><code>resources</code> <b>[必需]</b><br><a href=#apiserver-config-k8s-io-v1-ResourceConfiguration><code>[]ResourceConfiguration</code></a></td><td><p><code>resources</code> 是一个包含资源及其对应的加密驱动的列表。</p></td></tr></tbody></table><h2 id=apiserver-config-k8s-io-v1-AESConfiguration><code>AESConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-config-k8s-io-v1-ProviderConfiguration>ProviderConfiguration</a></li></ul><p>AESConfiguration 包含 AES 转换器的 API 配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>keys</code> <b>[必需]</b><br><a href=#apiserver-config-k8s-io-v1-Key><code>[]Key</code></a></td><td><p><code>keys</code> 是一组用于创建 AES 转换器的秘钥。
对于 AES-CBC，每个秘钥必须是 32 字节长；对于 AES-GCM，每个秘钥可以是 16、24、32 字节长。</p></td></tr></tbody></table><h2 id=apiserver-config-k8s-io-v1-IdentityConfiguration><code>IdentityConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-config-k8s-io-v1-ProviderConfiguration>ProviderConfiguration</a></li></ul><p>IdentityConfiguration 是一个空的结构，用来支持在驱动配置中支持标识转换器。</p><h2 id=apiserver-config-k8s-io-v1-KMSConfiguration><code>KMSConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-config-k8s-io-v1-ProviderConfiguration>ProviderConfiguration</a></li></ul><p>KMSConfiguration 包含基于 KMS 的封套转换器的名称、缓存大小以及配置文件路径信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br><code>string</code></td><td><p>KeyManagementService 的 apiVersion</p></td></tr><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 是要使用的 KMS 插件名称。</p></td></tr><tr><td><code>cachesize</code><br><code>int32</code></td><td><p><code>cachesize</code> 是可在内存中缓存的 Secret 数量上限。默认值是 1000。将此字段设置为负值会禁用缓存。</p></td></tr><tr><td><code>endpoint</code> <b>[必需]</b><br><code>string</code></td><td><p><code>endpoint</code> 是 gRPC 服务器的监听地址，例如 "unix:///var/run/kms-provider.sock"。</p></td></tr><tr><td><code>timeout</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p>对 KMS 插件执行 gRPC 调用的超时时长（例如，'5s'）。默认值为 3 秒。</p></td></tr></tbody></table><h2 id=apiserver-config-k8s-io-v1-Key><code>Key</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-config-k8s-io-v1-AESConfiguration>AESConfiguration</a></li><li><a href=#apiserver-config-k8s-io-v1-SecretboxConfiguration>SecretboxConfiguration</a></li></ul><p>Key 中包含为某转换器所提供的键名和对应的私密数据。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 是在向磁盘中存储数据时使用的键名。</p></td></tr><tr><td><code>secret</code> <b>[必需]</b><br><code>string</code></td><td><p><code>secret</code> 是实际的秘钥，用 base64 编码。</p></td></tr></tbody></table><h2 id=apiserver-config-k8s-io-v1-ProviderConfiguration><code>ProviderConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-config-k8s-io-v1-ResourceConfiguration>ResourceConfiguration</a></li></ul><p>ProviderConfiguration 为加密驱动存储配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>aesgcm</code> <b>[必需]</b><br><a href=#apiserver-config-k8s-io-v1-AESConfiguration><code>AESConfiguration</code></a></td><td><p><code>aesgcm</code> 是用于 AES-GCM 转换器的配置。</p></td></tr><tr><td><code>aescbc</code> <b>[必需]</b><br><a href=#apiserver-config-k8s-io-v1-AESConfiguration><code>AESConfiguration</code></a></td><td><p><code>aescbc</code> 是用于 AES-CBC 转换器的配置。</p></td></tr><tr><td><code>secretbox</code> <b>[必需]</b><br><a href=#apiserver-config-k8s-io-v1-SecretboxConfiguration><code>SecretboxConfiguration</code></a></td><td><p><code>secretbox</code> 是用于基于 Secretbox 的转换器的配置。</p></td></tr><tr><td><code>identity</code> <b>[必需]</b><br><a href=#apiserver-config-k8s-io-v1-IdentityConfiguration><code>IdentityConfiguration</code></a></td><td><p><code>identity</code> 是用于标识转换器的配置（空）。</p></td></tr><tr><td><code>kms</code> <b>[必需]</b><br><a href=#apiserver-config-k8s-io-v1-KMSConfiguration><code>KMSConfiguration</code></a></td><td><p><code>kms</code> 中包含用于基于 KMS 的封套转换器的名称、缓存大小以及配置文件路径信息。</p></td></tr></tbody></table><h2 id=apiserver-config-k8s-io-v1-ResourceConfiguration><code>ResourceConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-config-k8s-io-v1-EncryptionConfiguration>EncryptionConfiguration</a></li></ul><p>ResourceConfiguration 中保存资源配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>resources</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>resources</code> 是必需要加密的 Kubernetes 资源的列表。</p></td></tr><tr><td><code>providers</code> <b>[必需]</b><br><a href=#apiserver-config-k8s-io-v1-ProviderConfiguration><code>[]ProviderConfiguration</code></a></td><td><p><code>providers</code> 是一个转换器列表，用来将资源写入到磁盘或从磁盘上读出。
例如：'aesgcm'、'aescbc'、'secretbox'、'identity'。</p></td></tr></tbody></table><h2 id=apiserver-config-k8s-io-v1-SecretboxConfiguration><code>SecretboxConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-config-k8s-io-v1-ProviderConfiguration>ProviderConfiguration</a></li></ul><p>SecretboxConfiguration 包含用于某 Secretbox 转换器的 API 配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>keys</code> <b>[必需]</b><br><a href=#apiserver-config-k8s-io-v1-Key><code>[]Key</code></a></td><td><p><code>keys</code> 是一个秘钥列表，用来创建 Secretbox 转换器。每个秘钥必须是 32 字节长。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-fd52840184e93a463355aa21a234f263>5 - kube-apiserver 配置 (v1)</h1><p>v1 包中包含 API 的 v1 版本。</p><h2 id=资源类型>资源类型</h2><ul><li><a href=#apiserver-config-k8s-io-v1-AdmissionConfiguration>AdmissionConfiguration</a></li></ul><h2 id=apiserver-config-k8s-io-v1-AdmissionConfiguration><code>AdmissionConfiguration</code></h2><p>AdmissionConfiguration 为准入控制器提供版本化的配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>apiserver.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>AdmissionConfiguration</code></td></tr><tr><td><code>plugins</code><br><a href=#apiserver-config-k8s-io-v1-AdmissionPluginConfiguration><code>[]AdmissionPluginConfiguration</code></a></td><td><p><code>plugins</code> 字段允许为每个准入控制插件设置配置选项。</p></td></tr></tbody></table><h2 id=apiserver-config-k8s-io-v1-AdmissionPluginConfiguration><code>AdmissionPluginConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-config-k8s-io-v1-AdmissionConfiguration>AdmissionConfiguration</a></li></ul><p>AdmissionPluginConfiguration 为某个插件提供配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 是准入控制器的名称。它必须与所注册的准入插件名称匹配。</p></td></tr><tr><td><code>path</code><br><code>string</code></td><td><p><code>path</code> 是指向包含插件配置信息的配置文件的路径。</p></td></tr><tr><td><code>configuration</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/runtime#Unknown><code>k8s.io/apimachinery/pkg/runtime.Unknown</code></a></td><td><p><code>configuration</code> 是一个内嵌的配置对象，用来保存插件的配置信息。
如果存在，则使用这里的配置信息而不是指向配置文件的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e9edd8df1106a991be062e37a9ef87b5>6 - kube-apiserver 配置 (v1alpha1)</h1><p>包 v1alpha1 包含 API 的 v1alpha1 版本。</p><h2 id=资源类型>资源类型</h2><ul><li><a href=#apiserver-k8s-io-v1alpha1-AdmissionConfiguration>AdmissionConfiguration</a></li><li><a href=#apiserver-k8s-io-v1alpha1-EgressSelectorConfiguration>EgressSelectorConfiguration</a></li><li><a href=#apiserver-k8s-io-v1alpha1-TracingConfiguration>TracingConfiguration</a></li></ul><h2 id=apiserver-k8s-io-v1alpha1-AdmissionConfiguration><code>AdmissionConfiguration</code></h2><p>AdmissionConfiguration 为准入控制器提供版本化的配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>apiserver.k8s.io/v1alpha1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>AdmissionConfiguration</code></td></tr><tr><td><code>plugins</code><br><a href=#apiserver-k8s-io-v1alpha1-AdmissionPluginConfiguration><code>[]AdmissionPluginConfiguration</code></a></td><td><p><code>plugins</code> 允许用户为每个准入控制插件指定设置。</p></td></tr></tbody></table><h2 id=apiserver-k8s-io-v1alpha1-EgressSelectorConfiguration><code>EgressSelectorConfiguration</code></h2><p>EgressSelectorConfiguration 为 Egress 选择算符客户端提供版本化的配置选项。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>apiserver.k8s.io/v1alpha1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>EgressSelectorConfiguration</code></td></tr><tr><td><code>egressSelections</code> <b>[必需]</b><br><a href=#apiserver-k8s-io-v1alpha1-EgressSelection><code>[]EgressSelection</code></a></td><td><p><code>connectionServices</code> 包含一组 Egress 选择算符客户端配置选项。</p></td></tr></tbody></table><h2 id=apiserver-k8s-io-v1alpha1-TracingConfiguration><code>TracingConfiguration</code></h2><p>TracingConfiguration 为跟踪客户端提供版本化的配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>apiserver.k8s.io/v1alpha1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>TracingConfiguration</code></td></tr><tr><td><code>endpoint</code><br><code>string</code></td><td><p>在控制面节点上运行的采集器的端点。
API 服务器在向采集器发送数据时将 <code>egressType</code> 设置为 ControlPlane。
这里的语法定义在 https://github.com/grpc/grpc/blob/master/doc/naming.md。
默认值为 otlpgrpc 的默认值，即 <code>localhost:4317</code>
这一连接是不安全的，且不支持 TLS。</p></td></tr><tr><td><code>samplingRatePerMillion</code><br><code>int32</code></td><td><p><code>samplingRatePerMillion</code> 设置每一百万个数据点中要采样的样本个数。默认值为 0。</p></td></tr></tbody></table><h2 id=apiserver-k8s-io-v1alpha1-AdmissionPluginConfiguration><code>AdmissionPluginConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-k8s-io-v1alpha1-AdmissionConfiguration>AdmissionConfiguration</a></li></ul><p>AdmissionPluginConfiguration 为某个插件提供配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 是准入控制器的名称。此名称必须与所注册的准入插件名称匹配。</p></td></tr><tr><td><code>path</code><br><code>string</code></td><td><p><code>path</code> 为指向包含插件配置数据的配置文件的路径。</p></td></tr><tr><td><code>configuration</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/runtime#Unknown><code>k8s.io/apimachinery/pkg/runtime.Unknown</code></a></td><td><p><code>configuration</code> 是一个嵌入的配置对象，用作插件的配置数据来源。
如果设置了此字段，则使用此字段而不是指向配置文件的路径。</p></td></tr></tbody></table><h2 id=apiserver-k8s-io-v1alpha1-Connection><code>Connection</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-k8s-io-v1alpha1-EgressSelection>EgressSelection</a></li></ul><p>Connection 提供某个 Egress 选择客户端的配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>proxyProtocol</code> <b>[必需]</b><br><a href=#apiserver-k8s-io-v1alpha1-ProtocolType><code>ProtocolType</code></a></td><td><p><code>proxyProtocol</code> 是客户端连接到 konnectivity 服务器所使用的协议。</p></td></tr><tr><td><code>transport</code><br><a href=#apiserver-k8s-io-v1alpha1-Transport><code>Transport</code></a></td><td><p><code>transport</code> 定义的是传输层的配置。我们使用这个配置来联系 konnectivity 服务器。
当 <code>proxyProtocol</code> 是 HTTPConnect 或 GRPC 时需要设置此字段。</p></td></tr></tbody></table><h2 id=apiserver-k8s-io-v1alpha1-EgressSelection><code>EgressSelection</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-k8s-io-v1alpha1-EgressSelectorConfiguration>EgressSelectorConfiguration</a></li></ul><p>EgressSelection 为某个 Egress 选择客户端提供配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 是 Egress 选择器的名称。当前支持的取值有 "controlplane"，
"master"，"etcd" 和 "cluster"。
"master" Egress 选择器已被弃用，推荐使用 "controlplane"。</p></td></tr><tr><td><code>connection</code> <b>[必需]</b><br><a href=#apiserver-k8s-io-v1alpha1-Connection><code>Connection</code></a></td><td><p><code>connection</code> 是用来配置 Egress 选择器的配置信息。</p></td></tr></tbody></table><h2 id=apiserver-k8s-io-v1alpha1-ProtocolType><code>ProtocolType</code></h2><p>（<code>string</code> 类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-k8s-io-v1alpha1-Connection>Connection</a></li></ul><p>ProtocolType 是 <code>connection.protocolType</code> 的合法值集合。</p><h2 id=apiserver-k8s-io-v1alpha1-TCPTransport><code>TCPTransport</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-k8s-io-v1alpha1-Transport>Transport</a></li></ul><p>TCPTransport 提供使用 TCP 连接 konnectivity 服务器时需要的信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>url</code> <b>[必需]</b><br><code>string</code></td><td><p><code>url</code> 是要连接的 konnectivity 服务器的位置。例如 "https://127.0.0.1:8131"。</p></td></tr><tr><td><code>tlsConfig</code><br><a href=#apiserver-k8s-io-v1alpha1-TLSConfig><code>TLSConfig</code></a></td><td><p><code>tlsConfig</code> 是使用 TLS 来连接 konnectivity 服务器时需要的信息。</p></td></tr></tbody></table><h2 id=apiserver-k8s-io-v1alpha1-TLSConfig><code>TLSConfig</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-k8s-io-v1alpha1-TCPTransport>TCPTransport</a></li></ul><p>TLSConfig 为连接 konnectivity 服务器提供身份认证信息。仅用于 TCPTransport。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>caBundle</code><br><code>string</code></td><td><p><code>caBundle</code> 是指向用来确定与 konnectivity 服务器间信任欢喜的 CA 证书包的文件位置。
当 <code>tcpTransport.url</code> 前缀为 "http://" 时必须不设置，或者设置为空。
如果 <code>tcpTransport.url</code> 前缀为 "https://" 并且此字段未设置，则默认使用系统的信任根。</p></td></tr><tr><td><code>clientKey</code><br><code>string</code></td><td><p><code>clientKey</code> 是与 konnectivity 服务器进行 mtls 握手时使用的客户端秘钥文件位置。
如果 `tcp.url` 前缀为 <code>http://</code>，必须不指定或者为空；
如果 `tcp.url` 前缀为 <code>https://</code>，必须设置。</p></td></tr><tr><td><code>clientCert</code><br><code>string</code></td><td><p><code>clientCert</code> 是与 konnectivity 服务器进行 mtls 握手时使用的客户端证书文件位置。
如果 `tcp.url` 前缀为 <code>http://</code>，必须不指定或者为空；
如果 `tcp.url` 前缀为 <code>https://</code>，必须设置。</p></td></tr></tbody></table><h2 id=apiserver-k8s-io-v1alpha1-Transport><code>Transport</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-k8s-io-v1alpha1-Connection>Connection</a></li></ul><p>Transport 定义联系 konnectivity 服务器时要使用的传输层配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>tcp</code><br><a href=#apiserver-k8s-io-v1alpha1-TCPTransport><code>TCPTransport</code></a></td><td><p><code>tcp</code> 包含通过 TCP 与 konnectivity 服务器通信时使用的 TCP 配置。
目前使用 TCP 传输时不支持 GRPC 的 <code>proxyProtocol</code>。
<code>tcp</code> 和 <code>uds</code> 二者至少设置一个。</p></td></tr><tr><td><code>uds</code><br><a href=#apiserver-k8s-io-v1alpha1-UDSTransport><code>UDSTransport</code></a></td><td><p><code>uds</code> 包含通过 UDS 与 konnectivity 服务器通信时使用的 UDS 配置。
<code>tcp</code> 和 <code>uds</code> 二者至少设置一个。</p></td></tr></tbody></table><h2 id=apiserver-k8s-io-v1alpha1-UDSTransport><code>UDSTransport</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#apiserver-k8s-io-v1alpha1-Transport>Transport</a></li></ul><p>UDSTransport 设置通过 UDS 连接 konnectivity 服务器时需要的信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>udsName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>udsName</code> 是与 konnectivity 服务器连接时使用的 UNIX 域套接字名称。
字段取值不要求包含 <code>unix://</code> 前缀。
（例如：<code>/etc/srv/kubernetes/konnectivity-server/konnectivity-server.socket</code>）</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d8644f8d8b33ff33a31c8b55065eaf37>7 - kube-proxy 配置 (v1alpha1)</h1><h2 id=resource-types>资源类型</h2><ul><li><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyConfiguration>KubeProxyConfiguration</a></li></ul><h2 id=kubeproxy-config-k8s-io-v1alpha1-KubeProxyConfiguration><code>KubeProxyConfiguration</code></h2><p>KubeProxyConfiguration 包含用来配置 Kubernetes 代理服务器的所有配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubeproxy.config.k8s.io/v1alpha1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>KubeProxyConfiguration</code></td></tr><tr><td><code>featureGates</code> <b>[必需]</b><br><code>map[string]bool</code></td><td><p><code>featureGates</code> 字段是一个功能特性名称到布尔值的映射表，
用来启用或者禁用测试性质的功能特性。</p></td></tr><tr><td><code>bindAddress</code> <b>[必需]</b><br><code>string</code></td><td><p><code>bindAddress</code> 字段是代理服务器提供服务时所用 IP 地址（设置为 0.0.0.0
时意味着在所有网络接口上提供服务）。</p></td></tr><tr><td><code>healthzBindAddress</code> <b>[必需]</b><br><code>string</code></td><td><p><code>healthzBindAddress</code> 字段是健康状态检查服务器提供服务时所使用的 IP 地址和端口，
默认设置为 '0.0.0.0:10256'。</p></td></tr><tr><td><code>metricsBindAddress</code> <b>[必需]</b><br><code>string</code></td><td><p><code>metricsBindAddress</code> 字段是指标服务器提供服务时所使用的 IP 地址和端口，
默认设置为 '127.0.0.1:10249'（设置为 0.0.0.0 意味着在所有接口上提供服务）。</p></td></tr><tr><td><code>bindAddressHardFail</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>bindAddressHardFail</code> 字段设置为 true 时，
kube-proxy 将无法绑定到某端口这类问题视为致命错误并直接退出。</p></td></tr><tr><td><code>enableProfiling</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>enableProfiling</code> 字段通过 '/debug/pprof' 处理程序在 Web 界面上启用性能分析。
性能分析处理程序将由指标服务器执行。</p></td></tr><tr><td><code>clusterCIDR</code> <b>[必需]</b><br><code>string</code></td><td><p><code>clusterCIDR</code> 字段是集群中 Pod 所使用的 CIDR 范围。
这一地址范围用于对来自集群外的请求流量进行桥接。
如果未设置，则 kube-proxy 不会对非集群内部的流量做桥接。</p></td></tr><tr><td><code>hostnameOverride</code> <b>[必需]</b><br><code>string</code></td><td><p><code>hostnameOverride</code> 字段非空时，
所给的字符串（而不是实际的主机名）将被用作 kube-proxy 的标识。</p></td></tr><tr><td><code>clientConnection</code> <b>[必需]</b><br><a href=#ClientConnectionConfiguration><code>ClientConnectionConfiguration</code></a></td><td><p><code>clientConnection</code> 字段给出代理服务器与 API
服务器通信时要使用的 kubeconfig 文件和客户端链接设置。</p></td></tr><tr><td><code>iptables</code> <b>[必需]</b><br><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyIPTablesConfiguration><code>KubeProxyIPTablesConfiguration</code></a></td><td><p><code>iptables</code> 字段字段包含与 iptables 相关的配置选项。</p></td></tr><tr><td><code>ipvs</code> <b>[必需]</b><br><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyIPVSConfiguration><code>KubeProxyIPVSConfiguration</code></a></td><td><p><code>ipvs</code> 字段中包含与 ipvs 相关的配置选项。</p></td></tr><tr><td><code>oomScoreAdj</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>oomScoreAdj</code> 字段是为 kube-proxy 进程所设置的 oom-score-adj 值。
此设置值必须介于 [-1000, 1000] 范围内。</p></td></tr><tr><td><code>mode</code> <b>[必需]</b><br><a href=#kubeproxy-config-k8s-io-v1alpha1-ProxyMode><code>ProxyMode</code></a></td><td><p><code>mode</code> 字段用来设置将使用的代理模式。</p></td></tr><tr><td><code>portRange</code> <b>[必需]</b><br><code>string</code></td><td><p><code>portRange</code> 字段是主机端口的范围，形式为 ‘beginPort-endPort’（包含边界），
用来设置代理服务所使用的端口。如果未指定（即 ‘0-0’），则代理服务会随机选择端口号。</p></td></tr><tr><td><code>udpIdleTimeout</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>udpIdleTimeout</code> 字段用来设置 UDP 链接保持活跃的时长（例如，'250ms'、'2s'）。
此值必须大于 0。此字段仅适用于 mode 值为 'userspace' 的场合。</p></td></tr><tr><td><code>conntrack</code> <b>[必需]</b><br><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyConntrackConfiguration><code>KubeProxyConntrackConfiguration</code></a></td><td><p><code>conntrack</code> 字段包含与 conntrack 相关的配置选项。</p></td></tr><tr><td><code>configSyncPeriod</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>configSyncPeriod</code> 字段是从 API 服务器刷新配置的频率。此值必须大于 0。</p></td></tr><tr><td><code>nodePortAddresses</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>nodePortAddresses</code> 字段是 kube-proxy 进程的
<code>--nodeport-addresses</code> 命令行参数设置。
此值必须是合法的 IP 段。所给的 IP 段会作为参数来选择 NodePort 类型服务所使用的接口。
如果有人希望将本地主机（Localhost）上的服务暴露给本地访问，
同时暴露在某些其他网络接口上以实现某种目标，可以使用 IP 段的列表。
如果此值被设置为 "127.0.0.0/8"，则 kube-proxy 将仅为 NodePort
服务选择本地回路（loopback）接口。
如果此值被设置为非零的 IP 段，则 kube-proxy 会对 IP 作过滤，仅使用适用于当前节点的 IP 地址。
空的字符串列表意味着选择所有网络接口。</p></td></tr><tr><td><code>winkernel</code> <b>[必需]</b><br><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyWinkernelConfiguration><code>KubeProxyWinkernelConfiguration</code></a></td><td><p><code>winkernel</code> 字段包含与 winkernel 相关的配置选项。</p></td></tr><tr><td><code>showHiddenMetricsForVersion</code> <b>[必需]</b><br><code>string</code></td><td><p><code>showHiddenMetricsForVersion</code> 字段给出的是一个 Kubernetes 版本号字符串，
用来设置你希望显示隐藏指标的版本。</p></td></tr><tr><td><code>detectLocalMode</code> <b>[必需]</b><br><a href=#kubeproxy-config-k8s-io-v1alpha1-LocalMode><code>LocalMode</code></a></td><td><p><code>detectLocalMode</code> 字段用来确定检测本地流量的方式，默认为 LocalModeClusterCIDR。</p></td></tr><tr><td><code>detectLocal</code> <b>[必需]</b><br><a href=#kubeproxy-config-k8s-io-v1alpha1-DetectLocalConfiguration><code>DetectLocalConfiguration</code></a></td><td><p><code>detectLocal</code> 字段包含与 DetectLocalMode 相关的可选配置设置。</p></td></tr></tbody></table><h2 id=kubeproxy-config-k8s-io-v1alpha1-DetectLocalConfiguration><code>DetectLocalConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyConfiguration>KubeProxyConfiguration</a></li></ul><p>DetectLocalConfiguration 包含与 DetectLocalMode 选项相关的可选设置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>bridgeInterface</code> <b>[必需]</b><br><code>string</code></td><td><p><code>bridgeInterface</code> 字段是一个表示单个桥接接口名称的字符串参数。
Kube-proxy 将来自这个给定桥接接口的流量视为本地流量。
如果 DetectLocalMode 设置为 LocalModeBridgeInterface，则应设置该参数。</p></td></tr><tr><td><code>interfaceNamePrefix</code> <b>[必需]</b><br><code>string</code></td><td><p><code>interfaceNamePrefix</code> 字段是一个表示单个接口前缀名称的字符串参数。
Kube-proxy 将来自一个或多个与给定前缀匹配的接口流量视为本地流量。
如果 DetectLocalMode 设置为 LocalModeInterfaceNamePrefix，则应设置该参数。</p></td></tr></tbody></table><h2 id=kubeproxy-config-k8s-io-v1alpha1-KubeProxyConntrackConfiguration><code>KubeProxyConntrackConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyConfiguration>KubeProxyConfiguration</a></li></ul><p>KubeProxyConntrackConfiguration 包含为 Kubernetes 代理服务器提供的 conntrack 设置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>maxPerCore</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>maxPerCore</code> 字段是每个 CPU 核所跟踪的 NAT 链接个数上限
（0 意味着保留当前上限限制并忽略 min 字段设置值）。</p></td></tr><tr><td><code>min</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>min</code> 字段给出要分配的链接跟踪记录个数下限。
设置此值时会忽略 maxPerCore 的值（将 maxPerCore 设置为 0 时不会调整上限值）。</p></td></tr><tr><td><code>tcpEstablishedTimeout</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>tcpEstablishedTimeout</code> 字段给出空闲 TCP 连接的保留时间（例如，'2s'）。
此值必须大于 0。</p></td></tr><tr><td><code>tcpCloseWaitTimeout</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>tcpCloseWaitTimeout</code> 字段用来设置空闲的、处于 CLOSE_WAIT 状态的 conntrack 条目
保留在 conntrack 表中的时间长度（例如，'60s'）。
此设置值必须大于 0。</p></td></tr></tbody></table><h2 id=kubeproxy-config-k8s-io-v1alpha1-KubeProxyIPTablesConfiguration><code>KubeProxyIPTablesConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyConfiguration>KubeProxyConfiguration</a></li></ul><p>KubeProxyIPTablesConfiguration 包含用于 Kubernetes 代理服务器的、与 iptables 相关的配置细节。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>masqueradeBit</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>masqueradeBit</code> 字段是 iptables fwmark 空间中的具体一位，
用来在纯 iptables 代理模式下设置 SNAT。此值必须介于 [0, 31]（含边界值）。</p></td></tr><tr><td><code>masqueradeAll</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>masqueradeAll</code> 字段用来通知 kube-proxy
在使用纯 iptables 代理模式时对所有流量执行 SNAT 操作。</p></td></tr><tr><td><code>syncPeriod</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>syncPeriod</code> 字段给出 iptables
规则的刷新周期（例如，'5s'、'1m'、'2h22m'）。此值必须大于 0。</p></td></tr><tr><td><code>minSyncPeriod</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>minSyncPeriod</code> 字段给出 iptables
规则被刷新的最小周期（例如，'5s'、'1m'、'2h22m'）。</p></td></tr></tbody></table><h2 id=kubeproxy-config-k8s-io-v1alpha1-KubeProxyIPVSConfiguration><code>KubeProxyIPVSConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyConfiguration>KubeProxyConfiguration</a></li></ul><p>KubeProxyIPVSConfiguration 包含用于 Kubernetes 代理服务器的、与 ipvs 相关的配置细节。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>syncPeriod</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>syncPeriod</code> 字段给出 ipvs 规则的刷新周期（例如，'5s'、'1m'、'2h22m'）。
此值必须大于 0。</p></td></tr><tr><td><code>minSyncPeriod</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>minSyncPeriod</code> 字段给出 ipvs 规则被刷新的最小周期（例如，'5s'、'1m'、'2h22m'）。</p></td></tr><tr><td><code>scheduler</code> <b>[必需]</b><br><code>string</code></td><td><p>IPVS 调度器。</p></td></tr><tr><td><code>excludeCIDRs</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>excludeCIDRs</code> 字段取值为一个 CIDR 列表，ipvs 代理程序在清理 IPVS 服务时不应触碰这些 IP 地址。</p></td></tr><tr><td><code>strictARP</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>strictARP</code> 字段用来配置 arp_ignore 和 arp_announce，以避免（错误地）响应来自 kube-ipvs0 接口的
ARP 查询请求。</p></td></tr><tr><td><code>tcpTimeout</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>tcpTimeout</code> 字段是用于设置空闲 IPVS TCP 会话的超时值。
默认值为 0，意味着使用系统上当前的超时值设置。</p></td></tr><tr><td><code>tcpFinTimeout</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>tcpFinTimeout</code> 字段用来设置 IPVS TCP 会话在收到 FIN 之后的超时值。
默认值为 0，意味着使用系统上当前的超时值设置。</p></td></tr><tr><td><code>udpTimeout</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>udpTimeout</code> 字段用来设置 IPVS UDP 包的超时值。
默认值为 0，意味着使用系统上当前的超时值设置。</p></td></tr></tbody></table><h2 id=kubeproxy-config-k8s-io-v1alpha1-KubeProxyWinkernelConfiguration><code>KubeProxyWinkernelConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyConfiguration>KubeProxyConfiguration</a></li></ul><p>KubeProxyWinkernelConfiguration 包含 Kubernetes 代理服务器的 Windows/HNS 设置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>networkName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>networkName</code> 字段是 kube-proxy 用来创建端点和策略的网络名称。</p></td></tr><tr><td><code>sourceVip</code> <b>[必需]</b><br><code>string</code></td><td><p><code>sourceVip</code> 字段是执行负载均衡时进行 NAT 转换所使用的源端 VIP 端点 IP 地址。</p></td></tr><tr><td><code>enableDSR</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>enableDSR</code> 字段通知 kube-proxy 是否使用 DSR 来创建 HNS 策略。</p></td></tr><tr><td><code>rootHnsEndpointName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>rootHnsEndpointName</code>
字段是附加到用于根网络命名空间二层桥接的 hnsendpoint 的名称。</p></td></tr><tr><td><code>forwardHealthCheckVip</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>forwardHealthCheckVip</code>
字段为 Windows 上的健康检查端口转发服务 VIP。</p></td></tr></tbody></table><h2 id=kubeproxy-config-k8s-io-v1alpha1-LocalMode><code>LocalMode</code></h2><p>（<code>string</code> 类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyConfiguration>KubeProxyConfiguration</a></li></ul><p>LocalMode 代表的是对节点上本地流量进行检测的模式。</p><h2 id=kubeproxy-config-k8s-io-v1alpha1-ProxyMode><code>ProxyMode</code></h2><p>（<code>string</code> 类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyConfiguration>KubeProxyConfiguration</a></li></ul><p>ProxyMode 表示的是 Kubernetes 代理服务器所使用的模式。</p><p>目前 Linux 平台上有三种可用的代理模式：'userspace'（相对较老，即将被淘汰）、
'iptables'（相对较新，速度较快）、'ipvs'（最新，在性能和可扩缩性上表现好）。</p><p>在 Windows 平台上有两种可用的代理模式：'userspace'（相对较老，但稳定）和
'kernelspace'（相对较新，速度更快）。</p><p>在 Linux 平台上，如果代理的 mode 为空，则使用可用的最佳代理（目前是 iptables，
将来可能会发生变化）。如果选择的是 iptables 代理（无论原因如何），但系统的内核
或者 iptables 的版本不够高，kube-proxy 也会回退为 userspace 代理服务器所使用的模式。
当代理的 mode 设置为 'ipvs' 时会启用 IPVS 模式，对应的回退路径是先尝试 iptables，
最后回退到 userspace。</p><p>在 Windows 平台上，如果代理 mode 为空，则使用可用的最佳代理（目前是 userspace，
不过将来可能会发生变化）。如果所选择的是 winkernel 代理（无论原因如何），
但 Windows 内核不支持此代理模式，则 kube-proxy 会回退到 userspace 代理。</p><h2 id=ClientConnectionConfiguration><code>ClientConnectionConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubeproxy-config-k8s-io-v1alpha1-KubeProxyConfiguration>KubeProxyConfiguration</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#controllermanager-config-k8s-io-v1alpha1-GenericControllerManagerConfiguration>GenericControllerManagerConfiguration</a></p></li></ul><p>ClientConnectionConfiguration 包含构造客户端所需要的细节信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>kubeconfig</code> <b>[必需]</b><br><code>string</code></td><td><p><code>kubeconfig</code> 字段是指向一个 KubeConfig 文件的路径。</p></td></tr><tr><td><code>acceptContentTypes</code> <b>[必需]</b><br><code>string</code></td><td><p><code>acceptContentTypes</code> 字段定义客户端在连接到服务器时所发送的 Accept 头部字段。
此设置值会覆盖默认配置 'application/json'。
此字段会控制某特定客户端与指定服务器的所有链接。</p></td></tr><tr><td><code>contentType</code> <b>[必需]</b><br><code>string</code></td><td><p><code>contentType</code> 字段是从此客户端向服务器发送数据时使用的内容类型（Content Type）。</p></td></tr><tr><td><code>qps</code> <b>[必需]</b><br><code>float32</code></td><td><p><code>qps</code> 字段控制此连接上每秒钟可以发送的查询请求个数。</p></td></tr><tr><td><code>burst</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>burst</code> 字段允许客户端超出其速率限制时可以临时累积的额外查询个数。</p></td></tr></tbody></table><h2 id=DebuggingConfiguration><code>DebuggingConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#controllermanager-config-k8s-io-v1alpha1-GenericControllerManagerConfiguration>GenericControllerManagerConfiguration</a></p></li></ul><p>DebuggingConfiguration 包含调试相关功能的配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>enableProfiling</code> <b>[Required]</b><br><code>bool</code></td><td><p><code>enableProfiling</code> 字段通过位于 <code>host:port/debug/pprof/</code>
的 Web 接口启用性能分析。</p></td></tr><tr><td><code>enableContentionProfiling</code> <b>[Required]</b><br><code>bool</code></td><td><p><code>enableContentionProfiling</code> 字段在 <code>enableProfiling</code>
为 true 时允许执行锁竞争分析。</p></td></tr></tbody></table><h2 id=LeaderElectionConfiguration><code>LeaderElectionConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#controllermanager-config-k8s-io-v1alpha1-GenericControllerManagerConfiguration>GenericControllerManagerConfiguration</a></p></li></ul><p>LeaderElectionConfiguration 为能够支持领导者选举的组件定义其领导者选举客户端的配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>leaderElect</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>leaderElect</code> 字段允许领导者选举客户端在进入主循环执行之前先获得领导者角色。
运行多副本组件时启用此功能有助于提高可用性。</p></td></tr><tr><td><code>leaseDuration</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>leaseDuration</code> 字段是非领导角色候选者在观察到需要领导席位更新时要等待的时间；
只有经过所设置时长才可以尝试去获得一个仍处于领导状态但需要被刷新的席位。
这里的设置值本质上意味着某个领导者在被另一个候选者替换掉之前可以停止运行的最长时长。
只有当启用了领导者选举时此字段有意义。</p></td></tr><tr><td><code>renewDeadline</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>renewDeadline</code> 字段设置的是当前领导者在停止扮演领导角色之前需要刷新领导状态的时间间隔。
此值必须小于或等于租约期限的长度。只有到启用了领导者选举时此字段才有意义。</p></td></tr><tr><td><code>retryPeriod</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>retryPeriod</code> 字段是客户端在连续两次尝试获得或者刷新领导状态之间需要等待的时长。
只有当启用了领导者选举时此字段才有意义。</p></td></tr><tr><td><code>resourceLock</code> <b>[必需]</b><br><code>string</code></td><td><p><code>resourceLock</code> 字段给出在领导者选举期间要作为锁来使用的资源对象类型。</p></td></tr><tr><td><code>resourceName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>resourceName</code> 字段给出在领导者选举期间要作为锁来使用的资源对象名称。</p></td></tr><tr><td><code>resourceNamespace</code> <b>[必需]</b><br><code>string</code></td><td><p><code>resourceNamespace</code> 字段给出在领导者选举期间要作为锁来使用的资源对象所在名字空间。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-456399fc52f4b81000285e4118542dfc>8 - kube-scheduler 配置 (v1)</h1><h2 id=resource-types>资源类型</h2><ul><li><a href=#kubescheduler-config-k8s-io-v1-DefaultPreemptionArgs>DefaultPreemptionArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1-InterPodAffinityArgs>InterPodAffinityArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li><li><a href=#kubescheduler-config-k8s-io-v1-NodeAffinityArgs>NodeAffinityArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1-NodeResourcesBalancedAllocationArgs>NodeResourcesBalancedAllocationArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1-NodeResourcesFitArgs>NodeResourcesFitArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1-PodTopologySpreadArgs>PodTopologySpreadArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1-VolumeBindingArgs>VolumeBindingArgs</a></li></ul><h2 id=kubescheduler-config-k8s-io-v1-DefaultPreemptionArgs><code>DefaultPreemptionArgs</code></h2><p>DefaultPreemptionArgs 包含用来配置 DefaultPreemption 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>DefaultPreemptionArgs</code></td></tr><tr><td><code>minCandidateNodesPercentage</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>minCandidateNodesPercentage</code> 字段为试运行抢占时 shortlist 中候选节点数的下限，
数值为节点数的百分比。字段值必须介于 [0, 100] 之间。未指定时默认值为整个集群规模的 10%。</p></td></tr><tr><td><code>minCandidateNodesAbsolute</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>minCandidateNodesAbsolute</code> 字段设置 shortlist 中候选节点的绝对下限。
用于试运行抢占而列举的候选节点个数近似于通过下面的公式计算的：<br>候选节点数 = max(节点数 * minCandidateNodesPercentage, minCandidateNodesAbsolute)<br>之所以说是"近似于"是因为存在一些类似于 PDB 违例这种因素，
会影响到进入 shortlist 中候选节点的个数。
取值至少为 0 节点。若未设置默认为 100 节点。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-InterPodAffinityArgs><code>InterPodAffinityArgs</code></h2><p>InterPodAffinityArgs 包含用来配置 InterPodAffinity 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>InterPodAffinityArgs</code></td></tr><tr><td><code>hardPodAffinityWeight</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>hardPodAffinityWeight</code> 字段是一个计分权重值。针对新增的 Pod，要对现存的、
带有与新 Pod 匹配的硬性亲和性设置的 Pods 计算亲和性得分。</td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-KubeSchedulerConfiguration><code>KubeSchedulerConfiguration</code></h2><p>KubeSchedulerConfiguration 用来配置调度器。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>KubeSchedulerConfiguration</code></td></tr><tr><td><code>parallelism</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>parallelism</code> 字段设置为调度 Pod 而执行算法时的并发度。此值必须大于 0。默认值为 16。</p></td></tr><tr><td><code>leaderElection</code> <b>[必需]</b><br><a href=#LeaderElectionConfiguration><code>LeaderElectionConfiguration</code></a></td><td><p>LeaderElection 字段用来定义领导者选举客户端的配置。</p></td></tr><tr><td><code>clientConnection</code> <b>[必需]</b><br><a href=#ClientConnectionConfiguration><code>ClientConnectionConfiguration</code></a></td><td><p><code>clientConnection</code> 字段为与 API 服务器通信时使用的代理服务器设置 kubeconfig 文件和客户端连接配置。</p></td></tr><tr><td><code>DebuggingConfiguration</code> <b>[必需]</b><br><a href=#DebuggingConfiguration><code>DebuggingConfiguration</code></a></td><td>（<code>DebuggingConfiguration</code> 的成员被内嵌到此类型中）<p><code>DebuggingConfiguration</code> 字段设置与调试相关功能特性的配置。
TODO：我们可能想把它做成一个子结构，像调试 component-base/config/v1alpha1.DebuggingConfiguration 一样。</p></td></tr><tr><td><code>percentageOfNodesToScore</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>percentageOfNodesToScore</code> 字段为所有节点的百分比，一旦调度器找到所设置比例的、能够运行 Pod 的节点，
则停止在集群中继续寻找更合适的节点。这一配置有助于提高调度器的性能。
调度器总会尝试寻找至少 "minFeasibleNodesToFind" 个可行节点，无论此字段的取值如何。
例如：当集群规模为 500 个节点，而此字段的取值为 30，
则调度器在找到 150 个合适的节点后会停止继续寻找合适的节点。当此值为 0 时，
调度器会使用默认节点数百分比（基于集群规模确定的值，在 5% 到 50% 之间）来执行打分操作。</p></td></tr><tr><td><code>podInitialBackoffSeconds</code> <b>[必需]</b><br><code>int64</code></td><td><p><code>podInitialBackoffSeconds</code> 字段设置不可调度 Pod 的初始回退秒数。
如果设置了此字段，其取值必须大于零。若此值为 null，则使用默认值（1s）。</p></td></tr><tr><td><code>podMaxBackoffSeconds</code> <b>[必需]</b><br><code>int64</code></td><td><p><code>podMaxBackoffSeconds</code> 字段设置不可调度的 Pod 的最大回退秒数。
如果设置了此字段，则其值必须大于 podInitialBackoffSeconds 字段值。
如果此值设置为 null，则使用默认值（10s）。</p></td></tr><tr><td><code>profiles</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-KubeSchedulerProfile><code>[]KubeSchedulerProfile</code></a></td><td><p><code>profiles</code> 字段为 kube-scheduler 所支持的方案（profiles）。
Pod 可以通过设置其对应的调度器名称来选择使用特定的方案。
未指定调度器名称的 Pod 会使用 "default-scheduler" 方案来调度，如果存在的话。</p></td></tr><tr><td><code>extenders</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-Extender><code>[]Extender</code></a></td><td><p><code>extenders</code> 字段为调度器扩展模块（Extender）的列表，每个元素包含如何与某扩展模块通信的配置信息。
所有调度器模仿会共享此扩展模块列表。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-NodeAffinityArgs><code>NodeAffinityArgs</code></h2><p>NodeAffinityArgs 中包含配置 NodeAffinity 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>NodeAffinityArgs</code></td></tr><tr><td><code>addedAffinity</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#nodeaffinity-v1-core><code>core/v1.NodeAffinity</code></a></td><td><p><code>addedAffinity</code> 会作为附加的亲和性属性添加到所有 Pod 的规约中指定的 NodeAffinity 中。
换言之，节点需要同时满足 addedAffinity 和 .spec.nodeAffinity。
默认情况下，addedAffinity 为空（与所有节点匹配）。使用了 addedAffinity 时，
某些带有已经能够与某特定节点匹配的亲和性需求的 Pod （例如 DaemonSet Pod）可能会继续呈现不可调度状态。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-NodeResourcesBalancedAllocationArgs><code>NodeResourcesBalancedAllocationArgs</code></h2><p>NodeResourcesBalancedAllocationArgs 包含用来配置 NodeResourcesBalancedAllocation 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>NodeResourcesBalancedAllocationArgs</code></td></tr><tr><td><code>resources</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-ResourceSpec><code>[]ResourceSpec</code></a></td><td><p>要管理的资源；如果未设置，则默认值为 "cpu" 和 "memory"。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-NodeResourcesFitArgs><code>NodeResourcesFitArgs</code></h2><p>NodeResourcesFitArgs 包含用来配置 NodeResourcesFit 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>NodeResourcesFitArgs</code></td></tr><tr><td><code>ignoredResources</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>ignoredResources</code> 字段为 NodeResources 匹配过滤器要忽略的资源列表。此列表不影响节点打分。</p></td></tr><tr><td><code>ignoredResourceGroups</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>ignoredResourceGroups</code> 字段定义 NodeResources 匹配过滤器要忽略的资源组列表。
例如，如果配置值为 ["example.com"]，
则以 "example.com" 开头的资源名
（如"example.com/aaa" 和 "example.com/bbb"）都会被忽略。
资源组名称中不可以包含 '/'。此设置不影响节点的打分。</p></td></tr><tr><td><code>scoringStrategy</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-ScoringStrategy><code>ScoringStrategy</code></a></td><td><p><code>scoringStrategy</code> 用来选择节点资源打分策略。默认的策略为 LeastAllocated，
且 "cpu" 和 "memory" 的权重相同。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-PodTopologySpreadArgs><code>PodTopologySpreadArgs</code></h2><p>PodTopologySpreadArgs 包含用来配置 PodTopologySpread 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>PodTopologySpreadArgs</code></td></tr><tr><td><code>defaultConstraints</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#topologyspreadconstraint-v1-core><code>[]core/v1.TopologySpreadConstraint</code></a></td><td><p><code>defaultConstraints</code> 字段针对未定义 <code>.spec.topologySpreadConstraints</code> 的 Pod，
为其提供拓扑分布约束。<code>.defaultConstraints[&#8727;].labelSelectors</code>必须为空，
因为这一信息要从 Pod 所属的 Service、ReplicationController、ReplicaSet 或 StatefulSet 来推导。
此字段不为空时，<code>.defaultingType</code> 必须为 "List"。</p></td></tr><tr><td><code>defaultingType</code><br><a href=#kubescheduler-config-k8s-io-v1-PodTopologySpreadConstraintsDefaulting><code>PodTopologySpreadConstraintsDefaulting</code></a></td><td><p><code>defaultingType</code> 决定如何推导 <code>.defaultConstraints</code>。
可选值为 "System" 或 "List"。</p><ul><li>"System"：使用 Kubernetes 定义的约束，将 Pod 分布到不同节点和可用区；</li><li>"List"：使用 <code>.defaultConstraints</code> 中定义的约束。</li></ul><p>默认值为 "System"。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-VolumeBindingArgs><code>VolumeBindingArgs</code></h2><p>VolumeBindingArgs 包含用来配置 VolumeBinding 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>VolumeBindingArgs</code></td></tr><tr><td><code>bindTimeoutSeconds</code> <b>[必需]</b><br><code>int64</code></td><td><p><code>bindTimeoutSeconds</code> 字段设置卷绑定操作的超时秒数。字段值必须是非负数。
取值为 0 意味着不等待。如果此值为 null，则使用默认值（600）。</p></td></tr><tr><td><code>shape</code><br><a href=#kubescheduler-config-k8s-io-v1-UtilizationShapePoint><code>[]UtilizationShapePoint</code></a></td><td><p><code>shape</code> 用来设置打分函数曲线所使用的计分点，
这些计分点用来基于静态制备的 PV 卷的利用率为节点打分。
卷的利用率是计算得来的，
将 Pod 所请求的总的存储空间大小除以每个节点上可用的总的卷容量。
每个计分点包含利用率（范围从 0 到 100）和其对应的得分（范围从 0 到 10）。
你可以通过为不同的使用率值设置不同的得分来反转优先级：</p><p>默认的曲线计分点为：</p><ol><li>利用率为 0 时得分为 0；</li><li>利用率为 100 时得分为 10。</li></ol><p>所有计分点必须按利用率值的升序来排序。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-Extender><code>Extender</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>Extender 包含与扩展模块（Extender）通信所用的参数。
如果未指定 verb 或者 verb 为空，则假定对应的扩展模块选择不提供该扩展功能。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>urlPrefix</code> <b>[必需]</b><br><code>string</code></td><td><p>用来访问扩展模块的 URL 前缀。</p></td></tr><tr><td><code>filterVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>filter 调用所使用的动词，如果不支持过滤操作则为空。
此动词会在向扩展模块发送 filter 调用时追加到 urlPrefix 后面。</p></td></tr><tr><td><code>preemptVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>preempt 调用所使用的动词，如果不支持 preempt 操作则为空。
此动词会在向扩展模块发送 preempt 调用时追加到 urlPrefix 后面。</p></td></tr><tr><td><code>prioritizeVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>prioritize 调用所使用的动词，如果不支持 prioritize 操作则为空。
此动词会在向扩展模块发送 prioritize 调用时追加到 urlPrefix 后面。</p></td></tr><tr><td><code>weight</code> <b>[必需]</b><br><code>int64</code></td><td><p>针对 prioritize 调用所生成的节点分数要使用的数值系数。
weight 值必须是正整数。</p></td></tr><tr><td><code>bindVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>bind 调用所使用的动词，如果不支持 bind 操作则为空。
此动词会在向扩展模块发送 bind 调用时追加到 urlPrefix 后面。
如果扩展模块实现了此方法，扩展模块要负责将 Pod 绑定到 API 服务器。
只有一个扩展模块可以实现此函数。</p></td></tr><tr><td><code>enableHTTPS</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>enableHTTPS</code> 字段设置是否需要使用 HTTPS 来与扩展模块通信。</p></td></tr><tr><td><code>tlsConfig</code> <b>[Required]</b><br><a href=#kubescheduler-config-k8s-io-v1-ExtenderTLSConfig><code>ExtenderTLSConfig</code></a></td><td><p><code>tlsConfig</code> 字段设置传输层安全性（TLS）配置。</p></td></tr><tr><td><code>httpTimeout</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>httpTimeout</code> 给出扩展模块功能调用的超时值。filter 操作超时会导致 Pod 无法被调度。
prioritize 操作超时会被忽略，
Kubernetes 或者其他扩展模块所给出的优先级值会被用来选择节点。</p></td></tr><tr><td><code>nodeCacheCapable</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>nodeCacheCapable</code> 指示扩展模块可以缓存节点信息，从而调度器应该发送关于可选节点的最少信息，
假定扩展模块已经缓存了集群中所有节点的全部详细信息。</p></td></tr><tr><td><code>managedResources</code><br><a href=#kubescheduler-config-k8s-io-v1-ExtenderManagedResource><code>[]ExtenderManagedResource</code></a></td><td><p><code>managedResources</code> 是一个由此扩展模块所管理的扩展资源的列表。</p><ul><li>如果某 Pod 请求了此列表中的至少一个扩展资源，则 Pod 会在 filter、
prioritize 和 bind （如果扩展模块可以执行绑定操作）阶段被发送到该扩展模块。</li><li>如果某资源上设置了 <code>ignoredByScheduler</code> 为 true，则 kube-scheduler
会在断言阶段略过对该资源的检查。</li></ul></td></tr><tr><td><code>ignorable</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>ignorable</code> 用来设置扩展模块是否是可忽略的。
换言之，当扩展模块返回错误或者完全不可达时，调度操作不应失败。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-ExtenderManagedResource><code>ExtenderManagedResource</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-Extender>Extender</a></li></ul><p>ExtenderManagedResource 描述某扩展模块所管理的扩展资源的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p>扩展资源的名称。</p></td></tr><tr><td><code>ignoredByScheduler</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>ignoredByScheduler</code> 标明 kube-scheduler 是否应在应用断言时忽略此资源。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-ExtenderTLSConfig><code>ExtenderTLSConfig</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-Extender>Extender</a></li></ul><p>ExtenderTLSConfig 包含启用与扩展模块间 TLS 传输所需的配置参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>insecure</code> <b>[必需]</b><br><code>bool</code></td><td><p>访问服务器时不需要检查 TLS 证书。此配置仅针对测试用途。</p></td></tr><tr><td><code>serverName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>serverName</code> 会被发送到服务器端，作为 SNI 标志；
客户端会使用此设置来检查服务器证书。
如果 <code>serverName</code> 为空，则会使用联系服务器时所用的主机名。</p></td></tr><tr><td><code>certFile</code> <b>[必需]</b><br><code>string</code></td><td><p>服务器端所要求的 TLS 客户端证书认证。</p></td></tr><tr><td><code>keyFile</code> <b>[必需]</b><br><code>string</code></td><td><p>服务器端所要求的 TLS 客户端秘钥认证。</p></td></tr><tr><td><code>caFile</code> <b>[必需]</b><br><code>string</code></td><td><p>服务器端被信任的根证书。</p></td></tr><tr><td><code>certData</code> <b>[必需]</b><br><code>[]byte</code></td><td><p><code>certData</code> 包含 PEM 编码的字节流（通常从某客户端证书文件读入）。
此字段优先级高于 certFile 字段。</p></td></tr><tr><td><code>keyData</code> <b>[必需]</b><br><code>[]byte</code></td><td><p><code>keyData</code> 包含 PEM 编码的字节流（通常从某客户端证书秘钥文件读入）。
此字段优先级高于 keyFile 字段。</p></td></tr><tr><td><code>caData</code> <b>[必需]</b><br><code>[]byte</code></td><td><p><code>caData</code> 包含 PEM 编码的字节流（通常从某根证书包文件读入）。
此字段优先级高于 caFile 字段。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-KubeSchedulerProfile><code>KubeSchedulerProfile</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>KubeSchedulerProfile 是一个调度方案。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>schedulerName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>schedulerName</code> 是与此调度方案相关联的调度器的名称。
如果 <code>schedulerName</code> 与 Pod 的 <code>spec.schedulerName</code> 匹配，
则该 Pod 会使用此方案来调度。</p></td></tr><tr><td><code>plugins</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-Plugins><code>Plugins</code></a></td><td><p><code>plugins</code> 设置一组应该被启用或禁止的插件。
被启用的插件是指除了默认插件之外需要被启用的插件。
被禁止的插件是指需要被禁用的默认插件。</p><p>如果针对某个扩展点没有设置被启用或被禁止的插件，
则使用该扩展点的默认插件（如果有的话）。如果设置了 QueueSort 插件，
则同一个 QueueSort 插件和 <code>pluginConfig</code> 要被设置到所有调度方案之上。</p></td></tr><tr><td><code>pluginConfig</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginConfig><code>[]PluginConfig</code></a></td><td><p><code>pluginConfig</code> 是为每个插件提供的一组可选的定制插件参数。
如果忽略了插件的配置参数，则意味着使用该插件的默认配置。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-Plugin><code>Plugin</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-PluginSet>PluginSet</a></li></ul><p>Plugin 指定插件的名称及其权重（如果适用的话）。权重仅用于评分（Score）插件。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p>插件的名称。</p></td></tr><tr><td><code>weight</code> <b>[必需]</b><br><code>int32</code></td><td><p>插件的权重；仅适用于评分（Score）插件。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-PluginConfig><code>PluginConfig</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-KubeSchedulerProfile>KubeSchedulerProfile</a></li></ul><p>PluginConfig 给出初始化阶段要传递给插件的参数。
在多个扩展点被调用的插件仅会被初始化一次。
参数可以是任意结构。插件负责处理这里所传的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 是所配置的插件的名称。</p></td></tr><tr><td><code>args</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/runtime/#RawExtension><code>k8s.io/apimachinery/pkg/runtime.RawExtension</code></a></td><td><p><code>args</code> 定义在初始化阶段要传递给插件的参数。参数可以为任意结构。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-Plugins>Plugins</a></li></ul><p>PluginSet 为某扩展点设置要启用或禁用的插件。
如果数组为空，或者取值为 null，则使用该扩展点的默认插件集合。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>enabled</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-Plugin><code>[]Plugin</code></a></td><td><p><code>enabled</code> 设置在默认插件之外要启用的插件。
如果在调度器的配置文件中也配置了默认插件，则对应插件的权重会被覆盖。
此处所设置的插件会在默认插件之后被调用，调用顺序与数组中元素顺序相同。</p></td></tr><tr><td><code>disabled</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-Plugin><code>[]Plugin</code></a></td><td><p><code>disabled</code> 设置要被禁用的默认插件。
如果需要禁用所有的默认插件，应该提供仅包含一个元素 "&#8727;" 的数组。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-Plugins><code>Plugins</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-KubeSchedulerProfile>KubeSchedulerProfile</a></li></ul><p>Plugins 结构中包含多个扩展点。当此结构被设置时，
针对特定扩展点所启用的所有插件都在这一列表中。
如果配置中不包含某个扩展点，则使用该扩展点的默认插件集合。
被启用的插件的调用顺序与这里指定的顺序相同，都在默认插件之后调用。
如果它们需要在默认插件之前调用，则需要先行禁止默认插件，
之后在这里按期望的顺序重新启用。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>queueSort</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>queueSort</code> 是一个在对调度队列中 Pod 排序时要调用的插件列表。</p></td></tr><tr><td><code>preFilter</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>preFilter</code> 是一个在调度框架中 "PreFilter（预过滤）"扩展点上要调用的插件列表。</p></td></tr><tr><td><code>filter</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>filter</code> 是一个在需要过滤掉无法运行 Pod 的节点时被调用的插件列表。</p></td></tr><tr><td><code>postFilter</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>postFilter</code> 是一个在过滤阶段结束后会被调用的插件列表；
这里的插件只有在找不到合适的节点来运行 Pod 时才会被调用。</p></td></tr><tr><td><code>preScore</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>preScore</code> 是一个在打分之前要调用的插件列表。</p></td></tr><tr><td><code>score</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>score</code> 是一个在对已经通过过滤阶段的节点进行排序时调用的插件的列表。</p></td></tr><tr><td><code>reserve</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>reserve</code> 是一组在运行 Pod 的节点已被选定后，需要预留或者释放资源时调用的插件的列表。</p></td></tr><tr><td><code>permit</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>permit</code> 是一个用来控制 Pod 绑定关系的插件列表。
这些插件可以禁止或者延迟 Pod 的绑定。</p></td></tr><tr><td><code>preBind</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>preBind</code> 是一个在 Pod 被绑定到某节点之前要被调用的插件的列表。</p></td></tr><tr><td><code>bind</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>bind</code> 是一个在调度框架中 "Bind（绑定）"扩展点上要调用的插件的列表。
调度器按顺序调用这些插件。只要其中某个插件返回成功，则调度器就略过余下的插件。</p></td></tr><tr><td><code>postBind</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>postBind</code> 是一个在 Pod 已经被成功绑定之后要调用的插件的列表。</p></td></tr><tr><td><code>multiPoint</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-PluginSet><code>PluginSet</code></a></td><td><p><code>multiPoint</code> 是一个简化的配置段落，用来为所有合法的扩展点启用插件。
通过 <code>multiPoint</code> 启用的插件会自动注册到插件所实现的每个独立的扩展点上。
通过 <code>multiPoint</code> 禁用的插件会禁用对应的操作行为。
通过 <code>multiPoint</code> 所禁止的 "&#8727;"
也是如此，意味着所有默认插件都不会被自动注册。
插件也可以通过各个独立的扩展点来禁用。</p><p>就优先序而言，插件配置遵从以下基本层次：</p><ol><li>特定的扩展点；</li><li>显式配置的 <code>multiPoint</code> 插件；</li><li>默认插件的集合，以及 <code>multiPoint</code> 插件。</li></ol><p>这意味着优先序较高的插件会先被运行，并且覆盖 <code>multiPoint</code> 中的任何配置。</p><p>用户显式配置的插件也会比默认插件优先序高。</p><p>在这样的层次结构设计之下，<code>enabled</code> 的优先序高于 <code>disabled</code>。
例如，某插件同时出现在 <code>multiPoint.enabled</code> 和 <code>multiPoint.disalbed</code> 时，
该插件会被启用。类似的，
同时设置 <code>multiPoint.disabled = '&#8727;'</code>和 <code>multiPoint.enabled = pluginA</code> 时，
插件 pluginA 仍然会被注册。这一设计与所有其他扩展点的配置行为是相符的。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-PodTopologySpreadConstraintsDefaulting><code>PodTopologySpreadConstraintsDefaulting</code></h2><p>（<code>string</code> 类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-PodTopologySpreadArgs>PodTopologySpreadArgs</a></li></ul><p>PodTopologySpreadConstraintsDefaulting
定义如何为 PodTopologySpread 插件设置默认的约束。</p><h2 id=kubescheduler-config-k8s-io-v1-RequestedToCapacityRatioParam><code>RequestedToCapacityRatioParam</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-ScoringStrategy>ScoringStrategy</a></li></ul><p>RequestedToCapacityRatioParam 结构定义 RequestedToCapacityRatio 的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>shape</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-UtilizationShapePoint><code>[]UtilizationShapePoint</code></a></td><td><p><code>shape</code> 是一个定义评分函数曲线的计分点的列表。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-ResourceSpec><code>ResourceSpec</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubescheduler-config-k8s-io-v1-NodeResourcesBalancedAllocationArgs>NodeResourcesBalancedAllocationArgs</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1-ScoringStrategy>ScoringStrategy</a></p></li></ul><p>ResourceSpec 用来代表某个资源。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p>资源名称。</p></td></tr><tr><td><code>weight</code> <b>[必需]</b><br><code>int64</code></td><td><p>资源权重。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-ScoringStrategy><code>ScoringStrategy</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-NodeResourcesFitArgs>NodeResourcesFitArgs</a></li></ul><p>ScoringStrategy 为节点资源插件定义 ScoringStrategyType。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>type</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-ScoringStrategyType><code>ScoringStrategyType</code></a></td><td><p><code>type</code> 用来选择要运行的策略。</p></td></tr><tr><td><code>resources</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-ResourceSpec><code>[]ResourceSpec</code></a></td><td><p><code>resources</code> 设置在评分时要考虑的资源。</p><p>默认的资源集合包含 "cpu" 和 "memory"，且二者权重相同。</p><p>权重的取值范围为 1 到 100。</p><p>当权重未设置或者显式设置为 0 时，意味着使用默认值 1。</p></td></tr><tr><td><code>requestedToCapacityRatio</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1-RequestedToCapacityRatioParam><code>RequestedToCapacityRatioParam</code></a></td><td><p>特定于 RequestedToCapacityRatio 策略的参数。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1-ScoringStrategyType><code>ScoringStrategyType</code></h2><p>（<code>string</code> 数据类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1-ScoringStrategy>ScoringStrategy</a></li></ul><p>ScoringStrategyType 是 NodeResourcesFit 插件所使用的的评分策略类型。</p><h2 id=kubescheduler-config-k8s-io-v1-UtilizationShapePoint><code>UtilizationShapePoint</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubescheduler-config-k8s-io-v1-VolumeBindingArgs>VolumeBindingArgs</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1-RequestedToCapacityRatioParam>RequestedToCapacityRatioParam</a></p></li></ul><p>UtilizationShapePoint 代表的是优先级函数曲线中的一个评分点。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>utilization</code> <b>[必需]</b><br><code>int32</code></td><td><p>利用率（x 轴）。合法值为 0 到 100。完全被利用的节点映射到 100。</p></td></tr><tr><td><code>score</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>score</code> 分配给指定利用率的分值（y 轴）。合法值为 0 到 10。</p></td></tr></tbody></table><h2 id=ClientConnectionConfiguration><code>ClientConnectionConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li></ul><p>ClientConnectionConfiguration 中包含用来构造客户端所需的细节。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>kubeconfig</code> <b>[必需]</b><br><code>string</code></td><td><p><code>kubeconfig</code> 字段为指向 KubeConfig 文件的路径。</p></td></tr><tr><td><code>acceptContentTypes</code> <b>[必需]</b><br><code>string</code></td><td><p><code>acceptContentTypes</code> 定义的是客户端与服务器建立连接时要发送的 Accept 头部，
这里的设置值会覆盖默认值 "application/json"。此字段会影响某特定客户端与服务器的所有连接。</p></td></tr><tr><td><code>contentType</code> <b>[必需]</b><br><code>string</code></td><td><p><code>contentType</code> 包含的是此客户端向服务器发送数据时使用的内容类型（Content Type）。</p></td></tr><tr><td><code>qps</code> <b>[必需]</b><br><code>float32</code></td><td><p><code>qps</code> 控制此连接允许的每秒查询次数。</p></td></tr><tr><td><code>burst</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>burst</code> 允许在客户端超出其速率限制时可以累积的额外查询个数。</p></td></tr></tbody></table><h2 id=DebuggingConfiguration><code>DebuggingConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li></ul><p>DebuggingConfiguration 保存与调试功能相关的配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>enableProfiling</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>enableProfiling</code> 字段允许通过 Web 接口 host:port/debug/pprof/ 执行性能分析。</p></td></tr><tr><td><code>enableContentionProfiling</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>enableContentionProfiling</code> 字段在
<code>enableProfiling</code> 为 true 时允许执行锁竞争分析。</p></td></tr></tbody></table><h2 id=LeaderElectionConfiguration><code>LeaderElectionConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></p></li></ul><p>LeaderElectionConfiguration 为能够支持领导者选举的组件定义其领导者选举客户端的配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>leaderElect</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>leaderElect</code> 允许领导者选举客户端在进入主循环执行之前先获得领导者角色。
运行多副本组件时启用此功能有助于提高可用性。</p></td></tr><tr><td><code>leaseDuration</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>leaseDuration</code> 是非领导角色候选者在观察到需要领导席位更新时要等待的时间；
只有经过所设置时长才可以尝试去获得一个仍处于领导状态但需要被刷新的席位。
这里的设置值本质上意味着某个领导者在被另一个候选者替换掉之前可以停止运行的最长时长。
只有当启用了领导者选举时此字段有意义。</p></td></tr><tr><td><code>renewDeadline</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>renewDeadline</code> 设置的是当前领导者在停止扮演领导角色之前需要刷新领导状态的时间间隔。
此值必须小于或等于租约期限的长度。只有到启用了领导者选举时此字段才有意义。</p></td></tr><tr><td><code>retryPeriod</code> <b>[Required[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>retryPeriod</code> 是客户端在连续两次尝试获得或者刷新领导状态之间需要等待的时长。
只有当启用了领导者选举时此字段才有意义。</p></td></tr><tr><td><code>resourceLock</code> <b>[必需]</b><br><code>string</code></td><td><p><code>resourceLock</code> 字段给出在领导者选举期间要作为锁来使用的资源对象类型。</p></td></tr><tr><td><code>resourceName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>resourceName</code> 字段给出在领导者选举期间要作为锁来使用的资源对象名称。</p></td></tr><tr><td><code>resourceNamespace</code> <b>[必需]</b><br><code>string</code></td><td><p><code>resourceNamespace</code> 字段给出在领导者选举期间要作为锁来使用的资源对象所在名字空间。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-5cf379787cc3cd6f11182678610e6b5e>9 - kube-scheduler 配置 (v1beta2)</h1><h2 id=资源类型>资源类型</h2><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-DefaultPreemptionArgs>DefaultPreemptionArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta2-InterPodAffinityArgs>InterPodAffinityArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta2-NodeAffinityArgs>NodeAffinityArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta2-NodeResourcesBalancedAllocationArgs>NodeResourcesBalancedAllocationArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta2-NodeResourcesFitArgs>NodeResourcesFitArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta2-PodTopologySpreadArgs>PodTopologySpreadArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta2-VolumeBindingArgs>VolumeBindingArgs</a></li></ul><h2 id=kubescheduler-config-k8s-io-v1beta2-DefaultPreemptionArgs><code>DefaultPreemptionArgs</code></h2><p>DefaultPreemptionArgs 包含用来配置 DefaultPreemption 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>DefaultPreemptionArgs</code></td></tr><tr><td><code>minCandidateNodesPercentage</code> <b>[必需]</b><br><code>int32</code></td><td><p>此字段为试运行抢占时 shortlist 中候选节点数的下限，数值为节点数的百分比。
字段值必须介于 [0, 100] 之间。未指定时默认值为整个集群规模的 10%。</p></td></tr><tr><td><code>minCandidateNodesAbsolute</code> <b>[必需]</b><br><code>int32</code></td><td><p>此字段设置 shortlist 中候选节点的绝对下限。用于试运行抢占而列举的候选节点个数近似于通过下面的公式计算的：</p><p>候选节点数 = max(节点数 * minCandidateNodesPercentage, minCandidateNodesAbsolute)</p><p>之所以说是"近似于"是因为存在一些类似于 PDB 违例这种因素，会影响到进入 shortlist中候选节点的个数。
取值至少为 0 节点。若未设置默认为 100 节点。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-InterPodAffinityArgs><code>InterPodAffinityArgs</code></h2><p>InterPodAffinityArgs 包含用来配置 InterPodAffinity 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>InterPodAffinityArgs</code></td></tr><tr><td><code>hardPodAffinityWeight</code> <b>[必需]</b><br><code>int32</code></td><td><p>此字段是一个计分权重值。针对新增的 Pod，
要对现存的、带有与新 Pod 匹配的硬性亲和性设置的 Pod 计算亲和性得分。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration><code>KubeSchedulerConfiguration</code></h2><p>KubeSchedulerConfiguration 用来配置调度器。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>KubeSchedulerConfiguration</code></td></tr><tr><td><code>parallelism</code> <b>[必需]</b><br><code>int32</code></td><td><p>此字段设置为调度 Pod 而执行算法时的并发度。此值必须大于 0。
默认值为 16。</p></td></tr><tr><td><code>leaderElection</code> <b>[必需]</b><br><a href=#LeaderElectionConfiguration><code>LeaderElectionConfiguration</code></a></td><td><p>此字段用来定义领导者选举客户端的配置。</p></td></tr><tr><td><code>clientConnection</code> <b>[必需]</b><br><a href=#ClientConnectionConfiguration><code>ClientConnectionConfiguration</code></a></td><td><p>此字段为与 API 服务器通信时使用的代理服务器设置 kubeconfig 文件和客户端连接配置。</p></td></tr><tr><td><code>healthzBindAddress</code> <b>[必需]</b><br><code>string</code></td><td><p><code>healthzBindAddress</code> 是健康检查服务器提供服务所用的 IP 地址和端口。
注意：<code>healthzBindAddress</code> 和 <code>metricsBindAddress</code>这两个字段都已被弃用。
只可以设置空地址或者端口 0。其他设置值都无法通过合法性检查。</p></td></tr><tr><td><code>metricsBindAddress</code> <b>[必需]</b><br><code>string</code></td><td><p><code>metricsBindAddress</code> 是度量值服务器提供服务所用的 IP 地址和端口。</p></td></tr><tr><td><code>DebuggingConfiguration</code> <b>[必需]</b><br><a href=#DebuggingConfiguration><code>DebuggingConfiguration</code></a></td><td>（<code>DebuggingConfiguration</code> 的成员被内嵌到此类型中）<p>此字段设置与调试相关功能特性的配置。
TODO：我们可能想把它做成一个子结构，像调试 component-base/config/v1alpha1.DebuggingConfiguration 一样。</p></td></tr><tr><td><code>percentageOfNodesToScore</code> <b>[必需]</b><br><code>int32</code></td><td><p>此字段为所有节点的百分比，一旦调度器找到所设置比例的、能够运行 Pod 的节点，
则停止在集群中继续寻找更合适的节点。这一配置有助于提高调度器的性能。
调度器总会尝试寻找至少 "minFeasibleNodesToFind" 个可行节点，无论此字段的取值如何。
例如：当集群规模为 500 个节点，而此字段的取值为 30，
则调度器在找到 150 个合适的节点后会停止继续寻找合适的节点。
当此值为 0 时，调度器会使用默认节点数百分比（基于集群规模确定的值，在 5% 到 50% 之间）来执行打分操作。</p></td></tr><tr><td><code>podInitialBackoffSeconds</code> <b>[必需]</b><br><code>int64</code></td><td><p>此字段设置不可调度 Pod 的初始回退秒数。如果设置了此字段，其取值必须大于零。
若此值为 null，则使用默认值（1s）。</p></td></tr><tr><td><code>podMaxBackoffSeconds</code> <b>[必需]</b><br><code>int64</code></td><td><p>此字段设置不可调度的 Pod 的最大回退秒数。如果设置了此字段，
则其值必须大于 podInitialBackoffSeconds 字段值。如果此值设置为 null，则使用默认值（10s）。</p></td></tr><tr><td><code>profiles</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerProfile><code>[]KubeSchedulerProfile</code></a></td><td><p>此字段为 kube-scheduler 所支持的方案（profiles）。
Pod 可以通过设置其对应的调度器名称来选择使用特定的方案。
未指定调度器名称的 Pod 会使用 "default-scheduler" 方案来调度，如果存在的话。</p></td></tr><tr><td><code>extenders</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-Extender><code>[]Extender</code></a></td><td><p>此字段为调度器扩展模块（Extender）的列表，
每个元素包含如何与某扩展模块通信的配置信息。
所有调度器模仿会共享此扩展模块列表。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-NodeAffinityArgs><code>NodeAffinityArgs</code></h2><p>NodeAffinityArgs 中包含配置 NodeAffinity 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>NodeAffinityArgs</code></td></tr><tr><td><code>addedAffinity</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#nodeaffinity-v1-core><code>core/v1.NodeAffinity</code></a></td><td><p><code>addedAffinity</code> 会作为附加的亲和性属性添加到所有 Pod 的规约中指定的 NodeAffinity 中。
换言之，节点需要同时满足 addedAffinity 和 .spec.nodeAffinity。默认情况下，addedAffinity 为空（与所有节点匹配）。
使用了 addedAffinity 时，某些带有已经能够与某特定节点匹配的亲和性需求的
Pod （例如 DaemonSet Pod）可能会继续呈现不可调度状态。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-NodeResourcesBalancedAllocationArgs><code>NodeResourcesBalancedAllocationArgs</code></h2><p>NodeResourcesBalancedAllocationArgs 包含用来配置 NodeResourcesBalancedAllocation 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>NodeResourcesBalancedAllocationArgs</code></td></tr><tr><td><code>resources</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-ResourceSpec><code>[]ResourceSpec</code></a></td><td><p>要管理的资源；如果未设置，则默认值为 "cpu" 和 "memory"。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-NodeResourcesFitArgs><code>NodeResourcesFitArgs</code></h2><p>NodeResourcesFitArgs 包含用来配置 NodeResourcesFit 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>NodeResourcesFitArgs</code></td></tr><tr><td><code>ignoredResources</code> <b>[必需]</b><br><code>[]string</code></td><td><p>此字段为 NodeResources 匹配过滤器要忽略的资源列表。此列表不影响节点打分。</p></td></tr><tr><td><code>ignoredResourceGroups</code> <b>[必需]</b><br><code>[]string</code></td><td><p>此字段定义 NodeResources 匹配过滤器要忽略的资源组列表。
例如，如果配置值为 ["example.com"]，则以 "example.com"
开头的资源名（如"example.com/aaa" 和 "example.com/bbb"）都会被忽略。
资源组名称中不可以包含 '/'。此设置不影响节点的打分。</p></td></tr><tr><td><code>scoringStrategy</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-ScoringStrategy><code>ScoringStrategy</code></a></td><td><p>此字段用来选择节点资源打分策略。默认的策略为 LeastAllocated，
且 "cpu" 和"memory" 的权重相同。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-PodTopologySpreadArgs><code>PodTopologySpreadArgs</code></h2><p>PodTopologySpreadArgs 包含用来配置 PodTopologySpread 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>PodTopologySpreadArgs</code></td></tr><tr><td><code>defaultConstraints</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#topologyspreadconstraint-v1-core><code>[]core/v1.TopologySpreadConstraint</code></a></td><td><p>此字段针对未定义 <code>.spec.topologySpreadConstraints</code> 的 Pod，
为其提供拓扑分布约束。<code>.defaultConstraints[&#8727;].labelSelectors</code>必须为空，
因为这一信息要从 Pod 所属的 Service、ReplicationController、
ReplicaSet 或 StatefulSet 来推导。
此字段不为空时，<code>.defaultingType</code> 必须为 "List"。</p></td></tr><tr><td><code>defaultingType</code><br><a href=#kubescheduler-config-k8s-io-v1beta2-PodTopologySpreadConstraintsDefaulting><code>PodTopologySpreadConstraintsDefaulting</code></a></td><td><p><code>defaultingType</code> 决定如何推导 <code>.defaultConstraints</code>。
可选值为 "System" 或 "List"。</p><ul><li>"System"：使用 Kubernetes 定义的约束，将 Pod 分布到不同节点和可用区；</li><li>"List"：使用 <code>.defaultConstraints</code> 中定义的约束。</li></ul><p>默认值为 "System"。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-VolumeBindingArgs><code>VolumeBindingArgs</code></h2><p>VolumeBindingArgs 包含用来配置 VolumeBinding 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>VolumeBindingArgs</code></td></tr><tr><td><code>bindTimeoutSeconds</code> <b>[必需]</b><br><code>int64</code></td><td><p>此字段设置卷绑定操作的超时秒数。字段值必须是非负数。
取值为 0 意味着不等待。如果此值为 null，则使用默认值（600）。</p></td></tr><tr><td><code>shape</code><br><a href=#kubescheduler-config-k8s-io-v1beta2-UtilizationShapePoint><code>[]UtilizationShapePoint</code></a></td><td><p><code>shape</code> 用来设置打分函数曲线所使用的计分点，
这些计分点用来基于静态制备的 PV 卷的利用率为节点打分。
卷的利用率是计算得来的，将 Pod 所请求的总的存储空间大小除以每个节点上可用的总的卷容量。
每个计分点包含利用率（范围从 0 到 100）和其对应的得分（范围从 0 到 10）。
你可以通过为不同的使用率值设置不同的得分来反转优先级：</p><p>默认的曲线计分点为：</p><ol><li>利用率为 0 时得分为 0；</li><li>利用率为 100 时得分为 10。</li></ol><p>所有计分点必须按利用率值的升序来排序。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-Extender><code>Extender</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>Extender 包含与扩展模块（Extender）通信所用的参数。
如果未指定 verb 或者 verb 为空，则假定对应的扩展模块选择不提供该扩展功能。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>urlPrefix</code> <b>[必需]</b><br><code>string</code></td><td><p>用来访问扩展模块的 URL 前缀。</p></td></tr><tr><td><code>filterVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>filter 调用所使用的动词，如果不支持过滤操作则为空。
此动词会在向扩展模块发送 filter 调用时追加到 urlPrefix 后面。</p></td></tr><tr><td><code>preemptVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>preempt 调用所使用的动词，如果不支持抢占操作则为空。
此动词会在向扩展模块发送 preempt 调用时追加到 urlPrefix 后面。</p></td></tr><tr><td><code>prioritizeVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>prioritize 调用所使用的动词，如果不支持 prioritize 操作则为空。
此动词会在向扩展模块发送 prioritize 调用时追加到 urlPrefix 后面。</p></td></tr><tr><td><code>weight</code> <b>[必需]</b><br><code>int64</code></td><td><p>针对 prioritize 调用所生成的节点分数要使用的数值系数。
weight 值必须是正整数。</p></td></tr><tr><td><code>bindVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>bind 调用所使用的动词，如果不支持 bind 操作则为空。
此动词会在向扩展模块发送 bind 调用时追加到 urlPrefix 后面。
如果扩展模块实现了此方法，扩展模块要负责将 Pod 绑定到 API 服务器。
只有一个扩展模块可以实现此函数。</p></td></tr><tr><td><code>enableHTTPS</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段设置是否需要使用 HTTPS 来与扩展模块通信。</p></td></tr><tr><td><code>tlsConfig</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-ExtenderTLSConfig><code>ExtenderTLSConfig</code></a></td><td><p>此字段设置传输层安全性（TLS）配置。</p></td></tr><tr><td><code>httpTimeout</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p>此字段给出扩展模块功能调用的超时值。filter 操作超时会导致 Pod 无法被调度。
prioritize 操作超时会被忽略，Kubernetes 或者其他扩展模块所给出的优先级值会被用来选择节点。</p></td></tr><tr><td><code>nodeCacheCapable</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段指示扩展模块可以缓存节点信息，从而调度器应该发送关于可选节点的最少信息，
假定扩展模块已经缓存了集群中所有节点的全部详细信息。</p></td></tr><tr><td><code>managedResources</code><br><a href=#kubescheduler-config-k8s-io-v1beta2-ExtenderManagedResource><code>[]ExtenderManagedResource</code></a></td><td><p><code>managedResources</code> 是一个由此扩展模块所管理的扩展资源的列表。</p><ul><li>如果某 Pod 请求了此列表中的至少一个扩展资源，则 Pod 会在 filter、
prioritize 和 bind （如果扩展模块可以执行绑定操作）阶段被发送到该扩展模块。
若此字段为空或未设置，则所有 Pod 都会发送到此扩展模块。</li><li>如果某资源上设置了 <code>ignoredByScheduler</code> 为 true，则 kube-scheduler
会在断言阶段略过对该资源的检查。</li></ul></td></tr><tr><td><code>ignorable</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段用来设置扩展模块是否是可忽略的。
换言之，当扩展模块返回错误或者完全不可达时，调度操作不应失败。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-ExtenderManagedResource><code>ExtenderManagedResource</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-Extender>Extender</a></li></ul><p>ExtenderManagedResource 描述某扩展模块所管理的扩展资源的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p>扩展资源的名称。</p></td></tr><tr><td><code>ignoredByScheduler</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段标明 kube-scheduler 是否应在应用断言时忽略此资源。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-ExtenderTLSConfig><code>ExtenderTLSConfig</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-Extender>Extender</a></li></ul><p>ExtenderTLSConfig 包含启用与扩展模块间 TLS 传输所需的配置参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>insecure</code> <b>[必需]</b><br><code>bool</code></td><td><p>访问服务器时不需要检查 TLS 证书。此配置仅针对测试用途。</p></td></tr><tr><td><code>serverName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>serverName</code> 会被发送到服务器端，作为 SNI 标志；
客户端会使用此设置来检查服务器证书。
如果 <code>serverName</code> 为空，则会使用联系服务器时所用的主机名。</p></td></tr><tr><td><code>certFile</code> <b>[必需]</b><br><code>string</code></td><td><p>服务器端所要求的 TLS 客户端证书认证。</p></td></tr><tr><td><code>keyFile</code> <b>[必需]</b><br><code>string</code></td><td><p>服务器端所要求的 TLS 客户端秘钥认证。</p></td></tr><tr><td><code>caFile</code> <b>[必需]</b><br><code>string</code></td><td><p>服务器端可信任的根证书。</p></td></tr><tr><td><code>certData</code> <b>[必需]</b><br><code>[]byte</code></td><td><p><code>certData</code> 包含 PEM 编码的字节流（通常从某客户端证书文件读入）。
此字段优先级高于 certFile 字段。</p></td></tr><tr><td><code>keyData</code> <b>[必需]</b><br><code>[]byte</code></td><td><p><code>keyData</code> 包含 PEM 编码的字节流（通常从某客户端证书秘钥文件读入）。
此字段优先级高于 keyFile 字段。</p></td></tr><tr><td><code>caData</code> <b>[必需]</b><br><code>[]byte</code></td><td><p><code>caData</code> 包含 PEM 编码的字节流（通常从某根证书包文件读入）。
此字段优先级高于 caFile 字段。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-KubeSchedulerProfile><code>KubeSchedulerProfile</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>KubeSchedulerProfile 是一个调度方案。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>schedulerName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>schedulerName</code> 是与此调度方案相关联的调度器的名称。
如果 <code>schedulerName</code> 与 Pod 的 <code>spec.schedulerName</code>
匹配，则该 Pod 会使用此方案来调度。</p></td></tr><tr><td><code>plugins</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-Plugins><code>Plugins</code></a></td><td><p><code>plugins</code> 设置一组应该被启用或禁止的插件。
被启用的插件是指除了默认插件之外需要被启用的插件。
被禁止的插件是指需要被禁用的默认插件。</p><p>如果针对某个扩展点没有设置被启用或被禁止的插件，
则使用该扩展点的默认插件（如果有的话）。如果设置了 QueueSort 插件，则同一个 QueueSort
插件和 <code>pluginConfig</code> 要被设置到所有调度方案之上。</p></td></tr><tr><td><code>pluginConfig</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginConfig><code>[]PluginConfig</code></a></td><td><p><code>pluginConfig</code> 是为每个插件提供的一组可选的定制插件参数。
如果忽略了插件的配置参数，则意味着使用该插件的默认配置。</p></td></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-Plugin><code>Plugin</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet>PluginSet</a></li></ul><p>Plugin 指定插件的名称及其权重（如果适用的话）。权重仅用于评分（Score）插件。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p>插件的名称。</p></td></tr><tr><td><code>weight</code> <b>[必需]</b><br><code>int32</code></td><td><p>插件的权重；仅适用于评分（Score）插件。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-PluginConfig><code>PluginConfig</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerProfile>KubeSchedulerProfile</a></li></ul><p>PluginConfig 给出初始化阶段要传递给插件的参数。
在多个扩展点被调用的插件仅会被初始化一次。
参数可以是任意结构。插件负责处理这里所传的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 是所配置的插件的名称。</p></td></tr><tr><td><code>args</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/runtime/#RawExtension><code>k8s.io/apimachinery/pkg/runtime.RawExtension</code></a></td><td><p><code>args</code> 定义在初始化阶段要传递给插件的参数。参数可以为任意结构。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-Plugins>Plugins</a></li></ul><p>PluginSet 为某扩展点设置要启用或禁用的插件。
如果数组为空，或者取值为 null，则使用该扩展点的默认插件集合。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>enabled</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-Plugin><code>[]Plugin</code></a></td><td><p><code>enabled</code> 设置在默认插件之外要启用的插件。
如果在调度器的配置文件中也配置了默认插件，则对应插件的权重会被覆盖。
此处所设置的插件会在默认插件之后被调用，调用顺序与数组中元素顺序相同。</p></td></tr><tr><td><code>disabled</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-Plugin><code>[]Plugin</code></a></td><td><p><code>disabled</code> 设置要被禁用的默认插件。
如果需要禁用所有的默认插件，应该提供仅包含一个元素 "&#8727;" 的数组。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-Plugins><code>Plugins</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerProfile>KubeSchedulerProfile</a></li></ul><p>Plugins 结构中包含多个扩展点。当此结构被设置时，针对特定扩展点所启用的所有插件都在这一列表中。
如果配置中不包含某个扩展点，则使用该扩展点的默认插件集合。
被启用的插件的调用顺序与这里指定的顺序相同，都在默认插件之后调用。
如果它们需要在默认插件之前调用，则需要先行禁止默认插件，之后在这里按期望的顺序重新启用。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>queueSort</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>queueSort</code> 是一个在对调度队列中 Pod 排序时要调用的插件列表。</p></td></tr><tr><td><code>preFilter</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>preFilter</code> 是一个在调度框架中“PreFilter（预过滤）”扩展点上要调用的插件列表。</p></td></tr><tr><td><code>filter</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>filter</code> 是一个在需要过滤掉无法运行 Pod 的节点时被调用的插件列表。</p></td></tr><tr><td><code>postFilter</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>postFilter</code> 是一个在过滤阶段结束后会被调用的插件列表；
这里的插件只有在找不到合适的节点来运行 Pod 时才会被调用。</p></td></tr><tr><td><code>preScore</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>preScore</code> 是一个在打分之前要调用的插件列表。</p></td></tr><tr><td><code>score</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>score</code> 是一个在对已经通过过滤阶段的节点进行排序时调用的插件的列表。</p></td></tr><tr><td><code>reserve</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>reserve</code> 是一组在运行 Pod 的节点已被选定后，需要预留或者释放资源时调用的插件的列表。</p></td></tr><tr><td><code>permit</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>permit</code> 是一个用来控制 Pod 绑定关系的插件列表。
这些插件可以禁止或者延迟 Pod 的绑定。</p></td></tr><tr><td><code>preBind</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>preBind</code> 是一个在 Pod 被绑定到某节点之前要被调用的插件的列表。</p></td></tr><tr><td><code>bind</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>bind</code> 是一个在调度框架中"Bind（绑定）"扩展点上要调用的插件的列表。
调度器按顺序调用这些插件。只要其中某个插件返回成功，则调度器就略过余下的插件。</p></td></tr><tr><td><code>postBind</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>postBind</code> 是一个在 Pod 已经被成功绑定之后要调用的插件的列表。</p></td></tr><tr><td><code>multiPoint</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-PluginSet><code>PluginSet</code></a></td><td><p><code>multiPoint</code> 是一个简化的配置段落，用来为所有合法的扩展点启用插件。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-PodTopologySpreadConstraintsDefaulting><code>PodTopologySpreadConstraintsDefaulting</code></h2><p>（<code>string</code> 类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-PodTopologySpreadArgs>PodTopologySpreadArgs</a></li></ul><p>PodTopologySpreadConstraintsDefaulting 定义如何为
PodTopologySpread 插件设置默认的约束。</p><h2 id=kubescheduler-config-k8s-io-v1beta2-RequestedToCapacityRatioParam><code>RequestedToCapacityRatioParam</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-ScoringStrategy>ScoringStrategy</a></li></ul><p>RequestedToCapacityRatioParam 定义 RequestedToCapacityRatio 的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>shape</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-UtilizationShapePoint><code>[]UtilizationShapePoint</code></a></td><td><p><code>shape</code> 是一个定义评分函数曲线的计分点的列表。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-ResourceSpec><code>ResourceSpec</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubescheduler-config-k8s-io-v1beta2-NodeResourcesBalancedAllocationArgs>NodeResourcesBalancedAllocationArgs</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1beta2-ScoringStrategy>ScoringStrategy</a></p></li></ul><p>ResourceSpec 用来代表某个资源。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p>资源名称。</p></td></tr><tr><td><code>weight</code> <b>[必需]</b><br><code>int64</code></td><td><p>资源权重。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-ScoringStrategy><code>ScoringStrategy</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-NodeResourcesFitArgs>NodeResourcesFitArgs</a></li></ul><p>ScoringStrategy 为节点资源插件定义 ScoringStrategyType。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>type</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-ScoringStrategyType><code>ScoringStrategyType</code></a></td><td><p><code>type</code> 用来选择要运行的策略。</p></td></tr><tr><td><code>resources</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-ResourceSpec><code>[]ResourceSpec</code></a></td><td><p><code>resources</code> 设置在评分时要考虑的资源。</p><p>默认的资源集合包含 "cpu" 和 "memory"，且二者权重相同。</p><p>权重的取值范围为 1 到 100。</p><p>当权重未设置或者显式设置为 0 时，意味着使用默认值 1。</p></td></tr><tr><td><code>requestedToCapacityRatio</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta2-RequestedToCapacityRatioParam><code>RequestedToCapacityRatioParam</code></a></td><td><p>特定于 RequestedToCapacityRatio 策略的参数。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta2-ScoringStrategyType><code>ScoringStrategyType</code></h2><p>（<code>string</code> 数据类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-ScoringStrategy>ScoringStrategy</a></li></ul><p>ScoringStrategyType 是 NodeResourcesFit 插件所使用的的评分策略类型。</p><h2 id=kubescheduler-config-k8s-io-v1beta2-UtilizationShapePoint><code>UtilizationShapePoint</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubescheduler-config-k8s-io-v1beta2-VolumeBindingArgs>VolumeBindingArgs</a></p></li><li><p><a href=#kubescheduler-config-k8s-io-v1beta2-RequestedToCapacityRatioParam>RequestedToCapacityRatioParam</a></p></li></ul><p>UtilizationShapePoint 代表的是优先级函数曲线中的一个评分点。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>utilization</code> <b>[必需]</b><br><code>int32</code></td><td><p>利用率（x 轴）。合法值为 0 到 100。完全被利用的节点映射到 100。</p></td></tr><tr><td><code>score</code> <b>[必需]</b><br><code>int32</code></td><td><p>分配给指定利用率的分值（y 轴）。合法值为 0 到 10。</p></td></tr></tbody></table><h2 id=ClientConnectionConfiguration><code>ClientConnectionConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>ClientConnectionConfiguration 中包含用来构造客户端所需的细节。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>kubeconfig</code> <b>[必需]</b><br><code>string</code></td><td><p>此字段为指向某 KubeConfig 文件的路径。</p></td></tr><tr><td><code>acceptContentTypes</code> <b>[必需]</b><br><code>string</code></td><td><p><code>acceptContentTypes</code> 定义的是客户端与服务器建立连接时要发送的 Accept 头部，
这里的设置值会覆盖默认值 "application/json"。
此字段会影响某特定客户端与服务器的所有连接。</p></td></tr><tr><td><code>contentType</code> <b>[必需]</b><br><code>string</code></td><td><p><code>contentType</code> 包含的是此客户端向服务器发送数据时使用的内容类型（Content Type）。</p></td></tr><tr><td><code>qps</code> <b>[必需]</b><br><code>float32</code></td><td><p><code>qps</code> 控制此连接允许的每秒查询次数。</p></td></tr><tr><td><code>burst</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>burst</code> 允许在客户端超出其速率限制时可以累积的额外查询个数。</p></td></tr></tbody></table><h2 id=DebuggingConfiguration><code>DebuggingConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>DebuggingConfiguration 保存与调试功能相关的配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>enableProfiling</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段允许通过 Web 接口 host:port/debug/pprof/ 执行性能分析。</p></td></tr><tr><td><code>enableContentionProfiling</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段在 <code>enableProfiling</code> 为 true 时允许执行锁竞争分析。</p></td></tr></tbody></table><h2 id=LeaderElectionConfiguration><code>LeaderElectionConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>LeaderElectionConfiguration 为能够支持领导者选举的组件定义其领导者选举客户端的配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>leaderElect</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>leaderElect</code> 允许领导者选举客户端在进入主循环执行之前先获得领导者角色。
运行多副本组件时启用此功能有助于提高可用性。</p></td></tr><tr><td><code>leaseDuration</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>leaseDuration</code> 是非领导角色候选者在观察到需要领导席位更新时要等待的时间；
只有经过所设置时长才可以尝试去获得一个仍处于领导状态但需要被刷新的席位。
这里的设置值本质上意味着某个领导者在被另一个候选者替换掉之前可以停止运行的最长时长。
只有当启用了领导者选举时此字段有意义。</p></td></tr><tr><td><code>renewDeadline</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>renewDeadline</code> 设置的是当前领导者在停止扮演领导角色之前需要刷新领导状态的时间间隔。
此值必须小于或等于租约期限的长度。只有到启用了领导者选举时此字段才有意义。</p></td></tr><tr><td><code>retryPeriod</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>retryPeriod</code> 是客户端在连续两次尝试获得或者刷新领导状态之间需要等待的时长。
只有当启用了领导者选举时此字段才适用。</p></td></tr><tr><td><code>resourceLock</code> <b>[必需]</b><br><code>string</code></td><td><p>此字段给出在领导者选举期间要作为锁来使用的资源对象类型。</p></td></tr><tr><td><code>resourceName</code> <b>[必需]</b><br><code>string</code></td><td><p>此字段给出在领导者选举期间要作为锁来使用的资源对象名称。</p></td></tr><tr><td><code>resourceNamespace</code> <b>[必需]</b><br><code>string</code></td><td><p>此字段给出在领导者选举期间要作为锁来使用的资源对象所在名字空间。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2d4b71a4502f9ff672631862fe08b182>10 - kube-scheduler 配置 (v1beta3)</h1><h2 id=resource-types>资源类型</h2><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-DefaultPreemptionArgs>DefaultPreemptionArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-InterPodAffinityArgs>InterPodAffinityArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-NodeAffinityArgs>NodeAffinityArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-NodeResourcesBalancedAllocationArgs>NodeResourcesBalancedAllocationArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-NodeResourcesFitArgs>NodeResourcesFitArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-PodTopologySpreadArgs>PodTopologySpreadArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-VolumeBindingArgs>VolumeBindingArgs</a></li></ul><h2 id=kubescheduler-config-k8s-io-v1beta3-DefaultPreemptionArgs><code>DefaultPreemptionArgs</code></h2><p>DefaultPreemptionArgs 包含用来配置 DefaultPreemption 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>DefaultPreemptionArgs</code></td></tr><tr><td><code>minCandidateNodesPercentage</code> <b>[必需]</b><br><code>int32</code></td><td><p>此字段为试运行抢占时 shortlist 中候选节点数的下限，数值为节点数的百分比。
字段值必须介于 [0, 100] 之间。未指定时默认值为整个集群规模的 10%。</p></td></tr><tr><td><code>minCandidateNodesAbsolute</code> <b>[必需]</b><br><code>int32</code></td><td><p>此字段设置 shortlist 中候选节点的绝对下限。
用于试运行抢占而列举的候选节点个数近似于通过下面的公式计算的：<br>候选节点数 = max(节点数 * minCandidateNodesPercentage, minCandidateNodesAbsolute)
之所以说是"近似于"是因为存在一些类似于 PDB 违例这种因素，
会影响到进入 shortlist中候选节点的个数。
取值至少为 0 节点。若未设置默认为 100 节点。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-InterPodAffinityArgs><code>InterPodAffinityArgs</code></h2><p>InterPodAffinityArgs 包含用来配置 InterPodAffinity 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>InterPodAffinityArgs</code></td></tr><tr><td><code>hardPodAffinityWeight</code> <b>[必需]</b><br><code>int32</code></td><td><p>此字段是一个计分权重值。针对新增的 Pod，要对现存的、
带有与新 Pod 匹配的硬性亲和性设置的 Pods 计算亲和性得分。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration><code>KubeSchedulerConfiguration</code></h2><p>KubeSchedulerConfiguration 用来配置调度器。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>KubeSchedulerConfiguration</code></td></tr><tr><td><code>parallelism</code> <b>[必需]</b><br><code>int32</code></td><td><p>此字段设置为调度 Pod 而执行算法时的并发度。此值必须大于 0。默认值为 16。</p></td></tr><tr><td><code>leaderElection</code> <b>[必需]</b><br><a href=#LeaderElectionConfiguration><code>LeaderElectionConfiguration</code></a></td><td><p>此字段用来定义领导者选举客户端的配置。</p></td></tr><tr><td><code>clientConnection</code> <b>[必需]</b><br><a href=#ClientConnectionConfiguration><code>ClientConnectionConfiguration</code></a></td><td><p>此字段为与 API 服务器通信时使用的代理服务器设置 kubeconfig 文件和客户端连接配置。</p></td></tr><tr><td><code>DebuggingConfiguration</code> <b>[必需]</b><br><a href=#DebuggingConfiguration><code>DebuggingConfiguration</code></a></td><td>（<code>DebuggingConfiguration</code> 的成员被内嵌到此类型中）<p>此字段设置与调试相关功能特性的配置。
TODO：我们可能想把它做成一个子结构，像调试 component-base/config/v1alpha1.DebuggingConfiguration 一样。</p></td></tr><tr><td><code>percentageOfNodesToScore</code> <b>[必需]</b><br><code>int32</code></td><td><p>此字段为所有节点的百分比，一旦调度器找到所设置比例的、能够运行 Pod 的节点，
则停止在集群中继续寻找更合适的节点。这一配置有助于提高调度器的性能。
调度器总会尝试寻找至少 "minFeasibleNodesToFind" 个可行节点，无论此字段的取值如何。
例如：当集群规模为 500 个节点，而此字段的取值为 30，
则调度器在找到 150 个合适的节点后会停止继续寻找合适的节点。当此值为 0 时，
调度器会使用默认节点数百分比（基于集群规模确定的值，在 5% 到 50% 之间）来执行打分操作。</p></td></tr><tr><td><code>podInitialBackoffSeconds</code> <b>[必需]</b><br><code>int64</code></td><td><p>此字段设置不可调度 Pod 的初始回退秒数。如果设置了此字段，其取值必须大于零。
若此值为 null，则使用默认值（1s）。</p></td></tr><tr><td><code>podMaxBackoffSeconds</code> <b>[必需]</b><br><code>int64</code></td><td><p>此字段设置不可调度的 Pod 的最大回退秒数。
如果设置了此字段，则其值必须大于 podInitialBackoffSeconds 字段值。
如果此值设置为 null，则使用默认值（10s）。</p></td></tr><tr><td><code>profiles</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerProfile><code>[]KubeSchedulerProfile</code></a></td><td><p>此字段为 kube-scheduler 所支持的方案（profiles）。
Pod 可以通过设置其对应的调度器名称来选择使用特定的方案。
未指定调度器名称的 Pod 会使用"default-scheduler"方案来调度，如果存在的话。</p></td></tr><tr><td><code>extenders</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-Extender><code>[]Extender</code></a></td><td><p>此字段为调度器扩展模块（Extender）的列表，
每个元素包含如何与某扩展模块通信的配置信息。
所有调度器模仿会共享此扩展模块列表。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-NodeAffinityArgs><code>NodeAffinityArgs</code></h2><p>NodeAffinityArgs 中包含配置 NodeAffinity 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>NodeAffinityArgs</code></td></tr><tr><td><code>addedAffinity</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#nodeaffinity-v1-core><code>core/v1.NodeAffinity</code></a></td><td><p><code>addedAffinity</code> 会作为附加的亲和性属性添加到所有 Pod 的规约中指定的 NodeAffinity 中。
换言之，节点需要同时满足 addedAffinity 和 .spec.nodeAffinity。
默认情况下，addedAffinity 为空（与所有节点匹配）。使用了 addedAffinity 时，
某些带有已经能够与某特定节点匹配的亲和性需求的 Pod （例如 DaemonSet Pod）可能会继续呈现不可调度状态。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-NodeResourcesBalancedAllocationArgs><code>NodeResourcesBalancedAllocationArgs</code></h2><p>NodeResourcesBalancedAllocationArgs 包含用来配置 NodeResourcesBalancedAllocation 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>NodeResourcesBalancedAllocationArgs</code></td></tr><tr><td><code>resources</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-ResourceSpec><code>[]ResourceSpec</code></a></td><td><p>要管理的资源；如果未设置，则默认值为 "cpu" 和 "memory"。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-NodeResourcesFitArgs><code>NodeResourcesFitArgs</code></h2><p>NodeResourcesFitArgs 包含用来配置 NodeResourcesFit 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>NodeResourcesFitArgs</code></td></tr><tr><td><code>ignoredResources</code> <b>[必需]</b><br><code>[]string</code></td><td><p>此字段为 NodeResources 匹配过滤器要忽略的资源列表。此列表不影响节点打分。</p></td></tr><tr><td><code>ignoredResourceGroups</code> <b>[必需]</b><br><code>[]string</code></td><td><p>此字段定义 NodeResources 匹配过滤器要忽略的资源组列表。
例如，如果配置值为 ["example.com"]，
则以 "example.com" 开头的资源名
（如"example.com/aaa" 和 "example.com/bbb"）都会被忽略。
资源组名称中不可以包含 '/'。此设置不影响节点的打分。</p></td></tr><tr><td><code>scoringStrategy</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-ScoringStrategy><code>ScoringStrategy</code></a></td><td><p>此字段用来选择节点资源打分策略。默认的策略为 LeastAllocated，
且 "cpu" 和 "memory" 的权重相同。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-PodTopologySpreadArgs><code>PodTopologySpreadArgs</code></h2><p>PodTopologySpreadArgs 包含用来配置 PodTopologySpread 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>PodTopologySpreadArgs</code></td></tr><tr><td><code>defaultConstraints</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#topologyspreadconstraint-v1-core><code>[]core/v1.TopologySpreadConstraint</code></a></td><td><p>此字段针对未定义 <code>.spec.topologySpreadConstraints</code> 的 Pod，
为其提供拓扑分布约束。<code>.defaultConstraints[&#8727;].labelSelectors</code>必须为空，
因为这一信息要从 Pod 所属的 Service、ReplicationController、ReplicaSet 或 StatefulSet 来推导。
此字段不为空时，<code>.defaultingType</code> 必须为 "List"。</p></td></tr><tr><td><code>defaultingType</code><br><a href=#kubescheduler-config-k8s-io-v1beta3-PodTopologySpreadConstraintsDefaulting><code>PodTopologySpreadConstraintsDefaulting</code></a></td><td><p><code>defaultingType</code> 决定如何推导 <code>.defaultConstraints</code>。
可选值为 "System" 或 "List"。</p><ul><li>"System"：使用 Kubernetes 定义的约束，将 Pod 分布到不同节点和可用区；</li><li>"List"：使用 <code>.defaultConstraints</code> 中定义的约束。</li></ul><p>默认值为 "System"。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-VolumeBindingArgs><code>VolumeBindingArgs</code></h2><p>VolumeBindingArgs 包含用来配置 VolumeBinding 插件的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubescheduler.config.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>VolumeBindingArgs</code></td></tr><tr><td><code>bindTimeoutSeconds</code> <b>[必需]</b><br><code>int64</code></td><td><p>此字段设置卷绑定操作的超时秒数。字段值必须是非负数。
取值为 0 意味着不等待。如果此值为 null，则使用默认值（600）。</p></td></tr><tr><td><code>shape</code><br><a href=#kubescheduler-config-k8s-io-v1beta3-UtilizationShapePoint><code>[]UtilizationShapePoint</code></a></td><td><p><code>shape</code> 用来设置打分函数曲线所使用的计分点，
这些计分点用来基于静态制备的 PV 卷的利用率为节点打分。
卷的利用率是计算得来的，
将 Pod 所请求的总的存储空间大小除以每个节点上可用的总的卷容量。
每个计分点包含利用率（范围从 0 到 100）和其对应的得分（范围从 0 到 10）。
你可以通过为不同的使用率值设置不同的得分来反转优先级：</p><p>默认的曲线计分点为：</p><ol><li>利用率为 0 时得分为 0；</li><li>利用率为 100 时得分为 10。</li></ol><p>所有计分点必须按利用率值的升序来排序。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-Extender><code>Extender</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>Extender 包含与扩展模块（Extender）通信所用的参数。
如果未指定 verb 或者 verb 为空，则假定对应的扩展模块选择不提供该扩展功能。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>urlPrefix</code> <b>[必需]</b><br><code>string</code></td><td><p>用来访问扩展模块的 URL 前缀。</p></td></tr><tr><td><code>filterVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>filter 调用所使用的动词，如果不支持过滤操作则为空。
此动词会在向扩展模块发送 filter 调用时追加到 urlPrefix 后面。</p></td></tr><tr><td><code>preemptVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>preempt 调用所使用的动词，如果不支持过滤操作则为空。
此动词会在向扩展模块发送 preempt 调用时追加到 urlPrefix 后面。</p></td></tr><tr><td><code>prioritizeVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>prioritize 调用所使用的动词，如果不支持过滤操作则为空。
此动词会在向扩展模块发送 prioritize 调用时追加到 urlPrefix 后面。</p></td></tr><tr><td><code>weight</code> <b>[必需]</b><br><code>int64</code></td><td><p>针对 prioritize 调用所生成的节点分数要使用的数值系数。
weight 值必须是正整数。</p></td></tr><tr><td><code>bindVerb</code> <b>[必需]</b><br><code>string</code></td><td><p>bind 调用所使用的动词，如果不支持过滤操作则为空。
此动词会在向扩展模块发送 bind 调用时追加到 urlPrefix 后面。
如果扩展模块实现了此方法，扩展模块要负责将 Pod 绑定到 API 服务器。
只有一个扩展模块可以实现此函数。</p></td></tr><tr><td><code>enableHTTPS</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段设置是否需要使用 HTTPS 来与扩展模块通信。</p></td></tr><tr><td><code>tlsConfig</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-ExtenderTLSConfig><code>ExtenderTLSConfig</code></a></td><td><p>此字段设置传输层安全性（TLS）配置。</p></td></tr><tr><td><code>httpTimeout</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p>此字段给出扩展模块功能调用的超时值。filter 操作超时会导致 Pod 无法被调度。
prioritize 操作超时会被忽略，
Kubernetes 或者其他扩展模块所给出的优先级值会被用来选择节点。</p></td></tr><tr><td><code>nodeCacheCapable</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段指示扩展模块可以缓存节点信息，从而调度器应该发送关于可选节点的最少信息，
假定扩展模块已经缓存了集群中所有节点的全部详细信息。</p></td></tr><tr><td><code>managedResources</code><br><a href=#kubescheduler-config-k8s-io-v1beta3-ExtenderManagedResource><code>[]ExtenderManagedResource</code></a></td><td><p><code>managedResources</code> 是一个由此扩展模块所管理的扩展资源的列表。</p><ul><li>如果某 Pod 请求了此列表中的至少一个扩展资源，则 Pod 会在 filter、
prioritize 和 bind （如果扩展模块可以执行绑定操作）阶段被发送到该扩展模块。</li><li>如果某资源上设置了 <code>ignoredByScheduler</code> 为 true，则 kube-scheduler
会在断言阶段略过对该资源的检查。</li></ul></td></tr><tr><td><code>ignorable</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段用来设置扩展模块是否是可忽略的。
换言之，当扩展模块返回错误或者完全不可达时，调度操作不应失败。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-ExtenderManagedResource><code>ExtenderManagedResource</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-Extender>Extender</a></li></ul><p>ExtenderManagedResource 描述某扩展模块所管理的扩展资源的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p>扩展资源的名称。</p></td></tr><tr><td><code>ignoredByScheduler</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段标明 kube-scheduler 是否应在应用断言时忽略此资源。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-ExtenderTLSConfig><code>ExtenderTLSConfig</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-Extender>Extender</a></li></ul><p>ExtenderTLSConfig 包含启用与扩展模块间 TLS 传输所需的配置参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>insecure</code> <b>[必需]</b><br><code>bool</code></td><td><p>访问服务器时不需要检查 TLS 证书。此配置仅针对测试用途。</p></td></tr><tr><td><code>serverName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>serverName</code> 会被发送到服务器端，作为 SNI 标志；
客户端会使用此设置来检查服务器证书。
如果 <code>serverName</code> 为空，则会使用联系服务器时所用的主机名。</p></td></tr><tr><td><code>certFile</code> <b>[必需]</b><br><code>string</code></td><td><p>服务器端所要求的 TLS 客户端证书认证。</p></td></tr><tr><td><code>keyFile</code> <b>[必需]</b><br><code>string</code></td><td><p>服务器端所要求的 TLS 客户端秘钥认证。</p></td></tr><tr><td><code>caFile</code> <b>[必需]</b><br><code>string</code></td><td><p>服务器端被信任的根证书。</p></td></tr><tr><td><code>certData</code> <b>[必需]</b><br><code>[]byte</code></td><td><p><code>certData</code> 包含 PEM 编码的字节流（通常从某客户端证书文件读入）。
此字段优先级高于 certFile 字段。</p></td></tr><tr><td><code>keyData</code> <b>[必需]</b><br><code>[]byte</code></td><td><p><code>keyData</code> 包含 PEM 编码的字节流（通常从某客户端证书秘钥文件读入）。
此字段优先级高于 keyFile 字段。</p></td></tr><tr><td><code>caData</code> <b>[必需]</b><br><code>[]byte</code></td><td><p><code>caData</code> 包含 PEM 编码的字节流（通常从某根证书包文件读入）。
此字段优先级高于 caFile 字段。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-KubeSchedulerProfile><code>KubeSchedulerProfile</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>KubeSchedulerProfile 是一个调度方案。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>schedulerName</code> <b>[必需]</b><br><code>string</code></td><td><p><code>schedulerName</code> 是与此调度方案相关联的调度器的名称。
如果 <code>schedulerName</code> 与 Pod 的 <code>spec.schedulerName</code>匹配，
则该 Pod 会使用此方案来调度。</p></td></tr><tr><td><code>plugins</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-Plugins><code>Plugins</code></a></td><td><p><code>plugins</code> 设置一组应该被启用或禁止的插件。
被启用的插件是指除了默认插件之外需要被启用的插件。
被禁止的插件是指需要被禁用的默认插件。</p><p>如果针对某个扩展点没有设置被启用或被禁止的插件，
则使用该扩展点的默认插件（如果有的话）。如果设置了 QueueSort 插件，
则同一个 QueueSort 插件和 <code>pluginConfig</code> 要被设置到所有调度方案之上。</p></td></tr><tr><td><code>pluginConfig</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginConfig><code>[]PluginConfig</code></a></td><td><p><code>pluginConfig</code> 是为每个插件提供的一组可选的定制插件参数。
如果忽略了插件的配置参数，则意味着使用该插件的默认配置。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-Plugin><code>Plugin</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet>PluginSet</a></li></ul><p>Plugin 指定插件的名称及其权重（如果适用的话）。权重仅用于评分（Score）插件。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p>插件的名称。</p></td></tr><tr><td><code>weight</code> <b>[必需]</b><br><code>int32</code></td><td><p>插件的权重；仅适用于评分（Score）插件。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-PluginConfig><code>PluginConfig</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerProfile>KubeSchedulerProfile</a></li></ul><p>PluginConfig 给出初始化阶段要传递给插件的参数。
在多个扩展点被调用的插件仅会被初始化一次。
参数可以是任意结构。插件负责处理这里所传的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 是所配置的插件的名称。</p></td></tr><tr><td><code>args</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/runtime/#RawExtension><code>k8s.io/apimachinery/pkg/runtime.RawExtension</code></a></td><td><p><code>args</code> 定义在初始化阶段要传递给插件的参数。参数可以为任意结构。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-Plugins>Plugins</a></li></ul><p>PluginSet 为某扩展点设置要启用或禁用的插件。
如果数组为空，或者取值为 null，则使用该扩展点的默认插件集合。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>enabled</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-Plugin><code>[]Plugin</code></a></td><td><p><code>enabled</code> 设置在默认插件之外要启用的插件。
如果在调度器的配置文件中也配置了默认插件，则对应插件的权重会被覆盖。
此处所设置的插件会在默认插件之后被调用，调用顺序与数组中元素顺序相同。</p></td></tr><tr><td><code>disabled</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-Plugin><code>[]Plugin</code></a></td><td><p><code>disabled</code> 设置要被禁用的默认插件。
如果需要禁用所有的默认插件，应该提供仅包含一个元素 "&#8727;" 的数组。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-Plugins><code>Plugins</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerProfile>KubeSchedulerProfile</a></li></ul><p>Plugins 结构中包含多个扩展点。当此结构被设置时，
针对特定扩展点所启用的所有插件都在这一列表中。
如果配置中不包含某个扩展点，则使用该扩展点的默认插件集合。
被启用的插件的调用顺序与这里指定的顺序相同，都在默认插件之后调用。
如果它们需要在默认插件之前调用，则需要先行禁止默认插件，
之后在这里按期望的顺序重新启用。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>queueSort</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>queueSort</code> 是一个在对调度队列中 Pod 排序时要调用的插件列表。</p></td></tr><tr><td><code>preFilter</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>preFilter</code> 是一个在调度框架中"PreFilter（预过滤）"扩展点上要
调用的插件列表。</p></td></tr><tr><td><code>filter</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>filter</code> 是一个在需要过滤掉无法运行 Pod 的节点时被调用的插件列表。</p></td></tr><tr><td><code>postFilter</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>postFilter</code> 是一个在过滤阶段结束后会被调用的插件列表；
这里的插件只有在找不到合适的节点来运行 Pod 时才会被调用。</p></td></tr><tr><td><code>preScore</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>preScore</code> 是一个在打分之前要调用的插件列表。</p></td></tr><tr><td><code>score</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>score</code> 是一个在对已经通过过滤阶段的节点进行排序时调用的插件的列表。</p></td></tr><tr><td><code>reserve</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>reserve</code> 是一组在运行 Pod 的节点已被选定后，需要预留或者释放资源时调用的插件的列表。</p></td></tr><tr><td><code>permit</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>permit</code> 是一个用来控制 Pod 绑定关系的插件列表。
这些插件可以禁止或者延迟 Pod 的绑定。</p></td></tr><tr><td><code>preBind</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>preBind</code> 是一个在 Pod 被绑定到某节点之前要被调用的插件的列表。</p></td></tr><tr><td><code>bind</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>bind</code> 是一个在调度框架中"Bind（绑定）"扩展点上要调用的插件的列表。
调度器按顺序调用这些插件。只要其中某个插件返回成功，则调度器就略过余下的插件。</p></td></tr><tr><td><code>postBind</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>postBind</code> 是一个在 Pod 已经被成功绑定之后要调用的插件的列表。</p></td></tr><tr><td><code>multiPoint</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-PluginSet><code>PluginSet</code></a></td><td><p><code>multiPoint</code> 是一个简化的配置段落，用来为所有合法的扩展点启用插件。
通过 <code>multiPoint</code> 启用的插件会自动注册到插件所实现的每个独立的扩展点上。
通过 <code>multiPoint</code> 禁用的插件会禁用对应的操作行为。
通过 <code>multiPoint</code> 所禁止的 "&#8727;"
也是如此，意味着所有默认插件都不会被自动注册。
插件也可以通过各个独立的扩展点来禁用。</p><p>就优先序而言，插件配置遵从以下基本层次：</p><ol><li>特定的扩展点；</li><li>显式配置的 <code>multiPoint</code> 插件；</li><li>默认插件的集合，以及 <code>multiPoint</code> 插件。</li></ol><p>这意味着优先序较高的插件会先被运行，并且覆盖 <code>multiPoint</code> 中的任何配置。</p><p>用户显式配置的插件也会比默认插件优先序高。</p><p>在这样的层次结构设计之下，<code>enabled</code> 的优先序高于 <code>disabled</code>。
例如，某插件同时出现在 <code>multiPoint.enabled</code> 和 <code>multiPoint.disalbed</code> 时，
该插件会被启用。类似的，
同时设置 <code>multiPoint.disabled = '&#8727;'</code>和 <code>multiPoint.enabled = pluginA</code> 时，
插件 pluginA 仍然会被注册。这一设计与所有其他扩展点的配置行为是相符的。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-PodTopologySpreadConstraintsDefaulting><code>PodTopologySpreadConstraintsDefaulting</code></h2><p>（<code>string</code> 类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-PodTopologySpreadArgs>PodTopologySpreadArgs</a></li></ul><p>PodTopologySpreadConstraintsDefaulting
定义如何为 PodTopologySpread 插件设置默认的约束。</p><h2 id=kubescheduler-config-k8s-io-v1beta3-RequestedToCapacityRatioParam><code>RequestedToCapacityRatioParam</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-ScoringStrategy>ScoringStrategy</a></li></ul><p>RequestedToCapacityRatioParam 结构定义 RequestedToCapacityRatio 的参数。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>shape</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-UtilizationShapePoint><code>[]UtilizationShapePoint</code></a></td><td><p><code>shape</code> 是一个定义评分函数曲线的计分点的列表。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-ResourceSpec><code>ResourceSpec</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-NodeResourcesBalancedAllocationArgs>NodeResourcesBalancedAllocationArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-ScoringStrategy>ScoringStrategy</a></li></ul><p>ResourceSpec 用来代表某个资源。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p>资源名称。</p></td></tr><tr><td><code>weight</code> <b>[必需]</b><br><code>int64</code></td><td><p>资源权重。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-ScoringStrategy><code>ScoringStrategy</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-NodeResourcesFitArgs>NodeResourcesFitArgs</a></li></ul><p>ScoringStrategy 为节点资源插件定义 ScoringStrategyType。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>type</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-ScoringStrategyType><code>ScoringStrategyType</code></a></td><td><p><code>type</code> 用来选择要运行的策略。</p></td></tr><tr><td><code>resources</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-ResourceSpec><code>[]ResourceSpec</code></a></td><td><p><code>resources</code> 设置在评分时要考虑的资源。</p><p>默认的资源集合包含 "cpu" 和 "memory"，且二者权重相同。</p><p>权重的取值范围为 1 到 100。</p><p>当权重未设置或者显式设置为 0 时，意味着使用默认值 1。</p></td></tr><tr><td><code>requestedToCapacityRatio</code> <b>[必需]</b><br><a href=#kubescheduler-config-k8s-io-v1beta3-RequestedToCapacityRatioParam><code>RequestedToCapacityRatioParam</code></a></td><td><p>特定于 RequestedToCapacityRatio 策略的参数。</p></td></tr></tbody></table><h2 id=kubescheduler-config-k8s-io-v1beta3-ScoringStrategyType><code>ScoringStrategyType</code></h2><p>（<code>string</code> 数据类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-ScoringStrategy>ScoringStrategy</a></li></ul><p>ScoringStrategyType 是 NodeResourcesFit 插件所使用的的评分策略类型。</p><h2 id=kubescheduler-config-k8s-io-v1beta3-UtilizationShapePoint><code>UtilizationShapePoint</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta3-VolumeBindingArgs>VolumeBindingArgs</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-RequestedToCapacityRatioParam>RequestedToCapacityRatioParam</a></li></ul><p>UtilizationShapePoint 代表的是优先级函数曲线中的一个评分点。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>utilization</code> <b>[必需]</b><br><code>int32</code></td><td><p>利用率（x 轴）。合法值为 0 到 100。完全被利用的节点映射到 100。</p></td></tr><tr><td><code>score</code> <b>[必需]</b><br><code>int32</code></td><td><p>分配给指定利用率的分值（y 轴）。合法值为 0 到 10。</p></td></tr></tbody></table><h2 id=ClientConnectionConfiguration><code>ClientConnectionConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>ClientConnectionConfiguration 中包含用来构造客户端所需的细节。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>kubeconfig</code> <b>[必需]</b><br><code>string</code></td><td><p>此字段为指向 KubeConfig 文件的路径。</p></td></tr><tr><td><code>acceptContentTypes</code> <b>[必需]</b><br><code>string</code></td><td><p><code>acceptContentTypes</code> 定义的是客户端与服务器建立连接时要发送的 Accept 头部，
这里的设置值会覆盖默认值 "application/json"。此字段会影响某特定客户端与服务器的所有连接。</p></td></tr><tr><td><code>contentType</code> <b>[必需]</b><br><code>string</code></td><td><p><code>contentType</code> 包含的是此客户端向服务器发送数据时使用的内容类型（Content Type）。</p></td></tr><tr><td><code>qps</code> <b>[必需]</b><br><code>float32</code></td><td><p><code>qps</code> 控制此连接允许的每秒查询次数。</p></td></tr><tr><td><code>burst</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>burst</code> 允许在客户端超出其速率限制时可以累积的额外查询个数。</p></td></tr></tbody></table><h2 id=DebuggingConfiguration><code>DebuggingConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>DebuggingConfiguration 保存与调试功能相关的配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>enableProfiling</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段允许通过 Web 接口 host:port/debug/pprof/ 执行性能分析。</p></td></tr><tr><td><code>enableContentionProfiling</code> <b>[必需]</b><br><code>bool</code></td><td><p>此字段在 <code>enableProfiling</code> 为 true 时允许执行锁竞争分析。</p></td></tr></tbody></table><h2 id=LeaderElectionConfiguration><code>LeaderElectionConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubescheduler-config-k8s-io-v1beta2-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li><li><a href=#kubescheduler-config-k8s-io-v1beta3-KubeSchedulerConfiguration>KubeSchedulerConfiguration</a></li></ul><p>LeaderElectionConfiguration 为能够支持领导者选举的组件定义其领导者选举客户端的配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>leaderElect</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>leaderElect</code> 允许领导者选举客户端在进入主循环执行之前先获得领导者角色。
运行多副本组件时启用此功能有助于提高可用性。</p></td></tr><tr><td><code>leaseDuration</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>leaseDuration</code> 是非领导角色候选者在观察到需要领导席位更新时要等待的时间；
只有经过所设置时长才可以尝试去获得一个仍处于领导状态但需要被刷新的席位。
这里的设置值本质上意味着某个领导者在被另一个候选者替换掉之前可以停止运行的最长时长。
只有当启用了领导者选举时此字段有意义。</p></td></tr><tr><td><code>renewDeadline</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>renewDeadline</code> 设置的是当前领导者在停止扮演领导角色之前需要刷新领导状态的时间间隔。
此值必须小于或等于租约期限的长度。只有到启用了领导者选举时此字段才有意义。</p></td></tr><tr><td><code>retryPeriod</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>retryPeriod</code> 是客户端在连续两次尝试获得或者刷新领导状态之间需要等待的时长。
只有当启用了领导者选举时此字段才有意义。</p></td></tr><tr><td><code>resourceLock</code> <b>[必需]</b><br><code>string</code></td><td><p>resourceLock 给出在领导者选举期间要作为锁来使用的资源对象类型。</p></td></tr><tr><td><code>resourceName</code> <b>[必需]</b><br><code>string</code></td><td><p>resourceName 给出在领导者选举期间要作为锁来使用的资源对象名称。</p></td></tr><tr><td><code>resourceNamespace</code> <b>[必需]</b><br><code>string</code></td><td><p>resourceNamespace 给出在领导者选举期间要作为锁来使用的资源对象所在名字空间。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-81f4b8f1501e8345c99315695078a771>11 - kubeadm 配置 (v1beta2)</h1><h2>概述</h2><p>包 v1beta2 定义 kubeadm 配置文件格式的 v1beta2 版本。
此版本改进了 v1beta1 的格式，修复了一些小问题并添加了一些新的字段。</p><p>从 v1beta1 版本以来的变更列表：</p><ul><li>"certificateKey" 字段被添加到 InitConfiguration 和 JoinConfiguration 中。</li><li>"ignorePreflightErrors" 字段被添加到 NodeRegistrationOptions 中。</li><li>JSON 标签 "omitempty" 在合适的情况下被用到更多的位置。</li><li>"taints" 字段（在 NodeRegistrationOptions）的 JSON 标签 "omitempty" 被去除。</li></ul><p>参阅 Kubernetes 1.15 的变更记录以了解详细信息。</p><p>从老的 kubeadm 配置版本迁移：</p><p>请使用 kubeadm v1.15.x 的 "kubeadm config migrate" 命令将 v1beta1
版本的配置文件转换为 v1beta2。
（从更老版本的 kubeadm 配置文件迁移需要使用更老版本的 kubeadm。例如：</p><ul><li>kubeadm v1.11 版本可以用来从 v1alpha1 迁移到 v1alpha2 版本；kubeadm v1.12
可用来将 v1alpha2 转换为 v1alpha3。</li><li>kubeadm v1.13 或 v1.14 可以用来将 v1alpha3 转换为 v1beta1。</li></ul>）<p>尽管如此，kubeadm v1.15.x 会支持读取 v1beta1 版本的 kubeadm 配置文件格式。</p><h2>基础知识</h2><p>配置 kubeadm 的推荐方式是使用 <code>--config</code> 选项向其传递一个 YAML 配置文件。
kubeadm 配置文件中定义的某些配置选项也可以作为命令行标志来使用，
不过这种方法所支持的都是一些最常见的、最简单的使用场景。</p><p>一个 kubeadm 配置文件中可以包含多个配置类型，使用三根横线（<code>---</code>）作为分隔符。</p><p>kubeadm 支持以下配置类型：</p><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>InitConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>ClusterConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubelet.config.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeletConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeproxy.config.k8s.io/v1alpha1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeProxyConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>JoinConfiguration<span style=color:#bbb>
</span></pre><p>要输出 "init" 和 "join" 动作的默认值，可以使用下面的命令：</p><pre style=background-color:#fff>kubeadm config print init-defaults
kubeadm config print join-defaults
</pre><p>配置文件中必须包含的配置类型列表取决于你在执行的动作（<code>init</code> 或 <code>join</code>），
也取决于你要使用的配置选项（默认值或者高级定制）。</p><p>如果某些配置类型没有提供，或者仅部分提供，kubeadm 将使用默认值；
kubeadm 所提供的默认值在必要时也会保证其在多个组件之间是一致的
（例如控制器管理器上的 <code>--cluster-cidr</code> 参数和 kube-proxy 上的
<code>clusterCIDR</code>）。</p><p>用户总是可以重载默认配置值，唯一的例外是一小部分与安全性相关联的配置
（例如在 API 服务器上强制实施 Node 和 RBAC 鉴权模式）。</p><p>如果用户所提供的配置类型并非你所执行的操作需要的，
kubeadm 会忽略这些配置类型并打印警告信息。</p><h2>kubeadm init 配置类型</h2><p>当带有 <code>--config</code> 选项来执行 kubeadm init 命令时，可以使用下面的配置类型：
<code>InitConfiguration</code>、<code>ClusterConfiguration</code>、<code>KubeProxyConfiguration</code>、
<code>KubeletConfiguration</code>，但 <code>InitConfiguration</code> 和 <code>ClusterConfiguration</code>
之间只有一个是必须提供的。</p><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>InitConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>bootstrapTokens</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>nodeRegistration</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></pre><p>类型 InitConfiguration 用来配置运行时设置，就 kubeadm init 命令而言，
包括启动引导令牌以及所有与 kubeadm 所在节点相关的设置，包括：</p><ul><li><code>nodeRegistration</code>：其中包含与向集群注册新节点相关的字段；
使用这个类型来定制节点名称、要使用的 CRI 套接字或者其他仅对当前节点起作用的设置
（例如节点 IP 地址）。</li><li><code>apiServer</code>：代表的是要部署到此节点上的 API 服务器示例的端点；
使用这个类型可以完成定制 API 服务器公告地址这类操作。</li></ul><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>ClusterConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>networking</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>etcd</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiServer</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>...<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraVolumes</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span></pre><p>类型 <code>ClusterConfiguration</code> 用来定制集群范围的设置，具体包括以下设置：</p><ul><li><code>networking</code>：其中包含集群的网络拓扑配置。使用这一部分可以定制 Pod
的子网或者 Service 的子网。</li><li><code>etcd</code>：etcd 数据库的配置。例如使用这个部分可以定制本地 etcd 或者配置
API 服务器使用一个外部的 etcd 集群。</li><li><code>kube-apiserver</code>、<code>kube-scheduler</code>、<code>kube-controller-manager</code>
配置：这些部分可以通过添加定制的设置或者重载 kubeadm 的默认设置来定制控制面组件。</li></ul><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeproxy.config.k8s.io/v1alpha1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeProxyConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></pre><p>KubeProxyConfiguration 类型用来更改传递给在集群中部署的 kube-proxy 实例的配置。
如果此对象没有提供，或者仅部分提供，kubeadm 将使用默认值。</p><p>关于 kube-proxy 的官方文档，可参阅
https://kubernetes.io/zh-cn/docs/reference/command-line-tools-reference/kube-proxy/
或者 https://godoc.org/k8s.io/kube-proxy/config/v1alpha1#KubeProxyConfiguration。</p><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubelet.config.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeletConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></pre><p>KubeletConfiguration 类型用来更改传递给在集群中部署的 kubelet 实例的配置。
如果此对象没有提供，或者仅部分提供，kubeadm 使用默认值。</p><p>关于 kubelet 的官方文档，可参阅
https://kubernetes.io/zh-cn/docs/reference/command-line-tools-reference/kubelet/
或者
https://godoc.org/k8s.io/kubelet/config/v1beta1#KubeletConfiguration。</p><p>下面是一个为执行 <code>kubeadm init</code> 而提供的、包含多个配置类型的单一 YAML 文件，
其中填充了很多部分。</p><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>InitConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>bootstrapTokens</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#000;font-weight:700>token</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;9a08jv.c0izixklcxtmnze7&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>description</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;kubeadm bootstrap token&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>ttl</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;24h&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#000;font-weight:700>token</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;783bde.3f89s0fje9f38fhf&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>description</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;another bootstrap token&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>usages</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span>- authentication<span style=color:#bbb>
</span><span style=color:#bbb>      </span>- signing<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>groups</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span>- system:bootstrappers:kubeadm:default-node-token<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>nodeRegistration</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;ec2-10-100-0-1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>criSocket</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/var/run/dockershim.sock&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>taints</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:#000;font-weight:700>key</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;kubeadmNode&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>value</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;someValue&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>effect</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;NoSchedule&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>kubeletExtraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>v</span>:<span style=color:#bbb> </span><span style=color:#099>4</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>ignorePreflightErrors</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- IsPrivilegedUser<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>localAPIEndpoint</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>advertiseAddress</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;10.100.0.1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>bindPort</span>:<span style=color:#bbb> </span><span style=color:#099>6443</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>certificateKey</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;e6a2eb8581237ab72a4f494f30285ec12a9694d750b9785706a83bfcbbbd2204&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span>---<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>ClusterConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>etcd</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#998;font-style:italic># one of local or external</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>local</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>imageRepository</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;registry.k8s.io&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>imageTag</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;3.2.24&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>dataDir</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/var/lib/etcd&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>extraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>listen-client-urls</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;http://10.100.0.1:2379&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>serverCertSANs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span>- <span style=color:#bbb> </span><span style=color:#d14>&#34;ec2-10-100-0-1.compute-1.amazonaws.com&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>peerCertSANs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span>- <span style=color:#d14>&#34;10.100.0.1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#998;font-style:italic># external:</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#998;font-style:italic>#   endpoints:</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#998;font-style:italic>#     - &#34;10.100.0.1:2379&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#998;font-style:italic>#     - &#34;10.100.0.2:2379&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#998;font-style:italic>#   caFile: &#34;/etcd/kubernetes/pki/etcd/etcd-ca.crt&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#998;font-style:italic>#   certFile: &#34;/etcd/kubernetes/pki/etcd/etcd.crt&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#998;font-style:italic>#   keyFile: &#34;/etcd/kubernetes/pki/etcd/etcd.key&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>networking</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>serviceSubnet</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;10.96.0.0/16&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>podSubnet</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;10.244.0.0/24&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>dnsDomain</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;cluster.local&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kubernetesVersion</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;v1.12.0&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>controlPlaneEndpoint</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;10.100.0.1:6443&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiServer</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>authorization-mode</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;Node,RBAC&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraVolumes</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:#000;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;some-volume&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>hostPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>mountPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-pod-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>readOnly</span>:<span style=color:#bbb> </span><span style=color:#000;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>pathType</span>:<span style=color:#bbb> </span>File<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>certSANs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:#d14>&#34;10.100.1.1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:#d14>&#34;ec2-10-100-0-1.compute-1.amazonaws.com&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>timeoutForControlPlane</span>:<span style=color:#bbb> </span>4m0s<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>controllerManager</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>&#34;node-cidr-mask-size&#34;: </span><span style=color:#d14>&#34;20&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraVolumes</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:#000;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;some-volume&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>hostPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>mountPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-pod-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>readOnly</span>:<span style=color:#bbb> </span><span style=color:#000;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>pathType</span>:<span style=color:#bbb> </span>File<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>scheduler</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>address</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;10.100.0.1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraVolumes</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:#000;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;some-volume&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>hostPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>mountPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-pod-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>readOnly</span>:<span style=color:#bbb> </span><span style=color:#000;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>pathType</span>:<span style=color:#bbb> </span>File<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>certificatesDir</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/kubernetes/pki&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>imageRepository</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;registry.k8s.io&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>useHyperKubeImage</span>:<span style=color:#bbb> </span><span style=color:#000;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>clusterName</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;example-cluster&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span>---<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubelet.config.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeletConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#998;font-style:italic># kubelet specific options here</span><span style=color:#bbb>
</span><span style=color:#bbb></span>---<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeproxy.config.k8s.io/v1alpha1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeProxyConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#998;font-style:italic># kube-proxy specific options here</span><span style=color:#bbb>
</span></pre><h2>kubeadm join 配置类型</h2><p>当带有 <code>--config</code> 选项来执行 <code>kubeadm join</code> 操作时，
需要提供 JoinConfiguration 类型。</p><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta2<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>JoinConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></pre><p>JoinConfiguration 类型用来配置运行时设置，就 <code>kubeadm join</code>
而言包括用来访问集群信息的发现方法，以及所有特定于 kubeadm 执行所在节点的设置，
包括：</p><ul><li><code>nodeRegistration</code>：其中包含向集群注册新节点相关的配置字段；
使用这个类型可以定制节点名称、要使用的 CRI 套接字和所有其他仅适用于当前节点的设置
（例如节点 IP 地址）。</li><li><code>apiEndpoint</code>：用来代表最终要部署到此节点上的 API
服务器实例的端点。</li></ul><h2 id=resource-types>资源类型</h2><ul><li><a href=#kubeadm-k8s-io-v1beta2-ClusterConfiguration>ClusterConfiguration</a></li><li><a href=#kubeadm-k8s-io-v1beta2-ClusterStatus>ClusterStatus</a></li><li><a href=#kubeadm-k8s-io-v1beta2-InitConfiguration>InitConfiguration</a></li><li><a href=#kubeadm-k8s-io-v1beta2-JoinConfiguration>JoinConfiguration</a></li></ul><h2 id=kubeadm-k8s-io-v1beta2-ClusterConfiguration><code>ClusterConfiguration</code></h2><p>ClusterConfiguration 包含一个 kubadm 集群的集群范围配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubeadm.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>ClusterConfiguration</code></td></tr><tr><td><code>etcd</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-Etcd><code>Etcd</code></a></td><td><p><code>etcd</code> 中包含 etcd 服务的配置。</p></td></tr><tr><td><code>networking</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-Networking><code>Networking</code></a></td><td><code>networking</code> 字段包含集群的网络拓扑配置。</td></tr><tr><td><code>kubernetesVersion</code> <b>[必需]</b><br><code>string</code></td><td><p><code>kubernetesVersion</code> 设置控制面的目标版本。</p></td></tr><tr><td><code>controlPlaneEndpoint</code> <b>[必需]</b><br><code>string</code></td><td><p><code>controlPlaneEndpoint</code> 为控制面设置一个稳定的 IP 地址或 DNS 名称。
取值可以是一个合法的 IP 地址或者 RFC-1123 形式的 DNS 子域名，二者均可以带一个可选的
TCP 端口号。
如果 <code>controlPlaneEndpoint</code> 未设置，则使用 <code>advertiseAddress<code>
+ <code>bindPort</code>。
如果设置了 <code>controlPlaneEndpoint</code>，但未指定 TCP 端口号，则使用
<code>bindPort</code>。</p><p>可能的用法有：</p><ul><li>在一个包含不止一个控制面实例的集群中，
该字段应该设置为放置在控制面实例之前的外部负载均衡器的地址。</li><li>在带有强制性节点回收的环境中，<code>controlPlaneEndpoint</code>
可以用来为控制面设置一个稳定的 DNS。</li></ul></td></tr><tr><td><code>apiServer</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-APIServer><code>APIServer</code></a></td><td><p><code>apiServer</code> 包含 API 服务器的一些额外配置。</p></td></tr><tr><td><code>controllerManager</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-ControlPlaneComponent><code>ControlPlaneComponent</code></a></td><td><p><code>controllerManager</code> 中包含控制器管理器的额外配置。</p></td></tr><tr><td><code>scheduler</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-ControlPlaneComponent><code>ControlPlaneComponent</code></a></td><td><p><code>scheduler</code> 包含调度器的额外配置。</p></td></tr><tr><td><code>dns</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-DNS><code>DNS</code></a></td><td><p><code>dns</code> 定义在集群中安装的 DNS 插件的选项。</p></td></tr><tr><td><code>certificatesDir</code> <b>[必需]</b><br><code>string</code></td><td><p><code>certificatesDir</code> 设置在何处存放或者查找所需证书。</p></td></tr><tr><td><code>imageRepository</code> <b>[必需]</b><br><code>string</code></td><td><p><code>imageRepository</code> 设置用来拉取镜像的容器仓库。
如果此字段为空，默认使用 <code>registry.k8s.io</code>；
当 Kubernetes 用来执行 CI 构造时（Kubernetes 版本以 <code>ci/</code> 开头），
将默认使用 <code>gcr.io/k8s-staging-ci-images</code> 来拉取控制面组件镜像，
而使用 <code>registry.k8s.io</code> 来拉取所有其他镜像。</p></td></tr><tr><td><code>useHyperKubeImage</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>useHyperKubeImage</code> 控制是否使用 hyperkube 来作为Kubernetes
组件，而不是一个个独立的镜像。
已启用：由于 <code>hyperkube</code> 自身已被弃用，此字段也被启用。
将被从将来的 kubeadm 配置版本中移除，kubeadm 在此字段设置为 true
时会打印多个警告信息，并且在一些其他位置忽略此字段设置。</p></td></tr><tr><td><code>featureGates</code> <b>[必需]</b><br><code>map[string]bool</code></td><td><p><code>featureGates</code> 包含用户所启用的特性门控。</p></td></tr><tr><td><code>clusterName</code> <b>[必需]</b><br><code>string</code></td><td><p>集群名称。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-ClusterStatus><code>ClusterStatus</code></h2><p>ClusterStatus 包含集群信息。ClusterStatus 会被保存在集群中 kubeadm-config
ConfigMap 中，之后在新的控制面实例添加到集群或者现有控制面实例离开集群时被更新。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubeadm.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>ClusterStatus</code></td></tr><tr><td><code>apiEndpoints</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-APIEndpoint><code>map[string]github.com/tengqm/kubeconfig/config/kubeadm/v1beta2.APIEndpoint</code></a></td><td><p><code>apiEndpoints</code> 为当前集群中可用的 API 端点，每个控制面实例
（API 服务器）对应一个表项。
映射的键名为主机默认接口的 IP 地址。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-InitConfiguration><code>InitConfiguration</code></h2><p>InitConfiguration 包含一组特定于 "kubeadm init" 的运行时元素。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubeadm.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>InitConfiguration</code></td></tr><tr><td><code>bootstrapTokens</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-BootstrapToken><code>[]BootstrapToken</code></a></td><td><p><code>bootstrapTokens</code> 在 <code>kubeadm init</code> 执行时会被用到，
其中描述了一组要创建的启动引导令牌（Bootstrap Tokens）。
这里的信息不会被上传到 kubeadm 在集群中保存的 ConfigMap 中，部分原因是由于信息本身比较敏感。</p></td></tr><tr><td><code>nodeRegistration</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-NodeRegistrationOptions><code>NodeRegistrationOptions</code></a></td><td><p><code>nodeRegistration</code> 中包含与向集群中注册新的控制面节点相关的字段。</p></td></tr><tr><td><code>localAPIEndpoint</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-APIEndpoint><code>APIEndpoint</code></a></td><td><p><code>localAPIEndpoint</code> 所代表的是在此控制面节点上要部署的 API 服务器的端点。
在高可用（HA）配置中，此字段与 <code>ClusterConfiguration.controlPlaneEndpoint</code>
的取值不同：后者代表的是整个集群的全局端点，该端点上的请求会被负载均衡到每个 API 服务器。
此配置对象允许你定制本地 API 服务器所公布的、可访问的 IP/DNS 名称和端口。
默认情况下，kubeadm 会尝试自动检测默认接口上的 IP 并使用该地址。
不过，如果这种检测失败，你可以在此字段中直接设置所期望的值。</p></td></tr><tr><td><code>certificateKey</code> <b>[必需]</b><br><code>string</code></td><td><p><code>certificateKey</code> 用来设置一个秘钥，该秘钥将对 <code>uploadcerts init</code>
阶段上传到集群中某 Secret 内的秘钥和证书加密。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-JoinConfiguration><code>JoinConfiguration</code></h2><p>JoinConfiguration 包含描述特定节点的元素。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubeadm.k8s.io/v1beta2</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>JoinConfiguration</code></td></tr><tr><td><code>nodeRegistration</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-NodeRegistrationOptions><code>NodeRegistrationOptions</code></a></td><td><code>nodeRegistration</code> 包含与向集群注册控制面节点相关的字段。</td></tr><tr><td><code>caCertPath</code> <b>[必需]</b><br><code>string</code></td><td><p><code>caCertPath</code> 是指向 SSL 证书机构的路径，
该证书包用来加密节点与控制面之间的通信。默认值为
"/etc/kubernetes/pki/ca.crt"。</p></td></tr><tr><td><code>discovery</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-Discovery><code>Discovery</code></a></td><td><p><code>discovery</code> 设置 TLS 引导过程中 kubelet 要使用的选项。</p></td></tr><tr><td><code>controlPlane</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-JoinControlPlane><code>JoinControlPlane</code></a></td><td><p><code>controlPlane</code> 定义要在正被加入到集群中的节点上部署的额外控制面实例。
此字段为 null 时，不会再上面部署额外的控制面实例。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-APIEndpoint><code>APIEndpoint</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubeadm-k8s-io-v1beta2-ClusterStatus>ClusterStatus</a></p></li><li><p><a href=#kubeadm-k8s-io-v1beta2-InitConfiguration>InitConfiguration</a></p></li><li><p><a href=#kubeadm-k8s-io-v1beta2-JoinControlPlane>JoinControlPlane</a></p></li></ul><p>APIEndpoint 结构包含某节点上部署的 API 服务器的配置元素。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>advertiseAddress</code> <b>[必需]</b><br><code>string</code></td><td><p><code>advertiseAddress</code> 设置 API 服务器要公布的 IP 地址。</p></td></tr><tr><td><code>bindPort</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>bindPort</code> 设置 API 服务器要绑定到的安全端口。默认值为 6443。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-APIServer><code>APIServer</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-ClusterConfiguration>ClusterConfiguration</a></li></ul><p>APIServer 包含集群中 API 服务器部署所必需的设置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>ControlPlaneComponent</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-ControlPlaneComponent><code>ControlPlaneComponent</code></a></td><td>（<code>ControlPlaneComponent</code> 结构的字段被嵌入到此类型中）
<span class=text-muted>无描述。</span></tr><tr><td><code>certSANs</code> <b>[必需]</b><br><code>[]string</code></td><td><code>certSANs</code> 设置 API 服务器签署证书所用的额外主题替代名（Subject Alternative Name，SAN）。</td></tr><tr><td><code>timeoutForControlPlane</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>timeoutForControlPlane</code> 用来控制我们等待 API 服务器开始运行的超时时间。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-BootstrapToken><code>BootstrapToken</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-InitConfiguration>InitConfiguration</a></li></ul><p>BootstrapToken 描述的是一个启动引导令牌，以 Secret 形式存储在集群中。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>token</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-BootstrapTokenString><code>BootstrapTokenString</code></a></td><td><p><code>token</code> 用来在节点与控制面之间建立双向的信任关系。
在向集群中添加节点时使用。</p></td></tr><tr><td><code>description</code> <b>[必需]</b><br><code>string</code></td><td><p><code>description</code> 设置一个对人友好的消息，
说明为什么此令牌会存在以及其目标用途，这样其他管理员能够知道其目的。</p></td></tr><tr><td><code>ttl</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>ttl</code> 定义此令牌的声明周期。默认为 '24h'。
<code>expires</code> 和 <code>ttl</code> 是互斥的。</p></td></tr><tr><td><code>expires</code> <b>[必需]</b><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#time-v1-meta><code>meta/v1.Time</code></a></td><td><p><code>expires</code> 设置此令牌过期的时间戳。
默认为在运行时基于<code>ttl</code>来决定。
<code>expires</code>和<code>ttl</code>是互斥的。</p></td></tr><tr><td><code>usages</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>usages</code> 描述此令牌的可能使用方式。默认情况下，
令牌可用于建立双向的信任关系；不过这里可以改变默认用途。</p></td></tr><tr><td><code>groups</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>groups</code> 设定此令牌被用于身份认证时对应的附加用户组。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-BootstrapTokenDiscovery><code>BootstrapTokenDiscovery</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-Discovery>Discovery</a></li></ul><p>BootstrapTokenDiscovery 用来设置基于引导令牌的服务发现选项。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>token</code> <b>[必需]</b><br><code>string</code></td><td><p><code>token</code> 用来验证从控制面获得的集群信息。</p></td></tr><tr><td><code>apiServerEndpoint</code> <b>[必需]</b><br><code>string</code></td><td><p><code>apiServerEndpoint</code> 为 API 服务器的 IP 地址或者域名，从该端点可以获得集群信息。</p></td></tr><tr><td><code>caCertHashes</code> <b>[必需]</b><br><code>[]string</code></td><td><p>:
<code>caCertHashes</code> 设置一组在基于令牌来发现服务时要验证的公钥指纹。
发现过程中获得的根 CA 必须与这里的数值之一匹配。
设置为空集合意味着禁用根 CA 指纹，因而可能是不安全的。
每个哈希值的形式为 ":"，当前唯一支持的 type 为
"sha256"。
哈希值为主体公钥信息（Subject Public Key Info，SPKI）对象的 SHA-256
哈希值（十六进制编码），形式为 DER 编码的 ASN.1。
例如，这些哈希值可以使用 OpenSSL 来计算。</p></td></tr><tr><td><code>unsafeSkipCAVerification</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>unsafeSkipCAVerification</code> 允许在使用基于令牌的服务发现时不使用
<code>caCertHashes</code> 来执行 CA 验证。这会弱化 kubeadm 的安全性，
因为其他节点可以伪装成控制面。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-BootstrapTokenString><code>BootstrapTokenString</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-BootstrapToken>BootstrapToken</a></li></ul><p>BootstrapTokenString 形式为 'abcdef.abcdef0123456789' 的一个令牌，
用来从加入集群的节点角度验证 API 服务器的身份，或者 "kubeadm join"
在节点启动引导是作为一种身份认证方法。
此令牌的生命期是短暂的，并且应该如此。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>id</code> <b>[必需]</b><br><code>string</code></td><td><span class=text-muted>无描述</span></tr><tr><td><code>secret</code> <b>[必需]</b><br><code>string</code></td><td><span class=text-muted>无描述</span></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-ControlPlaneComponent><code>ControlPlaneComponent</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-ClusterConfiguration>ClusterConfiguration</a></li><li><a href=#kubeadm-k8s-io-v1beta2-APIServer>APIServer</a></li></ul><p>ControlPlaneComponent 中包含对集群中所有控制面组件都适用的设置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>extraArgs</code> <b>[必需]</b><br><code>map[string]string</code></td><td><p><code>extraArgs</code> 是要传递给控制面组件的一组额外的参数标志。
此映射中的每个键对应命令行上使用的标志名称，只是没有其引导连字符。</p></td></tr><tr><td><code>extraVolumes</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-HostPathMount><code>[]HostPathMount</code></a></td><td><p><code>extraVolumes</code> 是一组额外被挂载到控制面组件中的主机卷。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-DNS><code>DNS</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-ClusterConfiguration>ClusterConfiguration</a></li></ul><p>DNS 结构定义要在集群中使用的 DNS 插件。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>type</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-DNSAddOnType><code>DNSAddOnType</code></a></td><td><p><code>type</code> 定义要使用的 DNS 插件类型。</p></td></tr><tr><td><code>ImageMeta</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-ImageMeta><code>ImageMeta</code></a></td><td>（<code>ImageMeta</code> 的成员被内嵌到此类型中）。<p><code>imageMeta</code> 允许对 DNS 组件所使用的镜像作定制。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-DNSAddOnType><code>DNSAddOnType</code></h2><p>（<code>string</code> 数据类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-DNS>DNS</a></li></ul><p>DNSAddOnType 定义的是用来辨识 DNS 插件类型的字符串。</p><h2 id=kubeadm-k8s-io-v1beta2-Discovery><code>Discovery</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-JoinConfiguration>JoinConfiguration</a></li></ul><p>Discovery 设置 TLS 启动引导过程中 kubelet 要使用的配置选项。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>bootstrapToken</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-BootstrapTokenDiscovery><code>BootstrapTokenDiscovery</code></a></td><td><p><code>bootstrapToken</code> 设置基于启动引导令牌的服务发现选项。
<code>bootstrapToken</code> 与 <code>file</code> 是互斥的。</p></td></tr><tr><td><code>file</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-FileDiscovery><code>FileDiscovery</code></a></td><td><code>用来设置一个文件或者 URL 路径，指向一个 kubeconfig 文件；
该配置文件中包含集群信息。
<code>bootstrapToken</code> 与 <code>file</code> 是互斥的。</td></tr><tr><td><code>tlsBootstrapToken</code> <b>[必需]</b><br><code>string</code></td><td><p><code>tlsBootstrapToken</code> 是 TLS 启动引导过程中使用的令牌。
如果设置了 <code>bootstrapToken</code>，则此字段默认值为 <code>.bootstrapToken.token</code>，
不过可以被重载。
如果设置了 <code>file</code>，此字段<b>必须被设置</b>，以防 kubeconfig
文件中不包含其他身份认证信息。</p></td></tr><tr><td><code>timeout</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>timeout</code> 用来修改发现过程的超时时长。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-Etcd><code>Etcd</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-ClusterConfiguration>ClusterConfiguration</a></li></ul><p>Etcd 包含用来描述 etcd 配置的元素。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>local</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-LocalEtcd><code>LocalEtcd</code></a></td><td><p><code>local</code> 提供配置本地 etcd 实例的选项。<code>local</code> 和
<code>external</code> 是互斥的。</p></td></tr><tr><td><code>external</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-ExternalEtcd><code>ExternalEtcd</code></a></td><td><p><code>external</code>描述如何连接到外部的 etcd 集群。
<code>local</code>和<code>external</code>是互斥的。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-ExternalEtcd><code>ExternalEtcd</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-Etcd>Etcd</a></li></ul><p>ExternalEtcd 描述外部 etcd 集群。
kubeadm 不清楚证书文件的存放位置，因此必须单独提供证书信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>endpoints</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>endpoints</code> 包含一组 etcd 成员的列表。</p></td></tr><tr><td><code>caFile</code> <b>[必需]</b><br><code>string</code></td><td><p><code>caFile</code> 是一个 SSL 证书机构（CA）文件，用来加密 etcd 通信。
如果使用 TLS 连接，此字段为必需字段。</p></td></tr><tr><td><code>certFile</code> <b>[必需]</b><br><code>string</code></td><td><p><code>certFile</code> 是一个 SSL 证书文件，用来加密 etcd 通信。
如果使用 TLS 连接，此字段为必需字段。</p></td></tr><tr><td><code>keyFile</code> <b>[必需]</b><br><code>string</code></td><td><p><code>keyFile</code> 是一个用来加密 etcd 通信的 SSL 秘钥文件。
此字段在使用 TLS 连接时为必填字段。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-FileDiscovery><code>FileDiscovery</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-Discovery>Discovery</a></li></ul><p>FileDiscovery 用来指定一个文件或者 URL 路径，指向一个 kubeconfig 文件；
该配置文件可用来加载集群信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>kubeConfigPath</code> <b>[必需]</b><br><code>string</code></td><td><p><code>kubeConfigPath</code> 用来指定一个文件或者 URL 路径，指向一个 kubeconfig 文件；
该配置文件可用来加载集群信息。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-HostPathMount><code>HostPathMount</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-ControlPlaneComponent>ControlPlaneComponent</a></li></ul><p>HostPathMount 包含从宿主节点挂载的卷的信息。</p--><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 字段为卷在 Pod 模板中的名称。</p></td></tr><tr><td><code>hostPath</code> <b>[必需]</b><br><code>string</code></td><td><p><code>hostPath</code> 是要在 Pod 中挂载的卷在宿主系统上的路径。</p></td></tr><tr><td><code>mountPath</code> <b>[必需]</b><br><code>string</code></td><td><p><code>mountPath</code> 是 hostPath 在 Pod 内挂载的路径。</p></td></tr><tr><td><code>readOnly</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>readOnly</code> 控制卷的读写访问模式。</p></td></tr><tr><td><code>pathType</code> <b>[必需]</b><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#hostpathtype-v1-core><code>core/v1.HostPathType</code></a></td><td><p><code>pathType</code> 是 hostPath 的类型。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-ImageMeta><code>ImageMeta</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubeadm-k8s-io-v1beta2-DNS>DNS</a></p></li><li><p><a href=#kubeadm-k8s-io-v1beta2-LocalEtcd>LocalEtcd</a></p></li></ul><p>ImageMeta 用来配置来源不是 Kubernetes/kubernetes
发布过程的组件所使用的镜像。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>imageRepository</code> <b>[必需]</b><br><code>string</code></td><td><p><code>imageRepository</code> 设置镜像拉取所用的容器仓库。
若未设置，则使用 ClusterConfiguration 中的 <code>imageRepository</code>。</p></td></tr><tr><td><code>imageTag</code> <b>[必需]</b><br><code>string</code></td><td><p><code>imageTag</code> 允许用户设置镜像的标签。
如果设置了此字段，则 kubeadm 不再在集群升级时自动更改组件的版本。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-JoinControlPlane><code>JoinControlPlane</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-JoinConfiguration>JoinConfiguration</a></li></ul><p>JoinControlPlane 包含在正在加入集群的节点上要部署的额外的控制面组件的设置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>localAPIEndpoint</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-APIEndpoint><code>APIEndpoint</code></a></td><td><p><code>localAPIEndpoint</code> 代表的是将在此节点上部署的 API 服务器实例的端点。</p></td></tr><tr><td><code>certificateKey</code> <b>[必需]</b><br><code>string</code></td><td><p><code>certificateKey</code> 是在添加新的控制面节点时用来解密所下载的
Secret 中的证书的秘钥。对应的加密秘钥在 InitConfiguration 结构中。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-LocalEtcd><code>LocalEtcd</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-Etcd>Etcd</a></li></ul><p>LocalEtcd 描述的是 kubeadm 要使用的本地 etcd 集群。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>ImageMeta</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta2-ImageMeta><code>ImageMeta</code></a></td><td>（<code>ImageMeta</code> 结构的字段被嵌入到此类型中。）<p>ImageMeta 允许用户为 etcd 定制要使用的容器。</p></td></tr><tr><td><code>dataDir</code> <b>[必需]</b><br><code>string</code></td><td><p><code>dataDir</code> 是 etcd 用来存放数据的目录。
默认值为 "/var/lib/etcd"。</p></td></tr><tr><td><code>extraArgs</code> <b>[必需]</b><br><code>map[string]string</code></td><td><p><code>extraArgs</code> 是为 etcd 可执行文件提供的额外参数，用于在静态
pod 中运行 etcd。映射中的每一个键对应命令行上的一个标志参数，只是去掉了前置的连字符。</p></td></tr><tr><td><code>serverCertSANs</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>serverCertSANs</code> 为 etcd 服务器的签名证书设置额外的主体替代名
（Subject Alternative Names，SAN）。</p></td></tr><tr><td><code>peerCertSANs</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>peerCertSANs</code> 为 etcd 的对等端签名证书设置额外的主体替代名
（Subject Alternative Names，SAN）。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-Networking><code>Networking</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-ClusterConfiguration>ClusterConfiguration</a></li></ul><p>Networking 中包含描述集群网络配置的元素。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>serviceSubnet</code> <b>[必需]</b><br><code>string</code></td><td><p><code>serviceSubnet</code> 是 kubernetes 服务所使用的子网。
默认值为 "10.96.0.0/12"。</p></td></tr><tr><td><code>podSubnet</code> <b>[必需]</b><br><code>string</code></td><td><p><code>podSubnet</code> 为 Pod 所使用的子网。</p></td></tr><tr><td><code>dnsDomain</code> <b>[必需]</b><br><code>string</code></td><td><p><code>dnsDomain</code> 是 kubernetes 服务所使用的 DNS 域名。
默认值为 "cluster.local"。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta2-NodeRegistrationOptions><code>NodeRegistrationOptions</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta2-InitConfiguration>InitConfiguration</a></li><li><a href=#kubeadm-k8s-io-v1beta2-JoinConfiguration>JoinConfiguration</a></li></ul><p>NodeRegistrationOptions 包含向集群中注册新的控制面或节点所需要的信息；
节点注册可能通过 "kubeadm init" 或 "kubeadm join" 完成。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 是 Node API 对象的 <code>.Metadata.Name</code> 字段值；
该 API 对象会在此 <code>kubeadm init</code> 或 <code>kubeadm join</code> 操作期间创建。
在提交给 API 服务器的 kubelet 客户端证书中，此字段也用作其 <code>CommonName</code>。
如果未指定则默认为节点的主机名。</p></td></tr><tr><td><code>criSocket</code> <b>[必需]</b><br><code>string</code></td><td><p><code>criSocket</code> 用来读取容器运行时的信息。
此信息会被以注解的方式添加到 Node API 对象之上，用于后续用途。</p></td></tr><tr><td><code>taints</code> <b>[必需]</b><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#taint-v1-core><code>[]core/v1.Taint</code></a></td><td><p><code>taints</code> 设定 Node API 对象被注册时要附带的污点。
若未设置此字段（即字段值为 null），在 <code>kubeadm init</code> 期间，默认为控制平面节点添加控制平面污点。
如果你不想污染你的控制平面节点，可以将此字段设置为空列表（即 YAML 文件中的 <code>taints: []</code>），
这个字段只用于节点注册。</p></td></tr><tr><td><code>kubeletExtraArgs</code> <b>[必需]</b><br><code>map[string]string</code></td><td><p><code>kubeletExtraArgs</code> 用来向 kubelet 传递额外参数。
这里的参数会通过 kubeadm 在运行时写入的、由 kubelet 来读取的环境文件来传递给 kubelet 命令行。
这里的设置会覆盖掉 'kubelet-config-1.X' ConfigMap 中包含的一般性的配置。
命令行标志在解析时优先级更高。
这里的设置值仅作用于 kubeadm 运行所在的节点。
映射中的每个键对应命令行中的一个标志参数，只是去掉了前置的连字符。</p></td></tr><tr><td><code>ignorePreflightErrors</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>ignorePreflightErrors</code> 提供一组在当前节点被注册时可以忽略掉的预检错误。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-675226e13e76ef189fe0156f7e52353a>12 - kubeadm 配置 (v1beta3)</h1><h2>概述</h2><p>包 v1beta3 定义 kubeadm 配置文件格式的 v1beta3 版本。
此版本改进了 v1beta2 的格式，修复了一些小问题并添加了一些新的字段。</p><p>从 v1beta2 版本以来的变更列表：</p><ul><li>已弃用的字段 "ClusterConfiguration.useHyperKubeImage" 现在被移除。
kubeadm 不再支持 hyperkube 镜像。</li><li>字段 "ClusterConfiguration.dns.type" 已经被移除，因为 CoreDNS 是 kubeadm 所支持
的唯一 DNS 服务器类型。</li><li>保存私密信息的字段现在包含了 "datapolicy" 标记（tag）。
这一标记会导致 API 结构通过 klog 打印输出时，会忽略这些字段的值。</li><li>添加了 "InitConfiguration.skipPhases", "JoinConfiguration.skipPhases"，
以允许在执行 kubeadm init/join 命令时略过某些阶段。</li><li>添加了 "InitConfiguration.nodeRegistration.imagePullPolicy" 和
"JoinConfiguration.nodeRegistration.imagePullPolicy"
以允许在 kubeadm init 和 kubeadm join 期间指定镜像拉取策略。
这两个字段的值必须是 "Always"、"Never" 或 "IfNotPresent&quot 之一。
默认值是 &quot;IfNotPresent"，也是添加此字段之前的默认行为。</li><li>添加了 "InitConfiguration.patches.directory",
"JoinConfiguration.patches.directory" 以允许用户配置一个目录，
kubeadm 将从该目录中提取组件的补丁包。</li><li>BootstrapToken* API 和相关的工具被从 "kubeadm" API 组中移出，
放到一个新的 "bootstraptoken" 组中。kubeadm API 版本 v1beta3 不再包含
BootstrapToken* 结构。</li></ul><p>从老的 kubeadm 配置版本迁移：</p><ul><li>kubeadm v1.15.x 及更新的版本可以用来从 v1beta1 迁移到 v1beta2 版本；</li><li>kubeadm v1.22.x 及更新的版本不再支持 v1beta1 和更老的 API，但可以用来
从 v1beta2 迁移到 v1beta3。</li></ul><h2>基础知识</h2><p>配置 kubeadm 的推荐方式是使用 <code>--config</code> 选项向其传递一个 YAML 配置文件。
kubeadm 配置文件中定义的某些配置选项也可以作为命令行标志来使用，不过这种
方法所支持的都是一些最常见的、最简单的使用场景。</p><p>一个 kubeadm 配置文件中可以包含多个配置类型，使用三根横线（<code>---</code>）作为分隔符。</p><p>kubeadm 支持以下配置类型：</p><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta3<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>InitConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta3<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>ClusterConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubelet.config.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeletConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeproxy.config.k8s.io/v1alpha1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeProxyConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta3<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>JoinConfiguration<span style=color:#bbb>
</span></pre><p>要输出 "init" 和 "join" 动作的默认值，可以使用下面的命令：</p><pre style=background-color:#fff>kubeadm config print init-defaults
kubeadm config print join-defaults
</pre><p>配置文件中必须包含的配置类型列表取决于你在执行的动作（<code>init</code> 或 <code>join</code>），
也取决于你要使用的配置选项（默认值或者高级定制）。</p><p>如果某些配置类型没有提供，或者仅部分提供，kubeadm 将使用默认值；
kubeadm 所提供的默认值在必要时也会保证其在多个组件之间是一致的
（例如控制器管理器上的 <code>--cluster-cidr</code> 参数和 kube-proxy 上的
<code>clusterCIDR</code>）。</p><p>用户总是可以重载默认配置值，唯一的例外是一小部分与安全性相关联的配置
（例如在 API 服务器上强制实施 Node 和 RBAC 鉴权模式）。</p><p>如果用户所提供的配置类型并非你所执行的操作需要的，kubeadm 会忽略这些配置类型
并打印警告信息。</p><h2>kubeadm init 配置类型</h2><p>当带有 <code>--config</code> 选项来执行 kubeadm init 命令时，可以使用下面的配置类型：
<code>InitConfiguration</code>、<code>ClusterConfiguration</code>、<code>KubeProxyConfiguration</code>、<code>KubeletConfiguration</code>，
但 <code>InitConfiguration</code> 和 <code>ClusterConfiguration</code>
之间只有一个是必须提供的。</p><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta3<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>InitConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>bootstrapTokens</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>nodeRegistration</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></pre><p>类型 InitConfiguration 用来配置运行时设置，就 kubeadm init 命令而言，包括
启动引导令牌以及所有与 kubeadm 所在节点相关的设置，包括：</p><ul><li>nodeRegistration：其中包含与向集群注册新节点相关的字段；使用这个类型来
定制节点名称、要使用的 CRI 套接字或者其他仅对当前节点起作用的设置
（例如节点 IP 地址）。</li><li>localAPIEndpoint：代表的是要部署到此节点上的 API 服务器示例的端点；
使用这个类型可以完成定制 API 服务器公告地址这类操作。</li></ul><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta3<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>ClusterConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>networking</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>etcd</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiServer</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>...<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraVolumes</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span></pre><p>类型 <code>ClusterConfiguration</code> 用来定制集群范围的设置，具体包括以下设置：</p><ul><li><p><code>networking</code>：其中包含集群的网络拓扑配置。使用这一部分可以定制 Pod 的
子网或者 Service 的子网。</p></li><li><p><code>etcd</code>：etcd 数据库的配置。例如使用这个部分可以定制本地 etcd 或者配置 API 服务器
使用一个外部的 etcd 集群。</p></li><li><p><code>kube-apiserver</code>、<code>kube-scheduler</code>、<code>kube-controller-manager</code>
配置：这些部分可以通过添加定制的设置或者重载 kubeadm 的默认设置来定制控制面组件。</p></li></ul><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeproxy.config.k8s.io/v1alpha1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeProxyConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></pre><p>KubeProxyConfiguration 类型用来更改传递给在集群中部署的 kube-proxy 实例
的配置。如果此对象没有提供，或者仅部分提供，kubeadm 使用默认值。</p><p>关于 kube-proxy 的官方文档，可参阅
https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kube-proxy/
或者 https://godoc.org/k8s.io/kube-proxy/config/v1alpha1#KubeProxyConfiguration。</p><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubelet.config.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeletConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></pre><p>KubeletConfiguration 类型用来更改传递给在集群中部署的 kubelet 实例的配置。
如果此对象没有提供，或者仅部分提供，kubeadm 使用默认值。</p><p>关于 kubelet 的官方文档，可参阅
https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kubelet/
或者
https://godoc.org/k8s.io/kubelet/config/v1beta1#KubeletConfiguration。</p><p>下面是一个为执行 <code>kubeadm init</code> 而提供的、包含多个配置类型的单一 YAML 文件，
其中填充了很多部分。</p><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta3<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>InitConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>bootstrapTokens</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:#000;font-weight:700>token</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;9a08jv.c0izixklcxtmnze7&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>description</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;kubeadm bootstrap token&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>ttl</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;24h&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:#000;font-weight:700>token</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;783bde.3f89s0fje9f38fhf&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>description</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;another bootstrap token&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>usages</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- authentication<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- signing<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>groups</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- system:bootstrappers:kubeadm:default-node-token<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>nodeRegistration</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;ec2-10-100-0-1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>criSocket</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/var/run/dockershim.sock&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>taints</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#000;font-weight:700>key</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;kubeadmNode&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>value</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;someValue&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>effect</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;NoSchedule&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>kubeletExtraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>v</span>:<span style=color:#bbb> </span><span style=color:#099>4</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>ignorePreflightErrors</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- IsPrivilegedUser<span style=color:#bbb>
</span><span style=color:#bbb>   </span><span style=color:#000;font-weight:700>imagePullPolicy</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;IfNotPresent&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>localAPIEndpoint</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>advertiseAddress</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;10.100.0.1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>bindPort</span>:<span style=color:#bbb> </span><span style=color:#099>6443</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>certificateKey</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;e6a2eb8581237ab72a4f494f30285ec12a9694d750b9785706a83bfcbbbd2204&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>skipPhases</span>:<span style=color:#bbb>
</span><span style=color:#bbb> </span>- addon/kube-proxy<span style=color:#bbb>
</span><span style=color:#bbb></span>---<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta3<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>ClusterConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>etcd</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#998;font-style:italic># one of local or external</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>local</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>imageRepository</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;registry.k8s.io&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>imageTag</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;3.2.24&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>dataDir</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/var/lib/etcd&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>extraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#000;font-weight:700>listen-client-urls</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;http://10.100.0.1:2379&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>serverCertSANs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:#bbb> </span><span style=color:#d14>&#34;ec2-10-100-0-1.compute-1.amazonaws.com&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>peerCertSANs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:#d14>&#34;10.100.0.1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#998;font-style:italic># external:</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#998;font-style:italic># endpoints:</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#998;font-style:italic># - &#34;10.100.0.1:2379&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#998;font-style:italic># - &#34;10.100.0.2:2379&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#998;font-style:italic># caFile: &#34;/etcd/kubernetes/pki/etcd/etcd-ca.crt&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#998;font-style:italic># certFile: &#34;/etcd/kubernetes/pki/etcd/etcd.crt&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#998;font-style:italic># keyFile: &#34;/etcd/kubernetes/pki/etcd/etcd.key&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>networking</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>serviceSubnet</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;10.96.0.0/16&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>podSubnet</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;10.244.0.0/24&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>dnsDomain</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;cluster.local&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kubernetesVersion</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;v1.21.0&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>controlPlaneEndpoint</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;10.100.0.1:6443&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiServer</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>authorization-mode</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;Node,RBAC&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraVolumes</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#000;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;some-volume&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>hostPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>mountPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-pod-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>readOnly</span>:<span style=color:#bbb> </span><span style=color:#000;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>pathType</span>:<span style=color:#bbb> </span>File<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>certSANs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#d14>&#34;10.100.1.1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#d14>&#34;ec2-10-100-0-1.compute-1.amazonaws.com&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>timeoutForControlPlane</span>:<span style=color:#bbb> </span>4m0s<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>controllerManager</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>&#34;node-cidr-mask-size&#34;: </span><span style=color:#d14>&#34;20&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraVolumes</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#000;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;some-volume&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>hostPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>mountPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-pod-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>readOnly</span>:<span style=color:#bbb> </span><span style=color:#000;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>pathType</span>:<span style=color:#bbb> </span>File<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>scheduler</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraArgs</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>address</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;10.100.0.1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#000;font-weight:700>extraVolumes</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#000;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;some-volume&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>hostPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>mountPath</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/some-pod-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>readOnly</span>:<span style=color:#bbb> </span><span style=color:#000;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#000;font-weight:700>pathType</span>:<span style=color:#bbb> </span>File<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>certificatesDir</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;/etc/kubernetes/pki&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>imageRepository</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;registry.k8s.io&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>clusterName</span>:<span style=color:#bbb> </span><span style=color:#d14>&#34;example-cluster&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span>---<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubelet.config.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeletConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#998;font-style:italic># kubelet specific options here</span><span style=color:#bbb>
</span><span style=color:#bbb></span>---<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeproxy.config.k8s.io/v1alpha1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>KubeProxyConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#998;font-style:italic># kube-proxy specific options here</span><span style=color:#bbb>
</span></pre><h2>kubeadm join 配置类型</h2><p>当带有 <code>--config</code> 选项来执行 <code>kubeadm join</code> 操作时，
需要提供 JoinConfiguration 类型。</p><pre style=background-color:#fff><span style=color:#000;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>kubeadm.k8s.io/v1beta3<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#000;font-weight:700>kind</span>:<span style=color:#bbb> </span>JoinConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></pre><p>JoinConfiguration 类型用来配置运行时设置，就 <code>kubeadm join</code> 而言包括
用来访问集群信息的发现方法，以及所有特定于 kubeadm 执行所在节点的设置，包括：</p><ul><li><code>nodeRegistration</code>：其中包含向集群注册新节点相关的配置字段；
使用这个类型可以定制节点名称、用使用的 CRI 套接字和所有其他仅适用于当前节点的设置
（例如节点 IP 地址）。</li><li><code>apiEndpoint</code>：用来代表最终要部署到此节点上的 API
服务器实例的端点。</li></ul><h2 id=resource-types>资源类型</h2><ul><li><a href=#kubeadm-k8s-io-v1beta3-ClusterConfiguration>ClusterConfiguration</a></li><li><a href=#kubeadm-k8s-io-v1beta3-InitConfiguration>InitConfiguration</a></li><li><a href=#kubeadm-k8s-io-v1beta3-JoinConfiguration>JoinConfiguration</a></li></ul><h2 id=kubeadm-k8s-io-v1beta3-ClusterConfiguration><code>ClusterConfiguration</code></h2><p>ClusterConfiguration 包含一个 kubadm 集群的集群范围配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubeadm.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>ClusterConfiguration</code></td></tr><tr><td><code>etcd</code><br><a href=#kubeadm-k8s-io-v1beta3-Etcd><code>Etcd</code></a></td><td><p><code>etcd</code> 中包含 etcd 服务的配置。</p></td></tr><tr><td><code>networking</code><br><a href=#kubeadm-k8s-io-v1beta3-Networking><code>Networking</code></a></td><td><p><code>networking</code> 字段包含集群的网络拓扑配置。</p></td></tr><tr><td><code>kubernetesVersion</code><br><code>string</code></td><td><p><code>kubernetesVersion</code> 设置控制面的目标版本。</p></td></tr><tr><td><code>controlPlaneEndpoint</code><br><code>string</code></td><td><p><code>controlPlaneEndpoint</code> 为控制面设置一个稳定的 IP 地址或 DNS 名称。
取值可以是一个合法的 IP 地址或者 RFC-1123 形式的 DNS 子域名，二者均可以带一个
可选的 TCP 端口号。
如果 <code>controlPlaneEndpoint</code> 未设置，则使用 <code>advertiseAddress<code>
+ <code>bindPort</code>。
如果设置了 <code>controlPlaneEndpoint</code>，但未指定 TCP 端口号，则使用
<code>bindPort</code>。</p><p>可能的用法有：</p><ul><li>在一个包含不止一个控制面实例的集群中，该字段应该设置为放置在控制面
实例之前的外部负载均衡器的地址。</li><li>在带有强制性节点回收的环境中，<code>controlPlaneEndpoint</code> 可以用来
为控制面设置一个稳定的 DNS。</li></ul></td></tr><tr><td><code>apiServer</code><br><a href=#kubeadm-k8s-io-v1beta3-APIServer><code>APIServer</code></a></td><td><p><code>apiServer</code> 包含 API 服务器的一些额外配置。</p></td></tr><tr><td><code>controllerManager</code><br><a href=#kubeadm-k8s-io-v1beta3-ControlPlaneComponent><code>ControlPlaneComponent</code></a></td><td><p><code>controllerManager</code> 中包含控制器管理器的额外配置。</p></td></tr><tr><td><code>scheduler</code><br><a href=#kubeadm-k8s-io-v1beta3-ControlPlaneComponent><code>ControlPlaneComponent</code></a></td><td><p><code>scheduler</code> 包含调度器的额外配置。</p></td></tr><tr><td><code>dns</code><br><a href=#kubeadm-k8s-io-v1beta3-DNS><code>DNS</code></a></td><td><p><code>dns</code> 定义在集群中安装的 DNS 插件的选项。</p></td></tr><tr><td><code>certificatesDir</code><br><code>string</code></td><td><p><code>certificatesDir</code> 设置在何处存放或者查找所需证书。</p></td></tr><tr><td><code>imageRepository</code><br><code>string</code></td><td><p><code>imageRepository</code> 设置用来拉取镜像的容器仓库。
如果此字段为空，默认使用 <code>registry.k8s.io</code>。
当 Kubernetes 用来执行 CI 构造时（Kubernetes 版本以 <code>ci/</code> 开头），
将默认使用 <code>gcr.io/k8s-staging-ci-images</code> 来拉取控制面组件镜像，
而使用 <code>registry.k8s.io</code> 来拉取所有其他镜像。</p></td></tr><tr><td><code>featureGates</code><br><code>map[string]bool</code></td><td><p><code>featureGates</code> 包含用户所启用的特性门控。</p></td></tr><tr><td><code>clusterName</code><br><code>string</code></td><td><p>集群名称。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-InitConfiguration><code>InitConfiguration</code></h2><p>InitConfiguration 包含一组特定于 "kubeadm init" 的运行时元素。
这里的字段仅用于第一次运行 <code>kubeadm init</code> 命令。
之后，此结构中的字段信息不会再被上传到 <code>kubeadm upgrade</code> 所要使用的
<code>kubeadm-config</code> ConfigMap 中。
这些字段必须设置 "omitempty"</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubeadm.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>InitConfiguration</code></td></tr><tr><td><code>bootstrapTokens</code><br><a href=#BootstrapToken><code>[]BootstrapToken</code></a></td><td><p><code>bootstrapTokens</code> 在 <code>kubeadm init</code> 执行时会被用到，
其中描述了一组要创建的启动引导令牌（Bootstrap Tokens）。
这里的信息不会被上传到 kubeadm 在集群中保存的 ConfigMap 中，部分原因是由于信息
本身比较敏感。</p></td></tr><tr><td><code>nodeRegistration</code><br><a href=#kubeadm-k8s-io-v1beta3-NodeRegistrationOptions><code>NodeRegistrationOptions</code></a></td><td><p><code>nodeRegistration</code> 中包含与向集群中注册新的控制面节点相关的字段。</p></td></tr><tr><td><code>localAPIEndpoint</code><br><a href=#kubeadm-k8s-io-v1beta3-APIEndpoint><code>APIEndpoint</code></a></td><td><p><code>localAPIEndpoint</code> 所代表的的是在此控制面节点上要部署的 API 服务器
的端点。在高可用（HA）配置中，此字段与 <code>ClusterConfiguration.controlPlaneEndpoint</code>
的取值不同：后者代表的是整个集群的全局端点，该端点上的请求会被负载均衡到每个
API 服务器。
此配置对象允许你定制本地 API 服务器所公布的、可访问的 IP/DNS 名称和端口。
默认情况下，kubeadm 会尝试自动检测默认接口上的 IP 并使用该地址。
不过，如果这种检测失败，你可以在此字段中直接设置所期望的值。</p></td></tr><tr><td><code>certificateKey</code><br><code>string</code></td><td><p><code>certificateKey</code> 用来设置一个秘钥，该秘钥将对 <code>uploadcerts init</code>
阶段上传到集群中某 Secret 内的秘钥和证书加密。</p></td></tr><tr><td><code>skipPhases</code><br><code>[]string</code></td><td><p><code>skipPhases</code> 是命令执行过程中药略过的阶段（Phases）。
通过执行命令 <code>kubeadm init --help</code> 可以获得阶段的列表。
参数标志 "--skip-phases" 优先于此字段的设置。</p></td></tr><tr><td><code>patches</code><br><a href=#kubeadm-k8s-io-v1beta3-Patches><code>Patches</code></a></td><td><p><code>patches</code> 包含与 <code>kubeadm init</code> 阶段 kubeadm 所部署
的组件上要应用的补丁相关的信息。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-JoinConfiguration><code>JoinConfiguration</code></h2><p>JoinConfiguration 包含描述特定节点的元素。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubeadm.k8s.io/v1beta3</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>JoinConfiguration</code></td></tr><tr><td><code>nodeRegistration</code><br><a href=#kubeadm-k8s-io-v1beta3-NodeRegistrationOptions><code>NodeRegistrationOptions</code></a></td><td><p><code>nodeRegistration</code> 包含与向集群注册控制面节点相关的字段。</p></td></tr><tr><td><code>caCertPath</code><br><code>string</code></td><td><p><code>caCertPath</code> 是指向 SSL 证书机构的路径，该证书包用来加密
节点与控制面之间的通信。默认值为 "/etc/kubernetes/pki/ca.crt"。</p></td></tr><tr><td><code>discovery</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta3-Discovery><code>Discovery</code></a></td><td><p><code>discovery</code> 设置 TLS 引导过程中 kubelet 要使用的选项。</p></td></tr><tr><td><code>controlPlane</code><br><a href=#kubeadm-k8s-io-v1beta3-JoinControlPlane><code>JoinControlPlane</code></a></td><td><p><code>controlPlane</code> 定义要在正被加入到集群中的节点上部署的额外
控制面实例。此字段为 null 时，不会再上面部署额外的控制面实例。</p></td></tr><tr><td><code>skipPhases</code><br><code>[]string</code></td><td><p>此字段包含在命令执行过程中要略过的阶段。通过 <code>kubeadm join --help</code>
命令可以查看阶段的列表。参数 <code>--skip-phases</code> 优先于此字段。</p></td></tr><tr><td><code>patches</code><br><a href=#kubeadm-k8s-io-v1beta3-Patches><code>Patches</code></a></td><td><p>此字段包含 <code>kubeadm join</code> 阶段向 kubeadm 所部署的组件打补丁
的选项。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-APIEndpoint><code>APIEndpoint</code></h2><p><strong>出现在：</strong></p><ul><li><p><a href=#kubeadm-k8s-io-v1beta3-InitConfiguration>InitConfiguration</a></p></li><li><p><a href=#kubeadm-k8s-io-v1beta3-JoinControlPlane>JoinControlPlane</a></p></li></ul><p>APIEndpoint 结构包含某节点上部署的 API 服务器的配置元素。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>advertiseAddress</code><br><code>string</code></td><td><p><code>advertiseAddress</code> 设置 API 服务器要公布的 IP 地址。</p></td></tr><tr><td><code>bindPort</code><br><code>int32</code></td><td><p><code>bindPort</code> 设置 API 服务器要绑定到的安全端口。默认值为 6443。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-APIServer><code>APIServer</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-ClusterConfiguration>ClusterConfiguration</a></li></ul><p>APIServer 包含集群中 API 服务器部署所必需的设置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>ControlPlaneComponent</code> <b>[必需]-->[必需]</b><br><a href=#kubeadm-k8s-io-v1beta3-ControlPlaneComponent><code>ControlPlaneComponent</code></a></td><td>（<code>ControlPlaneComponent</code> 结构的字段被嵌入到此类型中）
<span class=text-muted>无描述.</span></td></tr><tr><td><code>certSANs</code><br><code>[]string</code></td><td><p><code>certSANs</code> 设置 API 服务器签署证书所用的额外主题替代名（Subject Alternative Name，SAN）。</p></td></tr><tr><td><code>timeoutForControlPlane</code><br><a href=https://godoc.org/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>timeoutForControlPlane</code> 用来控制我们等待 API 服务器开始运行的超时时间。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-BootstrapTokenDiscovery><code>BootstrapTokenDiscovery</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-Discovery>Discovery</a></li></ul><p>BootstrapTokenDiscovery 用来设置基于引导令牌的服务发现选项。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>token</code> <b>[必需]-->[必需]</b><br><code>string</code></td><td><p><code>token</code> 用来验证从控制面获得的集群信息。</p></td></tr><tr><td><code>apiServerEndpoint</code><br><code>string</code></td><td><p><code>apiServerEndpoint</p>为 API 服务器的 IP 地址或者域名，从该端点可以获得集群信息。</p></td></tr><tr><td><code>caCertHashes</code><br><code>[]string</code></td><td><p><code>caCertHashes</code> 设置一组在基于令牌来发现服务时要验证的公钥指纹。
发现过程中获得的根 CA 必须与这里的数值之一匹配。
设置为空集合意味着禁用根 CA 指纹，因而可能是不安全的。
每个哈希值的形式为 "&lt;type>:&lt;value>"，当前唯一支持的 type 为
"sha256"。
哈希值为主体公钥信息（Subject Public Key Info，SPKI）对象的 SHA-256
哈希值（十六进制编码），形式为 DER 编码的 ASN.1。
例如，这些哈希值可以使用 OpenSSL 来计算。</p></td></tr><tr><td><code>unsafeSkipCAVerification</code><br><code>bool</code></td><td><p><code>unsafeSkipCAVerification</code> 允许在使用基于令牌的服务发现时
不使用 <code>caCertHashes</code> 来执行 CA 验证。这会弱化 kubeadm 的安全性，
因为其他节点可以伪装成控制面。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-ControlPlaneComponent><code>ControlPlaneComponent</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-ClusterConfiguration>ClusterConfiguration</a></li><li><a href=#kubeadm-k8s-io-v1beta3-APIServer>APIServer</a></li></ul><p>ControlPlaneComponent 中包含对集群中所有控制面组件都适用的设置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>extraArgs</code><br><code>map[string]string</code></td><td><p><code>extraArgs</code> 是要传递给控制面组件的一组额外的参数标志。
此映射中的每个键对应命令行上使用的标志名称，只是没有其引导连字符。</p></td></tr><tr><td><code>extraVolumes</code><br><a href=#kubeadm-k8s-io-v1beta3-HostPathMount><code>[]HostPathMount</code></a></td><td><p><code>extraVolumes</code> 是一组额外的主机卷，需要挂载到控制面组件中。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-DNS><code>DNS</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-ClusterConfiguration>ClusterConfiguration</a></li></ul><p>DNS 结构定义要在集群中使用的 DNS 插件。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>ImageMeta</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta3-ImageMeta><code>ImageMeta</code></a></td><td>（<code>ImageMeta</code> 的成员被内嵌到此类型中）。<p><code>imageMeta</code> 允许对 DNS 组件所使用的的镜像作定制。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-Discovery><code>Discovery</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-JoinConfiguration>JoinConfiguration</a></li></ul><p>Discovery 设置 TLS 启动引导过程中 kubelet 要使用的配置选项。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>bootstrapToken</code><br><a href=#kubeadm-k8s-io-v1beta3-BootstrapTokenDiscovery><code>BootstrapTokenDiscovery</code></a></td><td><p><code>bootstrapToken</code> 设置基于启动引导令牌的服务发现选项。
<code>bootstrapToken</code> 与 <code>file</code> 是互斥的。</p></td></tr><tr><td><code>file</code><br><a href=#kubeadm-k8s-io-v1beta3-FileDiscovery><code>FileDiscovery</code></a></td><td><p><code>用来设置一个文件或者 URL 路径，指向一个 kubeconfig 文件；该配置文件
中包含集群信息。
<code>bootstrapToken</code> 与 <code>file</code> 是互斥的。</p></td></tr><tr><td><code>tlsBootstrapToken</code><br><code>string</code></td><td><p><code>tlsBootstrapToken</code> 是 TLS 启动引导过程中使用的令牌。
如果设置了 <code>bootstrapToken</code>，则此字段默认值为 <code>.bootstrapToken.token</code>，不过可以被重载。
如果设置了 <code>file</code>，此字段<b>必须被设置</b>，以防 kubeconfig 文件
中不包含其他身份认证信息。</p></td></tr><tr><td><code>timeout</code><br><a href=https://godoc.org/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>timeout</code> 用来修改发现过程的超时时长。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-Etcd><code>Etcd</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-ClusterConfiguration>ClusterConfiguration</a></li></ul><p>Etcd 包含用来描述 etcd 配置的元素。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>local</code><br><a href=#kubeadm-k8s-io-v1beta3-LocalEtcd><code>LocalEtcd</code></a></td><td><p><code>local</code> 提供配置本地 etcd 实例的选项。<code>local</code> 和
<code>external</code> 是互斥的。</p></td></tr><tr><td><code>external</code><br><a href=#kubeadm-k8s-io-v1beta3-ExternalEtcd><code>ExternalEtcd</code></a></td><td><p><code>external</code> 描述如何连接到外部的 etcd 集群。
<code>external</code> 是互斥的。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-ExternalEtcd><code>ExternalEtcd</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-Etcd>Etcd</a></li></ul><p>ExternalEtcd 描述外部 etcd 集群。
kubeadm 不清楚证书文件的存放位置，因此必须单独提供证书信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>endpoints</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>endpoints</code> 包含一组 etcd 成员的列表。</p></td></tr><tr><td><code>caFile</code> <b>[必需]</b><br><code>string</code></td><td><p><code>caFile</code> 是一个 SSL 证书机构（CA）文件，用来加密 etcd 通信。
如果使用 TLS 连接，此字段为必需字段。</p></td></tr><tr><td><code>certFile</code> <b>[必需]</b><br><code>string</code></td><td><p><code>certFile</code> 是一个 SSL 证书文件，用来加密 etcd 通信。
如果使用 TLS 连接，此字段为必需字段。</p></td></tr><tr><td><code>keyFile</code> <b>[必需]</b><br><code>string</code></td><td><p><code>keyFile</code> 是一个用来加密 etcd 通信的 SSL 秘钥文件。
此字段在使用 TLS 连接时为必填字段。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-FileDiscovery><code>FileDiscovery</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-Discovery>Discovery</a></li></ul><p>FileDiscovery 用来指定一个文件或者 URL 路径，指向一个 kubeconfig 文件；该配置文件
可用来加载集群信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>kubeConfigPath</code> <b>[必需]</b><br><code>string</code></td><td><p><code>kubeConfigPath</code> 用来指定一个文件或者 URL 路径，指向一个 kubeconfig 文件；
该配置文件可用来加载集群信息。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-HostPathMount><code>HostPathMount</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-ControlPlaneComponent>ControlPlaneComponent</a></li></ul><p>HostPathMount 包含从宿主节点挂载的卷的信息。</p--><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 为卷在 Pod 模板中的名称。</p></td></tr><tr><td><code>hostPath</code> <b>[必需]</b><br><code>string</code></td><td><p><code>hostPath</code> 是要在 Pod 中挂载的卷在宿主系统上的路径。</p></td></tr><tr><td><code>mountPath</code> <b>[必需]</b><br><code>string</code></td><td><p><code>mountPath</code> 是 <code>hostPath</code> 在 Pod 内挂载的路径。</p></td></tr><tr><td><code>readOnly</code><br><code>bool</code></td><td><p><code>readOnly</code> 控制卷的读写访问模式。</p></td></tr><tr><td><code>pathType</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#hostpathtype-v1-core><code>core/v1.HostPathType</code></a></td><td><p><code>pathType</code> 是 <code>hostPath</code> 的类型。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-ImageMeta><code>ImageMeta</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-DNS>DNS</a></li><li><a href=#kubeadm-k8s-io-v1beta3-LocalEtcd>LocalEtcd</a></li></ul><p>ImageMeta 用来配置来源不是 Kubernetes/kubernetes
发布过程的组件所使用的镜像。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>imageRepository</code><br><code>string</code></td><td><p><code>imageRepository</code> 设置镜像拉取所用的容器仓库。
若未设置，则使用 ClusterConfiguration 中的 <code>imageRepository</code>。</p></td></tr><tr><td><code>imageTag</code><br><code>string</code></td><td><p><code>imageTag</code> 允许用户设置镜像的标签。
如果设置了此字段，则 kubeadm 不再在集群升级时自动更改组件的版本。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-JoinControlPlane><code>JoinControlPlane</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-JoinConfiguration>JoinConfiguration</a></li></ul><p>JoinControlPlane 包含在正在加入集群的节点上要部署的额外的控制面组件的
设置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>localAPIEndpoint</code><br><a href=#kubeadm-k8s-io-v1beta3-APIEndpoint><code>APIEndpoint</code></a></td><td><p><code>localAPIEndpoint</code> 代表的是将在此节点上部署的 API 服务器实例
的端点。</p></td></tr><tr><td><code>certificateKey</code><br><code>string</code></td><td><p><code>certificateKey</code> 是在添加新的控制面节点时用来解密所下载的
Secret 中的证书的秘钥。对应的加密秘钥在 InitConfiguration 结构中。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-LocalEtcd><code>LocalEtcd</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-Etcd>Etcd</a></li></ul><p>LocalEtcd 描述的是 kubeadm 要使用的本地 etcd 集群。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>ImageMeta</code> <b>[必需]</b><br><a href=#kubeadm-k8s-io-v1beta3-ImageMeta><code>ImageMeta</code></a></td><td>（<code>ImageMeta</code> 结构的字段被嵌入到此类型中。）<p>ImageMeta 允许用户为 etcd 定制要使用的容器。</p></td></tr><tr><td><code>dataDir</code> <b>[必需]</b><br><code>string</code></td><td><p><code>dataDir</code> 是 etcd 用来存放数据的目录。
默认值为 "/var/lib/etcd"。</p></td></tr><tr><td><code>extraArgs</code><br><code>map[string]string</code></td><td><p><code>extraArgs</code> 是为 etcd 可执行文件提供的额外参数，用于在静态
Pod 中运行 etcd。映射中的每一个键对应命令行上的一个标志参数，只是去掉了
前置的连字符。</p></td></tr><tr><td><code>serverCertSANs</code><br><code>[]string</code></td><td><p><code>serverCertSANs</code> 为 etcd 服务器的签名证书设置额外的
主体替代名（Subject Alternative Names，SAN）。</p></td></tr><tr><td><code>peerCertSANs</code><br><code>[]string</code></td><td><p><code>peerCertSANs</code> 为 etcd 的对等端签名证书设置额外的
主体替代名（Subject Alternative Names，SAN）。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-Networking><code>Networking</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-ClusterConfiguration>ClusterConfiguration</a></li></ul><p>Networking 中包含描述集群网络配置的元素。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>serviceSubnet</code><br><code>string</code></td><td><p><code>serviceSubnet</code> 是 Kubernetes 服务所使用的的子网。
默认值为 "10.96.0.0/12"。</p></td></tr><tr><td><code>podSubnet</code><br><code>string</code></td><td><p><code>podSubnet</code> 为 Pod 所使用的子网。</p></td></tr><tr><td><code>dnsDomain</code><br><code>string</code></td><td><p><code>dnsDomain</code> 是 Kubernetes 服务所使用的的 DNS 域名。
默认值为 "cluster.local"。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-NodeRegistrationOptions><code>NodeRegistrationOptions</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-InitConfiguration>InitConfiguration</a></li><li><a href=#kubeadm-k8s-io-v1beta3-JoinConfiguration>JoinConfiguration</a></li></ul><p>NodeRegistrationOptions 包含向集群中注册新的控制面或节点所需要的信息；
节点注册可能通过 "kubeadm init" 或 "kubeadm join" 完成。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code><br><code>string</code></td><td><p><code>name</code> 是 Node API 对象的 <code>.metadata.name</code> 字段值；
该 API 对象会在此 <code>kubeadm init</code> 或 <code>kubeadm join</code> 操作期间创建。
在提交给 API 服务器的 kubelet 客户端证书中，此字段也用作其 <code>CommonName</code>。
如果未指定则默认为节点的主机名。</p></td></tr><tr><td><code>criSocket</code><br><code>string</code></td><td><p><code>criSocket</code> 用来读取容器运行时的信息。
此信息会被以注解的方式添加到 Node API 对象至上，用于后续用途。</p></td></tr><tr><td><code>taints</code> <b>[必需]</b><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#taint-v1-core><code>[]core/v1.Taint</code></a></td><td><p><code>taints</code> 设定 Node API 对象被注册时要附带的污点。
若未设置此字段（即字段值为 null），在 <code>kubeadm init</code> 期间，默认为控制平面节点添加控制平面污点。
如果你不想污染你的控制平面节点，可以将此字段设置为空列表（即 YAML 文件中的 <code>taints: []</code>），
这个字段只用于节点注册。</p></td></tr><tr><td><code>kubeletExtraArgs</code><br><code>map[string]string</code></td><td><p><code>kubeletExtraArgs</code> 用来向 kubelet 传递额外参数。
这里的参数会通过 kubeadm 在运行时写入的、由 kubelet 来读取的环境文件来
传递给 kubelet 命令行。
这里的设置会覆盖掉 'kubelet-config-1.X' ConfigMap 中包含的一般性的配置。
命令行标志在解析时优先级更高。
这里的设置值仅作用于 kubeadm 运行所在的节点。
映射中的每个键对应命令行中的一个标志参数，只是去掉了前置的连字符。</p></td></tr><tr><td><code>ignorePreflightErrors</code><br><code>[]string</code></td><td><p><code>ignorePreflightErrors</code> 提供一组在当前节点被注册时可以
忽略掉的预检错误。</p></td></tr><tr><td><code>imagePullPolicy</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#pullpolicy-v1-core><code>core/v1.PullPolicy</code></a></td><td><p><code>imagePullPolicy</code> 设定 "kubeadm init" 和 "kubeadm join"
操作期间的镜像拉取策略。此字段的取值可以是 "Always"、"IfNotPresent" 或
"Never" 之一。
若此字段未设置，则 kubeadm 使用 "IfNotPresent" 作为其默认值，换言之，
当镜像在主机上不存在时才执行拉取操作。</p></td></tr></tbody></table><h2 id=kubeadm-k8s-io-v1beta3-Patches><code>Patches</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-JoinConfiguration>JoinConfiguration</a></li></ul><p>Patches 包含要向 kubeadm 所部署的组件应用的补丁信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>directory</code><br><code>string</code></td><td><p><code>directory</code> 是指向某目录的路径，该目录中包含名为
"target[suffix][+patchtype].extension" 的文件。
例如，"kube-apiserver0+merge.yaml" 或者 "etcd.json"。
"target" 可以是 "kube-apiserver"、"kube-controller-manager"、
"kube-scheduler"、"etcd" 之一。
"patchtype" 可以是 "strategic"、"merge" 或者 "json"，
其取值对应 kubectl 所支持的补丁形式。
"patchtype" 的默认值是 "strategic"。
"extension" 必须是 "json" 或者 "yaml"。
"suffix" 是一个可选的字符串，用来确定按字母表顺序来应用时，哪个补丁最先被应用。</p></td></tr></tbody></table><h2 id=BootstrapToken><code>BootstrapToken</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubeadm-k8s-io-v1beta3-InitConfiguration>InitConfiguration</a></li></ul><p>BootstrapToken 描述的是一个启动引导令牌，以 Secret 形式存储在集群中。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>token</code> <b>[必需]</b><br><a href=#BootstrapTokenString><code>BootstrapTokenString</code></a></td><td><p><code>token</code> 用来在节点与控制面之间建立双向的信任关系。
在向集群中添加节点时使用。</p></td></tr><tr><td><code>description</code><br><code>string</code></td><td><p><code>description</code> 设置一个对人友好的消息，说明为什么此令牌
会存在以及其目标用途，这样其他管理员能够知道其目的。</p></td></tr><tr><td><code>ttl</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>ttl</code> 定义此令牌的声明周期。默认为 <code>24h</code>。
<code>expires</code> 和 <code>ttl</code> 是互斥的。</p></td></tr><tr><td><code>expires</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#time-v1-meta><code>meta/v1.Time</code></a></td><td><p><code>expires</code> 设置此令牌过期的时间戳。默认为在运行时基于
<code>ttl</code> 来决定。
<code>expires</code> 和 <code>ttl</code> 是互斥的。</p></td></tr><tr><td><code>usages</code><br><code>[]string</code></td><td><p><code>usages</code> 描述此令牌的可能使用方式。默认情况下，令牌可用于
建立双向的信任关系；不过这里可以改变默认用途。</p></td></tr><tr><td><code>groups</code><br><code>[]string</code></td><td><p><code>groups</code> 设定此令牌被用于身份认证时对应的附加用户组。</p></td></tr></tbody></table><h2 id=BootstrapTokenString><code>BootstrapTokenString</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#BootstrapToken>BootstrapToken</a></li></ul><p>BootstrapTokenString 形式为 <code>abcdef.abcdef0123456789</code> 的一个令牌，
用来从加入集群的节点角度验证 API 服务器的身份，或者 "kubeadm join"
在节点启动引导是作为一种身份认证方法。
此令牌的生命期是短暂的，并且应该如此。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>-</code> <b>[必需]</b><br><code>string</code></td><td><span class=text-muted>无描述</span></td></tr><tr><td><code>-</code> <b>[必需]</b><br><code>string</code></td><td><span class=text-muted>无描述</span></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ff8df22fdbe264eadb88465e7f7aa54a>13 - Kubelet CredentialProvider (v1alpha1)</h1><h2 id=resource-types>资源类型</h2><ul><li><a href=#credentialprovider-kubelet-k8s-io-v1alpha1-CredentialProviderRequest>CredentialProviderRequest</a></li><li><a href=#credentialprovider-kubelet-k8s-io-v1alpha1-CredentialProviderResponse>CredentialProviderResponse</a></li></ul><h2 id=credentialprovider-kubelet-k8s-io-v1alpha1-CredentialProviderRequest><code>CredentialProviderRequest</code></h2><p>CredentialProviderRequest 包含 kubelet 需要进行身份验证的镜像。
Kubelet 会通过标准输入将此请求对象传递给插件。一般来说，插件倾向于用它们所收到的相同的 apiVersion 来响应。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>credentialprovider.kubelet.k8s.io/v1alpha1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>CredentialProviderRequest</code></td></tr><tr><td><code>image</code> <b>[必需]</b><br><code>string</code></td><td><p><code>image</code> 是容器镜像，作为凭据提供程序插件请求的一部分。
插件可以有选择地解析镜像以提取获取凭据所需的任何信息。</p></td></tr></tbody></table><h2 id=credentialprovider-kubelet-k8s-io-v1alpha1-CredentialProviderResponse><code>CredentialProviderResponse</code></h2><p>CredentialProviderResponse 持有 kubelet 应用于原始请求中提供的指定镜像的凭据。
kubelet 将通过标准输出读取插件的响应。此响应的 apiVersion 值应设置为与 CredentialProviderRequest 中 apiVersion 值相同。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>credentialprovider.kubelet.k8s.io/v1alpha1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>CredentialProviderResponse</code></td></tr><tr><td><code>cacheKeyType</code> <b>[必需]</b><br><a href=#credentialprovider-kubelet-k8s-io-v1alpha1-PluginCacheKeyType><code>PluginCacheKeyType</code></a></td><td><p><code>cacheKeyType</code> 表明基于请求中所给镜像而要使用的缓存键类型。缓存键类型有三个有效值：
Image、Registry 和 Global。如果指定了无效值，则 kubelet 不会使用该响应。</p></td></tr><tr><td><code>cacheDuration</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>cacheDuration</code> 表示所提供的凭据应该被缓存的时间。kubelet 使用这个字段为
<code>auth</code> 中的凭据设置内存中数据的缓存时间。如果为空，kubelet 将使用 CredentialProviderConfig
中提供的 defaultCacheDuration。如果设置为 0，kubelet 将不会缓存所提供的 <code>auth</code> 数据。</p></td></tr><tr><td><code>auth</code><br><a href=#credentialprovider-kubelet-k8s-io-v1alpha1-AuthConfig><code>map[string]k8s.io/kubelet/pkg/apis/credentialprovider/v1alpha1.AuthConfig</code></a></td><td><p><code>auth</code> 是一个映射，其中包含传递到 kubelet 的身份验证信息。
每个键都是一个匹配镜像字符串（下面将对此进行详细介绍）。相应的 authConfig 值应该对所有与此键匹配的镜像有效。
如果不能为请求的镜像返回有效的凭据，插件应将此字段设置为 null。</p><p>映射中每个键值都是一个正则表达式，可以选择包含端口和路径。
域名部分可以包含通配符，但在端口或路径中不能使用通配符。
支持通配符作为子域，如 <code>*.k8s.io</code> 或 <code>k8s.*.io</code>，以及顶级域，如 <code>k8s.*</code>。
还支持匹配部分子域，如 <code>app*.k8s.io</code>。每个通配符只能匹配一个子域段，
因此 <code>*.io</code> 不匹配 <code>*.k8s.io</code>。</p><p>当满足以下所有条件时，kubelet 会将镜像与键值匹配：</p><ul><li>两者都包含相同数量的域部分，并且每个部分都匹配。</li><li><code>imageMatch</code> 的 URL 路径必须是目标镜像的 URL 路径的前缀。</li><li>如果 <code>imageMatch</code> 包含端口，则该端口也必须在镜像中匹配。</li></ul><p>当返回多个键（key）时，kubelet 会倒序遍历所有键，这样：</p><ul><li>具有相同前缀的较长键位于较短键之前</li><li>具有相同前缀的非通配符键位于通配符键之前。</li></ul><p>对于任何给定的匹配，kubelet 将尝试使用提供的凭据进行镜像拉取，并在第一次成功验证后停止拉取。</p><p>键值示例：</p><ul><li>123456789.dkr.ecr.us-east-1.amazonaws.com</li><li>*.azurecr.io</li><li>gcr.io</li><li><em>.</em>.registry.io</li><li>registry.io:8080/path</li></ul></td></tr></tbody></table><h2 id=credentialprovider-kubelet-k8s-io-v1alpha1-AuthConfig><code>AuthConfig</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#credentialprovider-kubelet-k8s-io-v1alpha1-CredentialProviderResponse>CredentialProviderResponse</a></li></ul><p>AuthConfig 包含容器仓库的身份验证信息。目前仅支持基于用户名/密码的身份验证，但未来可能会添加更多身份验证机制。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>username</code> <b>[必需]</b><br><code>string</code></td><td><p><code>username</code> 是用于向容器仓库进行身份验证的用户名。空的用户名是合法的。</p></td></tr><tr><td><code>password</code> <b>[必需]</b><br><code>string</code></td><td><p><code>password</code> 是用于向容器仓库进行身份验证的密码。空密码是合法的。</p></td></tr></tbody></table><h2 id=credentialprovider-kubelet-k8s-io-v1alpha1-PluginCacheKeyType><code>PluginCacheKeyType</code></h2><p>（<code>string</code> 数据类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#credentialprovider-kubelet-k8s-io-v1alpha1-CredentialProviderResponse>CredentialProviderResponse</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-68959ec750ddda035c500cdc0fddfcfa>14 - Kubelet CredentialProvider (v1beta1)</h1><h2 id=resource-types>资源类型</h2><ul><li><a href=#credentialprovider-kubelet-k8s-io-v1beta1-CredentialProviderRequest>CredentialProviderRequest</a></li><li><a href=#credentialprovider-kubelet-k8s-io-v1beta1-CredentialProviderResponse>CredentialProviderResponse</a></li></ul><h2 id=credentialprovider-kubelet-k8s-io-v1beta1-CredentialProviderRequest><code>CredentialProviderRequest</code></h2><p>CredentialProviderRequest 包含 kubelet 需要进行身份验证的镜像。
Kubelet 会通过标准输入将此请求对象传递给插件。一般来说，插件倾向于用它们所收到的相同的 apiVersion 来响应。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>credentialprovider.kubelet.k8s.io/v1beta1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>CredentialProviderRequest</code></td></tr><tr><td><code>image</code> <b>[必需]</b><br><code>string</code></td><td><p><code>image</code> 是容器镜像，作为凭据提供程序插件请求的一部分。
插件可以有选择地解析镜像以提取获取凭据所需的任何信息。</p></td></tr></tbody></table><h2 id=credentialprovider-kubelet-k8s-io-v1beta1-CredentialProviderResponse><code>CredentialProviderResponse</code></h2><p>CredentialProviderResponse 持有 kubelet 应用于原始请求中提供的指定镜像的凭据。
kubelet 将通过标准输出读取插件的响应。此响应的 apiVersion 值应设置为与 CredentialProviderRequest 中 apiVersion 值相同。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>credentialprovider.kubelet.k8s.io/v1beta1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>CredentialProviderResponse</code></td></tr><tr><td><code>cacheKeyType</code> <b>[必需]</b><br><a href=#credentialprovider-kubelet-k8s-io-v1beta1-PluginCacheKeyType><code>PluginCacheKeyType</code></a></td><td><p><code>cacheKeyType</code> 表明基于请求中所给镜像而要使用的缓存键类型。缓存键类型有三个有效值：
Image、Registry 和 Global。如果指定了无效值，则 kubelet 不会使用该响应。</p></td></tr><tr><td><code>cacheDuration</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>cacheDuration</code> 表示所提供的凭据应该被缓存的时间。kubelet 使用这个字段为
<code>auth</code> 中的凭据设置内存中数据的缓存时间。如果为空，kubelet 将使用 CredentialProviderConfig
中提供的 defaultCacheDuration。如果设置为 0，kubelet 将不会缓存所提供的 <code>auth</code> 数据。</p></td></tr><tr><td><code>auth</code><br><a href=#credentialprovider-kubelet-k8s-io-v1beta1-AuthConfig><code>map[string]k8s.io/kubelet/pkg/apis/credentialprovider/v1beta1.AuthConfig</code></a></td><td><p><code>auth</code> 是一个映射，其中包含传递到 kubelet 的身份验证信息。
每个键都是一个匹配镜像字符串（下面将对此进行详细介绍）。相应的 authConfig 值应该对所有与此键匹配的镜像有效。
如果不能为请求的镜像返回有效的凭据，插件应将此字段设置为 null。</p><p>映射中每个键值都是一个正则表达式，可以选择包含端口和路径。
域名部分可以包含通配符，但在端口或路径中不能使用通配符。
支持通配符作为子域，如 <code>*.k8s.io</code> 或 <code>k8s.*.io</code>，以及顶级域，如 <code>k8s.*</code>。
还支持匹配部分子域，如 <code>app*.k8s.io</code>。每个通配符只能匹配一个子域段，
因此 <code>*.io</code> 不匹配 <code>*.k8s.io</code>。</p><p>当满足以下所有条件时，kubelet 会将镜像与键值匹配：</p><ul><li>两者都包含相同数量的域部分，并且每个部分都匹配。</li><li><code>imageMatch</code> 的 URL 路径必须是目标镜像的 URL 路径的前缀。</li><li>如果 <code>imageMatch</code> 包含端口，则该端口也必须在镜像中匹配。</li></ul><p>当返回多个键（key）时，kubelet 会倒序遍历所有键，这样：</p><ul><li>具有相同前缀的较长键位于较短键之前</li><li>具有相同前缀的非通配符键位于通配符键之前。</li></ul><p>对于任何给定的匹配，kubelet 将尝试使用提供的凭据进行镜像拉取，并在第一次成功验证后停止拉取。</p><p>键值示例：</p><ul><li>123456789.dkr.ecr.us-east-1.amazonaws.com</li><li>*.azurecr.io</li><li>gcr.io</li><li><em>.</em>.registry.io</li><li>registry.io:8080/path</li></ul></td></tr></tbody></table><h2 id=credentialprovider-kubelet-k8s-io-v1beta1-AuthConfig><code>AuthConfig</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#credentialprovider-kubelet-k8s-io-v1beta1-CredentialProviderResponse>CredentialProviderResponse</a></li></ul><p>AuthConfig 包含容器仓库的身份验证信息。目前仅支持基于用户名/密码的身份验证，但未来可能会添加更多身份验证机制。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>username</code> <b>[必需]</b><br><code>string</code></td><td><p><code>username</code> 是用于向容器仓库进行身份验证的用户名。空的用户名是合法的。</p></td></tr><tr><td><code>password</code> <b>[必需]</b><br><code>string</code></td><td><p><code>password</code> 是用于向容器仓库进行身份验证的密码。空密码是合法的。</p></td></tr></tbody></table><h2 id=credentialprovider-kubelet-k8s-io-v1beta1-PluginCacheKeyType><code>PluginCacheKeyType</code></h2><p>（<code>string</code> 数据类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#credentialprovider-kubelet-k8s-io-v1beta1-CredentialProviderResponse>CredentialProviderResponse</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-f0a175531432662368ed2e01f663b35f>15 - Kubelet 配置 (v1alpha1)</h1><h2 id=资源类型>资源类型</h2><ul><li><a href=#kubelet-config-k8s-io-v1alpha1-CredentialProviderConfig>CredentialProviderConfig</a></li></ul><h2 id=kubelet-config-k8s-io-v1alpha1-CredentialProviderConfig><code>CredentialProviderConfig</code></h2><p>CredentialProviderConfig 包含有关每个 exec 凭据提供者的配置信息。
Kubelet 从磁盘上读取这些配置信息，并根据 CredentialProvider 类型启用各个提供者。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubelet.config.k8s.io/v1alpha1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>CredentialProviderConfig</code></td></tr><tr><td><code>providers</code> <b>[必需]</b><br><a href=#kubelet-config-k8s-io-v1alpha1-CredentialProvider><code>[]CredentialProvider</code></a></td><td><code>providers</code> 是一组凭据提供者插件，这些插件会被 kubelet 启用。
多个提供者可以匹配到同一镜像上，这时，来自所有提供者的凭据信息都会返回给 kubelet。
如果针对同一镜像调用了多个提供者，则结果会被组合起来。如果提供者返回的认证主键有重复，
列表中先出现的提供者所返回的值将被使用。</td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1alpha1-CredentialProvider><code>CredentialProvider</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1alpha1-CredentialProviderConfig>CredentialProviderConfig</a></li></ul><p>CredentialProvider 代表的是要被 kubelet 调用的一个 exec 插件。
这一插件只会在所拉取的镜像与该插件所处理的镜像匹配时才会被调用（参见 <code>matchImages</code>）。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><code>name</code> 是凭据提供者的名称（必需）。此名称必须与 kubelet
所看到的提供者可执行文件的名称匹配。可执行文件必须位于 kubelet 的
<code>bin</code> 目录（通过 <code>--image-credential-provider-bin-dir</code> 设置）下。</td></tr><tr><td><code>matchImages</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>matchImages</code> 是一个必须设置的字符串列表，用来匹配镜像以便确定是否要调用此提供者。
如果字符串之一与 kubelet 所请求的镜像匹配，则此插件会被调用并给予提供凭证的机会。
镜像应该包含镜像库域名和 URL 路径。</p><p><code>matchImages</code> 中的每个条目都是一个模式字符串，其中可以包含端口号和路径。
域名部分可以包含统配符，但端口或路径部分不可以。通配符可以用作子域名，例如
<code>*.k8s.io</code> 或 <code>k8s.*.io</code>，以及顶级域名，如 <code>k8s.*</code>。</p><p>对类似 <code>app*.k8s.io</code> 这类部分子域名的匹配也是支持的。
每个通配符只能用来匹配一个子域名段，所以 <code>*.io</code> 不会匹配 <code>*.k8s.io</code>。</p><p>镜像与 <code>matchImages</code> 之间存在匹配时，以下条件都要满足：</p><ul><li>二者均包含相同个数的域名部分，并且每个域名部分都对应匹配；</li><li><code>matchImages</code> 条目中的 URL 路径部分必须是目标镜像的 URL 路径的前缀；</li><li>如果 <code>matchImages</code> 条目中包含端口号，则端口号也必须与镜像端口号匹配。</li></ul><p><code>matchImages</code> 的一些示例如下：</p><ul><li><code>123456789.dkr.ecr.us-east-1.amazonaws.com</code></li><li><code>*.azurecr.io</code></li><li><code>gcr.io</code></li><li><code>*.*.registry.io</code></li><li><code>registry.io:8080/path</code></li></ul></td></tr><tr><td><code>defaultCacheDuration</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><code>defaultCacheDuration</code> 是插件在内存中缓存凭据的默认时长，
在插件响应中没有给出缓存时长时，使用这里设置的值。此字段是必需的。</td></tr><tr><td><code>apiVersion</code> <b>[必需]</b><br><code>string</code></td><td><p>要求 exec 插件 CredentialProviderRequest 请求的输入版本。
所返回的 CredentialProviderResponse 必须使用与输入相同的编码版本。当前支持的值有：</p><ul><li><code>credentialprovider.kubelet.k8s.io/v1alpha1</code></li></ul></td></tr><tr><td><code>args</code><br><code>[]string</code></td><td>在执行插件可执行文件时要传递给命令的参数。</td></tr><tr><td><code>env</code><br><a href=#kubelet-config-k8s-io-v1alpha1-ExecEnvVar><code>[]ExecEnvVar</code></a></td><td><code>env</code> 定义要提供给插件进程的额外的环境变量。
这些环境变量会与主机上的其他环境变量以及 client-go 所使用的环境变量组合起来，
一起传递给插件。</td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1alpha1-ExecEnvVar><code>ExecEnvVar</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1alpha1-CredentialProvider>CredentialProvider</a></li></ul><p>ExecEnvVar 用来在执行基于 exec 的凭据插件时设置环境变量。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td>环境变量名称。</td></tr><tr><td><code>value</code> <b>[必需]</b><br><code>string</code></td><td>环境变量取值。</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-aaa2b8b78fe84a05914c155652d10956>16 - Kubelet 配置 (v1beta1)</h1><h2 id=资源类型>资源类型</h2><ul><li><a href=#kubelet-config-k8s-io-v1beta1-CredentialProviderConfig>CredentialProviderConfig</a></li><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletConfiguration>KubeletConfiguration</a></li><li><a href=#kubelet-config-k8s-io-v1beta1-SerializedNodeConfigSource>SerializedNodeConfigSource</a></li></ul><h2 id=kubelet-config-k8s-io-v1beta1-CredentialProviderConfig><code>CredentialProviderConfig</code></h2><p>CredentialProviderConfig 包含有关每个 exec 凭据提供者的配置信息。
Kubelet 从磁盘上读取这些配置信息，并根据 CredentialProvider 类型启用各个提供者。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubelet.config.k8s.io/v1beta1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>CredentialProviderConfig</code></td></tr><tr><td><code>providers</code> <b>[必需]</b><br><a href=#kubelet-config-k8s-io-v1beta1-CredentialProvider><code>[]CredentialProvider</code></a></td><td><p><code>providers</code> 是一组凭据提供者插件，这些插件会被 kubelet 启用。
多个提供者可以匹配到同一镜像上，这时，来自所有提供者的凭据信息都会返回给 kubelet。
如果针对同一镜像调用了多个提供者，则结果会被组合起来。如果提供者返回的认证主键有重复，
列表中先出现的提供者所返回的值将被使用。</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-KubeletConfiguration><code>KubeletConfiguration</code></h2><p>KubeletConfiguration 中包含 Kubelet 的配置。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubelet.config.k8s.io/v1beta1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>KubeletConfiguration</code></td></tr><tr><td><code>enableServer</code> <b>[必需]</b><br><code>bool</code></td><td><p><code>enableServer</code> 会启用 kubelet 的安全服务器。</p><p>注意：kubelet 的不安全端口由 <code>readOnlyPort</code> 选项控制。</p><p>默认值：<code>true</code></p></td></tr><tr><td><code>staticPodPath</code><br><code>string</code></td><td><p><code>staticPodPath</code> 是指向要运行的本地（静态）Pod 的目录，
或者指向某个静态 Pod 文件的路径。</p><p>默认值：""</p></td></tr><tr><td><code>syncFrequency</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>syncFrequency</code> 是对运行中的容器和配置进行同步的最长周期。</p><p>默认值："1m"</p></td></tr><tr><td><code>fileCheckFrequency</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>fileCheckFrequency</code> 是对配置文件中新数据进行检查的时间间隔值。</p><p>默认值："20s"</p></td></tr><tr><td><code>httpCheckFrequency</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>httpCheckFrequency</code> 是对 HTTP 服务器上新数据进行检查的时间间隔值。</p><p>默认值："20s"</p></td></tr><tr><td><code>staticPodURL</code><br><code>string</code></td><td><p><code>staticPodURL</code> 是访问要运行的静态 Pod 的 URL 地址。<p>默认值：""</p></td></tr><tr><td><code>staticPodURLHeader</code><br><code>map[string][]string</code></td><td><p><code>staticPodURLHeader</code>是一个由字符串组成的映射表，其中包含的 HTTP
头部信息用于访问<code>podURL</code>。</p><p>默认值：nil</p></td></tr><tr><td><code>address</code><br><code>string</code></td><td><p><code>address</code> 是 kubelet 提供服务所用的 IP 地址（设置为 0.0.0.0
使用所有网络接口提供服务）。</p><p>默认值："0.0.0.0"</p></td></tr><tr><td><code>port</code><br><code>int32</code></td><td><p><code>port</code> 是 kubelet 用来提供服务所使用的端口号。
这一端口号必须介于 1 到 65535 之间，包含 1 和 65535。</p><p>默认值：10250</p></td></tr><tr><td><code>readOnlyPort</code><br><code>int32</code></td><td><p><code>readOnlyPort</code> 是 kubelet 用来提供服务所使用的只读端口号。
此端口上的服务不支持身份认证或鉴权。这一端口号必须介于 1 到 65535 之间，
包含 1 和 65535。将此字段设置为 0 会禁用只读服务。</p><p>默认值：0（禁用）</p></td></tr><tr><td><code>tlsCertFile</code><br><code>string</code></td><td><p><code>tlsCertFile</code>是包含 HTTPS 所需要的 x509 证书的文件
（如果有 CA 证书，会串接到服务器证书之后）。如果<code>tlsCertFile</code>
和<code>tlsPrivateKeyFile</code>都没有设置，则系统会为节点的公开地址生成自签名的证书和私钥，
并将其保存到 kubelet <code>--cert-dir</code>参数所指定的目录下。</p><p>默认值：""</p></td></tr><tr><td><code>tlsPrivateKeyFile</code><br><code>string</code></td><td><p><code>tlsPrivateKeyFile</code>是一个包含与<code>tlsCertFile</code>
证书匹配的 X509 私钥的文件。</p><p>默认值：""</p></td></tr><tr><td><code>tlsCipherSuites</code><br><code>[]string</code></td><td><p><code>tlsCipherSuites</code>是一个字符串列表，其中包含服务器所接受的加密包名称。
列表中的每个值来自于<code>tls</code>包中定义的常数（https://golang.org/pkg/crypto/tls/#pkg-constants）。</p><p>默认值：nil</p></td></tr><tr><td><code>tlsMinVersion</code><br><code>string</code></td><td><p><code>tlsMinVersion</code>给出所支持的最小 TLS 版本。
字段取值来自于<code>tls</code>包中的常数定义（https://golang.org/pkg/crypto/tls/#pkg-constants）。</p><p>默认值：""</p></td></tr><tr><td><code>rotateCertificates</code><br><code>bool</code></td><td><p><code>rotateCertificates</code>用来启用客户端证书轮换。kubelet 会调用
<code>certificates.k8s.io</code> API 来请求新的证书。需要有一个批复人批准证书签名请求。</p><p>默认值：false</code></td></tr><tr><td><code>serverTLSBootstrap</code><br><code>bool</code></td><td><p><code>serverTLSBootstrap</code>用来启用服务器证书引导。系统不再使用自签名的服务证书，
kubelet 会调用<code>certificates.k8s.io</code> API 来请求证书。
需要有一个批复人来批准证书签名请求（CSR）。
设置此字段时，<code>RotateKubeletServerCertificate</code>特性必须被启用。</p><p>默认值：false</p></td></tr><tr><td><code>authentication</code><br><a href=#kubelet-config-k8s-io-v1beta1-KubeletAuthentication><code>KubeletAuthentication</code></a></td><td><p><code>authorization</code>设置发送给 kubelet 服务器的请求是如何进行身份认证的。</p><p>默认值：</p><pre><code>
  anonymous:
    enabled: false
  webhook:
    enabled: true
    cacheTTL: &quot;2m&quot;
  </code></pre></td></tr><tr><td><code>authorization</code><br><a href=#kubelet-config-k8s-io-v1beta1-KubeletAuthorization><code>KubeletAuthorization</code></a></td><td><p><code>authorization</code>设置发送给 kubelet 服务器的请求是如何进行鉴权的。</p><p>默认值：</p><pre><code>
  mode: Webhook
  webhook:
    cacheAuthorizedTTL: &quot;5m&quot;
    cacheUnauthorizedTTL: &quot;30s&quot;
  </code></pre></td></tr><tr><td><code>registryPullQPS</code><br><code>int32</code></td><td><p><code>registryPullQPS</code>是每秒钟可以执行的镜像仓库拉取操作限值。
此值必须不能为负数。将其设置为 0 表示没有限值。</p><p>默认值：5</code></td></tr><tr><td><code>registryBurst</code><br><code>int32</code></td><td><p><code>registryBurst</code>是突发性镜像拉取的上限值，允许镜像拉取临时上升到所指定数量，
不过仍然不超过<code>registryPullQPS</code>所设置的约束。此值必须是非负值。
只有<code>registryPullQPS</code>参数值大于 0 时才会使用此设置。</p><p>默认值：10</p></td></tr><tr><td><code>eventRecordQPS</code><br><code>int32</code></td><td><p><code>eventRecordQPS</code>设置每秒钟可创建的事件个数上限。如果此值为 0，
则表示没有限制。此值不能设置为负数。</p><p>默认值：5</p></td></tr><tr><td><code>eventBurst</code><br><code>int32</code></td><td><p><code>eventBurst</code>是突发性事件创建的上限值，允许事件创建临时上升到所指定数量，
不过仍然不超过<code>eventRecordQPS</code>所设置的约束。此值必须是非负值，
且只有<code>eventRecordQPS</code> > 0 时才会使用此设置。</p><p>默认值：10</p></td></tr><tr><td><code>enableDebuggingHandlers</code><br><code>bool</code></td><td><p><code>enableDebuggingHandlers</code>启用服务器上用来访问日志、
在本地运行容器和命令的端点，包括<code>exec</code>、<code>attach</code>、
<code>logs</code>和<code>portforward</code>等功能。</p><p>默认值：true</p></td></tr><tr><td><code>enableContentionProfiling</code><br><code>bool</code></td><td><p><code>enableContentionProfiling</code>用于启用锁竞争性能分析，
仅用于<code>enableDebuggingHandlers</code>为<code>true</code>的场合。</p><p>默认值：false</code></td></tr><tr><td><code>healthzPort</code><br><code>int32</code></td><td><p><code>healthzPort</code>是本地主机上提供<code>healthz</code>端点的端口
（设置值为 0 时表示禁止）。合法值介于 1 和 65535 之间。</p><p>默认值：10248</p></td></tr><tr><td><code>healthzBindAddress</code><br><code>string</code></td><td><p><code>healthzBindAddress<code>是<code>healthz</code>服务器用来提供服务的 IP 地址。</p><p>默认值："127.0.0.1"</p></td></tr><tr><td><code>oomScoreAdj</code><br><code>int32</code></td><td><p><code>oomScoreAdj</code> 是为 kubelet 进程设置的<code>oom-score-adj</code>值。
所设置的取值要在 [-1000, 1000] 范围之内。</p><p>默认值：-999</p></td></tr><tr><td><code>clusterDomain</code><br><code>string</code></td><td><p><code>clusterDomain</code>是集群的 DNS 域名。如果设置了此字段，kubelet
会配置所有容器，使之在搜索主机的搜索域的同时也搜索这里指定的 DNS 域。</p><p>默认值：""</p></td></tr><tr><td><code>clusterDNS</code><br><code>[]string</code></td><td><p><code>clusterDNS</code>是集群 DNS 服务器的 IP 地址的列表。
如果设置了，kubelet 将会配置所有容器使用这里的 IP 地址而不是宿主系统上的 DNS
服务器来完成 DNS 解析。<p>默认值：nil</p></td></tr><tr><td><code>streamingConnectionIdleTimeout</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>streamingConnectionIdleTimeout</code>设置流式连接在被自动关闭之前可以空闲的最长时间。</p><p>默认值："4h"</p></td></tr><tr><td><code>nodeStatusUpdateFrequency</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>nodeStatusUpdateFrequency</code>是 kubelet 计算节点状态的频率。
如果未启用节点租约特性，这一字段设置的也是 kubelet 向控制面投递节点状态的频率。</p><p>注意：如果节点租约特性未被启用，更改此参数设置时要非常小心，
所设置的参数值必须与节点控制器的<code>nodeMonitorGracePeriod</code>协同。</p><p>默认值："10s"</p></td></tr><tr><td><code>nodeStatusReportFrequency</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>nodeStatusReportFrequency</code>是节点状态未发生变化时，kubelet
向控制面更新节点状态的频率。如果节点状态发生变化，则 kubelet 会忽略这一频率设置，
立即更新节点状态。</p><p>此字段仅当启用了节点租约特性时才被使用。<code>nodeStatusReportFrequency</code>
的默认值是"5m"。不过，如果<code>nodeStatusUpdateFrequency</code>
被显式设置了，则<code>nodeStatusReportFrequency</code>的默认值会等于
<code>nodeStatusUpdateFrequency</code>值，这是为了实现向后兼容。</p><p>默认值："5m"</p></td></tr><tr><td><code>nodeLeaseDurationSeconds</code><br><code>int32</code></td><td><p><code>nodeLeaseDurationSeconds</code>是 kubelet 会在其对应的 Lease 对象上设置的时长值。
<code>NodeLease</code>让 kubelet 来在<code>kube-node-lease</code>名字空间中创建
按节点名称命名的租约并定期执行续约操作，并通过这种机制来了解节点健康状况。</p><p>如果租约过期，则节点可被视作不健康。根据 KEP-0009 约定，目前的租约每 10 秒钟续约一次。
在将来，租约的续约时间间隔可能会根据租约的时长来设置。</p><p>此字段的取值必须大于零。</p><p>默认值：40</p></td></tr><tr><td><code>imageMinimumGCAge</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>imageMinimumGCAge</code>是对未使用镜像进行垃圾搜集之前允许其存在的时长。</p><p>默认值："2m"</p></td></tr><tr><td><code>imageGCHighThresholdPercent</code><br><code>int32</code></td><td><p><code>imageGCHighThresholdPercent</code>所给的是镜像的磁盘用量百分数，
一旦镜像用量超过此阈值，则镜像垃圾收集会一直运行。百分比是用这里的值除以 100
得到的，所以此字段取值必须介于 0 和 100 之间，包括 0 和 100。如果设置了此字段，
则取值必须大于<code>imageGCLowThresholdPercent</code>取值。</p><p>默认值：85</p></td></tr><tr><td><code>imageGCLowThresholdPercent</code><br><code>int32</code></td><td><p><code>imageGCLowThresholdPercent</code>所给的是镜像的磁盘用量百分数，
镜像用量低于此阈值时不会执行镜像垃圾收集操作。垃圾收集操作也将此作为最低磁盘用量边界。
百分比是用这里的值除以 100 得到的，所以此字段取值必须介于 0 和 100 之间，包括 0 和 100。
如果设置了此字段，则取值必须小于<code>imageGCHighThresholdPercent</code>取值。</p><p>默认值：80</p></td></tr><tr><td><code>volumeStatsAggPeriod</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>volumeStatsAggPeriod</code>是计算和缓存所有 Pod 磁盘用量的频率。</p><p>默认值："1m"</p></td></tr><tr><td><code>kubeletCgroups</code><br><code>string</code></td><td><p><code>kubeletCgroups</code>是用来隔离 kubelet 的控制组（CGroup）的绝对名称。</p><p>默认值：""</p></td></tr><tr><td><code>systemCgroups</code><br><code>string</code></td><td><p><code>systemCgroups</code>是用来放置那些未被容器化的、非内核的进程的控制组
（CGroup）的绝对名称。设置为空字符串表示没有这类容器。回滚此字段设置需要重启节点。
当此字段非空时，必须设置<code>cgroupRoot</code>字段。</p><p>默认值：""</p></td></tr><tr><td><code>cgroupRoot</code><br><code>string</code></td><td><p><code>cgroupRoot</code>是用来运行 Pod 的控制组（CGroup）。
容器运行时会尽可能处理此字段的设置值。</p></td></tr><tr><td><code>cgroupsPerQOS</code><br><code>bool</code></td><td><p><code>cgroupsPerQOS</code>用来启用基于 QoS 的控制组（CGroup）层次结构：
顶层的控制组用于不同 QoS 类，所有<code>Burstable</code>和<code>BestEffort</code> Pod
都会被放置到对应的顶级 QoS 控制组下。</p><p>默认值：true</p></td></tr><tr><td><code>cgroupDriver</code><br><code>string</code></td><td><p><code>cgroupDriver</code>是 kubelet 用来操控宿主系统上控制组（CGroup）
的驱动程序（cgroupfs 或 systemd）。</p><p>默认值："cgroupfs"</p></td></tr><tr><td><code>cpuManagerPolicy</code><br><code>string</code></td><td><p><code>cpuManagerPolicy</code>是要使用的策略名称。需要启用<code>CPUManager</code>
特性门控。</p><p>默认值："None"</p></td></tr><tr><td><code>cpuManagerPolicyOptions</code><br><code>map[string]string</code></td><td><p><code>cpuManagerPolicyOptions</code>是一组<code>key=value</code>键值映射，
容许通过额外的选项来精细调整 CPU 管理器策略的行为。需要<code>CPUManager</code>和
<code>CPUManagerPolicyOptions</code>两个特性门控都被启用。</p><p>默认值：nil</p></td></tr><tr><td><code>cpuManagerReconcilePeriod</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>cpuManagerReconcilePeriod</code>是 CPU 管理器的协调周期时长。
需要启用<code>CPUManager</code>特性门控。</p><p>默认值："10s"</p></td></tr><tr><td><code>memoryManagerPolicy</code><br><code>string</code></td><td><p><code>memoryManagerPolicy</code>是内存管理器要使用的策略的名称。
要求启用<code>MemoryManager</code>特性门控。</p><p>默认值："none"</p></td></tr><tr><td><code>topologyManagerPolicy</code><br><code>string</code></td><td><p><code>topologyManagerPolicy</code>是要使用的拓扑管理器策略名称。合法值包括：</p><ul><li><code>restricted</code>：kubelet 仅接受在所请求资源上实现最佳 NUMA 对齐的 Pod。</li><li><code>best-effort</code>：kubelet 会优选在 CPU 和设备资源上实现 NUMA 对齐的 Pod。</li><li><code>none</code>：kubelet 不了解 Pod CPU 和设备资源 NUMA 对齐需求。</li><li><code>single-numa-node</code>：kubelet 仅允许在 CPU 和设备资源上对齐到同一 NUMA 节点的 Pod。</li></ul><p>如果策略不是 "none"，则要求启用<code>TopologyManager</code>特性门控。</p><p>默认值："none"</p></td></tr><tr><td><code>topologyManagerScope</code><br><code>string</code></td><td><p><code>topologyManagerScope</code>代表的是拓扑提示生成的范围，
拓扑提示信息由提示提供者生成，提供给拓扑管理器。合法值包括：</p><ul><li><code>container</code>：拓扑策略是按每个容器来实施的。</li><li><code>pod</code>：拓扑策略是按每个 Pod 来实施的。</li></ul><p>"pod" 范围要求启用<code>TopologyManager</code>特性门控。</p><p>默认值："container"</p></td></tr><tr><td><code>qosReserved</code><br><code>map[string]string</code></td><td><p><code>qosReserved</code>是一组从资源名称到百分比值的映射，用来为<code>Guaranteed</code>
QoS 类型的负载预留供其独占使用的资源百分比。目前支持的资源为："memory"。
需要启用<code>QOSReserved</code>特性门控。</p><p>默认值：nil</p></td></tr><tr><td><code>runtimeRequestTimeout</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>runtimeRequestTimeout</code>用来设置除长期运行的请求（<code>pull</code>、
<code>logs</code>、<code>exec</code>和<code>attach</code>）之外所有运行时请求的超时时长。</p><p>默认值："2m"</p></td></tr><tr><td><code>hairpinMode</code><br><code>string</code></td><td><p><code>hairpinMode</code>设置 kubelet 如何为发夹模式数据包配置容器网桥。
设置此字段可以让 Service 中的端点在尝试访问自身 Service 时将服务请求路由的自身。
可选值有：</p><ul><li>"promiscuous-bridge"：将容器网桥设置为混杂模式。</li><li>"hairpin-veth"：在容器的 veth 接口上设置发夹模式标记。</li><li>"none"：什么也不做。</li></ul><p>一般而言，用户必须设置<code>--hairpin-mode=hairpin-veth</code>才能实现发夹模式的网络地址转译
（NAT），因为混杂模式的网桥要求存在一个名为<code>cbr0</code>的容器网桥。</p><p>默认值："promiscuous-bridge"</p></td></tr><tr><td><code>maxPods</code><br><code>int32</code></td><td><p><code>maxPods</code>是此 kubelet 上课运行的 Pod 个数上限。此值必须为非负整数。</p><p>默认值：110</p></td></tr><tr><td><code>podCIDR</code><br><code>string</code></td><td><p><code>podCIDR</code>是用来设置 Pod IP 地址的 CIDR 值，仅用于独立部署模式。
运行于集群模式时，这一数值会从控制面获得。</p><p>默认值：""</p></td></tr><tr><td><code>podPidsLimit</code><br><code>int64</code></td><td><p><code>podPidsLimit</code>是每个 Pod 中可使用的 PID 个数上限。</p><p>默认值：-1</p></td></tr><tr><td><code>resolvConf</code><br><code>string</code></td><td><p><code>resolvConf</code>是一个域名解析配置文件，用作容器 DNS 解析配置的基础。</p><p>如果此值设置为空字符串，则会覆盖 DNS 解析的默认配置，
本质上相当于禁用了 DNS 查询。</p><p>默认值："/etc/resolv.conf"</p></td></tr><tr><td><code>runOnce</code><br><code>bool</code></td><td><p><code>runOnce</code>字段被设置时，kubelet 会咨询 API 服务器一次并获得 Pod 列表，
运行在静态 Pod 文件中指定的 Pod 及这里所获得的 Pod，然后退出。</p><p>默认值：false</p></td></tr><tr><td><code>cpuCFSQuota</code><br><code>bool</code></td><td><p><code>cpuCFSQuota</code>允许为设置了 CPU 限制的容器实施 CPU CFS 配额约束。</p><p>默认值：true</p></td></tr><tr><td><code>cpuCFSQuotaPeriod</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>cpuCFSQuotaPeriod</code>设置 CPU CFS 配额周期值，<code>cpu.cfs_period_us</code>。
此值需要介于 1 微秒和 1 秒之间，包含 1 微秒和 1 秒。
此功能要求启用<code>CustomCPUCFSQuotaPeriod</code>特性门控被启用。</p><p>默认值："100ms"</p></td></tr><tr><td><code>nodeStatusMaxImages</code><br><code>int32</code></td><td><p><code>nodeStatusMaxImages</code>限制<code>Node.status.images</code>中报告的镜像数量。
此值必须大于 -2。</p><p>注意：如果设置为 -1，则不会对镜像数量做限制；如果设置为 0，则不会返回任何镜像。</p><p>默认值：50</p></td></tr><tr><td><code>maxOpenFiles</code><br><code>int64</code></td><td><p><code>maxOpenFiles</code>是 kubelet 进程可以打开的文件个数。此值必须不能为负数。</p><p>默认值：1000000</p></td></tr><tr><td><code>contentType</code><br><code>string</code></td><td><p><code>contentType</code>是向 API 服务器发送请求时使用的内容类型。</p><p>默认值："application/vnd.kubernetes.protobuf"</p></td></tr><tr><td><code>kubeAPIQPS</code><br><code>int32</code></td><td><p><code>kubeAPIQPS</code>设置与 Kubernetes API 服务器通信时要使用的 QPS（每秒查询数）。</p><p>默认值：5</p></td></tr><tr><td><code>kubeAPIBurst</code><br><code>int32</code></td><td><p><code>kubeAPIBurst</code>设置与 Kubernetes API 服务器通信时突发的流量级别。
此字段取值不可以是负数。</p><p>默认值：10</p></td></tr><tr><td><code>serializeImagePulls</code><br><code>bool</code></td><td><p><code>serializeImagePulls</code>被启用时会通知 kubelet 每次仅拉取一个镜像。
我们建议<em>不要</em>在所运行的 docker 守护进程版本低于 1.9、使用 aufs
存储后端的节点上更改默认值。详细信息可参见 Issue #10959。</p><p>默认值：true</p></td></tr><tr><td><code>evictionHard</code><br><code>map[string]string</code></td><td><p><code>evictionHard</code>是一个映射，是从信号名称到定义硬性驱逐阈值的映射。
例如：<code>{"memory.available": "300Mi"}</code>。
如果希望显式地禁用，可以在任意资源上将其阈值设置为 0% 或 100%。</p><p>默认值：</p><code><pre>
   memory.available:  &quot;100Mi&quot;
   nodefs.available:  &quot;10%&quot;
   nodefs.inodesFree: &quot;5%&quot;
   imagefs.available: &quot;15%&quot;
  </pre></code></td></tr><tr><td><code>evictionSoft</code><br><code>map[string]string</code></td><td><p><code>evictionSoft</code>是一个映射，是从信号名称到定义软性驱逐阈值的映射。
例如：<code>{"memory.available": "300Mi"}</code>。</p><p>默认值：nil</p></td></tr><tr><td><code>evictionSoftGracePeriod</code><br><code>map[string]string</code></td><td><p><code>evictionSoftGracePeriod</code>是一个映射，是从信号名称到每个软性驱逐信号的宽限期限。
例如：<code>{"memory.available": "30s"}</code>。</p><p>默认值：nil</p></td></tr><tr><td><code>evictionPressureTransitionPeriod</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>evictionPressureTransitionPeriod</code>设置 kubelet
离开驱逐压力状况之前必须要等待的时长。</p><p>默认值："5m"</p></td></tr><tr><td><code>evictionMaxPodGracePeriod</code><br><code>int32</code></td><td><p><code>evictionMaxPodGracePeriod</code>是指达到软性逐出阈值而引起 Pod 终止时，
可以赋予的宽限期限最大值（按秒计）。这个值本质上限制了软性逐出事件发生时，
Pod 可以获得的<code>terminationGracePeriodSeconds</code>。</p><p>注意：由于 Issue #64530 的原因，系统中存在一个缺陷，即此处所设置的值会在软性逐出时覆盖
Pod 的宽限期设置，从而有可能增加 Pod 上原本设置的宽限期限时长。
这个缺陷会在未来版本中修复。</p><p>默认值：0</p></td></tr><tr><td><code>evictionMinimumReclaim</code><br><code>map[string]string</code></td><td><p><code>evictionMinimumReclaim</code>是一个映射，定义信号名称与最小回收量数值之间的关系。
最小回收量指的是资源压力较大而执行 Pod 驱逐操作时，kubelet 对给定资源的最小回收量。
例如：<code>{"imagefs.available": "2Gi"}</code>。</p><p>默认值：nil</p></td></tr><tr><td><code>podsPerCore</code><br><code>int32</code></td><td><p><code>podsPerCore</code>设置的是每个核上 Pod 个数上限。此值不能超过<code>maxPods</code>。
所设值必须是非负整数。如果设置为 0，则意味着对 Pod 个数没有限制。</p><p>默认值：0</p></td></tr><tr><td><code>enableControllerAttachDetach</code><br><code>bool</code></td><td><p><code>enableControllerAttachDetach</code>用来允许 Attach/Detach
控制器管理调度到本节点的卷的挂接（attachment）和解除挂接（detachement），
并且禁止 kubelet 执行任何 attach/detach 操作。</p><p>注意：kubelet 不支持挂接 CSI 卷和解除挂接，
因此对于该用例，此选项必须为 true。</p><p>默认值：true</p></td></tr><tr><td><code>protectKernelDefaults</code><br><code>bool</code></td><td><p><code>protectKernelDefaults</code>设置为<code>true</code>时，会令 kubelet
在发现内核参数与预期不符时出错退出。若此字段设置为<code>false</code>，则 kubelet
会尝试更改内核参数以满足其预期。</p><p>默认值：false</p></td></tr><tr><td><code>makeIPTablesUtilChains</code><br><code>bool</code></td><td><p><code>makeIPTablesUtilChains</code>设置为<code>true</code>时，相当于允许 kubelet
确保一组 iptables 规则存在于宿主机上。这些规则会为不同的组件（例如 kube-proxy）
提供工具性质的规则。它们是基于<code>iptablesMasqueradeBit</code>和<code>iptablesDropBit</code>
来创建的。</p><p>默认值：true</p></td></tr><tr><td><code>iptablesMasqueradeBit</code><br><code>int32</code></td><td><p><code>iptablesMasqueradeBit</code>是 iptables fwmark 空间中用来为 SNAT
作标记的位。此值必须介于<code>[0, 31]</code>区间，必须与其他标记位不同。</p><p>警告：请确保此值设置与 kube-proxy 中对应的参数设置取值相同。</p><p>默认值：14</p></td></tr><tr><td><code>iptablesDropBit</code><br><code>int32</code></td><td><p><code>iptablesDropBit</code>是 iptables fwmark 空间中用来标记丢弃包的数据位。
此值必须介于<code>[0, 31]</code>区间，必须与其他标记位不同。</p><p>默认值：15</p></td></tr><tr><td><code>featureGates</code><br><code>map[string]bool</code></td><td><p><code>featureGates</code>是一个从功能特性名称到布尔值的映射，用来启用或禁用实验性的功能。
此字段可逐条更改文件 "k8s.io/kubernetes/pkg/features/kube_features.go"
中所给的内置默认值。</p><p>默认值：nil</p></td></tr><tr><td><code>failSwapOn</code><br><code>bool</code></td><td><p><code>failSwapOn</code>通知 kubelet 在节点上启用交换分区时拒绝启动。</p><p>默认值：true</p></td></tr><tr><td><code>memorySwap</code><br><a href=#kubelet-config-k8s-io-v1beta1-MemorySwapConfiguration><code>MemorySwapConfiguration</code></a></td><td><p><code>memorySwap</code>配置容器负载可用的交换内存。</p></td></tr><tr><td><code>containerLogMaxSize</code><br><code>string</code></td><td><p><code>containerLogMaxSize</code>是定义容器日志文件被轮转之前可以到达的最大尺寸。
例如："5Mi" 或 "256Ki"。</p><p>默认值："10Mi"</p></td></tr><tr><td><code>containerLogMaxFiles</code><br><code>int32</code></td><td><p><code>containerLogMaxFiles</code>设置每个容器可以存在的日志文件个数上限。</p><p>默认值："5"</p></td></tr><tr><td><code>configMapAndSecretChangeDetectionStrategy</code><br><a href=#kubelet-config-k8s-io-v1beta1-ResourceChangeDetectionStrategy><code>ResourceChangeDetectionStrategy</code></a></td><td><p><code>configMapAndSecretChangeDetectionStrategy</code>是 ConfigMap 和 Secret
管理器的运行模式。合法值包括：</p><ul><li><code>Get</code>：kubelet 从 API 服务器直接取回必要的对象；</li><li><code>Cache</code>：kubelet 使用 TTL 缓存来管理来自 API 服务器的对象；</li><li><code>Watch</code>：kubelet 使用 watch 操作来观察所关心的对象的变更。</li></ul><p>默认值："Watch"</p></td></tr><tr><td><code>systemReserved</code><br><code>map[string]string</code></td><td><p><code>systemReserved</code>是一组<code>资源名称=资源数量</code>对，
用来描述为非 Kubernetes 组件预留的资源（例如：'cpu=200m,memory=150G'）。</p><p>目前仅支持 CPU 和内存。更多细节可参见
https://kubernetes.io/zh-cn/docs/concepts/configuration/manage-resources-containers/ 。</p><p>默认值：Nil</p></td></tr><tr><td><code>kubeReserved</code><br><code>map[string]string</code></td><td><p><code>kubeReserved</code>是一组<code>资源名称=资源数量</code>对，
用来描述为 Kubernetes 系统组件预留的资源（例如：'cpu=200m,memory=150G'）。
目前支持 CPU、内存和根文件系统的本地存储。
更多细节可参见 https://kubernetes.io/zh/docs/concepts/configuration/manage-resources-containers/。</p><p>默认值：Nil</p></td></tr><tr><td><code>reservedSystemCPUs</code> <b>[必需]</b><br><code>string</code></td><td><p><code>reservedSystemCPUs</code>选项设置为宿主级系统线程和 Kubernetes
相关线程所预留的 CPU 列表。此字段提供的是一种“静态”的 CPU 列表，而不是像
<code>systemReserved</code>和<code>kubeReserved</code>所提供的“动态”列表。
此选项不支持<code>systemReservedCgroup</code>或<code>kubeReservedCgroup</code>。</p></td></tr><tr><td><code>showHiddenMetricsForVersion</code><br><code>string</code></td><td><p><code>showHiddenMetricsForVersion<code>是你希望显示隐藏度量值的上一版本。
只有上一个次版本是有意义的，其他值都是不允许的。
字段值的格式为<code>&lt;major>.&lt;minor></code>，例如：<code>1.16</code>。
此格式的目的是为了确保在下一个版本中有新的度量值被隐藏时，你有机会注意到这类变化，
而不是当这些度量值在其后的版本中彻底去除时来不及应对。</p><p>默认值：""</p></td></tr><tr><td><code>systemReservedCgroup</code><br><code>string</code></td><td><p><code>systemReservedCgroup</code>帮助 kubelet 识别用来为 OS 系统级守护进程实施
<code>systemReserved</code>计算资源预留时使用的顶级控制组（CGroup）。
参考 <a href=https://git.k8s.io/community/contributors/design-proposals/node/node-allocatable.md>Node Allocatable</a>
以了解详细信息。</p><p>默认值：""</p></td></tr><tr><td><code>kubeReservedCgroup</code><br><code>string</code></td><td><p><code>kubeReservedCgroup</code> 帮助 kubelet 识别用来为 Kubernetes 节点系统级守护进程实施
<code>kubeReserved</code>计算资源预留时使用的顶级控制组（CGroup）。
参阅 <a href=https://git.k8s.io/community/contributors/design-proposals/node/node-allocatable.md>Node Allocatable</a>
了解进一步的信息。</p><p>默认值：""</p></td></tr><tr><td><code>enforceNodeAllocatable</code><br><code>[]string</code></td><td><p>此标志设置 kubelet 需要执行的各类节点可分配资源策略。此字段接受一组选项列表。
可接受的选项有<code>none</code>、<code>pods</code>、<code>system-reserved</code>和
<code>kube-reserved</code>。</p><p>如果设置了<code>none</code>，则字段值中不可以包含其他选项。</p><p>如果列表中包含<code>system-reserved</code>，则必须设置<code>systemReservedCgroup</code>。</p><p>如果列表中包含<code>kube-reserved</code>，则必须设置<code>kubeReservedCgroup</code>。</p><p>这个字段只有在<code>cgroupsPerQOS</code>被设置为<code>true</code>才被支持。</p><p>参阅<a href=https://git.k8s.io/community/contributors/design-proposals/node/node-allocatable.md>Node Allocatable</a>
了解进一步的信息。</p><p>默认值：["pods"]</p></td></tr><tr><td><code>allowedUnsafeSysctls</code><br><code>[]string</code></td><td><p>用逗号分隔的白名单列表，其中包含不安全的 sysctl 或 sysctl 模式（以<code>&#8727;</code>结尾）。</p><p>不安全的 sysctl 组有 <code>kernel.shm&#8727;</code>、<code>kernel.msg&#8727;</code>、
<code>kernel.sem</code>、<code>fs.mqueue.&#8727;</code> 和<code>net.&#8727;</code>。</p><p>例如："<code>kernel.msg&#8727;,net.ipv4.route.min\_pmtu</code>"</p><p>默认值：[]</p></td></tr><tr><td><code>volumePluginDir</code><br><code>string</code></td><td><p><code>volumePluginDir</code>是用来搜索其他第三方卷插件的目录的路径。</p><p>默认值："/usr/libexec/kubernetes/kubelet-plugins/volume/exec/"</p></td></tr><tr><td><code>providerID</code><br><code>string</code></td><td><p><code>providerID</code>字段被设置时，指定的是一个外部提供者（即云驱动）实例的唯一 ID，
该提供者可用来唯一性地标识特定节点。</p><p>默认值：""</p></td></tr><tr><td><code>kernelMemcgNotification</code><br><code>bool</code></td><td><p><code>kernelMemcgNotification</code>字段如果被设置了，会告知 kubelet 集成内核的
memcg 通知机制来确定是否超出内存逐出阈值，而不是使用轮询机制来判定。</p><p>默认值：false</p></td></tr><tr><td><code>logging</code> <b>[必需]</b><br><a href=#LoggingConfiguration><code>LoggingConfiguration</code></a></td><td><p><code>logging</code>设置日志机制选项。更多的详细信息科参阅
<a href=https://github.com/kubernetes/component-base/blob/master/logs/options.go>日志选项</a>。</p><p>默认值：</p><code><pre>Format: text</pre></code></td></tr><tr><td><code>enableSystemLogHandler</code><br><code>bool</code></td><td><p><code>enableSystemLogHandler</code>用来启用通过 Web 接口 host:port/logs/
访问系统日志的能力。</p><p>默认值：true</p></td></tr><tr><td><code>shutdownGracePeriod</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>shutdownGracePeriod</code>设置节点关闭期间，节点自身需要延迟以及为
Pod 提供的宽限期限的总时长。</p><p>默认值："0s"</p></td></tr><tr><td><code>shutdownGracePeriodCriticalPods</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>shutdownGracePeriodCriticalPods</code>设置节点关闭期间用来终止关键性
Pod 的时长。此时长要短于<code>shutdownGracePeriod</code>。
例如，如果<code>shutdownGracePeriod=30s</code>，<code>shutdownGracePeriodCriticalPods=10s<code>，
在节点关闭期间，前 20 秒钟被预留用来体面终止普通 Pod，后 10 秒钟用来终止关键 Pod。</p><p>默认值："0s"</p></td></tr><tr><td><code>shutdownGracePeriodByPodPriority</code><br><a href=#kubelet-config-k8s-io-v1beta1-ShutdownGracePeriodByPodPriority><code>[]ShutdownGracePeriodByPodPriority</code></a></td><td><p><code>shutdownGracePeriodByPodPriority</code>设置基于 Pod
相关的优先级类值而确定的体面关闭时间。当 kubelet 收到关闭请求的时候，kubelet
会针对节点上运行的所有 Pod 发起关闭操作，这些关闭操作会根据 Pod 的优先级确定其宽限期限，
之后 kubelet 等待所有 Pod 退出。</p><p>数组中的每个表项代表的是节点关闭时 Pod 的体面终止时间；这里的 Pod
的优先级类介于列表中当前优先级类值和下一个表项的优先级类值之间。</p><p>例如，要赋予关键 Pod 10 秒钟时间来关闭，赋予优先级>=10000 Pod 20 秒钟时间来关闭，
赋予其余的 Pod 30 秒钟来关闭。</p><p>shutdownGracePeriodByPodPriority:</p><ul><li>priority: 2000000000
shutdownGracePeriodSeconds: 10</li><li>priority: 10000
shutdownGracePeriodSeconds: 20</li><li>priority: 0
shutdownGracePeriodSeconds: 30</li></ul><p>在退出之前，kubelet 要等待的时间上限为节点上所有优先级类的
<code>shutdownGracePeriodSeconds</code>的最大值。
当所有 Pod 都退出或者到达其宽限期限时，kubelet 会释放关闭防护锁。
此功能要求<code>GracefulNodeShutdown</code>特性门控被启用。</p><p>当<code>shutdownGracePeriod</code>或<code>shutdownGracePeriodCriticalPods</code>
被设置时，此配置字段必须为空。</p><p>默认值：nil</p></td></tr><tr><td><code>reservedMemory</code><br><a href=#kubelet-config-k8s-io-v1beta1-MemoryReservation><code>[]MemoryReservation</code></a></td><td><p><code>reservedMemory</code>给出一个逗号分隔的列表，为 NUMA 节点预留内存。</p><p>此参数仅在内存管理器功能特性语境下有意义。内存管理器不会为容器负载分配预留内存。
例如，如果你的 NUMA0 节点内存为 10Gi，<code>reservedMemory</code>设置为在 NUMA0
上预留 1Gi 内存，内存管理器会认为其上只有 9Gi 内存可供分配。</p><p>你可以设置不同数量的 NUMA 节点和内存类型。你也可以完全忽略这个字段，不过你要清楚，
所有 NUMA 节点上预留内存的总量要等于通过
<a href=https://kubernetes.io/docs/tasks/administer-cluster/reserve-compute-resources/#node-allocatable>node allocatable</a>
设置的内存量。</p><p>如果至少有一个节点可分配参数设置值非零，则你需要设置至少一个 NUMA 节点。</p><p>此外，避免如下设置：</p><ol><li>在配置值中存在重复项，NUMA 节点和内存类型相同，但配置值不同，这是不允许的。</li><li>为任何内存类型设置限制值为零。</li><li>NUMA 节点 ID 在宿主系统上不存在。/li><li>除<code>memory</code>和<code>hugepages-&lt;size></code>之外的内存类型。</li></ol><p>默认值：nil</p></td></tr><tr><td><code>enableProfilingHandler</code><br><code>bool</code></td><td><p><code>enableProfilingHandler</code>启用通过 host:port/debug/pprof/ 接口来执行性能分析。</p><p>默认值：true</p></td></tr><tr><td><code>enableDebugFlagsHandler</code><br><code>bool</code></td><td><p><code>enableDebugFlagsHandler</code>启用通过 host:port/debug/flags/v Web
接口上的标志设置。</p><p>默认值：true</p></td></tr><tr><td><code>seccompDefault</code><br><code>bool</code></td><td><p><code>seccompDefault</code>字段允许针对所有负载将<code>RuntimeDefault</code>
设置为默认的 seccomp 配置。这一设置要求对应的<code>SeccompDefault</code>特性门控被启用。</p><p>默认值：false</p></td></tr><tr><td><code>memoryThrottlingFactor</code><br><code>float64</code></td><td><p>当设置 cgroupv2 <code>memory.high</code>以实施<code>MemoryQoS</code>特性时，
<code>memoryThrottlingFactor</code>用来作为内存限制或节点可分配内存的系数。</p><p>减小此系数会为容器控制组设置较低的 high 限制值，从而增大回收压力；反之，
增大此系数会降低回收压力。更多细节参见 http://kep.k8s.io/2570。</p><p>默认值：0.8</p></td></tr><tr><td><code>registerWithTaints</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#taint-v1-core><code>[]core/v1.Taint</code></a></td><td><p><code>registerWithTaints</code>是一个由污点组成的数组，包含 kubelet
注册自身时要向节点对象添加的污点。只有<code>registerNode</code>为<code>true</code>
时才会起作用，并且仅在节点的最初注册时起作用。</p><p>默认值：nil</p></td></tr><tr><td><code>registerNode</code><br><code>bool</code></td><td><p><code>registerNode</code>启用向 API 服务器的自动注册。</p><p>默认值：true</p></td></tr><tr><td><code>tracing</code><br><a href=#TracingConfiguration><code>TracingConfiguration</code></a></td><td><p>tracing 为 OpenTelemetry 追踪客户端设置版本化的配置信息。
参阅 http://kep.k8s.io/2832 了解更多细节。</p></td></tr><tr><td><code>localStorageCapacityIsolation</code><br><code>bool</code></td><td><p>localStorageCapacityIsolation 启用本地临时存储隔离特性。默认设置为 true。
此特性允许用户为容器的临时存储设置请求/限制，并以类似的方式管理 cpu 和 memory 的请求/限制。
此特性还允许为 emptyDir 卷设置 sizeLimit，如果卷所用的磁盘超过此限制将触发 Pod 驱逐。
此特性取决于准确测定根文件系统磁盘用量的能力。对于 kind rootless 这类系统，
如果不支持此能力，则 LocalStorageCapacityIsolation 特性应被禁用。
一旦禁用，用户不应该为容器的临时存储设置请求/限制，也不应该为 emptyDir 设置 sizeLimit。
默认值：true</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-SerializedNodeConfigSource><code>SerializedNodeConfigSource</code></h2><p>SerializedNodeConfigSource 允许对 <code>v1.NodeConfigSource</code> 执行序列化操作。
这一类型供 kubelet 内部使用，以便跟踪动态配置的检查点。
此资源存在于 kubeletconfig API 组是因为它被当做是对 kubelet 的一种版本化输入。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>kubelet.config.k8s.io/v1beta1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>SerializedNodeConfigSource</code></td></tr><tr><td><code>source</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#nodeconfigsource-v1-core><code>core/v1.NodeConfigSource</code></a></td><td><p><code>source</code>是我们执行序列化的数据源。</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-CredentialProvider><code>CredentialProvider</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-CredentialProviderConfig>CredentialProviderConfig</a></li></ul><p>CredentialProvider 代表的是要被 kubelet 调用的一个 exec 插件。
这一插件只会在所拉取的镜像与该插件所处理的镜像匹配时才会被调用（参见 <code>matchImages</code>）。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><p><code>name</code> 是凭据提供者的名称（必需）。此名称必须与 kubelet
所看到的提供者可执行文件的名称匹配。可执行文件必须位于 kubelet 的
<code>bin</code> 目录（通过 <code>--image-credential-provider-bin-dir</code> 设置）下。</p></td></tr><tr><td><code>matchImages</code> <b>[必需]</b><br><code>[]string</code></td><td><p><code>matchImages</code> 是一个必须设置的字符串列表，用来匹配镜像以便确定是否要调用此提供者。
如果字符串之一与 kubelet 所请求的镜像匹配，则此插件会被调用并给予提供凭证的机会。
镜像应该包含镜像库域名和 URL 路径。</p><p><code>matchImages</code> 中的每个条目都是一个模式字符串，其中可以包含端口号和路径。
域名部分可以包含统配符，但端口或路径部分不可以。通配符可以用作子域名，例如
'*.k8s.io' 或 'k8s.*.io'，以及顶级域名，如 'k8s.*'。</p><p>对类似 'app*.k8s.io' 这类部分子域名的匹配也是支持的。
每个通配符只能用来匹配一个子域名段，所以 '*.io' 不会匹配 '*.k8s.io'。</p><p>镜像与 <code>matchImages</code> 之间存在匹配时，以下条件都要满足：</p><ul><li>二者均包含相同个数的域名部分，并且每个域名部分都对应匹配；</li><li><code>matchImages</code> 条目中的 URL 路径部分必须是目标镜像的 URL 路径的前缀；</li><li>如果 <code>matchImages</code> 条目中包含端口号，则端口号也必须与镜像端口号匹配。</li></ul><p><code>matchImages</code> 的一些示例如下：</p><ul><li>123456789.dkr.ecr.us-east-1.amazonaws.com</li><li>*.azurecr.io</li><li>gcr.io</li><li><em>.</em>.registry.io</li><li>registry.io:8080/path</li></ul></td></tr><tr><td><code>defaultCacheDuration</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>defaultCacheDuration</code> 是插件在内存中缓存凭据的默认时长，
在插件响应中没有给出缓存时长时，使用这里设置的值。此字段是必需的。</p></td></tr><tr><td><code>apiVersion</code> <b>[必需]</b><br><code>string</code></td><td><p>要求 exec 插件 CredentialProviderRequest 请求的输入版本。
所返回的 CredentialProviderResponse 必须使用与输入相同的编码版本。当前支持的值有：</p><ul><li>credentialprovider.kubelet.k8s.io/v1beta1</li></ul></td></tr><tr><td><code>args</code><br><code>[]string</code></td><td><p>在执行插件可执行文件时要传递给命令的参数。</p></td></tr><tr><td><code>env</code><br><a href=#kubelet-config-k8s-io-v1beta1-ExecEnvVar><code>[]ExecEnvVar</code></a></td><td><p><code>env</code> 定义要提供给插件进程的额外的环境变量。
这些环境变量会与主机上的其他环境变量以及 client-go 所使用的环境变量组合起来，
一起传递给插件。</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-ExecEnvVar><code>ExecEnvVar</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-CredentialProvider>CredentialProvider</a></li></ul><p>ExecEnvVar 用来在执行基于 exec 的凭据插件时设置环境变量。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>name</code> <b>[必需]</b><br><code>string</code></td><td><span class=text-muted>无描述</span></td></tr><tr><td><code>value</code> <b>[必需]</b><br><code>string</code></td><td><span class=text-muted>无描述</span></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-KubeletAnonymousAuthentication><code>KubeletAnonymousAuthentication</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletAuthentication>KubeletAuthentication</a></li></ul><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>enabled</code><br><code>bool</code></td><td><p><code>enabled</code>允许匿名用户向 kubelet 服务器发送请求。
未被其他身份认证方法拒绝的请求都会被当做匿名请求。
匿名请求对应的用户名为<code>system:anonymous</code>，对应的用户组名为
<code>system:unauthenticated</code>。</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-KubeletAuthentication><code>KubeletAuthentication</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletConfiguration>KubeletConfiguration</a></li></ul><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>x509</code><br><a href=#kubelet-config-k8s-io-v1beta1-KubeletX509Authentication><code>KubeletX509Authentication</code></a></td><td><p><code>x509</code>包含与 x509 客户端证书认证相关的配置。</p></td></tr><tr><td><code>webhook</code><br><a href=#kubelet-config-k8s-io-v1beta1-KubeletWebhookAuthentication><code>KubeletWebhookAuthentication</code></a></td><td><p><code>webhook</code>包含与 Webhook 持有者令牌认证相关的配置。</p></td></tr><tr><td><code>anonymous</code><br><a href=#kubelet-config-k8s-io-v1beta1-KubeletAnonymousAuthentication><code>KubeletAnonymousAuthentication</code></a></td><td><p><code>anonymous</code>包含与匿名身份认证相关的配置信息。</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-KubeletAuthorization><code>KubeletAuthorization</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletConfiguration>KubeletConfiguration</a></li></ul><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>mode</code><br><a href=#kubelet-config-k8s-io-v1beta1-KubeletAuthorizationMode><code>KubeletAuthorizationMode</code></a></td><td><p><code>mode>是应用到 kubelet 服务器所接收到的请求上的鉴权模式。合法值包括
<code>AlwaysAllow</code>和<code>Webhook</code>。
Webhook 模式使用 <code>SubjectAccessReview</code> API 来确定鉴权。</p></td></tr><tr><td><code>webhook</code><br><a href=#kubelet-config-k8s-io-v1beta1-KubeletWebhookAuthorization><code>KubeletWebhookAuthorization</code></a></td><td><p><code>webhook</code>包含与 Webhook 鉴权相关的配置信息。</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-KubeletAuthorizationMode><code>KubeletAuthorizationMode</code></h2><p>（<code>string</code> 类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletAuthorization>KubeletAuthorization</a></li></ul><h2 id=kubelet-config-k8s-io-v1beta1-KubeletWebhookAuthentication><code>KubeletWebhookAuthentication</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletAuthentication>KubeletAuthentication</a></li></ul><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>enabled</code><br><code>bool</code></td><td><p><code>enabled</code>允许使用<code>tokenreviews.authentication.k8s.io</code>
API 来提供持有者令牌身份认证。</p></td></tr><tr><td><code>cacheTTL</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>cacheTTL</code>启用对身份认证结果的缓存。</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-KubeletWebhookAuthorization><code>KubeletWebhookAuthorization</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletAuthorization>KubeletAuthorization</a></li></ul><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>cacheAuthorizedTTL</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>cacheAuthorizedTTL</code>设置来自 Webhook 鉴权组件的 'authorized'
响应的缓存时长。</p></td></tr><tr><td><code>cacheUnauthorizedTTL</code><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/apis/meta/v1#Duration><code>meta/v1.Duration</code></a></td><td><p><code>cacheUnauthorizedTTL</code>设置来自 Webhook 鉴权组件的 'unauthorized'
响应的缓存时长。</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-KubeletX509Authentication><code>KubeletX509Authentication</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletAuthentication>KubeletAuthentication</a></li></ul><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>clientCAFile</code><br><code>string</code></td><td><p><code>clientCAFile</code>是一个指向 PEM 编发的证书包的路径。
如果设置了此字段，则能够提供由此证书包中机构之一所签名的客户端证书的请求会被成功认证，
并且其用户名对应于客户端证书的<code>CommonName</code>、组名对应于客户端证书的
<code>Organization</code>。</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-MemoryReservation><code>MemoryReservation</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletConfiguration>KubeletConfiguration</a></li></ul><p>MemoryReservation 为每个 NUMA 节点设置不同类型的内存预留。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>numaNode</code> <b>[必需]</b><br><code>int32</code></td><td><p>NUMA 节点</p></td></tr><tr><td><code>limits</code> <b>[必需]</b><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#resourcelist-v1-core><code>core/v1.ResourceList</code></a></td><td><p>资源列表</p></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-MemorySwapConfiguration><code>MemorySwapConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletConfiguration>KubeletConfiguration</a></li></ul><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>swapBehavior</code><br><code>string</code></td><td><p><code>swapBehavior</code>配置容器负载可以使用的交换内存。可以是<ul><li>""、"LimitedSwap"：工作负载的内存和交换分区总用量不能超过 Pod 的内存限制；</li><li>"UnlimitedSwap"：工作负载可以无限制地使用交换分区，上限是可分配的约束。</li></ul></td></tr></tbody></table><h2 id=kubelet-config-k8s-io-v1beta1-ResourceChangeDetectionStrategy><code>ResourceChangeDetectionStrategy</code></h2><p>（<code>string</code> 类型的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletConfiguration>KubeletConfiguration</a></li></ul><p>ResourceChangeDetectionStrategy 给出的是内部管理器（ConfigMap、Secret）
用来发现对象变化的模式。</p><h2 id=kubelet-config-k8s-io-v1beta1-ShutdownGracePeriodByPodPriority><code>ShutdownGracePeriodByPodPriority</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletConfiguration>KubeletConfiguration</a></li></ul><p>ShutdownGracePeriodByPodPriority 基于 Pod 关联的优先级类数值来为其设置关闭宽限时间。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>priority</code> <b>[必需]</b><br><code>int32</code></td><td><p><code>priority</code>是与关闭宽限期限相关联的优先级值。</p></td></tr><tr><td><code>shutdownGracePeriodSeconds</code> <b>[必需]</b><br><code>int64</code></td><td><p><code>shutdownGracePeriodSeconds</code>是按秒数给出的关闭宽限期限。</td></tr></tbody></table><h2 id=FormatOptions><code>FormatOptions</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#LoggingConfiguration>LoggingConfiguration</a></li></ul><p>FormatOptions 包含为不同日志格式提供的选项。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>json</code> <b>[必需]</b><br><a href=#JSONOptions><code>JSONOptions</code></a></td><td><p>[Alpha] JSON 包含记录 "json" 格式日志的选项。
只有 LoggingAlphaOptions 特性门控被启用时才可用。</p></td></tr></tbody></table><h2 id=JSONOptions><code>JSONOptions</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#FormatOptions>FormatOptions</a></li></ul><p>JSONOptions 包含为 "json" 日志格式提供的选项。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>splitStream</code> <b>[必需]</b><br><code>bool</code></td><td><p>[Alpha] <code>splitStream</code> 将错误信息重定向到标准错误输出（stderr），
而将提示信息重定向到标准输出（stdout），并为二者提供缓存。
默认设置是将二者都写出到标准输出，并且不提供缓存。
只有 LoggingAlphaOptions 特性门控被启用时才可用。</p></td></tr><tr><td><code>infoBufferSize</code> <b>[必需]</b><br><a href=https://pkg.go.dev/k8s.io/apimachinery/pkg/api/resource#QuantityValue><code>k8s.io/apimachinery/pkg/api/resource.QuantityValue</code></a></td><td><p>[Alpha] <code>infoBufferSize</code> 在分离数据流时用来设置提示数据流的大小。
默认值为 0，相当于禁止缓存。只有 LoggingAlphaOptions 特性门控被启用时才可用。</p></td></tr></tbody></table><h2 id=LogFormatFactory><code>LogFormatFactory</code></h2><p>LogFormatFactory 提供了对某些附加的、非默认的日志格式的支持。</p><h2 id=LoggingConfiguration><code>LoggingConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletConfiguration>KubeletConfiguration</a></li></ul><p>LoggingConfiguration 包含日志选项。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>format</code> <b>[必需]</b><br><code>string</code></td><td><p><code>format<code> 设置日志消息的结构。默认的格式取值为 <code>text</code>。</p></td></tr><tr><td><code>flushFrequency</code> <b>[必需]</b><br><a href=https://pkg.go.dev/time#Duration><code>time.Duration</code></a></td><td><p>对日志进行清洗的最大间隔纳秒数（例如，1s = 1000000000）。
如果所选的日志后端在写入日志消息时不提供缓存，则此配置会被忽略。</p></td></tr><tr><td><code>verbosity</code> <b>[必需]</b><br><a href=#VerbosityLevel><code>VerbosityLevel</code></a></td><td><p><code>verbosity</code> 用来确定日志消息记录的详细程度阈值。默认值为 0，
意味着仅记录最重要的消息。数值越大，额外的消息越多。出错消息总是会被记录下来。</p></td></tr><tr><td><code>vmodule</code> <b>[必需]</b><br><a href=#VModuleConfiguration><code>VModuleConfiguration</code></a></td><td><p><code>vmodule</code> 会在单个文件层面重载 verbosity 阈值的设置。
这一选项仅支持 "text" 日志格式。</p></td></tr><tr><td><code>options</code> <b>[必需]</b><br><a href=#FormatOptions><code>FormatOptions</code></a></td><td><p>[Alpha] <code>options</code> 中包含特定于不同日志格式的附加参数。
只有针对所选格式的选项会被使用，但是合法性检查时会查看所有参数。
只有 LoggingAlphaOptions 特性门控被启用时才可用。</p></td></tr></tbody></table><h2 id=TracingConfiguration><code>TracingConfiguration</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#kubelet-config-k8s-io-v1beta1-KubeletConfiguration>KubeletConfiguration</a></li></ul><p>TracingConfiguration 为 OpenTelemetry 追踪客户端提供版本化的配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>endpoint</code><br><code>string</code></td><td><p>采集器的 endpoint，此组件将向其报告追踪链路。
此连接不安全，目前不支持 TLS。推荐不设置，endpoint 是 otlp grpc 默认值，localhost:4317。</p></td></tr><tr><td><code>samplingRatePerMillion</code><br><code>int32</code></td><td><p>samplingRatePerMillion 是每百万 span 要采集的样本数。推荐不设置。
如果不设置，则采样器优先使用其父级 span 的采样率，否则不采样。</p></td></tr></tbody></table><h2 id=VModuleConfiguration><code>VModuleConfiguration</code></h2><p>（<code>[]k8s.io/component-base/logs/api/v1.VModuleItem</code> 的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#LoggingConfiguration>LoggingConfiguration</a></li></ul><p>VModuleConfiguration 是一个集合，其中包含一个个文件名（或文件名模式）
及其对应的详细程度阈值。</p><h2 id=VerbosityLevel><code>VerbosityLevel</code></h2><p>（<code>uint32</code> 的别名）</p><p><strong>出现在：</strong></p><ul><li><a href=#LoggingConfiguration>LoggingConfiguration</a></li></ul><p>VerbosityLevel 表示 klog 或 logr 的详细程度（verbosity）阈值。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-74f43b2a33c21414f1ed8c359b37d326>17 - WebhookAdmission 配置 (v1)</h1><p>此 API 的版本是 v1。</p><h2 id=resource-types>资源类型</h2><ul><li><a href=#apiserver-config-k8s-io-v1-WebhookAdmission>WebhookAdmission</a></li></ul><h2 id=apiserver-config-k8s-io-v1-WebhookAdmission><code>WebhookAdmission</code></h2><p>WebhookAdmission 为 Webhook 准入控制器提供配置信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>apiserver.config.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>WebhookAdmission</code></td></tr><tr><td><code>kubeConfigFile</code> <b>[必需]</b><br><code>string</code></td><td><p>字段 kubeConfigFile 包含指向 kubeconfig 文件的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-eee842643d4d2c372827920430a15614>18 - 客户端身份认证（Client Authentication） (v1)</h1><h2 id=resource-types>资源类型</h2><ul><li><a href=#client-authentication-k8s-io-v1-ExecCredential>ExecCredential</a></li></ul><h2 id=client-authentication-k8s-io-v1-ExecCredential><code>ExecCredential</code></h2><p>ExecCredential 由基于 exec 的插件使用，与 HTTP 传输组件沟通凭据信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>client.authentication.k8s.io/v1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>ExecCredential</code></td></tr><tr><td><code>spec</code> <b>[必需]</b><br><a href=#client-authentication-k8s-io-v1-ExecCredentialSpec><code>ExecCredentialSpec</code></a></td><td>字段 spec 包含由 HTTP 传输组件传递给插件的信息。</td></tr><tr><td><code>status</code><br><a href=#client-authentication-k8s-io-v1-ExecCredentialStatus><code>ExecCredentialStatus</code></a></td><td>字段 status 由插件填充，包含传输组件与 API 服务器连接时需要提供的凭据。</td></tr></tbody></table><h2 id=client-authentication-k8s-io-v1-Cluster><code>Cluster</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#client-authentication-k8s-io-v1-ExecCredentialSpec>ExecCredentialSpec</a></li></ul><p>Cluster 中包含允许 exec 插件与 Kubernetes 集群进行通信身份认证时所需
的信息。</p><p>为了确保该结构体包含需要与 Kubernetes 集群进行通信的所有内容（就像通过 Kubeconfig 一样），
除了证书授权之外，该字段应该映射到 "k8s.io/client-go/tools/clientcmd/api/v1".cluster，
由于 CA 数据将始终以字节形式传递给插件。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>server</code> <b>[必需]</b><br><code>string</code></td><td>字段 server 是 Kubernetes 集群的地址（https://hostname:port）。</td></tr><tr><td><code>tls-server-name</code><br><code>string</code></td><td>tls-server-name 是用来提供给服务器用作 SNI 解析的，客户端以此检查服务器的证书。
如此字段为空，则使用链接服务器时使用的主机名。</td></tr><tr><td><code>insecure-skip-tls-verify</code><br><code>bool</code></td><td>设置此字段之后，会令客户端跳过对服务器端证书的合法性检查。
这会使得你的 HTTPS 链接不再安全。</td></tr><tr><td><code>certificate-authority-data</code><br><code>[]byte</code></td><td>此字段包含 PEM 编码的证书机构（CA）证书。
如果为空，则使用系统的根证书。</td></tr><tr><td><code>proxy-url</code><br><code>string</code></td><td>此字段用来设置向集群发送所有请求时要使用的代理服务器。</td></tr><tr><td><code>config</code><br><a href=https://godoc.org/k8s.io/apimachinery/pkg/runtime/#RawExtension><code>k8s.io/apimachinery/pkg/runtime.RawExtension</code></a></td><td><p>在某些环境中，用户配置可能对很多集群而言都完全一样（即调用同一个 exec 插件），
只是针对不同集群会有一些细节上的差异，例如 audience。
此字段使得特定于集群的配置可以直接使用集群信息来设置。
不建议使用此字段来保存 Secret 数据，因为 exec 插件的主要优势之一是不需要在
kubeconfig 中保存 Secret 数据。</p></td></tr></tbody></table><h2 id=client-authentication-k8s-io-v1-ExecCredentialSpec><code>ExecCredentialSpec</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#client-authentication-k8s-io-v1-ExecCredential>ExecCredential</a></li></ul><p>ExecCredentialSpec 保存传输组件所提供的特定于请求和运行时的信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>cluster</code><br><a href=#client-authentication-k8s-io-v1-Cluster><code>Cluster</code></a></td><td>此字段中包含的信息使得 exec 插件能够与要访问的 Kubernetes 集群通信。
注意，cluster 字段只有在 exec 驱动的配置中 provideClusterInfo
（即：ExecConfig.ProvideClusterInfo）被设置为 true 时才不能为空。</td></tr><tr><td><code>interactive</code> <b>[必需]</b><br><code>bool</code></td><td>此字段用来标明标准输出信息是否已传递给 exec 插件。</td></tr></tbody></table><h2 id=client-authentication-k8s-io-v1-ExecCredentialStatus><code>ExecCredentialStatus</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#client-authentication-k8s-io-v1-ExecCredential>ExecCredential</a></li></ul><p>ExecCredentialStatus 中包含传输组件要使用的凭据。</p><p>字段 token 和 clientKeyData 都是敏感字段。此数据只能在
客户端与 exec 插件进程之间使用内存来传递。exec 插件本身至少
应通过文件访问许可来实施保护。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>expirationTimestamp</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#time-v1-meta><code>meta/v1.Time</code></a></td><td>给出所提供的凭据到期的时间。</td></tr><tr><td><code>token</code> <b>[必需]</b><br><code>string</code></td><td>客户端用做请求身份认证的持有者令牌。</td></tr><tr><td><code>clientCertificateData</code> <b>[必需]</b><br><code>string</code></td><td>PEM 编码的客户端 TLS 证书（如果有临时证书，也会包含）。</td></tr><tr><td><code>clientKeyData</code> <b>[必需]</b><br><code>string</code></td><td>与上述证书对应的、PEM 编码的私钥。</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2896357fe4f62fe85522254410e0be7d>19 - 客户端身份认证（Client Authentication）(v1beta1)</h1><h2 id=resource-types>资源类型</h2><ul><li><a href=#client-authentication-k8s-io-v1beta1-ExecCredential>ExecCredential</a></li></ul><h2 id=client-authentication-k8s-io-v1beta1-ExecCredential><code>ExecCredential</code></h2><p>ExecCredential 由基于 exec 的插件使用，与 HTTP 传输组件沟通凭据信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>apiVersion</code><br>string</td><td><code>client.authentication.k8s.io/v1beta1</code></td></tr><tr><td><code>kind</code><br>string</td><td><code>ExecCredential</code></td></tr><tr><td><code>spec</code> <b>[必需]</b><br><a href=#client-authentication-k8s-io-v1beta1-ExecCredentialSpec><code>ExecCredentialSpec</code></a></td><td>字段 spec 包含由 HTTP 传输组件传递给插件的信息。</td></tr><tr><td><code>status</code><br><a href=#client-authentication-k8s-io-v1beta1-ExecCredentialStatus><code>ExecCredentialStatus</code></a></td><td>字段 status 由插件填充，包含传输组件与 API 服务器连接时需要提供的凭据。</td></tr></tbody></table><h2 id=client-authentication-k8s-io-v1beta1-Cluster><code>Cluster</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#client-authentication-k8s-io-v1beta1-ExecCredentialSpec>ExecCredentialSpec</a></li></ul><p>Cluster 中包含允许 exec 插件与 Kubernetes 集群进行通信身份认证时所需
的信息。</p><p>为了确保该结构体包含需要与 Kubernetes 集群进行通信的所有内容（就像通过 Kubeconfig 一样），
该字段应该映射到 "k8s.io/client-go/tools/clientcmd/api/v1".cluster，
除了证书授权之外，由于 CA 数据将始终以字节形式传递给插件。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>server</code> <b>[必需]</b><br><code>string</code></td><td>字段 server 是 Kubernetes 集群的地址（https://hostname:port）。</td></tr><tr><td><code>tls-server-name</code><br><code>string</code></td><td>tls-server-name 是用来提供给服务器用作 SNI 解析的，客户端以此检查服务器的证书。
如此字段为空，则使用链接服务器时使用的主机名。</td></tr><tr><td><code>insecure-skip-tls-verify</code><br><code>bool</code></td><td>设置此字段之后，会令客户端跳过对服务器端证书的合法性检查。
这会使得你的 HTTPS 链接不再安全。</td></tr><tr><td><code>certificate-authority-data</code><br><code>[]byte</code></td><td>此字段包含 PEM 编码的证书机构（CA）证书。
如果为空，则使用系统的根证书。</td></tr><tr><td><code>proxy-url</code><br><code>string</code></td><td>此字段用来设置向集群发送所有请求时要使用的代理服务器。</td></tr><tr><td><code>config</code><br><a href=https://godoc.org/k8s.io/apimachinery/pkg/runtime/#RawExtension><code>k8s.io/apimachinery/pkg/runtime.RawExtension</code></a></td><td><p>在某些环境中，用户配置可能对很多集群而言都完全一样（即调用同一个 exec 插件），
只是针对不同集群会有一些细节上的差异，例如 audience。
此字段使得特定于集群的配置可以直接使用集群信息来设置。
不建议使用此字段来保存 Secret 数据，因为 exec 插件的主要优势之一是不需要在
kubeconfig 中保存 Secret 数据。</p></td></tr></tbody></table><h2 id=client-authentication-k8s-io-v1beta1-ExecCredentialSpec><code>ExecCredentialSpec</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#client-authentication-k8s-io-v1beta1-ExecCredential>ExecCredential</a></li></ul><p>ExecCredentialSpec 保存传输组件所提供的特定于请求和运行时的信息。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>cluster</code><br><a href=#client-authentication-k8s-io-v1beta1-Cluster><code>Cluster</code></a></td><td>此字段中包含的信息使得 exec 插件能够与要访问的 Kubernetes 集群通信。
注意，cluster 字段只有在 exec 驱动的配置中 provideClusterInfo
（即：ExecConfig.ProvideClusterInfo）被设置为 true 时才不能为空。</td></tr></tbody></table><h2 id=client-authentication-k8s-io-v1beta1-ExecCredentialStatus><code>ExecCredentialStatus</code></h2><p><strong>出现在：</strong></p><ul><li><a href=#client-authentication-k8s-io-v1beta1-ExecCredential>ExecCredential</a></li></ul><p>ExecCredentialStatus 中包含传输组件要使用的凭据。</p><p>字段 token 和 clientKeyData 都是敏感字段。
此数据只能在客户端与 exec 插件进程之间使用内存来传递。
exec 插件本身至少应通过文件访问许可来实施保护。</p><table class=table><thead><tr><th width=30%>字段</th><th>描述</th></tr></thead><tr><td><code>expirationTimestamp</code><br><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/#time-v1-meta><code>meta/v1.Time</code></a></td><td>给出所提供的凭据到期的时间。</td></tr><tr><td><code>token</code> <b>[必需]</b><br><code>string</code></td><td>客户端用做请求身份认证的持有者令牌。</td></tr><tr><td><code>clientCertificateData</code> <b>[必需]</b><br><code>string</code></td><td>PEM 编码的客户端 TLS 证书（如果有临时证书，也会包含）。</td></tr><tr><td><code>clientKeyData</code> <b>[必需]</b><br><code>string</code></td><td>与上述证书对应的、PEM 编码的私钥。</td></tr></tbody></table></div></main></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/zh-cn/docs/home/>主页</a>
<a class=text-white href=/zh-cn/blog/>博客</a>
<a class=text-white href=/zh-cn/training/>培训</a>
<a class=text-white href=/zh-cn/partners/>合作伙伴</a>
<a class=text-white href=/zh-cn/community/>社区</a>
<a class=text-white href=/zh-cn/case-studies/>案例分析</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes 作者 | 文档发布基于 <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a> 授权许可</small><br><small class=text-white>Copyright &copy; 2023 Linux 基金会&reg;。保留所有权利。Linux 基金会已注册并使用商标。如需了解 Linux 基金会的商标列表，请访问<a href=https://www.linuxfoundation.org/trademark-usage class=light-text>商标使用页面</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>