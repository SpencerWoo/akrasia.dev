<!doctype html><html lang=zh-cn class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=en href=https://kubernetes.io/docs/reference/node/><link rel=alternate hreflang=ko href=https://kubernetes.io/ko/docs/reference/node/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://kubernetes.io/zh-cn/docs/reference/node/><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>节点参考信息 | Kubernetes</title><meta property="og:title" content="节点参考信息"><meta property="og:description" content="生产级别的容器编排系统"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.io/zh-cn/docs/reference/node/"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="节点参考信息"><meta itemprop=description content="生产级别的容器编排系统"><meta name=twitter:card content="summary"><meta name=twitter:title content="节点参考信息"><meta name=twitter:description content="生产级别的容器编排系统"><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content=" "><meta property="og:description" content=" "><meta name=twitter:description content=" "><meta property="og:url" content="https://kubernetes.io/zh-cn/docs/reference/node/"><meta property="og:title" content="节点参考信息"><meta name=twitter:title content="节点参考信息"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/zh-cn/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/zh-cn/docs/>文档</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/blog/>Kubernetes 博客</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/training/>培训</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/partners/>合作伙伴</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/community/>社区</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/case-studies/>案例分析</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>版本列表</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh-cn/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/zh-cn/docs/reference/node/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/zh-cn/docs/reference/node/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/zh-cn/docs/reference/node/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/zh-cn/docs/reference/node/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/zh-cn/docs/reference/node/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文 (Chinese)</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/reference/node/>English</a>
<a class=dropdown-item href=/ko/docs/reference/node/>한국어 (Korean)</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/zh-cn/docs/reference/node/>返回本页常规视图</a>.</p></div><h1 class=title>节点参考信息</h1><ul><li>1: <a href=#pg-e9c91b750d5dd5acbbdb9e49c89d35ad>Kubelet Checkpoint API</a></li><li>2: <a href=#pg-26e96c9d268f9c39dfc525b98f477a12>关于 dockershim 移除和使用兼容 CRI 运行时的文章</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-e9c91b750d5dd5acbbdb9e49c89d35ad>1 - Kubelet Checkpoint API</h1><div style=margin-top:10px;margin-bottom:10px><b>特性状态：</b> <code>Kubernetes v1.25 [alpha]</code></div><p>为容器生成检查点这个功能可以为一个正在运行的容器创建有状态的拷贝。
一旦容器有一个有状态的拷贝，你就可以将其移动到其他计算机进行调试或类似用途。</p><p>如果你将通过检查点操作生成的容器数据移动到能够恢复该容器的一台计算机，
所恢复的容器将从之前检查点操作执行的时间点继续运行。
你也可以检视所保存的数据，前提是你拥有这类操作的合适工具。</p><p>创建容器的检查点可能会产生安全隐患。
通常，一个检查点包含执行检查点操作时容器中所有进程的所有内存页。
这意味着以前存在于内存中的一切内容现在都在本地磁盘上获得。
这里的内容包括一切私密数据和可能用于加密的密钥。
底层 CRI 实现（该节点上的容器运行时）应创建只有 <code>root</code> 用户可以访问的检查点存档。
另外重要的是记住：如果检查点存档被转移到另一个系统，该检查点存档的所有者将可以读取所有内存页。</p><h2 id=operations>操作</h2><h3 id=post-checkpoint><code>post</code> 对指定的容器执行检查点操作</h3><p>告知 kubelet 对指定 Pod 中的特定容器执行检查点操作。</p><p>查阅 <a href=/zh-cn/docs/reference/access-authn-authz/kubelet-authn-authz>Kubelet 身份验证/鉴权参考</a>了解如何控制对
kubelet 检查点接口的访问。</p><p>Kubelet 将对底层 <a class=glossary-tooltip title='一组与 kubelet 集成的容器运行时 API' data-toggle=tooltip data-placement=top href=/zh-cn/docs/concepts/overview/components/#container-runtime target=_blank aria-label=CRI>CRI</a> 实现请求执行检查点操作。
在该检查点请求中，Kubelet 将检查点存档的名称设置为 <code>checkpoint-&lt;pod 全称>-&lt;容器名称>-&lt;时间戳>.tar</code>，
还会请求将该检查点存档存储到其根目录（由 <code>--root-dir</code> 定义）下的 <code>checkpoints</code> 子目录中。
这个目录默认为 <code>/var/lib/kubelet/checkpoints</code>。</p><p>检查点存档的格式为 <strong>tar</strong>，可以使用 <a href=https://pubs.opengroup.org/onlinepubs/7908799/xcu/tar.html><code>tar</code></a>
的一种实现来读取。存档文件的内容取决于底层 CRI 实现（该节点的容器运行时）。</p><h4 id=post-checkpoint-request>HTTP 请求</h4><p>POST /checkpoint/{namespace}/{pod}/{container}</p><h4 id=post-checkpoint-params>参数</h4><ul><li><p><strong>namespace</strong> (<strong>路径参数</strong>)：string，必需</p><a class=glossary-tooltip title='名字空间是 Kubernetes 用来支持隔离单个集群中的资源组的一种抽象。' data-toggle=tooltip data-placement=top href=/zh-cn/docs/concepts/overview/working-with-objects/namespaces/ target=_blank aria-label=名字空间（Namespace）>名字空间（Namespace）</a></li><li><p><strong>pod</strong> (<strong>路径参数</strong>)：string，必需</p><a class=glossary-tooltip title='Pod 表示你的集群上一组正在运行的容器。' data-toggle=tooltip data-placement=top href=/zh-cn/docs/concepts/workloads/pods/ target=_blank aria-label=Pod>Pod</a></li><li><p><strong>container</strong> (<strong>路径参数</strong>)：string，必需</p><a class=glossary-tooltip title=容器是可移植、可执行的轻量级的镜像，镜像中包含软件及其相关依赖。 data-toggle=tooltip data-placement=top href=/zh-cn/docs/concepts/overview/what-is-kubernetes/#why-containers target=_blank aria-label=容器（Container）>容器（Container）</a></li><li><p><strong>timeout</strong> (<strong>查询参数</strong>)：integer</p><p>等待检查点创建完成的超时时间（单位为秒）。
如果超时值为零或未设定，将使用默认的 <a class=glossary-tooltip title='一组与 kubelet 集成的容器运行时 API' data-toggle=tooltip data-placement=top href=/zh-cn/docs/concepts/overview/components/#container-runtime target=_blank aria-label=CRI>CRI</a> 超时时间值。
生成检查点所需的时长直接取决于容器所用的内存。容器使用的内存越多，创建相应检查点所需的时间越长。</p></li></ul><h4 id=post-checkpoint-response>响应</h4><p>200: OK</p><p>401: Unauthorized</p><p>404: Not Found（如果 <code>ContainerCheckpoint</code> 特性门控被禁用）</p><p>404: Not Found（如果指定的 <code>namespace</code>、<code>pod</code> 或 <code>container</code> 无法被找到）</p><p>500: Internal Server Error（如果执行检查点操作期间 CRI 实现遇到一个错误（参阅错误消息了解更多细节））</p><p>500: Internal Server Error（如果 CRI 实现未实现检查点 CRI API（参阅错误消息了解更多细节））</p></div><div class=td-content style=page-break-before:always><h1 id=pg-26e96c9d268f9c39dfc525b98f477a12>2 - 关于 dockershim 移除和使用兼容 CRI 运行时的文章</h1><p>这是关于 Kubernetes 弃用和移除 <strong>dockershim</strong>
或使用兼容 CRI 的容器运行时相关的文章和其他页面的列表。</p><h2 id=kubernetes-project>Kubernetes 项目</h2><ul><li><p>Kubernetes 博客：<a href=/zh-cn/blog/2020/12/02/dockershim-faq/>Dockershim 移除常见问题解答</a>（最初发表于 2020/12/02）</p></li><li><p>Kubernetes 博客：<a href=/zh-cn/blog/2022/02/17/dockershim-faq/>更新：Dockershim 移除常见问题解答</a>（更新发表于 2020/12/02）</p></li><li><p>Kubernetes 博客：<a href=/blog/2022/01/07/kubernetes-is-moving-on-from-dockershim/>Kubernetes 即将移除 Dockershim：承诺和下一步</a>（发表于 2022/01/07）</p></li><li><p>Kubernetes 博客：<a href=/zh-cn/blog/2021/11/12/are-you-ready-for-dockershim-removal/>移除 Dockershim 即将到来。你准备好了吗？</a>（发表于 2021/11/12）</p></li><li><p>Kubernetes 文档：<a href=/zh-cn/docs/tasks/administer-cluster/migrating-from-dockershim/>从 dockershim 迁移</a></p></li><li><p>Kubernetes 文档：<a href=/zh-cn/docs/setup/production-environment/container-runtimes/>容器运行时</a></p></li><li><p>Kubernetes 增强建议：<a href=https://github.com/kubernetes/enhancements/blob/master/keps/sig-node/2221-remove-dockershim/README.md>KEP-2221: 从 kubelet 中移除 dockershim</a></p></li><li><p>Kubernetes 增强提问：<a href=https://github.com/kubernetes/enhancements/issues/2221>从 kubelet 中移除 dockershim</a> (<em>k/enhancements#2221</em>)</p></li></ul><p>你可以通过 GitHub 问题
<a href=https://github.com/kubernetes/kubernetes/issues/106917><strong>Dockershim 移除反馈和问题</strong></a> 提供反馈。 (<em>k/kubernetes/#106917</em>)</p><h2 id=third-party>外部来源</h2><ul><li><p>Amazon Web Services EKS 文档：<a href=https://docs.aws.amazon.com/eks/latest/userguide/dockershim-deprecation.html>Amazon EKS 将终止对 Dockershim 的支持</a></p></li><li><p>CNCF 会议视频：<a href=https://www.docker.com/blog/what-developers-need-to-know-about-docker-docker-engine-and-kubernetes-v1-20/>将 Kubernetes 从 Docker 迁移到 containerd 运行时的经验教训</a>（Ana Caylin，在 KubeCon Europe 2019）</p></li><li><p>Docker.com 博客：<a href=https://www.docker.com/blog/what-developers-need-to-know-about-docker-docker-engine-and-kubernetes-v1-20/>开发人员需要了解的关于 Docker、Docker Engine 和 Kubernetes v1.20 的哪些知识</a>（发表于 2020/12/04）</p></li><li><p>YouTube 上的 “<strong>Google Open Source</strong>” 频道：<a href=https://youtu.be/fl7_4hjT52g>与 Google 一起学习 Kubernetes - 从 Dockershim 迁移到 Containerd</a></p></li><li><p>Azure 博客上的 Microsoft 应用：<a href=https://techcommunity.microsoft.com/t5/apps-on-azure-blog/dockershim-deprecation-and-aks/ba-p/3055902>Dockershim 弃用和 AKS</a>（发表于 2022/01/21）</p></li><li><p>Mirantis 博客：<a href=https://www.mirantis.com/blog/the-future-of-dockershim-is-cri-dockerd/>Dockershim 的未来是 cri-dockerd</a>（发表于 2021/04/21）</p></li><li><p>Mirantis: <a href=https://github.com/Mirantis/cri-dockerd>Mirantis/cri-dockerd</a> Git 仓库（在 GitHub 上）</p></li><li><p>Tripwire：<a href=https://www.tripwire.com/state-of-security/security-data-protection/cloud/how-dockershim-forthcoming-deprecation-affects-your-kubernetes/>Dockershim 即将弃用如何影响你的 Kubernetes</a> （发表于 2021/07/01）</p></li></ul></div></main></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/zh-cn/docs/home/>主页</a>
<a class=text-white href=/zh-cn/blog/>博客</a>
<a class=text-white href=/zh-cn/training/>培训</a>
<a class=text-white href=/zh-cn/partners/>合作伙伴</a>
<a class=text-white href=/zh-cn/community/>社区</a>
<a class=text-white href=/zh-cn/case-studies/>案例分析</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes 作者 | 文档发布基于 <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a> 授权许可</small><br><small class=text-white>Copyright &copy; 2023 Linux 基金会&reg;。保留所有权利。Linux 基金会已注册并使用商标。如需了解 Linux 基金会的商标列表，请访问<a href=https://www.linuxfoundation.org/trademark-usage class=light-text>商标使用页面</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>