<!doctype html><html lang=zh-cn class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=en href=https://kubernetes.io/docs/reference/kubernetes-api/extend-resources/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>扩展资源 | Kubernetes</title><meta property="og:title" content="扩展资源"><meta property="og:description" content="生产级别的容器编排系统"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="扩展资源"><meta itemprop=description content="生产级别的容器编排系统"><meta name=twitter:card content="summary"><meta name=twitter:title content="扩展资源"><meta name=twitter:description content="生产级别的容器编排系统"><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content><meta property="og:description" content><meta name=twitter:description content><meta property="og:url" content="https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/"><meta property="og:title" content="扩展资源"><meta name=twitter:title content="扩展资源"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/zh-cn/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/zh-cn/docs/>文档</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/blog/>Kubernetes 博客</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/training/>培训</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/partners/>合作伙伴</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/community/>社区</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/case-studies/>案例分析</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>版本列表</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh-cn/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文 (Chinese)</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/reference/kubernetes-api/extend-resources/>English</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/zh-cn/docs/reference/kubernetes-api/extend-resources/>返回本页常规视图</a>.</p></div><h1 class=title>扩展资源</h1><ul><li>1: <a href=#pg-0a375cb95d28aa4cec341c561ccf6e83>CustomResourceDefinition</a></li><li>2: <a href=#pg-ad24d230da8fe5a5c54bc6bff4169d24>MutatingWebhookConfiguration</a></li><li>3: <a href=#pg-ad9945bc57d13986240173bdc1448f1b>ValidatingWebhookConfiguration</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-0a375cb95d28aa4cec341c561ccf6e83>1 - CustomResourceDefinition</h1><div class=lead>CustomResourceDefinition 表示应在 API 服务器上公开的资源。</div><p><code>apiVersion: apiextensions.k8s.io/v1</code></p><p><code>import "k8s.io/apiextensions-apiserver/pkg/apis/apiextensions/v1"</code></p><h2 id=CustomResourceDefinition>CustomResourceDefinition</h2><p>CustomResourceDefinition 表示应在 API 服务器上公开的资源。其名称必须采用 <code>&lt;.spec.name>.&lt;.spec.group></code> 格式。</p><hr><ul><li><p><strong>apiVersion</strong>: apiextensions.k8s.io/v1</p></li><li><p><strong>kind</strong>: CustomResourceDefinition</p></li><li><p><strong>metadata</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/object-meta/#ObjectMeta>ObjectMeta</a>)</p><p>标准的对象元数据，更多信息： <a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata>https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata</a></p></li><li><p><strong>spec</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinitionSpec>CustomResourceDefinitionSpec</a>), 必需</p><p>spec 描述了用户希望资源的呈现方式。</p></li><li><p><strong>status</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinitionStatus>CustomResourceDefinitionStatus</a>)</p><p>status 表示 CustomResourceDefinition 的实际状态。</p></li></ul><h2 id=CustomResourceDefinitionSpec>CustomResourceDefinitionSpec</h2><p>CustomResourceDefinitionSpec 描述了用户希望资源的呈现方式。</p><hr><ul><li><p><strong>group</strong> (string)，必需</p><p>group 是自定义资源的 API 组。自定义资源在 <code>/apis/&lt;group>/...</code> 下提供。
必须与 CustomResourceDefinition 的名称匹配（格式为 <code>&lt;names.plural>.&lt;group></code>）。</p></li></ul><ul><li><p><strong>names</strong> (CustomResourceDefinitionNames)，必需</p><p>names 表示自定义资源的资源和种类名称。</p><p><a name=CustomResourceDefinitionNames></a></p><p><strong>CustomResourceDefinitionNames 表示提供此 CustomResourceDefinition 资源的名称。</strong></p><ul><li><p><strong>names.kind</strong> (string)，必需</p><p>kind 是资源的序列化类型。它通常是驼峰命名的单数形式。自定义资源实例将使用此值作为 API 调用中的 <code>kind</code> 属性。</p></li></ul><ul><li><p><strong>names.plural</strong> (string)，必需</p><p>plural 是所提供的资源的复数名称，自定义资源在 <code>/apis/&lt;group>/&lt;version>/.../&lt;plural></code> 下提供。
必须与 CustomResourceDefinition 的名称匹配（格式为 <code>&lt;names.plural>.&lt;group></code>）。必须全部小写。</p></li><li><p><strong>names.categories</strong> ([]string)</p><p>categories 是自定义资源所属的分组资源列表（例如 'all'）。
它在 API 发现文档中发布，并支持客户端像 <code>kubectl get all</code> 这样的调用。</p></li><li><p><strong>names.listKind</strong> (string)</p><p>listKind 是此资源列表的序列化类型。默认为 "<code>kind</code>List"。</p></li><li><p><strong>names.shortNames</strong> ([]string)</p><p>shortNames 是资源的短名称，在 API 发现文档中公开，并支持客户端调用，如 <code>kubectl get &lt;shortname></code>。必须全部小写。</p></li><li><p><strong>names.singular</strong> (string)</p><p>singular 是资源的单数名称。必须全部小写。默认为小写 <code>kind</code>。</p></li></ul></li></ul><ul><li><p><strong>scope</strong> (string)，必需</p><p>scope 表示自定义资源是群集作用域还是命名空间作用域。允许的值为 <code>Cluster</code> 和 <code>Namespaced</code>。</p></li></ul><ul><li><p><strong>versions</strong> ([]CustomResourceDefinitionVersion)，必需</p><p>versions 是自定义资源的所有 API 版本的列表。版本名称用于计算服务版本在 API 发现中列出的顺序。
如果版本字符串是与 Kubernetes 的版本号形式类似，则它将排序在非 Kubernetes 形式版本字符串之前。
Kubernetes 的版本号字符串按字典顺序排列。Kubernetes 版本号以 “v” 字符开头，
后面是一个数字（主版本），然后是可选字符串 “alpha” 或 “beta” 和另一个数字（次要版本）。
它们首先按 GA > beta > alpha 排序（其中 GA 是没有 beta 或 alpha 等后缀的版本），然后比较主要版本，
最后是比较次要版本。版本排序列表示例：v10、v2、v1、v11beta2、v10beta3、v3beta1、v12alpha1、v11alpha2、foo1、foo10。</p><p><a name=CustomResourceDefinitionVersion></a></p><p><strong>CustomResourceDefinitionVersion 描述 CRD 的一个版本。</strong></p><ul><li><p><strong>versions.name</strong> (string)，必需</p><p>name 是版本名称，例如 “v1”、“v2beta1” 等。如果 <code>served</code> 是 true，自定义资源在
<code>/apis/&lt;group>/&lt;version>/...</code> 版本下提供。</p></li></ul><ul><li><p><strong>versions.served</strong> (boolean)，必需</p><p>served 是用于启用/禁用该版本通过 REST API 提供服务的标志。</p></li></ul><ul><li><p><strong>versions.storage</strong> (boolean)，必需</p><p>storage 表示在将自定义资源持久保存到存储时应使用此版本。有且仅有一个版本的 storage=true。</p></li><li><p><strong>versions.additionalPrinterColumns</strong> ([]CustomResourceColumnDefinition)</p><p>additionalPrinterColumns 表示在表输出中返回的附加列。
有关详细信息，请参阅 <a href=https://kubernetes.io/zh-cn/docs/reference/using-api/api-concepts/#receiving-resources-as-tables>https://kubernetes.io/zh-cn/docs/reference/using-api/api-concepts/#receiving-resources-as-tables</a>。
如果没有指定列，则显示自定义资源存活时间（AGE）列。</p><p><a name=CustomResourceColumnDefinition></a></p><p><strong>CustomResourceColumnDefinition 指定用于服务器端打印的列。</strong></p><ul><li><p><strong>versions.additionalPrinterColumns.jsonPath</strong> (string)，必需</p><p>jsonPath 是一个简单的 JSON 路径（使用数组表示法），它对每个自定义资源进行评估，以生成该列的值。</p></li></ul><ul><li><p><strong>versions.additionalPrinterColumns.name</strong> (string)，必需</p><p>name 是便于阅读的列名称。</p></li></ul><ul><li><p><strong>versions.additionalPrinterColumns.type</strong> (string)，必需</p><p>type 是此列的 OpenAPI 类型定义。有关详细信息，
请参阅 <a href=https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#data-types>https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#data-types</a></p></li><li><p><strong>versions.additionalPrinterColumns.description</strong> (string)</p><p>description 是该列的可读性描述。</p></li><li><p><strong>versions.additionalPrinterColumns.format</strong> (string)</p><p>format 是这个列的可选 OpenAPI 类型定义。'name' 格式应用于主标识符列，以帮助客户端识别列是资源名称。
有关详细信息，请参阅 <a href=https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#data-types>https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#data-types</a>。</p></li><li><p><strong>versions.additionalPrinterColumns.priority</strong> (int32)</p><p>priority 是一个定义此列相对于其他列的相对重要性的整数。数字越低，优先级越高。
在空间有限的情况下，可以省略的列的优先级应大于 0。</p></li></ul></li><li><p><strong>versions.deprecated</strong> (boolean)</p><p>deprecated 表示此版本的自定义资源 API 已弃用。设置为 true 时，对此版本的 API
请求会在服务器响应头信息中带有警告（warning）信息。此值默认为 false。</p></li><li><p><strong>versions.deprecationWarning</strong> (string)</p><p>deprecationWarning 会覆盖返回给 API 客户端的默认警告。只能在 <code>deprecated</code> 为 true 时设置。
默认警告表示此版本已弃用，建议使用最新的同等或更高稳定性版本（如果存在）。</p></li><li><p><strong>versions.schema</strong> (CustomResourceValidation)</p><p>schema 描述了用于验证、精简和默认此版本的自定义资源的模式。</p><p><a name=CustomResourceValidation></a></p><p><strong>CustomResourceValidation 是 CustomResources 的验证方法列表。</strong></p><ul><li><p><strong>versions.schema.openAPIV3Schema</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#JSONSchemaProps>JSONSchemaProps</a>)</p><p>openAPIV3Schema 是用于验证和精简的 OpenAPI v3 模式。</p></li></ul></li><li><p><strong>versions.subresources</strong> (CustomResourceSubresources)</p><p>subresources 指定此版本已定义的自定义资源具有哪些子资源。</p><p><a name=CustomResourceSubresources></a></p><p><strong>CustomResourceSubresources 定义了 CustomResources 子资源的状态和规模。</strong></p><ul><li><p><strong>versions.subresources.scale</strong> (CustomResourceSubresourceScale)</p><p>scale 表示自定义资源应该提供一个 <code>/scale</code> 子资源，该子资源返回一个 <code>autoscaling/v1</code> Scale 对象。</p><p><a name=CustomResourceSubresourceScale></a></p><p><strong>CustomResourceSubresourceScale 定义了如何为 CustomResources 的 scale 子资源提供服务。</strong></p><ul><li><p><strong>versions.subresources.scale.specReplicasPath</strong> (string)，必需</p><p>specReplicasPath 定义对应于 Scale 的自定义资源内的 JSON 路径 <code>spec.replicas</code>。
只允许没有数组表示法的 JSON 路径。必须是 <code>.spec</code> 下的 JSON 路径。
如果自定义资源中的给定路径下没有值，那么 GET <code>/scale</code> 子资源将返回错误。</p></li></ul><ul><li><p><strong>versions.subresources.scale.statusReplicasPath</strong> (string)，必需</p><p>statusReplicasPath 定义对应于 Scale 的自定义资源内的 JSON 路径 <code>status.replicas</code>。
只允许不带数组表示法的 JSON 路径。必须是 <code>.status</code> 下的 JSON 路径。
如果自定义资源中给定路径下没有值，则 <code>/scale</code> 子资源中的 <code>status.replicas</code> 值将默认为 0。</p></li><li><p><strong>versions.subresources.scale.labelSelectorPath</strong> (string)</p><p>labelSelectorPath 定义对应于 Scale 的自定义资源内的 JSON 路径 <code>status.selector</code>。
只允许不带数组表示法的 JSON 路径。必须是 <code>.status</code> 或 <code>.spec</code> 下的路径。
必须设置为与 HorizontalPodAutoscaler 一起使用。
此 JSON 路径指向的字段必须是字符串字段（不是复杂的选择器结构），其中包含字符串形式的序列化标签选择器。
更多信息： <a href=https://kubernetes.io/zh-cn/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions#scale-subresource>https://kubernetes.io/zh-cn/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions#scale-subresource</a>。
如果自定义资源中给定路径下没有值，则 <code>/scale</code> 子资源中的 <code>status.selector</code> 默认值为空字符串。</p></li></ul></li><li><p><strong>versions.subresources.status</strong> (CustomResourceSubresourceStatus)</p><p>status 表示自定义资源应该为 <code>/status</code> 子资源服务。当启用时：</p><ol><li>对自定义资源主端点的请求会忽略对对象的 <code>status</code> 节的改变；</li><li>对自定义资源 <code>/status</code> 子资源的请求忽略对对象的 <code>status</code> 节以外的任何变化。</li></ol><p><a name=CustomResourceSubresourceStatus></a></p><p>CustomResourceSubresourceStatus 定义了如何为自定义资源提供 status 子资源。
状态由 CustomResource 中的 <code>.status</code> JSON 路径表示。设置后，</p><ul><li>为自定义资源提供一个 <code>/status</code> 子资源。</li><li>向 <code>/status</code> 子资源发出的 PUT 请求时，需要提供自定义资源对象，服务器端会忽略对 status 节以外的任何内容更改。</li><li>对自定义资源的 PUT/POST/PATCH 请求会忽略对 status 节的更改。</li></ul></li></ul></li></ul></li><li><p><strong>conversion</strong> (CustomResourceConversion)</p><p>conversion 定义了 CRD 的转换设置。</p><p><a name=CustomResourceConversion></a></p><p><strong>CustomResourceConversion 描述了如何转换不同版本的自定义资源。</strong></p><ul><li><p><strong>conversion.strategy</strong> (string)，必需</p><p>strategy 指定如何在版本之间转换自定义资源。允许的值为：</p><ul><li><code>None</code>：转换器仅更改 apiVersion 并且不会触及自定义资源中的任何其他字段。</li><li><code>Webhook</code>：API 服务器将调用外部 Webhook 进行转换。此选项需要其他信息。这要求
spec.preserveUnknownFields 为 false，并且设置 spec.conversion.webhook。</li></ul></li><li><p><strong>conversion.webhook</strong> (WebhookConversion)</p><p>webhook 描述了如何调用转换 Webhook。当 <code>strategy</code> 设置为 <code>Webhook</code> 时有效。</p><p><a name=WebhookConversion></a></p><p><strong>WebhookConversion 描述了如何调用转换 Webhook</strong></p><ul><li><p><strong>conversion.webhook.conversionReviewVersions</strong> ([]string)，必需</p><p>conversionReviewVersions 是 Webhook 期望的 <code>ConversionReview</code> 版本的有序列表。
API 服务器将使用它支持的列表中的第一个版本。如果 API 服务器不支持此列表中指定的版本，则自定义资源的转换将失败。
如果持久化的 Webhook 配置指定了允许的版本但其中不包括 API 服务器所了解的任何版本，则对 Webhook 的调用将失败。</p></li><li><p><strong>conversion.webhook.clientConfig</strong> (WebhookClientConfig)</p><p>如果 strategy 是 <code>Webhook</code>， 那么 clientConfig 是关于如何调用 Webhook 的说明。</p><p><a name=WebhookClientConfig></a></p><p><strong>WebhookClientConfig 包含与 Webhook 建立 TLS 连接的信息。</strong></p><ul><li><p><strong>conversion.webhook.clientConfig.caBundle</strong> ([]byte)</p><p>caBundle 是一个 PEM 编码的 CA 包，用于验证 Webhook 服务器的服务证书。
如果未指定，则使用 API 服务器上的系统根证书。</p></li><li><p><strong>conversion.webhook.clientConfig.service</strong> (ServiceReference)</p><p>service 是对此 Webhook 服务的引用。必须指定 service 或 url 字段之一。</p><p>如果在集群中运行 Webhook，那么你应该使用 <code>service</code>。</p><p><a name=ServiceReference></a></p><p><strong>ServiceReference 保存对 Service.legacy.k8s.io 的一个引用。</strong></p><ul><li><p><strong>conversion.webhook.clientConfig.service.name</strong> (string)，必需</p><p>name 是服务的名称。必需。</p></li></ul><ul><li><p><strong>conversion.webhook.clientConfig.service.namespace</strong> (string)，必需</p><p>namespace 是服务的命名空间。必需。</p></li><li><p><strong>conversion.webhook.clientConfig.service.path</strong> (string)</p><p>path 是一个可选的 URL 路径，Webhook 将通过该路径联系服务。</p></li><li><p><strong>conversion.webhook.clientConfig.service.port</strong> (int32)</p><p>port 是 Webhook 联系的可选服务端口。<code>port</code> 应该是一个有效的端口号（1-65535，包含）。
为实现向后兼容，默认端口号为 443。</p></li></ul></li><li><p><strong>conversion.webhook.clientConfig.url</strong> (string)</p><p>url 以标准 URL 的形式（<code>scheme://host:port/path</code>）给出 Webhook 的位置。<code>url</code> 或 <code>service</code> 必须指定一个且只能指定一个。</p><p><code>host</code> 不应引用集群中运行的服务；若使用集群内服务应改为使用 <code>service</code> 字段。
host 值可能会通过外部 DNS 解析（例如，<code>kube-apiserver</code> 无法解析集群内 DNS，因为这将违反分层规则）。
<code>host</code> 也可能是 IP 地址。</p><p>请注意，使用 <code>localhost</code> 或 <code>127.0.0.1</code> 作为 <code>host</code> 是有风险的，
除非你非常小心地在所有运行 API 服务器的主机上运行这个 Webhook，因为这些 API 服务器可能需要调用这个 Webhook。
这样的安装可能是不可移植的，也就是说，不容易在一个新的集群中复现。</p><p>scheme 必须是 "https"；URL 必须以 "https://" 开头。</p><p>路径（path）是可选的，如果存在，则可以是 URL 中允许的任何字符串。
你可以使用路径传递一个任意字符串给 Webhook，例如，一个集群标识符。</p><p>不允许使用用户或基本认证，例如 "user:password@"，是不允许的。片段（"#..."）和查询参数（"?..."）也是不允许的。</p></li></ul></li></ul></li></ul></li><li><p><strong>preserveUnknownFields</strong> (boolean)</p><p>preserveUnknownFields 表示将对象写入持久性存储时应保留 OpenAPI 模式中未规定的对象字段。
apiVersion、kind、元数据（metadata）和元数据中的已知字段始终保留。不推荐使用此字段，而建议在
<code>spec.versions[*].schema.openAPIV3Schema</code> 中设置 <code>x-preserve-unknown-fields</code> 为 true。
更多详细信息参见： <a href=https://kubernetes.io/zh-cn/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/#field-pruning>https://kubernetes.io/zh-cn/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/#field-pruning</a></p></li></ul><h2 id=JSONSchemaProps>JSONSchemaProps</h2><p>JSONSchemaProps 是JSON 模式（JSON-Schema），遵循其规范草案第 4 版（http://json-schema.org/）。</p><hr><ul><li><p><strong>$ref</strong> (string)</p></li><li><p><strong>$schema</strong> (string)</p></li><li><p><strong>additionalItems</strong> (JSONSchemaPropsOrBool)</p><p><a name=JSONSchemaPropsOrBool></a></p><p><strong>JSONSchemaPropsOrBool 表示 JSONSchemaProps 或布尔值。布尔属性默认为 true。</strong></p></li><li><p><strong>additionalProperties</strong> (JSONSchemaPropsOrBool)</p><p><a name=JSONSchemaPropsOrBool></a></p><p><strong>JSONSchemaPropsOrBool 表示 JSONSchemaProps 或布尔值。布尔属性默认为 true。</strong></p></li><li><p><strong>allOf</strong> ([]<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#JSONSchemaProps>JSONSchemaProps</a>)</p></li><li><p><strong>anyOf</strong> ([]<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#JSONSchemaProps>JSONSchemaProps</a>)</p></li><li><p><strong>default</strong> (JSON)</p><p>default 是未定义对象字段的默认值。设置默认值操作是 CustomResourceDefaulting 特性门控所控制的一个 Beta 特性。
应用默认值设置时要求 spec.preserveUnknownFields 为 false。</p><p><a name=JSON></a></p><p><strong>JSON 表示任何有效的 JSON 值。支持以下类型：bool、int64、float64、string、[]interface{}、map[string]interface{} 和 nil。</strong></p></li><li><p><strong>definitions</strong> (map[string]<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#JSONSchemaProps>JSONSchemaProps</a>)</p></li><li><p><strong>dependencies</strong> (map[string]JSONSchemaPropsOrStringArray)</p><p><a name=JSONSchemaPropsOrStringArray></a></p><p><strong>JSONSchemaPropsOrStringArray 表示 JSONSchemaProps 或字符串数组。</strong></p></li><li><p><strong>description</strong> (string)</p></li><li><p><strong>enum</strong> ([]JSON)</p><p><a name=JSON></a></p><p><strong>JSON 表示任何有效的 JSON 值。支持以下类型：bool、int64、float64、string、[]interface{}、map[string]interface{} 和 nil。</strong></p></li><li><p><strong>example</strong> (JSON)</p><p><a name=JSON></a></p><p><strong>JSON 表示任何有效的 JSON 值。支持以下类型：bool、int64、float64、string、[]interface{}、map[string]interface{} 和 nil。</strong></p></li><li><p><strong>exclusiveMaximum</strong> (boolean)</p></li><li><p><strong>exclusiveMinimum</strong> (boolean)</p></li><li><p><strong>externalDocs</strong> (ExternalDocumentation)</p><p><a name=ExternalDocumentation></a></p><p><strong>ExternalDocumentation 允许引用外部资源作为扩展文档。</strong></p><ul><li><p><strong>externalDocs.description</strong> (string)</p></li><li><p><strong>externalDocs.url</strong> (string)</p></li></ul></li><li><p><strong>format</strong> (string)</p><p>format 是 OpenAPI v3 格式字符串。未知格式将被忽略。以下格式会被验证合法性：</p><ul><li>bsonobjectid：一个 bson 对象的 ID，即一个 24 个字符的十六进制字符串</li><li>uri：由 Go 语言 net/url.ParseRequestURI 解析得到的 URI</li><li>email：由 Go 语言 net/mail.ParseAddress 解析得到的电子邮件地址</li><li>hostname：互联网主机名的有效表示，由 RFC 1034 第 3.1 节 [RFC1034] 定义</li><li>ipv4：由 Go 语言 net.ParseIP 解析得到的 IPv4 协议的 IP</li><li>ipv6：由 Go 语言 net.ParseIP 解析得到的 IPv6 协议的 IP</li><li>cidr: 由 Go 语言 net.ParseCIDR 解析得到的 CIDR</li><li>mac：由 Go 语言 net.ParseMAC 解析得到的一个 MAC 地址</li><li>uuid：UUID，允许大写字母，满足正则表达式 (?i)^[0-9a-f]{8}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{12}$</li><li>uuid3：UUID3，允许大写字母，满足正则表达式 (?i)^[0-9a-f]{8}-?[0-9a-f]{4}-?3[0-9a-f]{3}-?[0-9a-f]{4}-?[0-9a-f]{12}$</li><li>uuid4：UUID4，允许大写字母，满足正则表达式 (?i)^[0-9a-f]{8}-?[0-9a-f]{4}-?4[0-9a-f]{3}-?[89ab][0-9a-f]{3}-?[0-9a-f]{12}$</li><li>uuid5：UUID5，允许大写字母，满足正则表达式 (?i)^[0-9a-f]{8}-?[0-9a-f]{4}-?5[0-9a-f]{3}-?[89ab][0-9a-f]{3}-?[0-9a-f]{12}$</li><li>isbn：一个 ISBN10 或 ISBN13 数字字符串，如 "0321751043" 或 "978-0321751041"</li><li>isbn10：一个 ISBN10 数字字符串，如 "0321751043"</li><li>isbn13: 一个 ISBN13 号码字符串，如 "978-0321751041"</li><li>creditcard：信用卡号码，满足正则表达式 ^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$，其中混合任意非数字字符</li><li>ssn：美国社会安全号码，满足正则表达式 ^\d{3}[- ]?\d{2}[- ]?\d{4}$</li><li>hexcolor：一个十六进制的颜色编码，如 "#FFFFFF"，满足正则表达式 ^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$</li><li>rgbcolor：一个 RGB 颜色编码 例如 "rgb(255,255,255)"</li><li>byte：base64 编码的二进制数据</li><li>password: 任何类型的字符串</li><li>date：类似 "2006-01-02" 的日期字符串，由 RFC3339 中的完整日期定义</li><li>duration：由 Go 语言 time.ParseDuration 解析的持续时长字符串，如 "22 ns"，或与 Scala 持续时间格式兼容。</li><li>datetime：一个日期时间字符串，如 "2014-12-15T19:30:20.000Z"，由 RFC3339 中的 date-time 定义。</li></ul></li><li><p><strong>id</strong> (string)</p></li><li><p><strong>items</strong> (JSONSchemaPropsOrArray)</p><p><a name=JSONSchemaPropsOrArray></a></p><p><strong>JSONSchemaPropsOrArray 表示可以是 JSONSchemaProps 或 JSONSchemaProps 数组的值。这里目的主要用于序列化。</strong></p></li><li><p><strong>maxItems</strong> (int64)</p></li><li><p><strong>maxLength</strong> (int64)</p></li><li><p><strong>maxProperties</strong> (int64)</p></li><li><p><strong>maximum</strong> (double)</p></li><li><p><strong>minItems</strong> (int64)</p></li><li><p><strong>minLength</strong> (int64)</p></li><li><p><strong>minProperties</strong> (int64)</p></li><li><p><strong>minimum</strong> (double)</p></li><li><p><strong>multipleOf</strong> (double)</p></li><li><p><strong>not</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#JSONSchemaProps>JSONSchemaProps</a>)</p></li><li><p><strong>nullable</strong> (boolean)</p></li><li><p><strong>oneOf</strong> ([]<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#JSONSchemaProps>JSONSchemaProps</a>)</p></li><li><p><strong>pattern</strong> (string)</p></li><li><p><strong>patternProperties</strong> (map[string]<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#JSONSchemaProps>JSONSchemaProps</a>)</p></li><li><p><strong>properties</strong> (map[string]<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#JSONSchemaProps>JSONSchemaProps</a>)</p></li><li><p><strong>required</strong> ([]string)</p></li><li><p><strong>title</strong> (string)</p></li><li><p><strong>type</strong> (string)</p></li><li><p><strong>uniqueItems</strong> (boolean)</p></li><li><p><strong>x-kubernetes-embedded-resource</strong> (boolean)</p><p>x-kubernetes-embedded-resource 定义该值是一个嵌入式 Kubernetes runtime.Object，具有 TypeMeta 和 ObjectMeta。
类型必须是对象。允许进一步限制嵌入对象。会自动验证 kind、apiVersion 和 metadata 等字段值。
x-kubernetes-preserve-unknown-fields 允许为 true，但如果对象已完全指定
（除 kind、apiVersion、metadata 之外），则不必为 true。</p></li><li><p><strong>x-kubernetes-int-or-string</strong> (boolean)</p><p>x-kubernetes-int-or-string 指定此值是整数或字符串。如果为 true，则允许使用空类型，
并且如果遵循以下模式之一，则允许作为 anyOf 的子类型：</p><ol><li>anyOf:<ul><li>type: integer</li><li>type: string</li></ul></li><li>allOf:<ul><li>anyOf:<ul><li>type: integer</li><li>type: string</li></ul></li></ul><ul><li>（可以有选择地包含其他类型）</li></ul></li></ol></li><li><p><strong>x-kubernetes-list-map-keys</strong> ([]string)</p><p>X-kubernetes-list-map-keys 通过指定用作 map 索引的键来使用 x-kubernetes-list-type <code>map</code> 注解数组。</p><p>这个标签必须只用于 "x-kubernetes-list-type" 扩展设置为 "map" 的列表。
而且，为这个属性指定的值必须是子结构的标量类型的字段（不支持嵌套）。</p><p>指定的属性必须是必需的或具有默认值，以确保所有列表项都存在这些属性。</p></li><li><p><strong>x-kubernetes-list-type</strong> (string)</p><p>x-kubernetes-list-type 注解一个数组以进一步描述其拓扑。此扩展名只能用于列表，并且可能有 3 个可能的值：</p><ol><li><code>atomic</code>：
列表被视为单个实体，就像标量一样。原子列表在更新时将被完全替换。这个扩展可以用于任何类型的列表（结构，标量，…）。</li><li><code>set</code>：
set 是不能有多个具有相同值的列表。每个值必须是标量、具有 x-kubernetes-map-type
<code>atomic</code> 的对象或具有 x-kubernetes-list-type <code>atomic</code> 的数组。</li><li><code>map</code>：
这些列表类似于映射表，因为它们的元素具有用于标识它们的非索引键。合并时保留顺序。
map 标记只能用于元数类型为 object 的列表。
数组默认为原子数组。</li></ol></li><li><p><strong>x-kubernetes-map-type</strong> (string)</p><p>x-kubernetes-map-type 注解一个对象以进一步描述其拓扑。此扩展只能在 type 为 object 时使用，并且可能有 2 个可能的值：</p><ol><li><code>granular</code>：
这些 map 是真实的映射（键值对），每个字段都是相互独立的（它们都可以由不同的角色来操作）。
这是所有 map 的默认行为。</li><li><code>atomic</code>：map 被视为单个实体，就像标量一样。原子 map 更新后将被完全替换。</li></ol></li><li><p><strong>x-kubernetes-preserve-unknown-fields</strong> (boolean)</p><p>x-kubernetes-preserve-unknown-fields 针对未在验证模式中指定的字段，禁止 API 服务器的解码步骤剪除这些字段。
这一设置对字段的影响是递归的，但在模式中指定了嵌套 properties 或 additionalProperties 时，会切换回正常的字段剪除行为。
该值可为 true 或 undefined，不能为 false。</p></li><li><p><strong>x-kubernetes-validations</strong> ([]ValidationRule)</p><p><strong>补丁策略：基于键 <code>rule</code> 合并</strong></p><p><strong>Map：合并时将保留 rule 键的唯一值</strong></p><p>x-kubernetes-validations 描述了用 CEL 表达式语言编写的验证规则列表。此字段是 Alpha 级别。
使用此字段需要启用 <code>CustomResourceValidationExpressions</code> 特性门控。</p><p><a name=ValidationRule></a></p><p><strong>ValidationRule 描述用 CEL 表达式语言编写的验证规则。</strong></p><ul><li><p><strong>x-kubernetes-validations.rule</strong> (string)，必需</p><p>rule 表示将由 CEL 评估的表达式。参考： <a href=https://github.com/google/cel-spec>https://github.com/google/cel-spec</a>。
rule 的作用域为模式中的 x-kubernetes-validation 扩展所在的位置。CEL 表达式中的 <code>self</code> 与作用域值绑定。
例子：rule 的作用域是一个具有状态子资源的资源根：{"rule": "self.status.actual &lt;= self.spec.maxDesired"}。</p><p>如果 rule 的作用域是一个带有属性的对象，那么该对象的可访问属性是通过 <code>self</code> 进行字段选择的，
并且可以通过 <code>has(self.field)</code> 来检查字段是否存在。在 CEL 表达式中，Null 字段被视为不存在的字段。
如果该 rule 的作用域是一个带有附加属性的对象（例如一个 map），那么该 map 的值可以通过
<code>self[mapKey]</code>来访问，map 是否包含某主键可以通过 <code>mapKey in self</code> 来检查。
map 中的所有条目都可以通过 CEL 宏和函数（如 <code>self.all(...)</code>）访问。
如果 rule 的作用域是一个数组，数组的元素可以通过 <code>self[i]</code> 访问，也可以通过宏和函数访问。
如果 rule 的作用域为标量，<code>self</code> 绑定到标量值。举例：</p><ul><li>rule 作用域为对象映射：{"rule": "self.components['Widget'].priority &lt; 10"}</li><li>rule 作用域为整数列表：{"rule": "self.values.all(value, value >= 0 && value &lt; 100)"}</li><li>rule 作用域为字符串值：{"rule": "self.startsWith('kube')"}</li></ul><p><code>apiVersion</code>, <code>kind</code>, <code>metadata.name</code> 和 <code>metadata.generateName</code> 总是可以从对象的根和任何带
x-kubernetes-embedded-resource 注解的对象访问。其他元数据属性都无法访问。</p><p>在 CEL 表达式中无法访问通过 x-kubernetes-preserve-unknown-fields 保存在自定义资源中的未知数据。
这包括：</p><ul><li><p>由包含 x-kubernetes-preserve-unknown-fields 的对象模式所保留的未知字段值；</p></li><li><p>属性模式为 "未知类型" 的对象属性。"未知类型" 递归定义为：</p><ul><li>没有设置 type 但 x-kubernetes-preserve-unknown-fields 设置为 true 的模式。</li><li>条目模式为"未知类型"的数组。</li><li>additionalProperties 模式为"未知类型"的对象。</li></ul></li></ul><p>只有名称符合正则表达式 <code>[a-zA-Z_.-/][a-zA-Z0-9_.-/]*</code> 的属性才可被访问。
在表达式中访问属性时，可访问的属性名称根据以下规则进行转义：</p><ul><li><p>'__' 转义为 '<strong>underscores</strong>'</p></li><li><p>'.' 转义为 '<strong>dot</strong>'</p></li><li><p>'-' 转义为 '<strong>dash</strong>'</p></li><li><p>'/' 转义为 '<strong>slash</strong>'</p></li><li><p>恰好匹配 CEL 保留关键字的属性名称转义为 '<strong>{keyword}</strong>' 。这里的关键字具体包括：
"true"，"false"，"null"，"in"，"as"，"break"，"const"，"continue"，"else"，"for"，"function"，"if"，
"import"，"let"，"loop"，"package"，"namespace"，"return"。
举例：</p><ul><li>规则访问名为 "namespace" 的属性：<code>{"rule": "self.__namespace__ > 0"}</code></li><li>规则访问名为 "x-prop" 的属性：<code>{"rule": "self.x__dash__prop > 0"}</code></li><li>规则访问名为 "redact__d" 的属性：<code>{"rule": "self.redact__underscores__d > 0"}</code></li></ul></li></ul><p>对 x-kubernetes-list-type 为 'set' 或 'map' 的数组进行比较时忽略元素顺序，如：[1, 2] == [2, 1]。
使用 x-kubernetes-list-type 对数组进行串接使用下列类型的语义：</p><ul><li>'set'：<code>X + Y</code> 执行合并，其中 <code>X</code> 保留所有元素的数组位置，并附加不相交的元素 <code>Y</code>，保留其局部顺序。</li><li>'map'：<code>X + Y</code> 执行合并，保留 <code>X</code> 中所有键的数组位置，但当 <code>X</code> 和 <code>Y</code> 的键集相交时，会被 <code>Y</code> 中的值覆盖。
添加 <code>Y</code> 中具有不相交键的元素，保持其局顺序。</li></ul></li><li><p><strong>x-kubernetes-validations.message</strong> (string)</p><p>message 表示验证失败时显示的消息。如果规则包含换行符，则需要该消息。消息不能包含换行符。
如果未设置，则消息为 "failed rule: {Rule}"，如："must be a URL with the host matching spec.host"</p></li></ul></li></ul><h2 id=CustomResourceDefinitionStatus>CustomResourceDefinitionStatus</h2><p>CustomResourceDefinitionStatus 表示 CustomResourceDefinition 的状态。</p><hr><ul><li><p><strong>acceptedNames</strong> (CustomResourceDefinitionNames)</p><p>acceptedNames 是实际用于服务发现的名称。它们可能与规约（spec）中的名称不同。</p><p><a name=CustomResourceDefinitionNames></a></p><p><strong>CustomResourceDefinitionNames 表示提供此 CustomResourceDefinition 资源的名称。</strong></p><ul><li><p><strong>acceptedNames.kind</strong> (string)，必需</p><p>kind 是资源的序列化类型。它通常是驼峰命名的单数形式。自定义资源实例将使用此值作为 API 调用中的 <code>kind</code> 属性。</p></li></ul><ul><li><p><strong>acceptedNames.plural</strong> (string), required</p><p>plural 是所提供的资源的复数名称，自定义资源在 <code>/apis/&lt;group>/&lt;version>/.../&lt;plural></code> 下提供。
必须与 CustomResourceDefinition 的名称匹配（格式为 <code>&lt;names.plural>.&lt;group></code>）。必须全部小写。</p></li><li><p><strong>acceptedNames.categories</strong> ([]string)</p><p>categories 是此自定义资源所属的分组资源列表（例如 'all'）。
它在 API 发现文档中发布，并被客户端用于支持像 <code>kubectl get all</code> 这样的调用。</p></li><li><p><strong>acceptedNames.listKind</strong> (string)</p><p>listKind 是此资源列表的序列化类型。默认为 "<code>&lt;kind>List</code>"。</p></li><li><p><strong>acceptedNames.shortNames</strong> ([]string)</p><p>shortNames 是资源的短名称，在 API 发现文档中公开，并支持客户端调用，如 <code>kubectl get &lt;shortname></code>。必须全部小写。</p></li><li><p><strong>acceptedNames.singular</strong> (string)</p><p>singular 是资源的单数名称。必须全部小写。默认为小写形式的 <code>kind</code>。</p></li></ul></li><li><p><strong>conditions</strong> ([]CustomResourceDefinitionCondition)</p><p><strong>Map：合并时将保留 type 键的唯一值</strong></p><p>conditions 表示 CustomResourceDefinition 特定方面的状态</p><p><a name=CustomResourceDefinitionCondition></a></p><p><strong>CustomResourceDefinitionCondition 包含此 Pod 当前状况的详细信息。</strong></p><ul><li><p><strong>conditions.status</strong> (string)，必需</p><p>status 表示状况（Condition）的状态，取值为 True、False 或 Unknown 之一。</p></li></ul><ul><li><p><strong>conditions.type</strong> (string)，必需</p><p>type 是状况的类型。类型包括：Established、NamesAccepted 和 Terminating。</p></li><li><p><strong>conditions.lastTransitionTime</strong> (Time)</p><p>lastTransitionTime 是上一次发生状况状态转换的时间。</p><p><a name=Time></a></p><p><strong>Time 是对 time.Time 的封装。Time 支持对 YAML 和 JSON 进行正确封包。为 time 包的许多函数方法提供了封装器。</strong></p></li><li><p><strong>conditions.message</strong> (string)</p><p>message 是有关上次转换的详细可读信息。</p></li><li><p><strong>conditions.reason</strong> (string)</p><p>reason 表述状况上次转换原因的、驼峰格式命名的、唯一的一个词。</p></li></ul></li><li><p><strong>storedVersions</strong> ([]string)</p><p>storedVersions 列出了曾经被持久化的所有 CustomResources 版本。跟踪这些版本可以为 etcd 中的存储版本提供迁移路径。
该字段是可变的，因此迁移控制器可以完成到另一个版本的迁移（确保存储中没有遗留旧对象），然后从该列表中删除其余版本。
当版本在此列表中时，则不能从 <code>spec.versions</code> 中删除。</p></li></ul><h2 id=CustomResourceDefinitionList>CustomResourceDefinitionList</h2><p>CustomResourceDefinitionList 是 CustomResourceDefinition 对象的列表。</p><hr><ul><li><p><strong>items</strong> ([]<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>)，必需</p><p>items 列出单个 CustomResourceDefinition 对象</p></li><li><p><strong>apiVersion</strong> (string)</p><p>apiVersion 定义对象表示的版本化模式。服务器应将已识别的模式转换为最新的内部值，并可能拒绝未识别的值。
更多信息： <a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources>https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources</a></p></li><li><p><strong>kind</strong> (string)</p><p>kind 是一个字符串值，表示该对象所表示的 REST 资源。服务器可以从客户端提交请求的端点推断出 REST 资源。不能被更新。驼峰命名。
更多信息： <a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds>https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds</a></p></li><li><p><strong>metadata</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/list-meta/#ListMeta>ListMeta</a>)</p><p>标准的对象元数据，更多信息： <a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata>https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata</a></p></li></ul><h2 id=Operations>Operations</h2><hr><h3 id=get-读取指定的-customresourcedefinition><code>get</code> 读取指定的 CustomResourceDefinition</h3><h4 id=http-请求>HTTP 请求</h4><p>GET /apis/apiextensions.k8s.io/v1/customresourcedefinitions/{name}</p><h4 id=参数>参数</h4><ul><li><p><strong>name</strong> （<strong>路径参数</strong>）：string，必需</p><p>CustomResourceDefinition 的名称</p></li><li><p><strong>pretty</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): OK</p><p>401: Unauthorized</p><h3 id=get-读取指定-customresourcedefinition-的状态><code>get</code> 读取指定 CustomResourceDefinition 的状态</h3><h4 id=http-请求-1>HTTP 请求</h4><p>GET /apis/apiextensions.k8s.io/v1/customresourcedefinitions/{name}/status</p><h4 id=参数-1>参数</h4><ul><li><p><strong>name</strong> （<strong>路径参数</strong>）：string，必需</p><p>CustomResourceDefinition 的名称</p></li><li><p><strong>pretty</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-1>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): OK</p><p>401: Unauthorized</p><h3 id=list-列出或观察-customresourcedefinition-类型的对象><code>list</code> 列出或观察 CustomResourceDefinition 类型的对象</h3><h4 id=http-请求-2>HTTP 请求</h4><p>GET /apis/apiextensions.k8s.io/v1/customresourcedefinitions</p><h4 id=参数-2>参数</h4><ul><li><p><strong>allowWatchBookmarks</strong> （<strong>查询参数</strong>）：boolean</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#allowWatchBookmarks>allowWatchBookmarks</a></p></li><li><p><strong>continue</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#continue>continue</a></p></li><li><p><strong>fieldSelector</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldSelector>fieldSelector</a></p></li><li><p><strong>labelSelector</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#labelSelector>labelSelector</a></p></li><li><p><strong>limit</strong> （<strong>查询参数</strong>）：integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#limit>limit</a></p></li><li><p><strong>pretty</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li><li><p><strong>resourceVersion</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersion>resourceVersion</a></p></li><li><p><strong>resourceVersionMatch</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersionMatch>resourceVersionMatch</a></p></li><li><p><strong>timeoutSeconds</strong> （<strong>查询参数</strong>）：integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#timeoutSeconds>timeoutSeconds</a></p></li><li><p><strong>watch</strong> （<strong>查询参数</strong>）：boolean</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#watch>watch</a></p></li></ul><h4 id=响应-2>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinitionList>CustomResourceDefinitionList</a>): OK</p><p>401: Unauthorized</p><h3 id=create-创建一个-customresourcedefinition><code>create</code> 创建一个 CustomResourceDefinition</h3><h4 id=http-请求-3>HTTP 请求</h4><p>POST /apis/apiextensions.k8s.io/v1/customresourcedefinitions</p><h4 id=参数-3>参数</h4><ul><li><p><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>，必需</p></li><li><p><strong>dryRun</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li><li><p><strong>fieldManager</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li><li><p><strong>fieldValidation</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li><li><p><strong>pretty</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-3>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): Created</p><p>202 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): Accepted</p><p>401: Unauthorized</p><h3 id=update-替换指定的-customresourcedefinition><code>update</code> 替换指定的 CustomResourceDefinition</h3><h4 id=http-请求-4>HTTP 请求</h4><p>PUT /apis/apiextensions.k8s.io/v1/customresourcedefinitions/{name}</p><h4 id=参数-4>参数</h4><ul><li><p><strong>name</strong> （<strong>路径参数</strong>）：string，必需</p><p>CustomResourceDefinition 的名称</p></li><li><p><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>，必需</p></li><li><p><strong>dryRun</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li><li><p><strong>fieldManager</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li><li><p><strong>fieldValidation</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li><li><p><strong>pretty</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-4>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): Created</p><p>401: Unauthorized</p><h3 id=update-替换指定-customresourcedefinition-的状态><code>update</code> 替换指定 CustomResourceDefinition 的状态</h3><h4 id=http-请求-5>HTTP 请求</h4><p>PUT /apis/apiextensions.k8s.io/v1/customresourcedefinitions/{name}/status</p><h4 id=参数-5>参数</h4><ul><li><p><strong>name</strong> （<strong>路径参数</strong>）：string，必需</p><p>CustomResourceDefinition 的名称</p></li><li><p><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>，必需</p></li><li><p><strong>dryRun</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li><li><p><strong>fieldManager</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li><li><p><strong>fieldValidation</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li><li><p><strong>pretty</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-5>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): Created</p><p>401: Unauthorized</p><h3 id=patch-部分更新指定的-customresourcedefinition><code>patch</code> 部分更新指定的 CustomResourceDefinition</h3><h4 id=http-请求-6>HTTP 请求</h4><p>PATCH /apis/apiextensions.k8s.io/v1/customresourcedefinitions/{name}</p><h4 id=参数-6>参数</h4><ul><li><p><strong>name</strong> （<strong>路径参数</strong>）：string，必需</p><p>CustomResourceDefinition 的名称</p></li><li><p><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/patch/#Patch>Patch</a>，必需</p></li><li><p><strong>dryRun</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li><li><p><strong>fieldManager</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li><li><p><strong>fieldValidation</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li><li><p><strong>force</strong> （<strong>查询参数</strong>）：boolean</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#force>force</a></p></li><li><p><strong>pretty</strong>（<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-6>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): Created</p><p>401: Unauthorized</p><h3 id=patch-部分更新指定-customresourcedefinition-的状态><code>patch</code> 部分更新指定 CustomResourceDefinition 的状态</h3><h4 id=http-请求-7>HTTP 请求</h4><p>PATCH /apis/apiextensions.k8s.io/v1/customresourcedefinitions/{name}/status</p><h4 id=参数-7>参数</h4><ul><li><p><strong>name</strong> （<strong>路径参数</strong>）：string，必需</p><p>CustomResourceDefinition 的名称</p></li><li><p><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/patch/#Patch>Patch</a>，必需</p></li><li><p><strong>dryRun</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li><li><p><strong>fieldManager</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li><li><p><strong>fieldValidation</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li><li><p><strong>force</strong> （<strong>查询参数</strong>）：boolean</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#force>force</a></p></li><li><p><strong>pretty</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-7>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/#CustomResourceDefinition>CustomResourceDefinition</a>): Created</p><p>401: Unauthorized</p><h3 id=delete-删除一个-customresourcedefinition><code>delete</code> 删除一个 CustomResourceDefinition</h3><h4 id=http-请求-8>HTTP 请求</h4><p>DELETE /apis/apiextensions.k8s.io/v1/customresourcedefinitions/{name}</p><h4 id=参数-8>参数</h4><ul><li><p><strong>name</strong> （<strong>路径参数</strong>）：string，必需</p><p>CustomResourceDefinition 的名称</p></li><li><p><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/delete-options/#DeleteOptions>DeleteOptions</a></p></li><li><p><strong>dryRun</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li><li><p><strong>gracePeriodSeconds</strong> （<strong>查询参数</strong>）：integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#gracePeriodSeconds>gracePeriodSeconds</a></p></li><li><p><strong>pretty</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li><li><p><strong>propagationPolicy</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#propagationPolicy>propagationPolicy</a></p></li></ul><h4 id=响应-8>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/status/#Status>Status</a>): OK</p><p>202 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/status/#Status>Status</a>): Accepted</p><p>401: Unauthorized</p><h3 id=deletecollection-删除-customresourcedefinition-的集合><code>deletecollection</code> 删除 CustomResourceDefinition 的集合</h3><h4 id=http-请求-9>HTTP 请求</h4><p>DELETE /apis/apiextensions.k8s.io/v1/customresourcedefinitions</p><h4 id=参数-9>参数</h4><ul><li><p><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/delete-options/#DeleteOptions>DeleteOptions</a></p></li><li><p><strong>continue</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#continue>continue</a></p></li><li><p><strong>dryRun</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li><li><p><strong>fieldSelector</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldSelector>fieldSelector</a></p></li><li><p><strong>gracePeriodSeconds</strong> （<strong>查询参数</strong>）：integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#gracePeriodSeconds>gracePeriodSeconds</a></p></li><li><p><strong>labelSelector</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#labelSelector>labelSelector</a></p></li><li><p><strong>limit</strong> （<strong>查询参数</strong>）：integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#limit>limit</a></p></li><li><p><strong>pretty</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li><li><p><strong>propagationPolicy</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#propagationPolicy>propagationPolicy</a></p></li><li><p><strong>resourceVersion</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersion>resourceVersion</a></p></li><li><p><strong>resourceVersionMatch</strong> （<strong>查询参数</strong>）：string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersionMatch>resourceVersionMatch</a></p></li><li><p><strong>timeoutSeconds</strong> （<strong>查询参数</strong>）：integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#timeoutSeconds>timeoutSeconds</a></p></li></ul><h4 id=响应-9>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/status/#Status>Status</a>): OK</p><p>401: Unauthorized</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ad24d230da8fe5a5c54bc6bff4169d24>2 - MutatingWebhookConfiguration</h1><div class=lead>MutatingWebhookConfiguration 描述准入 Webhook 的配置，该 Webhook 可在更改对象的情况下接受或拒绝对象请求</div><p><code>apiVersion: admissionregistration.k8s.io/v1</code></p><p><code>import "k8s.io/api/admissionregistration/v1"</code></p><h2 id=MutatingWebhookConfiguration>MutatingWebhookConfiguration</h2><p>MutatingWebhookConfiguration 描述准入 Webhook 的配置，该 Webhook 可接受或拒绝对象请求，并且可能变更对象。</p><hr><ul><li><p><strong>apiVersion</strong>: admissionregistration.k8s.io/v1</p></li><li><p><strong>kind</strong>: MutatingWebhookConfiguration</p></li></ul><ul><li><p><strong>metadata</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/object-meta/#ObjectMeta>ObjectMeta</a>)</p><p>标准的对象元数据，更多信息： <a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata>https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata</a>。</p></li></ul><ul><li><p><strong>webhooks</strong> ([]MutatingWebhook)</p><p><strong>补丁策略：根据 <code>name</code> 键执行合并操作</strong></p><p>webhooks 是 Webhook 及其所影响的资源和操作的列表。</p><p><a name=MutatingWebhook></a>
<strong>MutatingWebhook 描述了一个准入 Webhook 及其适用的资源和操作。</strong></p><ul><li><p><strong>webhooks.admissionReviewVersions</strong> ([]string), 必需</p><p>admissionReviewVersions 是 Webhook 期望的 <code>AdmissionReview</code> 版本的优选顺序列表。
API 服务器将尝试使用它所支持的版本列表中的第一个版本。如果 API 服务器不支持此列表中设置的任何版本，则此对象将验证失败。
如果持久化的 Webhook 配置指定了所允许的版本，但其中不包括 API 服务器所知道的任何版本，
则对 Webhook 的调用将失败并根据失败策略进行处理。</p></li></ul><ul><li><p><strong>webhooks.clientConfig</strong> (WebhookClientConfig), 必需</p><p>clientConfig 定义了如何与 Webhook 通信。必需。</p><p><a name=WebhookClientConfig></a>
<strong>WebhookClientConfig 包含与 Webhook 建立 TLS 连接的信息</strong></p><ul><li><p><strong>webhooks.clientConfig.caBundle</strong> ([]byte)</p><p><code>caBundle</code> 是一个 PEM 编码的 CA 包，将用于验证 Webhook 的服务证书。如果未指定，则使用 apiserver 上的系统信任根。</p></li></ul><ul><li><p><strong>webhooks.clientConfig.service</strong> (ServiceReference)</p><p><code>service</code> 是对此 Webhook 的服务的引用。必须指定 <code>service</code> 或 <code>url</code> 之一。</p><p>如果 Webhook 在集群中运行，那么你应该使用 <code>service</code>。</p><p><a name=ServiceReference></a>
<strong>ServiceReference 包含对 Service.legacy.k8s.io 的引用</strong></p><ul><li><p><strong>webhooks.clientConfig.service.name</strong> (string), 必需</p><p><code>name</code> 是服务的名称。必需。</p></li></ul><ul><li><p><strong>webhooks.clientConfig.service.namespace</strong> (string), 必需</p><p><code>namespace</code> 是服务的命名空间。必需。</p></li></ul><ul><li><p><strong>webhooks.clientConfig.service.path</strong> (string)</p><p><code>path</code> 是一个可选的 URL 路径，在针对此服务的所有请求中都会发送此路径。</p></li></ul><ul><li><p><strong>webhooks.clientConfig.service.port</strong> (int32)</p><p>如果指定了，则为托管 Webhook 的服务上的端口。默认为 443 以实现向后兼容。
<code>port</code> 应该是一个有效的端口号（包括 1-65535）。</p></li></ul></li></ul><ul><li><p><strong>webhooks.clientConfig.url</strong> (string)</p><p><code>url</code> 以标准 URL 形式（<code>scheme://host:port/path</code>）给出了 Webhook 的位置。必须指定 <code>url</code> 或 <code>service</code> 中的一个。</p><p><code>host</code> 不能用来引用集群中运行的服务；这种情况应改用 <code>service</code> 字段。在某些 API 服务器上，可能会通过外部 DNS 解析 <code>host</code> 值。
（例如，<code>kube-apiserver</code> 无法解析集群内 DNS，因为这会违反分层原理）。<code>host</code> 也可以是 IP 地址。</p><p>请注意，使用 <code>localhost</code> 或 <code>127.0.0.1</code> 作为 <code>host</code> 是有风险的，除非你非常小心地在运行 apiserver 的所有主机上运行此 Webhook，
而这些 API 服务器可能需要调用此 Webhook。此类部署可能是不可移植的，即不容易在新集群中重复安装。</p><p>该方案必须是 “https”；URL 必须以 “https://” 开头。</p><p>路径是可选的，如果存在，可以是 URL 中允许的任何字符串。你可以使用路径将任意字符串传递给 Webhook，例如集群标识符。</p><p>不允许使用用户或基本身份验证，例如不允许使用 “user:password@”。
不允许使用片段（“#...”）和查询参数（“?...”）。</p></li></ul></li></ul><ul><li><p><strong>webhooks.name</strong> (string), 必需</p><p>准入 Webhook 的名称。应该是完全限定的名称，例如 imagepolicy.kubernetes.io，其中 “imagepolicy” 是 Webhook 的名称，
kubernetes.io 是组织的名称。必需。</p></li></ul><ul><li><p><strong>webhooks.sideEffects</strong> (string), 必需</p><p>sideEffects 说明此 Webhook 是否有副作用。可接受的值为：None、NoneOnDryRun（通过 v1beta1 创建的 Webhook 也可以指定 Some 或 Unknown）。
具有副作用的 Webhook 必须实现协调系统，因为请求可能会被准入链中的未来步骤拒绝，因此需要能够撤消副作用。
如果请求与带有 sideEffects == Unknown 或 Some 的 Webhook 匹配，则带有 dryRun 属性的请求将被自动拒绝。</p></li></ul><ul><li><p><strong>webhooks.failurePolicy</strong> (string)</p><p>failurePolicy 定义如何处理来自准入端点的无法识别的错误 - 允许的值是 Ignore 或 Fail。默认为 Fail。</p></li></ul><ul><li><p><strong>webhooks.matchPolicy</strong> (string)</p><p>matchPolicy 定义了如何使用 “rules” 列表来匹配传入的请求。允许的值为 “Exact” 或 “Equivalent”。</p><ul><li><p>Exact: 仅当请求与指定规则完全匹配时才匹配请求。
例如，如果可以通过 apps/v1、apps/v1beta1 和 extensions/v1beta1 修改 deployments 资源，
但 “rules” 仅包含 <code>apiGroups:["apps"]、apiVersions:["v1"]、resources:["deployments"]</code>，
对 apps/v1beta1 或 extensions/v1beta1 的请求不会被发送到 Webhook。</p></li><li><p>Equivalent: 如果针对的资源包含在 “rules” 中，即使请求是通过另一个 API 组或版本提交，也会匹配。
例如，如果可以通过 apps/v1、apps/v1beta1 和 extensions/v1beta1 修改 deployments 资源，
并且 “rules” 仅包含 <code>apiGroups:["apps"]、apiVersions:["v1"]、resources:["deployments "]</code>，
对 apps/v1beta1 或 extensions/v1beta1 的请求将被转换为 apps/v1 并发送到 Webhook。</p></li></ul><p>默认为 “Equivalent”。</p></li><li><p><strong>webhooks.namespaceSelector</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/label-selector/#LabelSelector>LabelSelector</a>)</p><p>namespaceSelector 根据对象的命名空间是否与 selector 匹配来决定是否在该对象上运行 Webhook。
如果对象本身是 Namespace，则针对 object.metadata.labels 执行匹配。
如果对象是其他集群作用域资源，则永远不会跳过 Webhook 的匹配动作。</p><p>例如，为了针对 “runlevel” 不为 “0” 或 “1” 的名字空间中的所有对象运行 Webhook；
你可以按如下方式设置 selector :</p><pre tabindex=0><code>&#34;namespaceSelector&#34;: {
  &#34;matchExpressions&#34;: [
    {
      &#34;key&#34;: &#34;runlevel&#34;,
      &#34;operator&#34;: &#34;NotIn&#34;,
      &#34;values&#34;: [
        &#34;0&#34;,
        &#34;1&#34;
      ]
    }
  ]
}
</code></pre><p>相反，如果你只想针对 “environment” 为 “prod” 或 “staging” 的名字空间中的对象运行 Webhook；
你可以按如下方式设置 selector:</p><pre tabindex=0><code>&#34;namespaceSelector&#34;: {
  &#34;matchExpressions&#34;: [
    {
      &#34;key&#34;: &#34;environment&#34;,
      &#34;operator&#34;: &#34;In&#34;,
      &#34;values&#34;: [
        &#34;prod&#34;,
        &#34;staging&#34;
      ]
    }
  ]
}
</code></pre><p>有关标签选择算符的更多示例，请参阅
<a href=https://kubernetes.io/zh-cn/docs/concepts/overview/working-with-objects/labels>https://kubernetes.io/zh-cn/docs/concepts/overview/working-with-objects/labels</a>。</p><p>默认为空的 LabelSelector，匹配所有对象。</p></li></ul><ul><li><p><strong>webhooks.objectSelector</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/label-selector/#LabelSelector>LabelSelector</a>)</p><p>objectSelector 根据对象是否具有匹配的标签来决定是否运行 Webhook。
objectSelector 针对将被发送到 Webhook 的 oldObject 和 newObject 进行评估，如果任一对象与选择器匹配，则视为匹配。
空对象（create 时为 oldObject，delete 时为 newObject）或不能有标签的对象（如 DeploymentRollback 或 PodProxyOptions 对象）
认为是不匹配的。
仅当 Webhook 支持时才能使用对象选择器，因为最终用户可以通过设置标签来跳过准入 Webhook。
默认为空的 LabelSelector，匹配所有内容。</p></li><li><p><strong>webhooks.reinvocationPolicy</strong> (string)</p><p>reinvocationPolicy 表示这个 Webhook 是否可以被多次调用，作为一次准入评估的一部分。可取值有 “Never” 和 “IfNeeded”。</p><ul><li>Never: 在一次录取评估中，Webhook 被调用的次数不会超过一次。</li><li>IfNeeded：如果被录取的对象在被最初的 Webhook 调用后又被其他录取插件修改，
那么该 Webhook 将至少被额外调用一次作为录取评估的一部分。
指定此选项的 Webhook <strong>必须</strong>是幂等的，能够处理它们之前承认的对象。
注意：<strong>不保证额外调用的次数正好为1。</strong>
如果额外的调用导致对对象的进一步修改，Webhook 不保证会再次被调用。
<strong>使用该选项的 Webhook 可能会被重新排序，以最小化额外调用的数量。</strong>
在保证所有的变更都完成后验证一个对象，使用验证性质的准入 Webhook 代替。</li></ul><p>默认值为 “Never” 。</p></li></ul><ul><li><p><strong>webhooks.rules</strong> ([]RuleWithOperations)</p><p>rules 描述了 Webhook 关心的资源/子资源上有哪些操作。Webhook 关心操作是否匹配<strong>任何</strong>rules。
但是，为了防止 ValidatingAdmissionWebhooks 和 ValidatingAdmissionWebhooks 将集群置于只能完全禁用插件才能恢复的状态，
ValidatingAdmissionWebhooks 和 ValidatingAdmissionWebhooks 永远不会在处理 ValidatingWebhookConfiguration
和 ValidatingWebhookConfiguration 对象的准入请求被调用。</p><p><a name=RuleWithOperations></a>
<strong>RuleWithOperations 是操作和资源的元组。建议确保所有元组组合都是有效的。</strong></p><ul><li><p><strong>webhooks.rules.apiGroups</strong> ([]string)</p><p>apiGroups 是资源所属的 API 组列表。<code>*</code> 是所有组。
如果存在 <code>*</code>，则列表的长度必须为 1。必需。</p></li></ul><ul><li><p><strong>webhooks.rules.apiVersions</strong> ([]string)</p><p>apiVersions 是资源所属的 API 版本列表。<code>*</code> 是所有版本。
如果存在 <code>*</code>，则列表的长度必须为 1。必需。</p></li></ul><ul><li><p><strong>webhooks.rules.operations</strong> ([]string)</p><p>operations 是准入 Webhook 所关心的操作 —— CREATE、UPDATE、DELETE、CONNECT
或用来指代所有已知操作以及将来可能添加的准入操作的 <code>*</code>。
如果存在 <code>*</code>，则列表的长度必须为 1。必需。</p></li></ul><ul><li><p><strong>webhooks.rules.resources</strong> ([]string)</p><p>resources 是此规则适用的资源列表。</p><ul><li><code>pods</code> 表示 pods，'pods/log' 表示 pods 的日志子资源。<code>*</code> 表示所有资源，但不是子资源。</li><li><code>pods/*</code> 表示 pods 的所有子资源,</li><li><code>*/scale</code> 表示所有 scale 子资源,</li><li><code>*/*</code> 表示所有资源及其子资源。</li></ul><p>如果存在通配符，则验证规则将确保资源不会相互重叠。</p><p>根据所指定的对象，可能不允许使用子资源。必需。</p></li></ul><ul><li><p><strong>webhooks.rules.scope</strong> (string)</p><p>scope 指定此规则的范围。有效值为 “Cluster”, “Namespaced” 和 “<em>”。
“Cluster” 表示只有集群范围的资源才会匹配此规则。
Namespace API 对象是集群范围的。
“Namespaced” 意味着只有命名空间作用域的资源会匹配此规则。
“</em>” 表示没有范围限制。
子资源与其父资源的作用域相同。默认为 “*”。</p></li></ul></li></ul><ul><li><p><strong>webhooks.timeoutSeconds</strong> (int32)</p><p>timeoutSeconds 指定此 Webhook 的超时时间。
超时后，Webhook 的调用将被忽略或 API 调用将根据失败策略失败。
超时值必须在 1 到 30 秒之间。默认为 10 秒。</p></li></ul></li></ul><h2 id=MutatingWebhookConfigurationList>MutatingWebhookConfigurationList</h2><p>MutatingWebhookConfigurationList 是 MutatingWebhookConfiguration 的列表。</p><hr><ul><li><p><strong>apiVersion</strong>: admissionregistration.k8s.io/v1</p></li><li><p><strong>kind</strong>: MutatingWebhookConfigurationList</p></li></ul><ul><li><p><strong>metadata</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/list-meta/#ListMeta>ListMeta</a>)</p><p>标准的对象元数据，更多信息： <a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds>https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds</a>。</p></li></ul><ul><li><p><strong>items</strong> ([]<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>), 必需</p><p>MutatingWebhookConfiguration 列表。</p></li></ul><h2 id=operations>操作</h2><hr><h3 id=get-读取指定的-mutatingwebhookconfiguration><code>get</code> 读取指定的 MutatingWebhookConfiguration</h3><h4 id=http-请求>HTTP 请求</h4><p>GET /apis/admissionregistration.k8s.io/v1/mutatingwebhookconfigurations/{name}</p><h4 id=参数>参数</h4><ul><li><p><strong>name</strong> (<strong>路径参数</strong>): string, 必需</p><p>MutatingWebhookConfiguration 的名称。</p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>): OK</p><p>401: Unauthorized</p><h3 id=list-列出或观察-mutatingwebhookconfiguration-类型的对象><code>list</code> 列出或观察 MutatingWebhookConfiguration 类型的对象</h3><h4 id=http-请求-1>HTTP 请求</h4><p>GET /apis/admissionregistration.k8s.io/v1/mutatingwebhookconfigurations</p><h4 id=参数-1>参数</h4><ul><li><p><strong>allowWatchBookmarks</strong> (<strong>查询参数</strong>): boolean</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#allowWatchBookmarks>allowWatchBookmarks</a></p></li></ul><ul><li><p><strong>continue</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#continue>continue</a></p></li></ul><ul><li><p><strong>fieldSelector</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldSelector>fieldSelector</a></p></li></ul><ul><li><p><strong>fieldSelector</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldSelector>fieldSelector</a></p></li></ul><ul><li><p><strong>limit</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#limit>limit</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><ul><li><p><strong>resourceVersion</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersion>resourceVersion</a></p></li></ul><ul><li><p><strong>resourceVersionMatch</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersionMatch>resourceVersionMatch</a></p></li></ul><ul><li><p><strong>timeoutSeconds</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#timeoutSeconds>timeoutSeconds</a></p></li></ul><ul><li><p><strong>watch</strong> (<strong>查询参数</strong>): boolean</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#watch>watch</a></p></li></ul><h4 id=响应-1>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfigurationList>MutatingWebhookConfigurationList</a>): OK</p><p>401: Unauthorized</p><h3 id=create-创建一个-mutatingwebhookconfiguration><code>create</code> 创建一个 MutatingWebhookConfiguration</h3><h4 id=http-请求-2>HTTP 请求</h4><p>POST /apis/admissionregistration.k8s.io/v1/mutatingwebhookconfigurations</p><h4 id=参数-2>参数</h4><ul><li><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>, 必需</li></ul><ul><li><p><strong>dryRun</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li></ul><ul><li><p><strong>fieldManager</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li></ul><ul><li><p><strong>fieldValidation</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-2>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>): Created</p><p>202 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>): Accepted</p><p>401: Unauthorized</p><h3 id=update-替换指定的-mutatingwebhookconfiguration><code>update</code> 替换指定的 MutatingWebhookConfiguration</h3><h4 id=http-请求-3>HTTP 请求</h4><p>PUT /apis/admissionregistration.k8s.io/v1/mutatingwebhookconfigurations/{name}</p><h4 id=参数-3>参数</h4><ul><li><p><strong>name</strong> (<strong>路径参数</strong>): string, 必需</p><p>MutatingWebhookConfiguration 的名称。</p></li></ul><ul><li><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>, 必需</li></ul><ul><li><p><strong>dryRun</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li></ul><ul><li><p><strong>fieldManager</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li></ul><ul><li><p><strong>fieldValidation</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-3>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>): Created</p><p>401: Unauthorized</p><h3 id=patch-部分更新指定的-mutatingwebhookconfiguration><code>patch</code> 部分更新指定的 MutatingWebhookConfiguration</h3><h4 id=http-请求-4>HTTP 请求</h4><p>PATCH /apis/admissionregistration.k8s.io/v1/mutatingwebhookconfigurations/{name}</p><h4 id=参数-4>参数</h4><ul><li><p><strong>name</strong> (<strong>路径参数</strong>): string, 必需</p><p>MutatingWebhookConfiguration 的名称。</p></li></ul><ul><li><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/patch/#Patch>Patch</a>, 必需</li></ul><ul><li><p><strong>dryRun</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li></ul><ul><li><p><strong>fieldManager</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li></ul><ul><li><p><strong>fieldValidation</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li></ul><ul><li><p><strong>force</strong> (<strong>查询参数</strong>): boolean</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#force>force</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-4>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/#MutatingWebhookConfiguration>MutatingWebhookConfiguration</a>): Created</p><p>401: Unauthorized</p><h3 id=delete-删除-mutatingwebhookconfiguration><code>delete</code> 删除 MutatingWebhookConfiguration</h3><h4 id=http-请求-5>HTTP 请求</h4><p>DELETE /apis/admissionregistration.k8s.io/v1/mutatingwebhookconfigurations/{name}</p><h4 id=参数-5>参数</h4><ul><li><p><strong>name</strong> (<strong>路径参数</strong>): string, 必需</p><p>MutatingWebhookConfiguration 的名称。</p></li><li><p><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/delete-options/#DeleteOptions>DeleteOptions</a></p></li></ul><ul><li><p><strong>dryRun</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li></ul><ul><li><p><strong>gracePeriodSeconds</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#gracePeriodSeconds>gracePeriodSeconds</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><ul><li><p><strong>propagationPolicy</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#propagationPolicy>propagationPolicy</a></p></li></ul><h4 id=响应-5>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/status/#Status>Status</a>): OK</p><p>202 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/status/#Status>Status</a>): Accepted</p><p>401: Unauthorized</p><h3 id=deletecollection-删除-mutatingwebhookconfiguration-的集合><code>deletecollection</code> 删除 MutatingWebhookConfiguration 的集合</h3><h4 id=http-请求-6>HTTP 请求</h4><p>DELETE /apis/admissionregistration.k8s.io/v1/mutatingwebhookconfigurations</p><h4 id=参数-6>参数</h4><ul><li><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/delete-options/#DeleteOptions>DeleteOptions</a></li></ul><ul><li><p><strong>continue</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#continue>continue</a></p></li></ul><ul><li><p><strong>dryRun</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li></ul><ul><li><p><strong>fieldSelector</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldSelector>fieldSelector</a></p></li></ul><ul><li><p><strong>gracePeriodSeconds</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#gracePeriodSeconds>gracePeriodSeconds</a></p></li></ul><ul><li><p><strong>labelSelector</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#labelSelector>labelSelector</a></p></li></ul><ul><li><p><strong>limit</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#limit>limit</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><ul><li><p><strong>propagationPolicy</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#propagationPolicy>propagationPolicy</a></p></li></ul><ul><li><p><strong>resourceVersion</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersion>resourceVersion</a></p></li></ul><ul><li><p><strong>resourceVersionMatch</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersionMatch>resourceVersionMatch</a></p></li></ul><ul><li><p><strong>timeoutSeconds</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#timeoutSeconds>timeoutSeconds</a></p></li></ul><h4 id=响应-6>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/status/#Status>Status</a>): OK</p><p>401: Unauthorized</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ad9945bc57d13986240173bdc1448f1b>3 - ValidatingWebhookConfiguration</h1><div class=lead>ValidatingWebhookConfiguration 描述准入 Webhook 的配置，该 Webhook 可在不更改对象的情况下接受或拒绝对象请求</div><p><code>apiVersion: admissionregistration.k8s.io/v1</code></p><p><code>import "k8s.io/api/admissionregistration/v1"</code></p><h2 id=validatingWebhookConfiguration>ValidatingWebhookConfiguration</h2><p>ValidatingWebhookConfiguration 描述准入 Webhook 的配置，该 Webhook 可在不更改对象的情况下接受或拒绝对象请求。</p><hr><ul><li><p><strong>apiVersion</strong>: admissionregistration.k8s.io/v1</p></li><li><p><strong>kind</strong>: ValidatingWebhookConfiguration</p></li></ul><ul><li><p><strong>metadata</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/object-meta/#ObjectMeta>ObjectMeta</a>)</p><p>标准的对象元数据，更多信息： <a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata>https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata</a>。</p></li></ul><ul><li><p><strong>webhooks</strong> ([]ValidatingWebhook)</p><p><strong>补丁策略：根据 <code>name</code> 键执行合并操作</strong></p><p>webhooks 是 Webhook 以及受影响的资源和操作的列表。</p><p><a name=ValidatingWebhook></a>
<strong>ValidatingWebhook 描述了一个准入 Webhook 及其适用的资源和操作。</strong></p><ul><li><p><strong>webhooks.admissionReviewVersions</strong> ([]string), 必需</p><p>admissionReviewVersions 是 Webhook 期望的首选 <code>AdmissionReview</code> 版本的有序列表。
API 服务器将尝试使用它支持的列表中的第一个版本。如果 API 服务器不支持此列表中指定的版本，则此对象将验证失败。
如果持久化的 Webhook 配置指定了允许的版本，并且不包括 API 服务器已知的任何版本，则对 Webhook 的调用将失败并受失败策略的约束。</p></li></ul><ul><li><p><strong>webhooks.clientConfig</strong> (WebhookClientConfig), 必需</p><p>clientConfig 定义了如何与 Webhook 通信。必需。</p><p><a name=WebhookClientConfig></a>
<strong>WebhookClientConfig 包含与 Webhook 建立 TLS 连接的信息</strong></p><ul><li><p><strong>webhooks.clientConfig.caBundle</strong> ([]byte)</p><p><code>caBundle</code> 是一个 PEM 编码的 CA 包，将用于验证 Webhook 的服务证书。如果未指定，则使用 apiserver 上的系统信任根。</p></li></ul><ul><li><p><strong>webhooks.clientConfig.service</strong> (ServiceReference)</p><p><code>service</code> 是对此 Webhook 服务的引用。必须指定 <code>service</code> 或 <code>url</code>。</p><p>如果 Webhook 在集群中运行，那么你应该使用 <code>service</code>。</p><p><a name=ServiceReference></a>
<strong>ServiceReference 持有对 Service.legacy.k8s.io 的引用</strong></p><ul><li><p><strong>webhooks.clientConfig.service.name</strong> (string), 必需</p><p><code>name</code> 是服务的名称。必需。</p></li></ul><ul><li><p><strong>webhooks.clientConfig.service.namespace</strong> (string), 必需</p><p><code>namespace</code> 是服务的命名空间。必需。</p></li></ul><ul><li><p><strong>webhooks.clientConfig.service.path</strong> (string)</p><p><code>path</code> 是一个可选的 URL 路径，它将发送任何请求到此服务。</p></li></ul><ul><li><p><strong>webhooks.clientConfig.service.port</strong> (int32)</p><p>如果指定，则为托管 Webhook 的服务上的端口。默认为 443 以实现向后兼容性。<code>port</code> 应该是一个有效的端口号（包括 1-65535）。</p></li></ul></li></ul><ul><li><p><strong>webhooks.clientConfig.url</strong> (string)</p><p><code>url</code> 以标准 URL 形式（<code>scheme://host:port/path</code>）给出了 Webhook 的位置。必须指定 <code>url</code> 或 <code>service</code> 中的一个。</p><p><code>host</code> 不应指代在集群中运行的服务；请改用 <code>service</code> 字段。在某些 apiserver 中，可能会通过外部 DNS 解析 <code>host</code>。
（例如，<code>kube-apiserver</code> 无法解析集群内 DNS，因为这会违反分层原理）。<code>host</code> 也可以是 IP 地址。</p><p>请注意，使用 <code>localhost</code> 或 <code>127.0.0.1</code> 作为 <code>host</code> 是有风险的，除非你非常小心地在运行 apiserver 的所有主机上运行此 Webhook，
而这些 API 服务器可能需要调用此 Webhook。此类部署可能是不可移植的，即不容易在新集群中重复安装。</p><p>该方案必须是 “https”；URL 必须以 “https://” 开头。</p><p>路径是可选的，如果存在，可以是 URL 中允许的任何字符串。你可以使用路径将任意字符串传递给 Webhook，例如集群标识符。</p><p>不允许使用用户或基本身份验证，例如不允许使用 “user:password@”。
不允许使用片段（“#...”）和查询参数（“?...”）。</p></li></ul></li></ul><ul><li><p><strong>webhooks.name</strong> (string), 必需</p><p>准入 Webhook 的名称。应该是完全限定的名称，例如 imagepolicy.kubernetes.io，其中 “imagepolicy” 是 Webhook 的名称，
kubernetes.io 是组织的名称。必需。</p></li></ul><ul><li><strong>webhooks.sideEffects</strong> (string), 必需</li></ul><p>sideEffects 说明此 Webhook 是否有副作用。可接受的值为：None、NoneOnDryRun（通过 v1beta1 创建的 Webhook 也可以指定 Some 或 Unknown）。
具有副作用的 Webhook 必须实现协调系统，因为请求可能会被准入链中的未来步骤拒绝，因此需要能够撤消副作用。
如果请求与带有 sideEffects == Unknown 或 Some 的 Webhook 匹配，则带有 dryRun 属性的请求将被自动拒绝。</p><ul><li><p><strong>webhooks.failurePolicy</strong> (string)</p><p>failurePolicy 定义了如何处理来自准入端点的无法识别的错误 - 允许的值是 Ignore 或 Fail。默认为 Fail。</p></li></ul><ul><li><p><strong>webhooks.matchPolicy</strong> (string)</p><p>matchPolicy 定义了如何使用 "rules" 列表来匹配传入的请求。允许的值为 "Exact" 或 "Equivalent"。</p><ul><li><p>Exact: 仅当请求与指定规则完全匹配时才匹配请求。
例如，如果可以通过 apps/v1、apps/v1beta1 和 extensions/v1beta1 修改 deployments 资源，
但 “rules” 仅包含 <code>apiGroups:["apps"]、apiVersions:["v1"]、resources:["deployments "]</code>，
对 apps/v1beta1 或 extensions/v1beta1 的请求不会被发送到 Webhook。</p></li><li><p>Equivalent: 如果针对的资源包含在 “rules” 中，即使是通过另一个 API 组或版本，也视作匹配请求。
例如，如果可以通过 apps/v1、apps/v1beta1 和 extensions/v1beta1 修改 deployments 资源，
并且 “rules” 仅包含 <code>apiGroups:["apps"]、apiVersions:["v1"]、resources:["deployments "]</code>，
对 apps/v1beta1 或 extensions/v1beta1 的请求将被转换为 apps/v1 并发送到 Webhook。</p></li></ul><p>默认为 “Equivalent”。</p></li><li><p><strong>webhooks.namespaceSelector</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/label-selector/#LabelSelector>LabelSelector</a>)</p><pre><code>namespaceSelector 根据对象的命名空间是否与 selector 匹配来决定是否在该对象上运行 Webhook。 
</code></pre><p>如果对象本身是命名空间，则在 object.metadata.labels 上执行匹配。
如果对象是另一个集群范围的资源，则永远不会跳过 Webhook 执行匹配。</p><p>例如，在命名空间与 “0” 或 “1” 的 “runlevel” 不关联的任何对象上运行 Webhook；
你可以按如下方式设置 selector :</p><pre tabindex=0><code>&#34;namespaceSelector&#34;: {
  &#34;matchExpressions&#34;: [
    {
      &#34;key&#34;: &#34;runlevel&#34;,
      &#34;operator&#34;: &#34;NotIn&#34;,
      &#34;values&#34;: [
        &#34;0&#34;,
        &#34;1&#34;
      ]
    }
  ]
}
</code></pre><pre><code>相反，如果你只想在命名空间与 “prod” 或 “staging” 的 “environment” 相关联的对象上运行 Webhook；
</code></pre><p>你可以按如下方式设置 selector:</p><pre tabindex=0><code>&#34;namespaceSelector&#34;: {
  &#34;matchExpressions&#34;: [
    {
      &#34;key&#34;: &#34;environment&#34;,
      &#34;operator&#34;: &#34;In&#34;,
      &#34;values&#34;: [
        &#34;prod&#34;,
        &#34;staging&#34;
      ]
    }
  ]
}
</code></pre><pre><code>有关标签选择算符的更多示例，请参阅 
</code></pre><p><a href=https://kubernetes.io/zh-cn/docs/concepts/overview/working-with-objects/labels>https://kubernetes.io/zh-cn/docs/concepts/overview/working-with-objects/labels</a>。</p><p>默认为空的 LabelSelector，匹配所有对象。</p></li></ul><ul><li><p><strong>webhooks.objectSelector</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/label-selector/#LabelSelector>LabelSelector</a>)</p><p>objectSelector 根据对象是否具有匹配的标签来决定是否运行 Webhook。
objectSelector 针对将被发送到 Webhook 的 oldObject 和 newObject 进行评估，如果任一对象与选择器匹配，则视为匹配。
空对象（create 时为 oldObject，delete 时为 newObject）或不能有标签的对象（如 DeploymentRollback 或 PodProxyOptions 对象）
认为是不匹配的。
仅当 Webhook 支持时才能使用对象选择器，因为最终用户可以通过设置标签来跳过准入 webhook。
默认为空的 LabelSelector，匹配所有内容。</p></li></ul><ul><li><p><strong>webhooks.rules</strong> ([]RuleWithOperations)</p><p>rules 描述了 Webhook 关心的资源/子资源上有哪些操作。Webhook 关心操作是否匹配<strong>任何</strong>rules。
但是，为了防止 ValidatingAdmissionWebhooks 和 MutatingAdmissionWebhooks 将集群置于只能完全禁用插件才能恢复的状态，
ValidatingAdmissionWebhooks 和 MutatingAdmissionWebhooks 永远不会在处理 ValidatingWebhookConfiguration
和 MutatingWebhookConfiguration 对象的准入请求被调用。</p><p><a name=RuleWithOperations></a>
<strong>RuleWithOperations 是操作和资源的元组。建议确保所有元组组合都是有效的。</strong></p><ul><li><p><strong>webhooks.rules.apiGroups</strong> ([]string)</p><p>apiGroups 是资源所属的 API 组列表。'<em>' 是所有组。
如果存在 '</em>'，则列表的长度必须为 1。必需。</p></li></ul><ul><li><p><strong>webhooks.rules.apiVersions</strong> ([]string)</p><p>apiVersions 是资源所属的 API 版本列表。'<em>' 是所有版本。
如果存在 '</em>'，则列表的长度必须为 1。必需。</p></li></ul><ul><li><p><strong>webhooks.rules.operations</strong> ([]string)</p><p>operations 是准入 Webhook 所关心的操作 —— CREATE、UPDATE、DELETE、CONNECT
或用来指代所有已知操作以及将来可能添加的准入操作的 <code>*</code>。
如果存在 '*'，则列表的长度必须为 1。必需。</p></li></ul><ul><li><p><strong>webhooks.rules.resources</strong> ([]string)</p><p>resources 是此规则适用的资源列表。</p><p>'pods' 表示 pods，'pods/log' 表示 pods 的日志子资源。'<em>' 表示所有资源，但不是子资源。
'pods/</em>' 表示 pods 的所有子资源,
'<em>/scale' 表示所有 scale 子资源,
'</em>/*' 表示所有资源及其子资源。</p><p>如果存在通配符，则验证规则将确保资源不会相互重叠。</p><p>根据所指定的对象，可能不允许使用子资源。必需。</p></li></ul><ul><li><p><strong>webhooks.rules.scope</strong> (string)</p><p>scope 指定此规则的范围。有效值为 "Cluster", "Namespaced" 和 "<em>"。
"Cluster" 表示只有集群范围的资源才会匹配此规则。
Namespace API 对象是集群范围的。
"Namespaced" 意味着只有命名空间作用域的资源会匹配此规则。
"</em>" 表示没有范围限制。
子资源与其父资源的作用域相同。默认为 "*"。</p></li></ul></li></ul><ul><li><p><strong>webhooks.timeoutSeconds</strong> (int32)</p><p>timeoutSeconds 指定此 Webhook 的超时时间。超时后，Webhook 的调用将被忽略或 API 调用将根据失败策略失败。
超时值必须在 1 到 30 秒之间。默认为 10 秒。</p></li></ul></li></ul><h2 id=ValidatingWebhookConfigurationList>ValidatingWebhookConfigurationList</h2><p>ValidatingWebhookConfigurationList 是 ValidatingWebhookConfiguration 的列表。</p><hr><ul><li><p><strong>apiVersion</strong>: admissionregistration.k8s.io/v1</p></li><li><p><strong>kind</strong>: ValidatingWebhookConfigurationList</p></li></ul><ul><li><p><strong>metadata</strong> (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/list-meta/#ListMeta>ListMeta</a>)</p><p>标准的对象元数据，更多信息： <a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds>https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds</a>。</p></li></ul><ul><li><p><strong>items</strong> ([]<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>), 必需</p><p>ValidatingWebhookConfiguration 列表。</p></li></ul><h2 id=operations>操作</h2><hr><h3 id=get-读取指定的-validatingwebhookconfiguration><code>get</code> 读取指定的 ValidatingWebhookConfiguration</h3><h4 id=http-请求>HTTP 请求</h4><p>GET /apis/admissionregistration.k8s.io/v1/validatingwebhookconfigurations/{name}</p><h4 id=参数>参数</h4><ul><li><p><strong>name</strong> (<strong>路径参数</strong>): string, 必需</p><p>ValidatingWebhookConfiguration 的名称。</p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>): OK</p><p>401: Unauthorized</p><h3 id=list-列出或观察-validatingwebhookconfiguration-类型的对象><code>list</code> 列出或观察 ValidatingWebhookConfiguration 类型的对象</h3><h4 id=http-请求-1>HTTP 请求</h4><p>GET /apis/admissionregistration.k8s.io/v1/validatingwebhookconfigurations</p><h4 id=参数-1>参数</h4><ul><li><p><strong>allowWatchBookmarks</strong> (<strong>查询参数</strong>): boolean</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#allowWatchBookmarks>allowWatchBookmarks</a></p></li></ul><ul><li><p><strong>continue</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#continue>continue</a></p></li></ul><ul><li><p><strong>fieldSelector</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldSelector>fieldSelector</a></p></li></ul><ul><li><p><strong>fieldSelector</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldSelector>fieldSelector</a></p></li></ul><ul><li><p><strong>limit</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#limit>limit</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><ul><li><p><strong>resourceVersion</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersion>resourceVersion</a></p></li></ul><ul><li><p><strong>resourceVersionMatch</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersionMatch>resourceVersionMatch</a></p></li></ul><ul><li><p><strong>timeoutSeconds</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#timeoutSeconds>timeoutSeconds</a></p></li></ul><ul><li><p><strong>watch</strong> (<strong>查询参数</strong>): boolean</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#watch>watch</a></p></li></ul><h4 id=响应-1>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfigurationList>ValidatingWebhookConfigurationList</a>): OK</p><p>401: Unauthorized</p><h3 id=create-创建一个-validatingwebhookconfiguration><code>create</code> 创建一个 ValidatingWebhookConfiguration</h3><h4 id=http-请求-2>HTTP 请求</h4><p>POST /apis/admissionregistration.k8s.io/v1/validatingwebhookconfigurations</p><h4 id=参数-2>参数</h4><ul><li><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>, 必需</li></ul><ul><li><p><strong>dryRun</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li></ul><ul><li><p><strong>fieldManager</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li></ul><ul><li><p><strong>fieldValidation</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-2>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>): Created</p><p>202 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>): Accepted</p><p>401: Unauthorized</p><h3 id=update-替换指定的-validatingwebhookconfiguration><code>update</code> 替换指定的 ValidatingWebhookConfiguration</h3><h4 id=http-请求-3>HTTP 请求</h4><p>PUT /apis/admissionregistration.k8s.io/v1/validatingwebhookconfigurations/{name}</p><h4 id=参数-3>参数</h4><ul><li><p><strong>name</strong> (<strong>路径参数</strong>): string, 必需</p><p>ValidatingWebhookConfiguration 的名称。</p></li></ul><ul><li><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>, 必需</li></ul><ul><li><p><strong>dryRun</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li></ul><ul><li><p><strong>fieldManager</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li></ul><ul><li><p><strong>fieldValidation</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-3>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>): Created</p><p>401: Unauthorized</p><h3 id=patch-部分更新指定的-validatingwebhookconfiguration><code>patch</code> 部分更新指定的 ValidatingWebhookConfiguration</h3><h4 id=http-请求-4>HTTP 请求</h4><p>PATCH /apis/admissionregistration.k8s.io/v1/validatingwebhookconfigurations/{name}</p><h4 id=参数-4>参数</h4><ul><li><p><strong>name</strong> (<strong>路径参数</strong>): string, 必需</p><p>ValidatingWebhookConfiguration 的名称。</p></li></ul><ul><li><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/patch/#Patch>Patch</a>, 必需</li></ul><ul><li><p><strong>dryRun</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li></ul><ul><li><p><strong>fieldManager</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldManager>fieldManager</a></p></li></ul><ul><li><p><strong>fieldValidation</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldValidation>fieldValidation</a></p></li></ul><ul><li><p><strong>force</strong> (<strong>查询参数</strong>): boolean</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#force>force</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><h4 id=响应-4>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>): OK</p><p>201 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/#ValidatingWebhookConfiguration>ValidatingWebhookConfiguration</a>): Created</p><p>401: Unauthorized</p><h3 id=delete-删除-validatingwebhookconfiguration><code>delete</code> 删除 ValidatingWebhookConfiguration</h3><h4 id=http-请求-5>HTTP 请求</h4><p>DELETE /apis/admissionregistration.k8s.io/v1/validatingwebhookconfigurations/{name}</p><h4 id=参数-5>参数</h4><ul><li><p><strong>name</strong> (<strong>路径参数</strong>): string, 必需</p><p>ValidatingWebhookConfiguration 的名称。</p></li><li><p><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/delete-options/#DeleteOptions>DeleteOptions</a></p></li></ul><ul><li><p><strong>dryRun</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li></ul><ul><li><p><strong>gracePeriodSeconds</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#gracePeriodSeconds>gracePeriodSeconds</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><ul><li><p><strong>propagationPolicy</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#propagationPolicy>propagationPolicy</a></p></li></ul><h4 id=响应-5>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/status/#Status>Status</a>): OK</p><p>202 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/status/#Status>Status</a>): Accepted</p><p>401: Unauthorized</p><h3 id=deletecollection-删除-validatingwebhookconfiguration-的集合><code>deletecollection</code> 删除 ValidatingWebhookConfiguration 的集合</h3><h4 id=http-请求-6>HTTP 请求</h4><p>DELETE /apis/admissionregistration.k8s.io/v1/validatingwebhookconfigurations</p><h4 id=参数-6>参数</h4><ul><li><strong>body</strong>: <a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/delete-options/#DeleteOptions>DeleteOptions</a></li></ul><ul><li><p><strong>continue</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#continue>continue</a></p></li></ul><ul><li><p><strong>dryRun</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#dryRun>dryRun</a></p></li></ul><ul><li><p><strong>fieldSelector</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#fieldSelector>fieldSelector</a></p></li></ul><ul><li><p><strong>gracePeriodSeconds</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#gracePeriodSeconds>gracePeriodSeconds</a></p></li></ul><ul><li><p><strong>labelSelector</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#labelSelector>labelSelector</a></p></li></ul><ul><li><p><strong>limit</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#limit>limit</a></p></li></ul><ul><li><p><strong>pretty</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#pretty>pretty</a></p></li></ul><ul><li><p><strong>propagationPolicy</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#propagationPolicy>propagationPolicy</a></p></li></ul><ul><li><p><strong>resourceVersion</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersion>resourceVersion</a></p></li></ul><ul><li><p><strong>resourceVersionMatch</strong> (<strong>查询参数</strong>): string</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#resourceVersionMatch>resourceVersionMatch</a></p></li></ul><ul><li><p><strong>timeoutSeconds</strong> (<strong>查询参数</strong>): integer</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-parameters/common-parameters/#timeoutSeconds>timeoutSeconds</a></p></li></ul><h4 id=响应-6>响应</h4><p>200 (<a href=https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/common-definitions/status/#Status>Status</a>): OK</p><p>401: Unauthorized</p></div></main></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/zh-cn/docs/home/>主页</a>
<a class=text-white href=/zh-cn/blog/>博客</a>
<a class=text-white href=/zh-cn/training/>培训</a>
<a class=text-white href=/zh-cn/partners/>合作伙伴</a>
<a class=text-white href=/zh-cn/community/>社区</a>
<a class=text-white href=/zh-cn/case-studies/>案例分析</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes 作者 | 文档发布基于 <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a> 授权许可</small><br><small class=text-white>Copyright &copy; 2023 Linux 基金会&reg;。保留所有权利。Linux 基金会已注册并使用商标。如需了解 Linux 基金会的商标列表，请访问<a href=https://www.linuxfoundation.org/trademark-usage class=light-text>商标使用页面</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>