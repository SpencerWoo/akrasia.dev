<!doctype html><html lang=zh-cn class=no-js><head><meta name=robots content="noindex, nofollow"><link rel=alternate hreflang=en href=https://kubernetes.io/docs/reference/setup-tools/kubeadm/generated/><link rel=alternate hreflang=ko href=https://kubernetes.io/ko/docs/reference/setup-tools/kubeadm/generated/><link rel=alternate hreflang=fr href=https://kubernetes.io/fr/docs/reference/setup-tools/kubeadm/generated/><link rel=alternate hreflang=es href=https://kubernetes.io/es/docs/reference/setup-tools/kubeadm/generated/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://kubernetes.io/zh-cn/docs/reference/setup-tools/kubeadm/generated/><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>创建 Kubeadm | Kubernetes</title><meta property="og:title" content="创建 Kubeadm"><meta property="og:description" content="生产级别的容器编排系统"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.io/zh-cn/docs/reference/setup-tools/kubeadm/generated/"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="创建 Kubeadm"><meta itemprop=description content="生产级别的容器编排系统"><meta name=twitter:card content="summary"><meta name=twitter:title content="创建 Kubeadm"><meta name=twitter:description content="生产级别的容器编排系统"><link href=/scss/main.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png","potentialAction":{"@type":"SearchAction","target":"https://kubernetes.io/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content><meta property="og:description" content><meta name=twitter:description content><meta property="og:url" content="https://kubernetes.io/zh-cn/docs/reference/setup-tools/kubeadm/generated/"><meta property="og:title" content="创建 Kubeadm"><meta name=twitter:title content="创建 Kubeadm"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-3.6.0.min.js intregrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/zh-cn/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/zh-cn/docs/>文档</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/blog/>Kubernetes 博客</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/training/>培训</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/partners/>合作伙伴</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/community/>社区</a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh-cn/case-studies/>案例分析</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>版本列表</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh-cn/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/zh-cn/docs/reference/setup-tools/kubeadm/generated/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/zh-cn/docs/reference/setup-tools/kubeadm/generated/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/zh-cn/docs/reference/setup-tools/kubeadm/generated/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/zh-cn/docs/reference/setup-tools/kubeadm/generated/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/zh-cn/docs/reference/setup-tools/kubeadm/generated/>v1.21</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文 (Chinese)</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/reference/setup-tools/kubeadm/generated/>English</a>
<a class=dropdown-item href=/ko/docs/reference/setup-tools/kubeadm/generated/>한국어 (Korean)</a>
<a class=dropdown-item href=/fr/docs/reference/setup-tools/kubeadm/generated/>Français (French)</a>
<a class=dropdown-item href=/es/docs/reference/setup-tools/kubeadm/generated/>Español (Spanish)</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/zh-cn/docs/reference/setup-tools/kubeadm/generated/>返回本页常规视图</a>.</p></div><h1 class=title>创建 Kubeadm</h1><ul><li>1: <a href=#pg-fd3ad295c1f10bfa333f841bbdffba81></a></li><li>2: <a href=#pg-8df9aba508b2736a6712ef46227eea7d></a></li><li>3: <a href=#pg-018648dfc6f28bc9b969f45af0563cae></a></li><li>4: <a href=#pg-4a1ff27cdf01c1c47d034278048e776b></a></li><li>5: <a href=#pg-5d6b2999153cd86f56329534249fc4ec></a></li><li>6: <a href=#pg-adb5eecdc351074cc2e0cc2b1b4f04a8></a></li><li>7: <a href=#pg-df4c2dc6cba0be90d8d7de2fca9b87f7></a></li><li>8: <a href=#pg-6d6746e8ac1f1602f7dab1056b27e5c2></a></li><li>9: <a href=#pg-7449c7fa06f25b967cf531e937b0f4b2></a></li><li>10: <a href=#pg-b5c6ae77d3be9bd358c68667006cfc18></a></li><li>11: <a href=#pg-4f804e59ec1739e733807d2b591d771f></a></li><li>12: <a href=#pg-f5cf8caa95834803b133d53c321ab4a9></a></li><li>13: <a href=#pg-ee770858e2bb767b79d572b4882af656></a></li><li>14: <a href=#pg-7484bf11b6183f4c329b1f66734cc886></a></li><li>15: <a href=#pg-bf444d915ab856dba693c36294c5427b></a></li><li>16: <a href=#pg-f5c087e087714c5290b4967dd7924b3b></a></li><li>17: <a href=#pg-20703ce1c236264ad78cb1ad7244723e></a></li><li>18: <a href=#pg-49aaa494ef75de67609987a43e5ee520></a></li><li>19: <a href=#pg-d63311c16e6468f5a5940aadd902faa7></a></li><li>20: <a href=#pg-6678a79b85306310066616185153377d></a></li><li>21: <a href=#pg-8f73e208cc67d221165f6294393881a7></a></li><li>22: <a href=#pg-9aec3477159c105a46f4479de1c21418></a></li><li>23: <a href=#pg-045e41c28798930e21f77a90c3a90263></a></li><li>24: <a href=#pg-e7d83478123771ad14f475ee44440303></a></li><li>25: <a href=#pg-57a6b20d9571220989a7a445d4459468></a></li><li>26: <a href=#pg-92a2c11eef37937af846b55d9b87a544></a></li><li>27: <a href=#pg-dcfffcaafb438cd650475945ddc129ee></a></li><li>28: <a href=#pg-6eaa2624c512051ff2a9cdbc6ee54949></a></li><li>29: <a href=#pg-4b7ada30e3923594b2907dcb8b431080></a></li><li>30: <a href=#pg-6d1154da2e554de858cf4e7b37c054fa></a></li><li>31: <a href=#pg-d3a16914ddc849435ed864163978ddbf></a></li><li>32: <a href=#pg-8a257337ea78e5d9a0c54aa971eaf991></a></li><li>33: <a href=#pg-77759011117e7974cbfee9694b6f8801></a></li><li>34: <a href=#pg-8e1920b2caaa8de839cd3997edca80e9></a></li><li>35: <a href=#pg-00aa8c2e4b3b2fd3a4b7986976b7bfda></a></li><li>36: <a href=#pg-316aa97ee5719be5a723ac1b77c44f5a></a></li><li>37: <a href=#pg-759e85e62b32c0697ab37c214e99a864></a></li><li>38: <a href=#pg-2e7091074560abc2a8e7b897cdd8a7b6></a></li><li>39: <a href=#pg-eedb8f5a6ed4cff1dfb1a5d14176b5b3></a></li><li>40: <a href=#pg-c55f2fa6bdaa124b37da090a3ef90902></a></li><li>41: <a href=#pg-10f416336efdcee22d691869e7585b9f></a></li><li>42: <a href=#pg-c4b6d149cda7cac896f4374c821b7fc6></a></li><li>43: <a href=#pg-1db087626f4f368e932df6f12993a5ab></a></li><li>44: <a href=#pg-e85da83e18a50e472eb56320af55768a></a></li><li>45: <a href=#pg-eb911bdcb8bb53ceb8b253089ab0d814></a></li><li>46: <a href=#pg-62c5dc89c39f3ecd6aee57545d12891a></a></li><li>47: <a href=#pg-2a79e12b9455f0ca1a6d5b00a9841249></a></li><li>48: <a href=#pg-a2c8efac328fcf416e558bf167ef417d></a></li><li>49: <a href=#pg-d93bd37094201bdefdb3908c9a6c86b3></a></li><li>50: <a href=#pg-efa9ae4c92ed1c26dc04bb049db38cec></a></li><li>51: <a href=#pg-576c00359074987304b3b418cec9a5b1></a></li><li>52: <a href=#pg-e6097fe5dd013abd9f356c2566ef7b63></a></li><li>53: <a href=#pg-5ab65eab2498cc1893af5b3bf8fe08fc></a></li><li>54: <a href=#pg-fcb78718510a9d3027d1bb9d379c0c17></a></li><li>55: <a href=#pg-a0e1457f667eb757f82f8c42901aa6c5></a></li><li>56: <a href=#pg-59e362bf565041872395d165e99eafc1></a></li><li>57: <a href=#pg-2a5040747a02ae2b2326c9901f1725d3></a></li><li>58: <a href=#pg-043bd19497eefb77a6ed30a4d704fe7c></a></li><li>59: <a href=#pg-bffb0d67824e75ade7232d09754b9718></a></li><li>60: <a href=#pg-a37b5872c572c71775e389df50fca215></a></li><li>61: <a href=#pg-3f49598c499c3356d89d98fdc8c8ad79></a></li><li>62: <a href=#pg-7d68ac74e5301f789ddd2e25dd36218e></a></li><li>63: <a href=#pg-e7c1ae3d905d9b6854216e26651955cd></a></li><li>64: <a href=#pg-967a98823c19c8338bfc0e1338a20fb1></a></li><li>65: <a href=#pg-b5838cc93a3fdb37b61afd201a71edd9></a></li><li>66: <a href=#pg-f54c84a0fdada369a87b2ced6ccfc38f></a></li><li>67: <a href=#pg-0d96e214c09a8f014e984a6b980522b3></a></li><li>68: <a href=#pg-48afa88840a20edf1ad613c18480d4fc></a></li><li>69: <a href=#pg-14da359f76a0f36af507d289dd4a5050></a></li><li>70: <a href=#pg-3fda282409b804a14879b9c65c035797></a></li><li>71: <a href=#pg-e044e6c69c2b1512c8d89430e0400771></a></li><li>72: <a href=#pg-9f968809f867b76728697577492429e8></a></li><li>73: <a href=#pg-c3c506c1683aed34398a34ab66d609da></a></li><li>74: <a href=#pg-2c1a5a4405dca745ef50b4e86f5977c7></a></li><li>75: <a href=#pg-003aaef561d065ecdaeb2c325b6b9253></a></li><li>76: <a href=#pg-535f050663a6d8db3a61df2b19a0714b></a></li><li>77: <a href=#pg-2f0a684baffe3cdf830c16693412f8e0></a></li><li>78: <a href=#pg-aba528e06c437710b269f4e41f854fdd></a></li><li>79: <a href=#pg-1d7987a759cd1519def4d433710cdff1></a></li><li>80: <a href=#pg-33216a69b333c330cb8b305a119abc7c></a></li><li>81: <a href=#pg-53abd743076fc859067264f3e8e676e0></a></li><li>82: <a href=#pg-3a08eb202d572e417768a942ad24c59f></a></li><li>83: <a href=#pg-11ed4820a6c3b411d9c4b87163cf0ae7></a></li><li>84: <a href=#pg-e81c9d9320242b5ed4b063beea6696f8></a></li><li>85: <a href=#pg-47f2d404188d6eb1fbf6fffd7fba4e48></a></li><li>86: <a href=#pg-257824537b4c6c6b33249aa786461156></a></li><li>87: <a href=#pg-e10faf6f940de61052258af59e036518></a></li><li>88: <a href=#pg-a46a193f2322aa88cb3b2de2447b0461></a></li><li>89: <a href=#pg-f5b27d7bd0eeed918f8635c68d220dc5></a></li><li>90: <a href=#pg-370e9ffda66b4c48dfa54ea37c3aad21></a></li><li>91: <a href=#pg-6bd27042c883aa5c498647d37762392c></a></li><li>92: <a href=#pg-3a000435e1cca0be398b44b487f530c8></a></li><li>93: <a href=#pg-bee6749065a369c2ab5b311eb43c40ba></a></li><li>94: <a href=#pg-bdd9680ec894593d17f782d5e5665fd4></a></li><li>95: <a href=#pg-1d005baad1a1e217d7ae0210fec96c3f></a></li><li>96: <a href=#pg-c79d11d27bed54caac743c93e0b2fb24></a></li><li>97: <a href=#pg-ba78e64c325e4131dd741235e2a1b2c0></a></li><li>98: <a href=#pg-872d33f1fbc83cb2f0bf89b4bd545174></a></li><li>99: <a href=#pg-7d8c1710684742ca940f580674225d9d></a></li><li>100: <a href=#pg-28dcf20d89c7bb1c8e7a3873d7703d5d></a></li><li>101: <a href=#pg-f869b6331e40c6f9eb01314f96d3113e></a></li><li>102: <a href=#pg-19a94d2f7649959b218952cef00729f4></a></li><li>103: <a href=#pg-b22d3ed181fb7f926ae2081f8fc8c14d></a></li><li>104: <a href=#pg-ae1ea74c2c21b25a3c1eacdaf549274b></a></li><li>105: <a href=#pg-633020ef232bc34f60c82153578a6c9b></a></li><li>106: <a href=#pg-e938edeb3d824f9b364de617a1f10a93></a></li><li>107: <a href=#pg-aa9f718186487df2ab6885cae45f5d37></a></li><li>108: <a href=#pg-60d816e74ec8e0301cc484b19d7694e6></a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-fd3ad295c1f10bfa333f841bbdffba81>1 -</h1><p>kubeadm: 轻松创建一个安全的 Kubernetes 集群</p><h3 id=摘要>摘要</h3><pre tabindex=0><code>┌──────────────────────────────────────────────────────────┐
│ KUBEADM                                                  │
│ 轻松创建一个安全的 Kubernetes 集群                       │
│                                                          │
│ 给我们反馈意见的地址：                                   │
│ https://github.com/kubernetes/kubeadm/issues             │
└──────────────────────────────────────────────────────────┘
</code></pre><p>用途示例：</p><p>创建一个有两台机器的集群，包含一个主节点（用来控制集群），和一个工作节点（运行你的工作负载，像 Pod 和 Deployment）。</p><pre tabindex=0><code>┌──────────────────────────────────────────────────────────┐
│ 在第一台机器上：                                         │
├──────────────────────────────────────────────────────────┤
│ control-plane# kubeadm init                              │
└──────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────┐
│ 在第二台机器上：                                         │
├──────────────────────────────────────────────────────────┤
│ worker# kubeadm join &amp;lt;arguments-returned-from-init&amp;gt;│
└──────────────────────────────────────────────────────────┘
</code></pre><p>你可以重复第二步，向集群添加更多机器。</p><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 操作的帮助信息<p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。<p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-8df9aba508b2736a6712ef46227eea7d>2 -</h1><p>处理 Kubernetes 证书的相关命令</p><h3 id=概要>概要</h3><p>处理 Kubernetes 证书相关的命令</p><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>certs 命令的帮助</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到'真实'主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-018648dfc6f28bc9b969f45af0563cae>3 -</h1><p>生成证书密钥</p><h3 id=概要>概要</h3><p>该命令将打印出可以与 "init" 命令一起使用的安全的随机生成的证书密钥。</p><p>你也可以使用 <code>kubeadm init --upload-certs</code> 而无需指定证书密钥；
命令将为你生成并打印一个证书密钥。</p><pre tabindex=0><code>kubeadm certs certificate-key [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>certificate-key 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-4a1ff27cdf01c1c47d034278048e776b>4 -</h1><p>为一个 Kubernetes 集群检查证书的到期时间</p><h3 id=概要>概要</h3><p>检查 kubeadm 管理的本地 PKI 中证书的到期时间。</p><pre tabindex=0><code>kubeadm certs check-expiration [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值: "/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存证书的路径</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>check-expiration 的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认为: "/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在和集群连接时使用该 kubeconfig 文件。
如果该标志没有设置，那么将会在一些标准的位置去搜索存在的 kubeconfig 文件。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到'真实'主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-5d6b2999153cd86f56329534249fc4ec>5 -</h1><p>生成密钥和证书签名请求</p><h3 id=概要>概要</h3><p>为运行控制平面所需的所有证书生成密钥和证书签名请求（CSR）。该命令会生成部分 kubeconfig 文件，
其中 "users > user > client-key-data" 字段包含私钥数据，并为每个 kubeconfig
文件创建一个随附的 ".csr" 文件。</p><p>此命令设计用于 <a href=https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/kubeadm/kubeadm-certs/#external-ca-mode>Kubeadm 外部 CA 模式</a>。
它生成你可以提交给外部证书颁发机构进行签名的 CSR。</p><p>你需要使用 ".crt" 作为文件扩展名将 PEM 编码的签名证书与密钥文件一起保存。
或者，对于 kubeconfig 文件，PEM 编码的签名证书应使用 base64 编码，
并添加到 "users > user > client-certificate-data" 字段。</p><pre tabindex=0><code>kubeadm certs generate-csr [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 以下命令将为所有控制平面证书和 kubeconfig 文件生成密钥和 CSR :
kubeadm certs generate-csr --kubeconfig-dir /tmp/etc-k8s --cert-dir /tmp/etc-k8s/pki
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存证书的路径</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>generate-csr 命令的帮助</p></td></tr><tr><td colspan=2>--kubeconfig-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存 kubeconfig 文件的路径。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到'真实'主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-adb5eecdc351074cc2e0cc2b1b4f04a8>6 -</h1><p>为 Kubernetes 集群更新证书</p><h3 id=概要>概要</h3><p>此命令并非设计用来单独运行。请参阅可用子命令列表。</p><pre tabindex=0><code>kubeadm certs renew [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>renew 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-df4c2dc6cba0be90d8d7de2fca9b87f7>7 -</h1><p>续订 kubeconfig 文件中嵌入的证书，供管理员 和 kubeadm 自身使用。</p><h3 id=概要>概要</h3><p>续订 kubeconfig 文件中嵌入的证书，供管理员 和 kubeadm 自身使用。</p><p>无论证书的到期日期如何，续订都是无条件进行的；SAN 等额外属性将基于现有文件/证书，因此无需重新提供它们。</p><p>默认情况下，续订会尝试使用由 kubeadm 管理的本地 PKI 中的证书机构；作为替代方案，
也可以使用 K8s 证书 API 进行证书续订，或者（作为最后一种选择）生成 CSR 请求。</p><p>续订后，为了使更改生效，需要重新启动控制平面组件，并最终重新分发更新的证书，以防证书文件在其他地方使用。</p><pre tabindex=0><code>kubeadm certs renew admin.conf [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>admin.conf 子操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: "/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--use-api</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>使用 Kubernetes 证书 API 续订证书</td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-6d6746e8ac1f1602f7dab1056b27e5c2>8 -</h1><p>续订所有可用证书</p><h3 id=概要>概要</h3><p>续订运行控制平面所需的所有已知证书。续订是无条件进行的，与到期日期无关。续订也可以单独运行以进行更多控制。</p><pre tabindex=0><code>kubeadm certs renew all [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>all 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--use-api</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>使用 Kubernetes 证书 API 续订证书</td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-7449c7fa06f25b967cf531e937b0f4b2>9 -</h1><p>续订 apiserver 用于访问 etcd 的证书</p><h3 id=概要>概要</h3><p>续订 apiserver 用于访问 etcd 的证书。</p><p>无论证书的到期日期如何，续订都会无条件地进行；SAN 等额外属性将基于现有文件/证书，因此无需重新提供它们。</p><p>默认情况下，续订尝试使用在 kubeadm 所管理的本地 PKI 中的证书颁发机构；作为替代方案，
可以使用 K8s 证书 API 进行证书更新，或者作为最后一个选择来生成 CSR 请求。</p><p>续订后，为了使更改生效，需要重新启动控制平面组件，并最终重新分发更新的证书，以防文件在其他地方使用。</p><pre tabindex=0><code>kubeadm certs renew apiserver-etcd-client [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>apiserver-etcd-client 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-b5c6ae77d3be9bd358c68667006cfc18>10 -</h1><p>续订 apiserver 用于连接 kubelet 的证书。</p><h3 id=概要>概要</h3><p>续订 apiserver 用于连接 kubelet 的证书。</p><p>无论证书的到期日期如何，续订都会无条件地进行；SAN 等额外属性将基于现有文件/证书，因此无需重新提供它们。</p><p>默认情况下，续订尝试使用位于 kubeadm 所管理的本地 PKI 中的证书颁发机构；作为替代方案，
也可能调用 K8s 证书 API 进行证书更新；亦或者，作为最后一个选择，生成 CSR 请求。</p><p>续订后，为了使更改生效，需要重新启动控制平面组件，并最终重新分发更新的证书，以防文件在其他地方使用。</p><pre tabindex=0><code>kubeadm certs renew apiserver-kubelet-client [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>apiserver-kubelet-client 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--use-api</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>使用 Kubernetes 证书 API 续订证书</td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-4f804e59ec1739e733807d2b591d771f>11 -</h1><p>续订用于提供 Kubernetes API 的证书</p><h3 id=概要>概要</h3><p>续订用于提供 Kubernetes API 的证书。</p><p>无论证书的到期日期如何，续订都会无条件地进行；SAN 等额外属性将基于现有文件/证书，因此无需重新提供它们。</p><p>默认情况下，续订尝试在 kubeadm 管理的本地 PKI 中使用证书颁发机构；作为替代方案，
可以使用 K8s 证书 API 进行证书更新，或者作为最后一个选择来生成 CSR 请求。</p><p>续订后，为了使更改生效，需要重新启动控制平面组件，并最终重新分发更新的证书，以防文件在其他地方使用。</p><pre tabindex=0><code>kubeadm certs renew apiserver [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>apiserver 子操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-f5cf8caa95834803b133d53c321ab4a9>12 -</h1><p>续订 kubeconfig 文件中嵌入的证书，以供控制器管理器（Controller Manager）使用。</p><h3 id=概要>概要</h3><p>续订 kubeconfig 文件中嵌入的证书，以供控制器管理器（Controller Manager）使用。</p><p>续订无条件地进行，与证书的到期日期无关；SAN 等额外属性将基于现有的文件/证书，因此无需重新提供它们。</p><p>默认情况下，续订会尝试使用 kubeadm 管理的本地 PKI 中的证书颁发机构；作为替代方案，
可以使用 K8s 证书 API 进行证书续订；亦或者，作为最后一种选择，生成 CSR 请求。</p><p>续订后，为了使更改生效，需要重新启动控制平面组件，并最终重新分发更新的证书，以防文件在其他地方使用。</p><pre tabindex=0><code>kubeadm alpha renew controller-manager.conf [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>controller-manager.conf 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--use-api</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>使用 Kubernetes 证书 API 续订证书</td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ee770858e2bb767b79d572b4882af656>13 -</h1><p>续订存活态探针的证书，用于对 etcd 执行健康检查</p><h3 id=概要>概要</h3><p>续订存活态探针的证书，用于对 etcd 执行健康检查。</p><p>无论证书的到期日期如何，续订都是无条件进行的；SAN 等额外属性将基于现有文件/证书，因此无需重新提供它们。</p><p>默认情况下，续订会尝试使用由 kubeadm 管理的本地 PKI 中的证书机构；作为替代方案，
也可以使用 K8s certificate API 进行证书续订，或者（作为最后一种选择）生成 CSR 请求。</p><p>续订后，为了使更改生效，需要重新启动控制平面组件，并最终重新分发更新的证书，以防证书文件在其他地方使用。</p><pre tabindex=0><code>kubeadm certs renew etcd-healthcheck-client [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>etcd-healthcheck-client 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-7484bf11b6183f4c329b1f66734cc886>14 -</h1><p>续订 etcd 节点间用来相互通信的证书</p><h3 id=概要>概要</h3><p>续订 etcd 节点间用来相互通信的证书。</p><p>无论证书的到期日期如何，续订都是无条件进行的；SAN 等额外属性将基于现有文件/证书，因此无需重新提供它们。</p><p>默认情况下，续订会尝试使用由 kubeadm 管理的本地 PKI 中的证书机构；
作为替代方案，也可以使用 K8s certificate API 进行证书续订，或者（作为最后一种选择）生成 CSR 请求。</p><p>续订后，为了使更改生效，需要重新启动控制平面组件，并最终重新分发更新的证书，以防证书文件在其他地方使用。</p><pre tabindex=0><code>kubeadm certs renew etcd-peer [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>etcd-peer 操作的帮助命令</td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--use-api</td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-bf444d915ab856dba693c36294c5427b>15 -</h1><p>续订用于提供 etcd 服务的证书</p><h3 id=概要>概要</h3><p>续订用于提供 etcd 服务的证书。</p><p>续订无条件地进行，与证书的到期日期无关；SAN 等额外属性将基于现有的文件/证书，因此无需重新提供它们。</p><p>默认情况下，续订会尝试在 kubeadm 管理的本地 PKI 中使用证书颁发机构；作为替代方案，
可以使用 K8s 证书 API 进行证书续订，或者作为最后一种选择来生成 CSR 请求。</p><p>续订后，为了使更改生效，需要重新启动控制平面组件，并最终重新分发更新的证书，以防文件在其他地方使用。</p><pre tabindex=0><code>kubeadm certs renew etcd-server [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>etcd-server 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--use-api</td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-f5c087e087714c5290b4967dd7924b3b>16 -</h1><p>为前端代理客户端续订证书。</p><h3 id=概要>概要</h3><p>为前端代理客户端续订证书。</p><p>无论证书的到期日期如何，续订都会无条件地进行；SAN 等额外属性将基于现有文件/证书，因此无需重新提供它们。</p><p>默认情况下，续订尝试使用位于 kubeadm 所管理的本地 PKI 中的证书颁发机构；作为替代方案，
也可以使用 K8s 证书 API 进行证书续订；亦或者，作为最后一种方案，生成 CSR 请求。</p><p>续订后，为了使更改生效，需要重新启动控制平面组件，并最终重新分发更新的证书，以防文件在其他地方使用。</p><pre tabindex=0><code>kubeadm certs renew front-proxy-client [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>front-proxy-client 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--use-api</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>使用 Kubernetes 证书 API 续订证书</td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-20703ce1c236264ad78cb1ad7244723e>17 -</h1><p>续订 kubeconfig 文件中嵌入的证书，以供调度管理器使用</p><h3 id=概要>概要</h3><p>续订 kubeconfig 文件中嵌入的证书，以供调度管理器使用。</p><p>续订无条件地进行，与证书的到期日期无关；SAN 等额外属性将基于现有的文件/证书，因此无需重新提供它们。</p><p>默认情况下，续订会尝试使用在 kubeadm 所管理的本地 PKI 中的证书颁发机构；作为替代方案，
也可以使用 K8s 证书 API 进行证书续订；亦或者，作为最后一种选择，生成 CSR 请求。</p><p>续订后，为了使更改生效，需要重新启动控制平面组件，并最终重新分发更新的证书，以防文件在其他地方使用。</p><pre tabindex=0><code>kubeadm certs renew scheduler.conf [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>scheduler.conf 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。
如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-49aaa494ef75de67609987a43e5ee520>18 -</h1><p>为指定 Shell（Bash 或 Zsh） 输出 Shell 补全代码</p><h3 id=概要>概要</h3><p>为指定的 shell（bash 或 zsh）输出 shell 自动补全代码。
必须激活 shell 代码以提供交互式 kubeadm 命令补全。这可以通过加载 .bash_profile 文件完成。</p><p>注意: 此功能依赖于 <code>bash-completion</code> 框架。</p><p>在 Mac 上使用 homebrew 安装:</p><pre tabindex=0><code>brew install bash-completion
</code></pre><p>安装后，必须激活 bash_completion。这可以通过在 .bash_profile 文件中添加下面的命令行来完成</p><pre tabindex=0><code>source $(brew --prefix)/etc/bash_completion
</code></pre><p>如果在 Linux 上没有安装 bash-completion，请通过你的发行版的包管理器安装 <code>bash-completion</code> 软件包。</p><p>zsh 用户注意事项：[1] zsh 自动补全仅在 >=v5.2 及以上版本中支持。</p><pre tabindex=0><code>kubeadm completion SHELL [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 在 Mac 上使用 homebrew 安装 bash completion
brew install bash-completion
printf &#34;\n# Bash completion support\nsource $(brew --prefix)/etc/bash_completion\n&#34; &gt;&gt; $HOME/.bash_profile
source $HOME/.bash_profile

# 将 bash 版本的 kubeadm 自动补全代码加载到当前 shell 中
source &lt;(kubeadm completion bash)

# 将 bash 自动补全完成代码写入文件并且从 .bash_profile 文件加载它
printf &#34;\n# Kubeadm shell completion\nsource &#39;$HOME/.kube/kubeadm_completion.bash.inc&#39;\n&#34; &gt;&gt; $HOME/.bash_profile
source $HOME/.bash_profile

# 将 zsh 版本的 kubeadm 自动补全代码加载到当前 shell 中
source &lt;(kubeadm completion zsh)
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>completion 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d63311c16e6468f5a5940aadd902faa7>19 -</h1><p>管理持久化在 ConfigMap 中的 kubeadm 集群的配置</p><h3 id=概要>概要</h3><p>kube-system 命名空间里有一个名为 "kubeadm-config" 的 ConfigMap，kubeadm 用它来存储有关集群的内部配置。
kubeadm CLI v1.8.0+ 通过一个配置自动创建该 ConfigMap，这个配置是和 'kubeadm init' 共用的。
但是您如果使用 kubeadm v1.7.x 或更低的版本初始化集群，那么必须使用 'config upload' 命令创建该 ConfigMap。
这是必要的操作，目的是使 'kubeadm upgrade' 能够正确地配置升级后的集群。</p><pre tabindex=0><code>kubeadm config [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>config 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 kubeconfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 kubeconfig 文件</td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-6678a79b85306310066616185153377d>20 -</h1><p>与 kubeadm 使用的容器镜像交互</p><h3 id=概要>概要</h3><p>与 kubeadm 使用的容器镜像交互。</p><pre tabindex=0><code>kubeadm config images [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>images 的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 kubeconfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-8f73e208cc67d221165f6294393881a7>21 -</h1><p>打印 kubeadm 要使用的镜像列表。配置文件用于自定义镜像或镜像存储库。</p><h3 id=概要>概要</h3><p>打印 kubeadm 要使用的镜像列表。配置文件用于自定义镜像或镜像存储库。</p><pre tabindex=0><code>kubeadm config images list [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--allow-missing-template-keys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：true</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果设置为 true，则在模板中缺少字段或哈希表的键时忽略模板中的任何错误。
仅适用于 golang 和 jsonpath 输出格式。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-o, --experimental-output string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："text"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>输出格式：text|json|yaml|go-template|go-template-file|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file 其中之一</p></td></tr><tr><td colspan=2>--feature-gates string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组键值对（key=value），用于描述各种特征。选项是：<br>PublicKeysECDSA=true|false (ALPHA - 默认=false)<br>RootlessControlPlane=true|false (ALPHA - 默认=false)<br>UnversionedKubeletConfigMap=true|false (默认=true)</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>list 操作的帮助命令</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："registry.k8s.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择要从中拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择一个特定的 Kubernetes 版本</p></td></tr><tr><td colspan=2>--show-managed-fields</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果为 true，则在以 JSON 或 YAML 格式打印对象时保留 managedFields。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 kubeconfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到“真实”主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-9aec3477159c105a46f4479de1c21418>22 -</h1><p>拉取 kubeadm 使用的镜像。</p><h3 id=概要>概要</h3><p>拉取 kubeadm 使用的镜像。</p><pre tabindex=0><code>kubeadm config images pull [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--cri-socket string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要连接的 CRI 套接字的路径。如果为空，则 kubeadm 将尝试自动检测此值；仅当安装了多个 CRI 或具有非标准 CRI 插槽时，才使用此选项。</p></td></tr><tr><td colspan=2>--feature-gates string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>一系列键值对（key=value），用于描述各种特征。可选项是：<br>PublicKeysECDSA=true|false (ALPHA - 默认值=false)<br>RootlessControlPlane=true|false (ALPHA - 默认值=false)<br>UnversionedKubeletConfigMap=true|false (默认值=true)</td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>pull 操作的帮助命令</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："registry.k8s.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择用于拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择一个特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 kubeconfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-045e41c28798930e21f77a90c3a90263>23 -</h1><p>从文件中读取旧版本的 kubeadm 配置的 API 类型，并为新版本输出类似的配置对象</p><h3 id=概要>概要</h3><p>此命令允许您在 CLI 工具中将本地旧版本的配置对象转换为最新支持的版本，而无需变更集群中的任何内容。在此版本的 kubeadm 中，支持以下 API 版本：</p><ul><li>kubeadm.k8s.io/v1beta3</li></ul><p>因此，无论您在此处传递 --old-config 参数的版本是什么，当写入到 stdout 或 --new-config （如果已指定）时，
都会读取、反序列化、默认、转换、验证和重新序列化 API 对象。</p><p>换句话说，如果您将此文件传递给 "kubeadm init"，则该命令的输出就是 kubeadm 实际上在内部读取的内容。</p><pre tabindex=0><code>kubeadm config migrate [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>migrate 操作的帮助信息</p></td></tr><tr><td colspan=2>--new-config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>使用新的 API 版本生成的 kubeadm 配置文件的路径。这个路径是可选的。如果没有指定，输出将被写到 stdout。</p></td></tr><tr><td colspan=2>--old-config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>使用旧 API 版本且应转换的 kubeadm 配置文件的路径。此参数是必需的。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 kubeconfig 文件。如果未设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e7d83478123771ad14f475ee44440303>24 -</h1><p>打印配置</p><h3 id=概要>概要</h3><p>此命令打印子命令所提供的配置信息。
相关细节可参阅: <a href=https://pkg.go.dev/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm#section-directories>https://pkg.go.dev/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm#section-directories</a></p><pre tabindex=0><code>kubeadm config print [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>print 命令的帮助信息</p></td></tr></tbody></table><h3 id=从父命令继承而来的选项>从父命令继承而来的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如此标志未设置，将在一组标准位置中搜索现有的kubeconfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[试验性] 指向“真实”宿主根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-57a6b20d9571220989a7a445d4459468>25 -</h1><p>打印用于 'kubeadm init' 的默认 init 配置</p><h3 id=概要>概要</h3><p>此命令打印对象，例如用于 'kubeadm init' 的默认 init 配置对象。</p><p>请注意，Bootstrap Token 字段之类的敏感值已替换为 "abcdef.0123456789abcdef" 之类的占位符值以通过验证，但不执行创建令牌的实际计算。<pre tabindex=0><code>kubeadm config print init-defaults [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--component-configs strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>组件配置 API 对象的逗号分隔列表，打印其默认值。可用值：[KubeProxyConfiguration KubeletConfiguration]。如果未设置此参数，则不会打印任何组件配置。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>init-defaults 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-92a2c11eef37937af846b55d9b87a544>26 -</h1><p>打印默认的节点添加配置，该配置可用于 'kubeadm join' 命令</p><h3 id=概要>概要</h3><p>此命令打印对象，例如用于 'kubeadm join' 的默认 join 配置对象。</p><p>请注意，诸如启动引导令牌字段之类的敏感值已替换为 "abcdef.0123456789abcdef" 之类的占位符值以通过验证，
但不执行创建令牌的实际计算。</p><pre tabindex=0><code>kubeadm config print join-defaults [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--component-configs strings/td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>组件配置 API 对象的逗号分隔列表，打印其默认值。可用值：[KubeProxyConfiguration KubeletConfiguration]。如果未设置此参数，则不会打印任何组件配置。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>join-defaults 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-dcfffcaafb438cd650475945ddc129ee>27 -</h1><p>运行此命令以安装 Kubernetes 控制平面。</p><h3 id=概要>概要</h3><p>运行此命令来搭建 Kubernetes 控制平面节点。</p><p>"init" 命令执行以下阶段：</p><pre tabindex=0><code>preflight                    Run pre-flight checks
certs                        Certificate generation
  /ca                          Generate the self-signed Kubernetes CA to provision identities for other Kubernetes components
  /apiserver                   Generate the certificate for serving the Kubernetes API
  /apiserver-kubelet-client    Generate the certificate for the API server to connect to kubelet
  /front-proxy-ca              Generate the self-signed CA to provision identities for front proxy
  /front-proxy-client          Generate the certificate for the front proxy client
  /etcd-ca                     Generate the self-signed CA to provision identities for etcd
  /etcd-server                 Generate the certificate for serving etcd
  /etcd-peer                   Generate the certificate for etcd nodes to communicate with each other
  /etcd-healthcheck-client     Generate the certificate for liveness probes to healthcheck etcd
  /apiserver-etcd-client       Generate the certificate the apiserver uses to access etcd
  /sa                          Generate a private key for signing service account tokens along with its public key
kubeconfig                   Generate all kubeconfig files necessary to establish the control plane and the admin kubeconfig file
  /admin                       Generate a kubeconfig file for the admin to use and for kubeadm itself
  /kubelet                     Generate a kubeconfig file for the kubelet to use *only* for cluster bootstrapping purposes
  /controller-manager          Generate a kubeconfig file for the controller manager to use
  /scheduler                   Generate a kubeconfig file for the scheduler to use
kubelet-start                Write kubelet settings and (re)start the kubelet
control-plane                Generate all static Pod manifest files necessary to establish the control plane
  /apiserver                   Generates the kube-apiserver static Pod manifest
  /controller-manager          Generates the kube-controller-manager static Pod manifest
  /scheduler                   Generates the kube-scheduler static Pod manifest
etcd                         Generate static Pod manifest file for local etcd
  /local                       Generate the static Pod manifest file for a local, single-node local etcd instance
upload-config                Upload the kubeadm and kubelet configuration to a ConfigMap
  /kubeadm                     Upload the kubeadm ClusterConfiguration to a ConfigMap
  /kubelet                     Upload the kubelet component config to a ConfigMap
upload-certs                 Upload certificates to kubeadm-certs
mark-control-plane           Mark a node as a control-plane
bootstrap-token              Generates bootstrap tokens used to join a node to a cluster
kubelet-finalize             Updates settings relevant to the kubelet after TLS bootstrap
  /experimental-cert-rotation  Enable kubelet client certificate rotation
addon                        Install required addons for passing Conformance tests
  /coredns                     Install the CoreDNS addon to a Kubernetes cluster
  /kube-proxy                  Install the kube-proxy addon to a Kubernetes cluster
</code></pre><pre tabindex=0><code>kubeadm init [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，则使用默认网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器绑定的端口。</p></td></tr><tr><td colspan=2>--apiserver-cert-extra-sans strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于 API Server 服务证书的可选附加主题备用名称（SAN）。可以是 IP 地址和 DNS 名称。</p></td></tr><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>--certificate-key string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于加密 kubeadm-certs Secret 中的控制平面证书的密钥。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>--cri-socket string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要连接的 CRI 套接字的路径。如果为空，则 kubeadm 将尝试自动检测此值；仅当安装了多个 CRI 或具有非标准 CRI 插槽时，才使用此选项。</p></td></tr><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不要应用任何更改；只是输出将要执行的操作。</p></td></tr><tr><td colspan=2>--feature-gates string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>一组用来描述各种功能特性的键值（key=value）对。选项是：<br>PublicKeysECDSA=true|false (ALPHA - 默认值=false)<br>RootlessControlPlane=true|false (ALPHA - 默认值=false)<br>UnversionedKubeletConfigMap=true|false (默认值=true)</td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>init 操作的帮助命令</p></td></tr><tr><td colspan=2>--ignore-preflight-errors strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>错误将显示为警告的检查列表；例如：'IsPrivilegedUser,Swap'。取值为 'all' 时将忽略检查中的所有错误。</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："registry.k8s.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择用于拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择一个特定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点的名称。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>它包含名为 "target[suffix][+patchtype].extension" 的文件的目录的路径。
例如，"kube-apiserver0+merge.yaml"或仅仅是 "etcd.json"。
"target" 可以是 "kube-apiserver"、"kube-controller-manager"、"kube-scheduler"、"etcd"、"kubeletconfiguration" 之一。
"patchtype" 可以是 "strategic"、"merge" 或者 "json" 之一，
并且它们与 kubectl 支持的补丁格式相同。
默认的 "patchtype" 是 "strategic"。
"extension" 必须是"json" 或"yaml"。
"suffix" 是一个可选字符串，可用于确定首先按字母顺序应用哪些补丁。</p></td></tr><tr><td colspan=2>--pod-network-cidr string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指明 pod 网络可以使用的 IP 地址段。如果设置了这个参数，控制平面将会为每一个节点自动分配 CIDRs。</p></td></tr><tr><td colspan=2>--service-cidr string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："10.96.0.0/12"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为服务的虚拟 IP 地址另外指定 IP 地址段</p></td></tr><tr><td colspan=2>--service-dns-domain string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："cluster.local"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>为服务另外指定域名，例如："myorg.internal"。</td></tr><tr><td colspan=2>--skip-certificate-key-print</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不要打印用于加密控制平面证书的密钥。</p></td></tr><tr><td colspan=2>--skip-phases strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要跳过的阶段列表</p></td></tr><tr><td colspan=2>--skip-token-print</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>跳过打印 'kubeadm init' 生成的默认引导令牌。</p></td></tr><tr><td colspan=2>--token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>这个令牌用于建立控制平面节点与工作节点间的双向通信。格式为 [a-z0-9]{6}.[a-z0-9]{16} - 示例：abcdef.0123456789abcdef</p></td></tr><tr><td colspan=2>--token-ttl duration&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：24h0m0s</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>令牌被自动删除之前的持续时间（例如 1 s，2 m，3 h）。如果设置为 '0'，则令牌将永不过期</p></td></tr><tr><td colspan=2>--upload-certs</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>将控制平面证书上传到 kubeadm-certs Secret。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-6eaa2624c512051ff2a9cdbc6ee54949>28 -</h1><p>使用此命令可以调用 init 工作流程的单个阶段</p><h3 id=概要>概要</h3><p>使用此命令可以调用 init 工作流程的单个阶段</p><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>phase 操作的帮助命令</p></td></tr></tbody></table><h3 id=继承于父命令的选择项>继承于父命令的选择项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-4b7ada30e3923594b2907dcb8b431080>29 -</h1><p>安装必要的插件以通过一致性测试</p><h3 id=概要>概要</h3><p>此命令并非设计用来单独运行。请参阅可用子命令列表。</p><pre tabindex=0><code>kubeadm init phase addon [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>addon 操作的帮助命令</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-6d1154da2e554de858cf4e7b37c054fa>30 -</h1><p>安装所有插件</p><h3 id=概要>概要</h3><p>安装所有插件（addon）</p><pre tabindex=0><code>kubeadm init phase addon all [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，则将使用默认网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器绑定的端口。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>--feature-gates string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>一组键值对（key=value），描述了各种特征。选项包括：<br>PublicKeysECDSA=true|false (ALPHA - 默认值=false)<br>RootlessControlPlane=true|false (ALPHA - 默认值=false)<br>UnversionedKubeletConfigMap=true|false (BETA - 默认值=true)</td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>all 操作的帮助命令</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："k8s.gcr.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择用于拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--pod-network-cidr string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定 Pod 网络的 IP 地址范围。如果已设置，控制平面将自动为每个节点分配 CIDR。</p></td></tr><tr><td colspan=2>--service-cidr string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："10.96.0.0/12"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为服务 VIP 使用 IP 地址的其他范围。</p></td></tr><tr><td colspan=2>--service-dns-domain string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："cluster.local"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>为服务使用其他域名，例如 "myorg.internal"。</td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d3a16914ddc849435ed864163978ddbf>31 -</h1><p>将 CoreDNS 插件安装到 Kubernetes 集群</p><h3 id=概要>概要</h3><p>通过 API 服务器安装 CoreDNS 附加组件。请注意，即使 DNS 服务器已部署，在安装 CNI 之前 DNS 服务器不会被调度执行。</p><pre tabindex=0><code>kubeadm init phase addon coredns [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--feature-gates string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组用来描述各种特性门控的键值（key=value）对。选项是：<br>PublicKeysECDSA=true|false (ALPHA - 默认值=false)<br>RootlessControlPlane=true|false (ALPHA - 默认值=false)<br>UnversionedKubeletConfigMap=true|false (默认值=true)</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>coredns 操作的帮助命令</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："registry.k8s.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择用于拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--print-manifest</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>向 STDOUT 输出插件清单，而不是安装这些插件</p></td></tr><tr><td colspan=2>--service-cidr string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："10.96.0.0/12"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为服务 VIP 选择 IP 地址范围。</p></td></tr><tr><td colspan=2>--service-dns-domain string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："cluster.local"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为服务使用其它域名，例如："myorg.internal"。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-8a257337ea78e5d9a0c54aa971eaf991>32 -</h1><p>将 kube-proxy 插件安装到 Kubernetes 集群</p><h3 id=概要>概要</h3><p>通过 API 服务器安装 kube-proxy 附加组件。</p><pre tabindex=0><code>kubeadm init phase addon kube-proxy [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，则将使用默认网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值: 6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器绑定的端口。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kube-proxy 操作的帮助命令</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："registry.k8s.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择用于拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--pod-network-cidr string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定 Pod 网络的 IP 地址范围。如果已设置，控制平面将自动为每个节点分配 CIDR。</p></td></tr><tr><td colspan=2>--print-manifest</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>向 STDOUT 打印插件清单，而非安装这些插件</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-77759011117e7974cbfee9694b6f8801>33 -</h1><p>生成用于将节点加入集群的引导令牌</p><h3 id=概要>概要</h3><p>启动引导令牌（bootstrap token）用于在即将加入集群的节点和控制平面节点之间建立双向信任。</p><p>该命令使启动引导令牌（bootstrap token）所需的所有配置生效，然后创建初始令牌。</p><pre tabindex=0><code>kubeadm init phase bootstrap-token [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 进行所有引导令牌配置，并创建一个初始令牌，功能上与 kubeadm init 生成的令牌等效。
kubeadm init phase bootstrap-token
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>bootstrap-token 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 kubeconfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--skip-token-print</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>跳过打印 'kubeadm init' 生成的默认引导令牌。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-8e1920b2caaa8de839cd3997edca80e9>34 -</h1><p>证书生成</p><h3 id=概要>概要</h3><p>此命令并非设计用来单独运行。请参阅可用子命令列表。</p><pre tabindex=0><code>kubeadm init phase certs [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>certs 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父指令中继承的选项>从父指令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-00aa8c2e4b3b2fd3a4b7986976b7bfda>35 -</h1><p>生成所有证书</p><h3 id=概要>概要</h3><p>生成所有证书</p><pre tabindex=0><code>kubeadm init phase certs all [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，将使用默认网络接口。</p></td></tr><tr><td colspan=2>--apiserver-cert-extra-sans strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于 API 服务器服务证书的可选额外替代名称（SAN）。可以同时使用 IP 地址和 DNS 名称。</p></td></tr><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>证书的存储路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>all 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--service-cidr string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："10.96.0.0/12"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>VIP 服务使用其它的 IP 地址范围。</p></td></tr><tr><td colspan=2>--service-dns-domain string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："cluster.local"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>服务使用其它的域名，例如："myorg.internal"。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-316aa97ee5719be5a723ac1b77c44f5a>36 -</h1><p>生成 apiserver 用来访问 etcd 的证书</p><h3 id=概要>概要</h3><p>生成 apiserver 用于访问 etcd 的证书，并将其保存到 apiserver-etcd-client.crt 和 apiserver-etcd-client.key 文件中。</p><p>如果两个文件都已存在，则 kubeadm 将跳过生成步骤，使用现有文件。</p><p>Alpha 免责声明：此命令当前为 Alpha 功能。</p><pre tabindex=0><code>kubeadm init phase certs apiserver-etcd-client [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>证书的存储路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>apiserver-etcd-client 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-759e85e62b32c0697ab37c214e99a864>37 -</h1><p>生成供 API 服务器连接 kubelet 的证书</p><h3 id=概要>概要</h3><p>生成供 API 服务器连接 kubelet 的证书，并将其保存到 apiserver-kubelet-client.crt 和 apiserver-kubelet-client.key 文件中。</p><p>如果两个文件都已存在，则 kubeadm 将跳过生成步骤，使用现有文件。</p><p>Alpha 免责声明：此命令当前为 Alpha 功能。</p><pre tabindex=0><code>kubeadm init phase certs apiserver-kubelet-client [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>apiserver-kubelet-client 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向宿主机上的 '实际' 根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2e7091074560abc2a8e7b897cdd8a7b6>38 -</h1><p>生成用于服务 Kubernetes API 的证书</p><h3 id=概要>概要</h3><p>生成用于服务 Kubernetes API 的证书，并将其保存到 apiserver.crt 和 apiserver.key 文件中。</p><p>如果两个文件都已存在，则 kubeadm 将跳过生成步骤，使用现有文件。</p><p>Alpha 免责声明：此命令当前为 Alpha 功能。</p><pre tabindex=0><code>kubeadm init phase certs apiserver [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，则使用默认的网络接口。</p></td></tr><tr><td colspan=2>--apiserver-cert-extra-sans strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于 API Server 服务证书的可选附加主体备用名称（SAN）。可以是 IP 地址和 DNS 名称。</p></td></tr><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>证书的存储路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>apiserver 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定特定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--service-cidr string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："10.96.0.0/12"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定服务 VIP 可使用的其他 IP 地址段。</p></td></tr><tr><td colspan=2>--service-dns-domain string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："cluster.local"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为服务使用其他域名，例如 "myorg.internal"。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-eedb8f5a6ed4cff1dfb1a5d14176b5b3>39 -</h1><p>生成自签名的 Kubernetes CA 以便为其他 Kubernetes 组件提供身份标识</p><h3 id=概要>概要</h3><p>生成自签名的 Kubernetes CA 以便为其他 Kubernetes 组件提供身份标识，并将其保存到 ca.crt 和 ca.key 文件中。</p><p>如果两个文件都已存在，则 kubeadm 将跳过生成步骤，使用现有文件。</p><p>Alpha 免责声明：此命令当前为 Alpha 功能。</p><pre tabindex=0><code>kubeadm init phase certs ca [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>证书的存储路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>ca 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-c55f2fa6bdaa124b37da090a3ef90902>40 -</h1><p>生成用于为 etcd 设置身份的自签名 CA</p><h3 id=概要>概要</h3><p>生成用于为 etcd 设置身份的自签名 CA，并将其保存到 etcd/ca.crt 和 etcd/ca.key 文件中。</p><p>如果两个文件都已存在，则 kubeadm 将跳过生成步骤，使用现有文件。</p><p>Alpha 免责声明：此命令当前为 Alpha 功能。</p><pre tabindex=0><code>kubeadm init phase certs etcd-ca [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>证书的存储路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>etcd-ca 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-10f416336efdcee22d691869e7585b9f>41 -</h1><p>生成用于 etcd 健康检查的活跃性探针的证书</p><h3 id=概要>概要</h3><p>生成用于 etcd 健康检查的活跃性探针的证书，并将其保存到 etcd/healthcheck-client.crt 和 etcd/healthcheck-client.key 文件中。</p><p>如果两个文件都已存在，则 kubeadm 将跳过生成步骤，使用现有文件。</p><p>Alpha 免责声明：此命令当前为 alpha 功能。</p><pre tabindex=0><code>kubeadm init phase certs etcd-healthcheck-client [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>证书存储的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>etcd-healthcheck-client 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-c4b6d149cda7cac896f4374c821b7fc6>42 -</h1><p>生成 etcd 节点相互通信的证书</p><h3 id=概要>概要</h3><p>生成 etcd 节点相互通信的证书，并将其保存到 etcd/peer.crt 和 etcd/peer.key 文件中。</p><p>默认 SAN 为 localhost、127.0.0.1、127.0.0.1、:: 1</p><p>如果两个文件都已存在，则 kubeadm 将跳过生成步骤，使用现有文件。</p><p>Alpha 免责声明：此命令当前为 alpha 功能。</p><pre tabindex=0><code>kubeadm init phase certs etcd-peer [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>etcd-peer 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-1db087626f4f368e932df6f12993a5ab>43 -</h1><h3 id=概要>概要</h3><p>生成用于提供 etcd 服务的证书，并将其保存到 etcd/server.crt 和 etcd/server.key 文件中。</p><p>默认 SAN 为 localhost、127.0.0.1、127.0.0.1、:: 1</p><p>如果两个文件都已存在，则 kubeadm 将跳过生成步骤，使用现有文件。</p><p>Alpha 免责声明：此命令当前为 alpha 功能。</p><pre tabindex=0><code>kubeadm init phase certs etcd-server [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。<p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。<p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>etcd-server 操作的帮助命令<p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定特定的 Kubernetes 版本。<p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。<p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e85da83e18a50e472eb56320af55768a>44 -</h1><p>生成自签名 CA 来提供前端代理的身份</p><h3 id=概要>概要</h3><p>生成自签名 CA 来提供前端代理的身份，并将其保存到 front-proxy-ca.cert 和 front-proxy-ca.key 文件中。</p><p>如果两个文件都已存在，kubeadm 将跳过生成步骤并将使用现有文件。</p><p>Alpha 免责声明：此命令目前是 alpha 阶段。</p><pre tabindex=0><code>kubeadm init phase certs front-proxy-ca [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>front-proxy-ca 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-eb911bdcb8bb53ceb8b253089ab0d814>45 -</h1><p>为前端代理客户端生成证书</p><h3 id=概要>概要</h3><p>为前端代理客户端生成证书，并将其保存到 front-proxy-client.crt 和 front-proxy-client.key 文件中。
如果两个文件都已存在，kubeadm 将跳过生成步骤并将使用现有文件。
Alpha 免责声明：此命令目前是 alpha 阶段。</p><pre tabindex=0><code>kubeadm init phase certs front-proxy-client [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>front-proxy-client 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-62c5dc89c39f3ecd6aee57545d12891a>46 -</h1><p>生成用来签署服务账号令牌的私钥及其公钥</p><h3 id=概要>概要</h3><p>生成用来签署服务账号令牌的私钥及其公钥，并将其保存到 sa.key 和 sa.pub 文件中。
如果两个文件都已存在，则 kubeadm 会跳过生成步骤，而将使用现有文件。</p><p>Alpha 免责声明：此命令当前为 alpha 阶段。</p><pre tabindex=0><code>kubeadm init phase certs sa [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>sa 操作的帮助命令</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2a79e12b9455f0ca1a6d5b00a9841249>47 -</h1><p>生成建立控制平面所需的静态 Pod 清单文件</p><h3 id=概要>概要</h3><p>此命令并非设计用来单独运行。请参阅可用子命令列表。</p><pre tabindex=0><code>kubeadm init phase control-plane [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>control-plane 操作的帮助命令</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-a2c8efac328fcf416e558bf167ef417d>48 -</h1><p>生成所有静态 Pod 清单文件</p><h3 id=概要>概要</h3><p>生成所有的静态 Pod 清单文件</p><pre tabindex=0><code>kubeadm init phase control-plane all [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 为控制平面组件生成静态 Pod 清单文件，其功能等效于 kubeadm init 生成的文件。
kubeadm init phase control-plane all

# 使用从某配置文件中读取的选项为生成静态 Pod 清单文件。
kubeadm init phase control-plane all --config config.yaml
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，将使用默认的网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器要绑定的端口。</p></td></tr><tr><td colspan=2>--apiserver-extra-args &lt;逗号分割的 'key=value' 对></td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>形式为 &lt;flagname>=&lt;value> 的一组额外参数，用来传递给 API 服务器，
或者覆盖其默认配置值</p></td></tr><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择一个稳定的 IP 地址或者 DNS 名称。</p></td></tr><tr><td colspan=2>--controller-manager-extra-args &lt;逗号分割的 'key=value' 对></td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组形式为 &lt;flagname>=&lt;value> 的额外参数，用来传递给控制管理器（Controller Manager）
或覆盖其默认设置值</p></td></tr><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>不要应用任何变更；只是输出将要执行的操作。</td></tr><tr><td colspan=2>--feature-gates string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组用来描述各种特性门控的键值（key=value）对。选项是：<br>PublicKeysECDSA=true|false (ALPHA - 默认值=false)<br>RootlessControlPlane=true|false (ALPHA - 默认值=false)<br>UnversionedKubeletConfigMap=true|false (默认值=true)</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>all 操作的帮助命令</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："registry.k8s.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择用于拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择指定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 "target[suffix][+patchtype].extension" 的文件的目录的路径。
例如，"kube-apiserver0+merge.yaml"或是简单的 "etcd.json"。
"target" 可以是 "kube-apiserver"、"kube-controller-manager"、"kube-scheduler"、"etcd"、"kubeletconfiguration" 之一。
"patchtype" 可以是 "strategic"、"merge" 或者 "json" 之一，
并且它们与 kubectl 支持的补丁格式相匹配。
默认的 "patchtype" 是 "strategic"。
"extension" 必须是 "json" 或 "yaml"。
"suffix" 是一个可选字符串，可用于确定首先按字母顺序应用哪些补丁。</p></td></tr><tr><td colspan=2>--pod-network-cidr string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定 Pod 网络的 IP 地址范围。如果设置了此标志，控制平面将自动地为每个节点分配 CIDR。</p></td></tr><tr><td colspan=2>--scheduler-extra-args &lt;逗号分割的 'key=value' 对></td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组形式为 &lt;flagname>=&lt;value> 的额外参数，用来传递给调度器（Scheduler）
或覆盖其默认设置值<p>传递给调度器（scheduler）一组额外的参数或者以 &lt;flagname>=&lt;value> 形式覆盖其默认值。</p><p></td></tr><tr><td colspan=2>--service-cidr string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："10.96.0.0/12"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为服务 VIP 选择 IP 地址范围。</p></td></tr></tbody></table><h3 id=从父指令继承的选项>从父指令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机的根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-d93bd37094201bdefdb3908c9a6c86b3>49 -</h1><p>生成 kube-apiserver 静态 Pod 清单</p><h3 id=概要>概要</h3><p>生成 kube-apiserver 静态 Pod 清单</p><pre tabindex=0><code>kubeadm init phase control-plane apiserver [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，将使用默认网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值： 6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要绑定到 API 服务器的端口。</p></td></tr><tr><td colspan=2>--apiserver-extra-args &lt;逗号分隔的 'key=value' 对></td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组 &lt;flagname>=&lt;value> 形式的额外参数，用来传递给 API 服务器
或者覆盖其默认参数配置</p></td></tr><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不要应用任何更改；只是输出将要执行的操作。</p></td></tr><tr><td colspan=2>--feature-gates string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组键值对，用于描述各种功能特性的特性门控。选项是：<br>PublicKeysECDSA=true|false (ALPHA - 默认值=false)<br>RootlessControlPlane=true|false (ALPHA - 默认值=false)<br>UnversionedKubeletConfigMap=true|false (BETA - 默认值=true)</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>apiserver 操作的帮助命令</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："k8s.gcr.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择要从中拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 "target[suffix][+patchtype].extension" 的文件的目录的路径。
例如，"kube-apiserver0+merge.yaml"或仅仅是 "etcd.json"。
"target" 可以是 "kube-apiserver"、"kube-controller-manager"、"kube-scheduler"、"etcd" 之一。
"patchtype" 可以是 "strategic"、"merge" 或者 "json" 之一，
并且它们与 kubectl 支持的补丁格式相同。
默认的 "patchtype" 是 "strategic"。
"extension" 必须是"json" 或"yaml"。
"suffix" 是一个可选字符串，可用于确定首先按字母顺序应用哪些补丁。</p></td></tr><tr><td colspan=2>--service-cidr string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："10.96.0.0/12"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定服务 VIP 使用 IP 地址的其他范围。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-efa9ae4c92ed1c26dc04bb049db38cec>50 -</h1><p>生成 kube-controller-manager 静态 Pod 清单</p><h3 id=概要>概要</h3><p>生成 kube-controller-manager 静态 Pod 清单</p><pre tabindex=0><code>kubeadm init phase control-plane controller-manager [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--controller-manager-extra-args &lt;comma-separated 'key=value' pairs></td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组 &lt;flagname>=&lt; 形式的额外参数，传递给控制器管理器（Controller Manager）
或者覆盖其默认配置值</p></td></tr><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不应用任何变更，仅输出将要执行的操作</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>controller-manager 操作的帮助命令</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："k8s.gcr.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择要从中拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 "target[suffix][+patchtype].extension" 的文件的目录。
例如，"kube-apiserver0+merge.yaml" 或者 "etcd.json"。
"patchtype" 可以是 "strategic"、"merge" 或 "json" 之一，分别与 kubectl
所支持的 patch 格式相匹配。默认的 "patchtype" 是 "strategic"。
"extension" 必须是 "json" 或 "yaml"。
"suffix" 是一个可选的字符串，用来确定按字母顺序排序时首先应用哪些 patch。</p></td></tr><tr><td colspan=2>--pod-network-cidr string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定 Pod 网络的 IP 地址范围。如果设置，控制平面将自动为每个节点分配 CIDR。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-576c00359074987304b3b418cec9a5b1>51 -</h1><p>生成 kube-scheduler 静态 Pod 清单</p><h3 id=概要>概要</h3><p>生成 kube-scheduler 静态 Pod 清单</p><pre tabindex=0><code>kubeadm init phase control-plane scheduler [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不应用任何变更；仅仅输出将会变更的内容</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>scheduler 操作的帮助命令</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值:"k8s.gcr.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择要从中拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>包含名为 "target[suffix][+patchtype].extension" 的文件的目录。
例如，"kube-apiserver0+merge.yaml" 或者 "etcd.json"。
"patchtype" 可以是 "strategic"、"merge" 或 "json" 之一，分别与 kubectl
所支持的 patch 格式相匹配。默认的 "patchtype" 是 "strategic"。
"extension" 必须是 "json" 或 "yaml"。
"suffix" 是一个可选的字符串，用来确定按字母顺序排序时首先应用哪些 patch。</td></tr><tr><td colspan=2>--scheduler-extra-args &lt;逗号分隔的 'key=value' 键值对></td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组 &lt;flagname>=&lt;value> 形式的额外参数，用来传递给调度器
或者覆盖其默认参数配置</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e6097fe5dd013abd9f356c2566ef7b63>52 -</h1><p>为本地 etcd 生成静态 Pod 的清单文件</p><h3 id=概要>概要</h3><p>此命令并非设计用来单独运行。请参阅可用子命令列表。</p><pre tabindex=0><code>kubeadm init phase etcd [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>etcd 操作的帮助命令</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-5ab65eab2498cc1893af5b3bf8fe08fc>53 -</h1><p>为本地单节点 etcd 实例生成静态 Pod 清单文件</p><h3 id=概要>概要</h3><p>为本地单节点 etcd 实例生成静态 Pod 清单文件</p><pre tabindex=0><code>kubeadm init phase etcd local [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 为 etcd 生成静态 Pod 清单文件，其功能等效于 kubeadm init 生成的文件。
kubeadm init phase etcd local

# 使用从配置文件读取的选项为 etcd 生成静态 Pod 清单文件。
kubeadm init phase etcd local --config config.yaml
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>local 操作的帮助命令</p></td></tr><tr><td colspan=2>--image-repository string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："registry.k8s.io"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>选择要从中拉取控制平面镜像的容器仓库</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 "target[suffix][+patchtype].extension" 的文件的目录的路径。
例如，"kube-apiserver0+merge.yaml" 或是简单的 "etcd.json"。
"target" 可以是 "kube-apiserver"、"kube-controller-manager"、"kube-scheduler"、"etcd" 、"kubeletconfiguration" 之一。
"patchtype" 可以是 "strategic"、"merge" 或者 "json" 之一，
并且它们与 kubectl 支持的补丁格式相匹配。
默认的 "patchtype" 是 "strategic"。
"extension" 必须是 "json" 或 "yaml"。
"suffix" 是一个可选字符串，可用于确定首先按字母顺序应用哪些补丁。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-fcb78718510a9d3027d1bb9d379c0c17>54 -</h1><p>生成所有建立控制平面和管理员（admin）所需的 kubeconfig 文件</p><h3 id=概要>概要</h3><p>此命令并非设计用来单独运行。请阅读可用子命令列表。</p><pre tabindex=0><code>kubeadm init phase kubeconfig [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeconfig 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-a0e1457f667eb757f82f8c42901aa6c5>55 -</h1><p>为管理员（admin）和 kubeadm 本身生成 kubeconfig 文件</p><h3 id=概要>概要</h3><p>为管理员和 kubeadm 本身生成 kubeconfig 文件，并将其保存到 admin.conf 文件中。</p><pre tabindex=0><code>kubeadm init phase kubeconfig admin [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，则使用默认的网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要绑定到 API 服务器的端口。</p></td></tr><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>admin 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeconfig 文件的保存路径。</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-59e362bf565041872395d165e99eafc1>56 -</h1><p>生成所有 kubeconfig 文件</p><h3 id=概要>概要</h3><p>生成所有 kubeconfig 文件</p><pre tabindex=0><code>kubeadm init phase kubeconfig all [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果没有设置，将使用默认的网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要绑定到 API 服务器的端口。</p></td></tr><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>all 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeconfig 文件的保存路径。</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定特定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点名称。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2a5040747a02ae2b2326c9901f1725d3>57 -</h1><p>生成控制器管理器要使用的 kubeconfig 文件</p><h3 id=概要>概要</h3><p>生成控制器管理器要使用的 kubeconfig 文件，并保存到 controller-manager.conf 文件中。</p><pre tabindex=0><code>kubeadm init phase kubeconfig controller-manager [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，则使用默认的网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要绑定到 API 服务器的端口。</p></td></tr><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr></tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>controller-manager 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeconfig 文件的保存路径。</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs 字符串</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-043bd19497eefb77a6ed30a4d704fe7c>58 -</h1><p>为 kubelet 生成一个 kubeconfig 文件，<em>仅仅</em>用于集群引导目的</p><h3 id=概要>概要</h3><p>生成 kubelet 要使用的 kubeconfig 文件，并将其保存到 kubelet.conf 文件。</p><p>请注意，该操作目的是<em>仅</em>应用于引导集群。在控制平面启动之后，应该从 CSR API 请求所有 kubelet 凭据。</p><pre tabindex=0><code>kubeadm init phase kubeconfig kubelet [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，则使用默认的网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要绑定到 API 服务器的端口。</p></td></tr><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubelet 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeconfig 文件的保存路径。</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面选择特定的 Kubernetes 版本。</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点的名称。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-bffb0d67824e75ade7232d09754b9718>59 -</h1><p>生成调度器使用的 kubeconfig 文件</p><h3 id=概要>概要</h3><p>生成调度器（scheduler）要使用的 kubeconfig 文件，并保存到 scheduler.conf 文件中。</p><pre tabindex=0><code>kubeadm init phase kubeconfig scheduler [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API 服务器所公布的其正在监听的 IP 地址。如果未设置，则使用默认的网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要绑定到 API 服务器的端口。</p></td></tr><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane-endpoint string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定一个稳定的 IP 地址或 DNS 名称。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>scheduler 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeconfig 文件的保存路径。</p></td></tr><tr><td colspan=2>--kubernetes-version string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："stable-1"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>为控制平面指定特定的 Kubernetes 版本。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-a37b5872c572c71775e389df50fca215>60 -</h1><p>TLS 引导后更新与 kubelet 相关的设置</p><h3 id=概要>概要</h3><p>TLS 引导后更新与 kubelet 相关的设置</p><pre tabindex=0><code>kubeadm init phase kubelet-finalize [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code>  # 在 TLS 引导后更新与 kubelet 相关的设置
  kubeadm init phase kubelet-finalize all --config
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubelet-finalize 操作的帮助命令</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到'真实'主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-3f49598c499c3356d89d98fdc8c8ad79>61 -</h1><p>运行 kubelet-finalize 的所有阶段</p><h3 id=概要>概要</h3><p>运行 kubelet-finalize 的所有阶段</p><pre tabindex=0><code>kubeadm init phase kubelet-finalize all [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 在 TLS 引导后更新与 kubelet 相关的设置
kubeadm init phase kubelet-finalize all --config
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值: "/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>all 操作的帮助命令</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到'真实'主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-7d68ac74e5301f789ddd2e25dd36218e>62 -</h1><p>启用 kubelet 客户端证书轮换</p><h3 id=概要>概要</h3><p>启用 kubelet 客户端证书轮换</p><pre tabindex=0><code>kubeadm init phase kubelet-finalize experimental-cert-rotation [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: "/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>保存和存储证书的路径。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>experimental-cert-rotation 操作的帮助命令</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到'真实'主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e7c1ae3d905d9b6854216e26651955cd>63 -</h1><p>编写 kubelet 配置并（重新）启动 kubelet</p><h3 id=概要>概要</h3><p>使用 kubelet 配置文件编写一个文件，并使用特定节点的 kubelet 设置编写一个环境文件，然后（重新）启动 kubelet。</p><pre tabindex=0><code>kubeadm init phase kubelet-start [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 将来自 InitConfiguration 文件中的 kubelet 参数写入一个动态环境文件。
kubeadm init phase kubelet-start --config config.yaml
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--cri-socket string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>连接到 CRI 套接字的路径。如果为空，则 kubeadm 将尝试自动检测该值；仅当安装了多个 CRI 或具有非标准 CRI 套接字时，才使用此选项。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubelet-start 操作的帮助命令</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点名称。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>目录路径，指向包含名为 “target[suffix][+patchtype].extension” 的文件的目录。
例如，"kube-apiserver0+merge.yaml" 或 "etcd.json" 这种简单形式。
"target" 可以是 “kube-apiserver”、“kube-controller-manager”、“kube-scheduler”、“etcd”、“kubeletconfiguration” 之一，
"patchtype" 可以是 "strategic"、"merge" 或 "json" 之一，并且它们与 kubectl 支持的补丁格式匹配。
默认的 "patchtype" 为 "strategic"。 "extension" 必须为 "json" 或 "yaml"。
"suffix" 是一个可选字符串，可用于确定按字母顺序首先应用哪些补丁。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-967a98823c19c8338bfc0e1338a20fb1>64 -</h1><p>标记节点为控制平面节点</p><h3 id=概要>概要</h3><p>标记 Node 节点为控制平面节点</p><pre tabindex=0><code>kubeadm init phase mark-control-plane [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 将控制平面标签和污点应用于当前节点，其功能等效于 kubeadm init执行的操作。
kubeadm init phase mark-control-plane --config config.yaml

# 将控制平面标签和污点应用于特定节点
kubeadm init phase mark-control-plane --node-name myNode
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>mark-control-plane 操作的帮助命令</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点名称。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs 字符串</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-b5838cc93a3fdb37b61afd201a71edd9>65 -</h1><p>运行启动检查</p><h3 id=概要>概要</h3><p>运行 kubeadm init 前的启动检查。</p><pre tabindex=0><code>kubeadm init phase preflight [flags]
</code></pre><h3 id=案例>案例</h3><pre tabindex=0><code># 使用配置文件对 kubeadm init 进行启动检查。
kubeadm init phase preflight --config kubeadm-config.yaml
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>preflight 操作的帮助命令</p></td></tr><tr><td colspan=2>--ignore-preflight-errors strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>错误将显示为警告的检查列表：例如：'IsPrivilegedUser,Swap'。取值为 'all' 时将忽略检查中的所有错误。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-f54c84a0fdada369a87b2ced6ccfc38f>66 -</h1><p>将证书上传到 kubeadm-certs</p><h3 id=概要>概要</h3><p>此命令并非设计用来单独运行。请参阅可用子命令列表。</p><pre tabindex=0><code>kubeadm init phase upload-certs [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--certificate-key string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于加密 kubeadm-certs Secret 中的控制平面证书的密钥。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>upload-certs 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用来与集群通信的 kubeconfig 文件。
如果此标志未设置，则可以在一组标准的位置搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--skip-certificate-key-print</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不要打印输出用于加密控制平面证书的密钥。</p></td></tr><tr><td colspan=2>--upload-certs</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>将控制平面证书上传到 kubeadm-certs Secret。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-0d96e214c09a8f014e984a6b980522b3>67 -</h1><p>上传 kubeadm 和 kubelet 配置到 ConfigMap 中</p><h3 id=概要>概要</h3><p>此命令并非设计用来单独运行。请参阅可用的子命令列表。</p><pre tabindex=0><code>kubeadm init phase upload-config [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>upload-config 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令中继承的选项>从父命令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-48afa88840a20edf1ad613c18480d4fc>68 -</h1><p>将所有配置上传到 ConfigMap</p><h3 id=概要>概要</h3><p>将所有配置上传到 ConfigMap</p><pre tabindex=0><code>kubeadm init phase upload-config all [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>all 操作的帮助命令</p></td></tr><tr><td colspan=2><p>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</p></td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-14da359f76a0f36af507d289dd4a5050>69 -</h1><p>将 kubeadm ClusterConfiguration 上传到 ConfigMap</p><h3 id=概要>概要</h3><p>将 kubeadm ClusterConfiguration 上传到 kube-system 命名空间中名为 kubeadm-config 的 ConfigMap 中。
这样就可以正确配置系统组件，并在升级时提供无缝的用户体验。</p><p>另外，可以使用 kubeadm 配置。</p><pre tabindex=0><code>kubeadm init phase upload-config kubeadm [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 上传集群配置
kubeadm init phase upload-config --config=myConfig.yaml
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置该参数，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-3fda282409b804a14879b9c65c035797>70 -</h1><p>将 kubelet 组件配置上传到 ConfigMap</p><h3 id=概要>概要</h3><p>将从 kubeadm InitConfiguration 对象提取的 kubelet 配置上传到集群中的
<code>kubelet-config</code> ConfigMap。</p><pre tabindex=0><code>kubeadm init phase upload-config kubelet [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 将 kubelet 配置从 kubeadm 配置文件上传到集群中的 ConfigMap。
kubeadm init phase upload-config kubelet --config kubeadm.yaml
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>到 kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubelet 操作的帮助命令</p></td></tr><tr><td colspan=2>-- kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置该标签，
则可以通过一组标准路径来寻找已有的 kubeconfig 文件。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e044e6c69c2b1512c8d89430e0400771>71 -</h1><p>在你希望加入现有集群的任何机器上运行它</p><h3 id=摘要>摘要</h3><p>当节点加入 kubeadm 初始化的集群时，我们需要建立双向信任。
这个过程可以分解为发现（让待加入节点信任 Kubernetes 控制平面节点）和
TLS 引导（让 Kubernetes 控制平面节点信任待加入节点）两个部分。</p><p>有两种主要的发现方案。
第一种方法是使用共享令牌和 API 服务器的 IP 地址。
第二种是以文件形式提供标准 kubeconfig 文件的一个子集。
发现/kubeconfig 文件支持令牌、client-go 鉴权插件（“exec”）、“tokenFile" 和
"authProvider"。该文件可以是本地文件，也可以通过 HTTPS URL 下载。
格式是 <code>kubeadm join --discovery-token abcdef.1234567890abcdef 1.2.3.4:6443</code>、
<code>kubeadm join --discovery-file path/to/file.conf</code> 或者
<code>kubeadm join --discovery-file https://url/file.conf</code>。
只能使用其中一种。
如果发现信息是从 URL 加载的，必须使用 HTTPS。
此外，在这种情况下，主机安装的 CA 包用于验证连接。</p><p>如果使用共享令牌进行发现，还应该传递 --discovery-token-ca-cert-hash 参数来验证
Kubernetes 控制平面节点提供的根证书颁发机构（CA）的公钥。
此参数的值指定为 "&lt;hash-type>:&lt;hex-encoded-value>"，
其中支持的哈希类型为 "sha256"。哈希是通过 Subject Public Key Info（SPKI）对象的字节计算的（如 RFC7469）。
这个值可以从 "kubeadm init" 的输出中获得，或者可以使用标准工具进行计算。
可以多次重复 --discovery-token-ca-cert-hash 参数以允许多个公钥。</p><p>如果无法提前知道 CA 公钥哈希，则可以通过 --discovery-token-unsafe-skip-ca-verification 参数禁用此验证。
这削弱了 kubeadm 安全模型，因为其他节点可能会模仿 Kubernetes 控制平面节点。</p><p>TLS 引导机制也通过共享令牌驱动。
这用于向 Kubernetes 控制平面节点进行临时的身份验证，以提交本地创建的密钥对的证书签名请求（CSR）。
默认情况下，kubeadm 将设置 Kubernetes 控制平面节点自动批准这些签名请求。
这个令牌通过 --tls-bootstrap-token abcdef.1234567890abcdef 参数传入。</p><p>通常两个部分会使用相同的令牌。
在这种情况下可以使用 --token 参数，而不是单独指定每个令牌。</p><p>"join [api-server-endpoint]" 命令执行下列阶段：</p><pre tabindex=0><code>preflight              Run join pre-flight checks
control-plane-prepare  Prepare the machine for serving a control plane
  /download-certs        [EXPERIMENTAL] Download certificates shared among control-plane nodes from the kubeadm-certs Secret
  /certs                 Generate the certificates for the new control plane components
  /kubeconfig            Generate the kubeconfig for the new control plane components
  /control-plane         Generate the manifests for the new control plane components
kubelet-start          Write kubelet settings, certificates and (re)start the kubelet
control-plane-join     Join a machine as a control plane instance
  /etcd                  Add a new local etcd member
  /update-status         Register the new control-plane node into the ClusterStatus maintained in the kubeadm-config ConfigMap (DEPRECATED)
  /mark-control-plane    Mark a node as a control-plane
</code></pre><pre tabindex=0><code>kubeadm join [api-server-endpoint] [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果该节点托管一个新的控制平面实例，则 API 服务器将公布其正在侦听的 IP 地址。如果未设置，则使用默认网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值: 6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果节点应该托管新的控制平面实例，则为 API 服务器要绑定的端口。</p></td></tr><tr><td colspan=2>--certificate-key string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>使用此密钥可以解密由 init 上传的证书 secret。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>--cri-socket string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要连接的 CRI 套接字的路径。如果为空，则 kubeadm 将尝试自动检测此值；
仅当安装了多个 CRI 或具有非标准 CRI 插槽时，才使用此选项。</p></td></tr><tr><td colspan=2>--discovery-file string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于文件的发现，给出用于加载集群信息的文件或者 URL。</p></td></tr><tr><td colspan=2>--discovery-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，该令牌用于验证从 API 服务器获取的集群信息。</p></td></tr><tr><td colspan=2>--discovery-token-ca-cert-hash stringSlice</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对基于令牌的发现，验证根 CA 公钥是否与此哈希匹配 (格式: "&lt;type>:&lt;value>")。</p></td></tr><tr><td colspan=2>--discovery-token-unsafe-skip-ca-verification</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，允许在未关联 --discovery-token-ca-cert-hash 参数的情况下添加节点。</p></td></tr><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不会应用任何改动，仅仅输出那些将变动的地方。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>join 操作的帮助命令</p></td></tr><tr><td colspan=2>--ignore-preflight-errors strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>错误将显示为警告的检查列表；例如：'IsPrivilegedUser,Swap'。取值为 'all' 时将忽略检查中的所有错误。</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点的名称</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 "target[suffix][+patchtype].extension" 的文件的目录的路径。
例如，"kube-apiserver0+merge.yaml" 或仅仅是 "etcd.json"。
"target" 可以是 “kube-apiserver”、“kube-controller-manager”、“kube-scheduler”、“etcd”、“kubeletconfiguration” 之一，
"patchtype" 可以是 "strategic"、"merge" 或 "json" 之一，并且它们与 kubectl 支持的补丁格式匹配。
默认的 "patchtype" 为 "strategic"。 "extension" 必须为 "json" 或 "yaml"。
"suffix" 是一个可选字符串，可用于确定首先按字母顺序应用哪些补丁。</p></td></tr><tr><td colspan=2>--skip-phases strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要跳过的阶段列表</p></td></tr><tr><td colspan=2>--tls-bootstrap-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定在加入节点时用于临时通过 Kubernetes 控制平面进行身份验证的令牌。</p></td></tr><tr><td colspan=2>--token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果未提供这些值，则将它们用于 discovery-token 令牌和 tls-bootstrap 令牌。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-9f968809f867b76728697577492429e8>72 -</h1><p>使用此命令来调用 <code>join</code> 工作流程的某个阶段</p><h3 id=概要>概要</h3><p>使用此命令来调用 <code>join</code> 工作流程的某个阶段</p><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>phase 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令中继承的选项>从父命令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-c3c506c1683aed34398a34ab66d609da>73 -</h1><p>添加作为控制平面实例的机器</p><h3 id=概要>概要</h3><p>添加作为控制平面实例的机器</p><pre tabindex=0><code>kubeadm join phase control-plane-join [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 将机器作为控制平面实例加入
kubeadm join phase control-plane-join all
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>control-plane-join 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令中继承的选项>从父命令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2c1a5a4405dca745ef50b4e86f5977c7>74 -</h1><p>添加作为控制平面实例的机器</p><h3 id=概要>概要</h3><p>添加作为控制平面实例的机器</p><pre tabindex=0><code>kubeadm join phase control-plane-join all [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果该节点托管一个新的控制平面实例，则 API 服务器将公布其正在侦听的 IP 地址。如果未设置，则使用默认网络接口。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>all 操作的帮助命令</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点名称。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 “target[suffix][+patchtype].extension” 的文件的目录的路径。
例如，“kube-apiserver0+merge.yaml” 或只是 “etcd.json”。
“target” 可以是 “kube-apiserver”、“kube-controller-manager”、“kube-scheduler”、“etcd” 之一。
“patchtype” 可以是 “strategic”、“merge” 或 “json”，它们匹配 kubectl 支持的补丁格式。
默认的 “patchtype” 是 “strategic”。“extension” 必须是 “json” 或 “yaml”。
“suffix” 是一个可选字符串，可用于基于字母数字顺序确定首先应用哪些补丁。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-003aaef561d065ecdaeb2c325b6b9253>75 -</h1><p>添加一个新的本地 etcd 成员</p><h3 id=概要>概要</h3><p>添加新的本地 etcd 成员</p><pre tabindex=0><code>kubeadm join phase control-plane-join etcd [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果该节点托管一个新的控制平面实例，则 API 服务器将公布其正在侦听的 IP 地址。如果未设置，则使用默认网络接口。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>etcd 操作的帮助命令</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点的名称</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 “target[suffix][+patchtype].extension” 的文件的目录的路径。
例如，“kube-apiserver0+merge.yaml” 或只是 “etcd.json”。
“target” 可以是 “kube-apiserver”、“kube-controller-manager”、“kube-scheduler”、“etcd” 之一。
“patchtype” 可以是 “strategic”、“merge” 或 “json”，它们匹配 kubectl 支持的补丁格式。
默认的 “patchtype” 是 “strategic”。“extension” 必须是 “json” 或 “yaml”。
“suffix” 是一个可选字符串，可用于基于字母数字顺序确定首先应用哪些补丁。</p></td></tr></tbody></table><h3 id=从父命令中继承的选项>从父命令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-535f050663a6d8db3a61df2b19a0714b>76 -</h1><p>将节点标记为控制平面节点</p><h3 id=概要>概要</h3><p>将节点标记为控制平面节点</p><pre tabindex=0><code>kubeadm join phase control-plane-join mark-control-plane [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>mark-control-plane 操作的帮助命令</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点的名称。</p></td></tr></tbody></table><h3 id=从父命令中继承的选项>从父命令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-2f0a684baffe3cdf830c16693412f8e0>77 -</h1><p>将新的控制平面节点注册到 kubeadm-config ConfigMap 维护的 ClusterStatus 中（已弃用）</p><h2 id=概要>概要</h2><p>将新的控制平面节点注册到 kubeadm-config ConfigMap 维护的 ClusterStatus 中（已弃用）</p><pre tabindex=0><code>kubeadm join phase control-plane-join update-status [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果该节点托管一个新的控制平面实例，则 API 服务器将公布其正在侦听的 IP 地址。如果未设置，则使用默认网络接口。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>update-status 操作的帮助命令</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点名称。</p></td></tr></tbody></table><h3 id=从父命令中继承的选项>从父命令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到 '真实' 主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-aba528e06c437710b269f4e41f854fdd>78 -</h1><p>准备为控制平面服务的机器</p><h3 id=概要>概要</h3><p>准备为控制平面服务的机器</p><pre tabindex=0><code>kubeadm join phase control-plane-prepare [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 准备为控制平面服务的机器
kubeadm join phase control-plane-prepare all
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>control-plane-prepare 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令中继承的选项>从父命令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-1d7987a759cd1519def4d433710cdff1>79 -</h1><p>准备为控制平面服务的机器</p><h3 id=概要>概要</h3><p>准备为控制平面服务的机器</p><pre tabindex=0><code>kubeadm join phase control-plane-prepare all [api-server-endpoint] [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果该节点托管一个新的控制平面实例，则 API 服务器将公布其正在侦听的 IP 地址。如果未设置，则使用默认网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果该节点托管一个新的控制平面实例，则为 API 服务器要绑定的端口。</p></td></tr><tr><td colspan=2>--certificate-key string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>使用此密钥解密由 init 上传的证书 secrets。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>--discovery-file string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于文件的发现，给出用于加载集群信息的文件或者 URL。</p></td></tr><tr><td colspan=2>--discovery-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，该令牌用于验证从 API 服务器获取的集群信息。</p></td></tr><tr><td colspan=2>--discovery-token-ca-cert-hash strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，请验证根 CA 公钥是否匹配此哈希值（格式："&lt;type>:&lt;value>"）。</p></td></tr><tr><td colspan=2>--discovery-token-unsafe-skip-ca-verification</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，允许在未关联 --discovery-token-ca-cert-hash 参数的情况下添加节点。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>all 操作的帮助命令</td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点名称。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 “target[suffix][+patchtype].extension” 的文件的目录的路径。
例如，“kube-apiserver0+merge.yaml” 或只是 “etcd.json”。
“target” 可以是 “kube-apiserver”、“kube-controller-manager”、“kube-scheduler”、“etcd” 之一。
“patchtype” 可以是 “strategic”、“merge” 或 “json”，它们匹配 kubectl 支持的补丁格式。
默认的 “patchtype” 是 “strategic”。“extension” 必须是 “json” 或 “yaml”。
“suffix” 是一个可选字符串，可用于基于字母数字顺序确定首先应用哪些补丁。</p></td></tr><tr><td colspan=2>--tls-bootstrap-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定在加入节点时用于临时通过 Kubernetes 控制平面进行身份验证的令牌。</p></td></tr><tr><td colspan=2>--token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果未提供这些值，则将它们用于 discovery-token 令牌和 tls-bootstrap 令牌。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-33216a69b333c330cb8b305a119abc7c>80 -</h1><p>为新的控制平面组件生成证书</p><h3 id=概要>概要</h3><p>为新的控制平面组件生成证书</p><pre tabindex=0><code>kubeadm join phase control-plane-prepare certs [api-server-endpoint] [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果该节点托管一个新的控制平面实例，则 API 服务器将公布其正在侦听的 IP 地址。如果未设置，则使用默认网络接口。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>--discovery-file string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于文件的发现，给出用于加载集群信息的文件或者 URL。</p></td></tr><tr><td colspan=2>--discovery-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，该令牌用于验证从 API 服务器获取的集群信息。</p></td></tr><tr><td colspan=2>--discovery-token-ca-cert-hash strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，请验证根 CA 公钥是否匹配此哈希值（格式："&lt;type>:&lt;value>"）。</p></td></tr><tr><td colspan=2>--discovery-token-unsafe-skip-ca-verification</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，允许在未关联 --discovery-token-ca-cert-hash 参数的情况下添加节点。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>certs 操作的帮助命令</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点名称。</p></td></tr><tr><td colspan=2>--tls-bootstrap-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定在加入节点时用于临时通过 Kubernetes 控制平面进行身份验证的令牌。</p></td></tr><tr><td colspan=2>--token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果未提供这些值，则将它们用于 discovery-token 令牌和 tls-bootstrap 令牌。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-53abd743076fc859067264f3e8e676e0>81 -</h1><p>为新的控制平面组件生成清单</p><h3 id=概要>概要</h3><p>为新的控制平面组件生成清单（manifest）</p><pre tabindex=0><code>kubeadm join phase control-plane-prepare control-plane [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于将要托管新的控制平面实例的节点，指定 API 服务器将公布的其正在侦听的 IP 地址。如果未设置，则使用默认网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>针对将要托管新的控制平面实例的节点，设置 API 服务器要绑定的端口。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>control-plane 操作的帮助命令</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 "target[suffix][+patchtype].extension" 的文件的目录的路径。
例如，"kube-apiserver0+merge.yaml" 或仅仅是 "etcd.json"。
"patchtype" 可以是 "strategic"、"merge" 或 "json" 之一，并且它们与 kubectl 支持的补丁格式匹配。
默认的 "patchtype" 为 "strategic"。 "extension" 必须为 "json" 或 "yaml"。
"suffix" 是一个可选字符串，可用于确定首先按字母顺序应用哪些补丁。</p></td></tr></tbody></table><h3 id=从父命令中继承的选项>从父命令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-3a08eb202d572e417768a942ad24c59f>82 -</h1><p>[实验]从 kubeadm-certs Secret 下载控制平面节点之间共享的证书</p><h3 id=概要>概要</h3><p>[实验]从 kubeadm-certs Secret 下载控制平面节点之间共享的证书</p><pre tabindex=0><code>kubeadm join phase control-plane-prepare download-certs [api-server-endpoint] [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--certificate-key string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>使用此密钥可以解密由 init 上传的证书 secret。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>--discovery-file string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于文件的发现，给出用于加载集群信息的文件或者 URL。</p></td></tr><tr><td colspan=2>--discovery-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，该令牌用于验证从 API 服务器获取的集群信息。</p></td></tr><tr><td colspan=2>--discovery-token-ca-cert-hash stringSlice</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，请验证根 CA 公钥是否匹配此哈希值（格式："&lt;type>:&lt;value>"）。</p></td></tr><tr><td colspan=2>--discovery-token-unsafe-skip-ca-verification</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，允许在未关联 --discovery-token-ca-cert-hash 参数的情况下添加节点。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>download-certs 操作的帮助命令</p></td></tr><tr><td colspan=2>--tls-bootstrap-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定在加入节点时用于临时通过 Kubernetes 控制平面进行身份验证的令牌。</p></td></tr><tr><td colspan=2>--token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果未提供这些值，则将它们用于 discovery-token 令牌和 tls-bootstrap 令牌。</p></td></tr></tbody></table><h3 id=从父命令中继承的选项>从父命令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-11ed4820a6c3b411d9c4b87163cf0ae7>83 -</h1><p>为新的控制平面组件生成 kubeconfig</p><h3 id=概要>概要</h3><p>为新的控制平面组件生成 kubeconfig</p><pre tabindex=0><code>kubeadm join phase control-plane-prepare kubeconfig [api-server-endpoint] [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--certificate-key string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>使用此密钥可以解密由 init 上传的证书 secret。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>--discovery-file string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于文件的发现，给出用于加载集群信息的文件或者 URL。</p></td></tr><tr><td colspan=2>--discovery-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，该令牌用于验证从 API 服务器获取的集群信息。</p></td></tr><tr><td colspan=2>--discovery-token-ca-cert-hash stringSlice</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，请验证根 CA 公钥是否匹配此哈希值（格式："&lt;type>:&lt;value>"）。</p></td></tr><tr><td colspan=2>--discovery-token-unsafe-skip-ca-verification</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，允许在未关联 --discovery-token-ca-cert-hash 参数的情况下添加节点。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeconfig 操作的帮助命令</p></td></tr><tr><td colspan=2>--tls-bootstrap-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定在加入节点时用于临时通过 Kubernetes 控制平面进行身份验证的令牌。</p></td></tr><tr><td colspan=2>--token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果未提供这些值，则将它们用于 discovery-token 令牌和 tls-bootstrap 令牌。</p></td></tr></tbody></table><h3 id=从父命令中继承的选项>从父命令中继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e81c9d9320242b5ed4b063beea6696f8>84 -</h1><p>配置 Kubelet、证书并（重新）启动 Kubelet</p><h3 id=概要>概要</h3><p>生成一个包含 KubeletConfiguration 的文件和一个包含特定于节点的 kubelet 配置的环境文件，然后（重新）启动 kubelet。</p><pre tabindex=0><code>kubeadm join phase kubelet-start [api-server-endpoint] [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>kubeadm 配置文件的路径。</td></tr><tr><td colspan=2>--cri-socket string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>提供给 CRI 套接字建立连接的路径。如果为空，则 kubeadm 将尝试自动检测该值；仅当安装了多个 CRI 或具有非标准 CRI 套接字时，才使用此选项。</p></td></tr><tr><td colspan=2>--discovery-file string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于文件的发现，给出用于加载集群信息的文件或者 URL。</p></td></tr><tr><td colspan=2>--discovery-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，该令牌用于验证从 API 服务器获取的集群信息。</p></td></tr><tr><td colspan=2>--discovery-token-ca-cert-hash stringSlice</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，验证根 CA 公钥是否匹配此哈希值（格式："&lt;type>:&lt;value>"）。</p></td></tr><tr><td colspan=2>--discovery-token-unsafe-skip-ca-verification</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，允许在未关联 --discovery-token-ca-cert-hash 参数的情况下添加节点。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubelet-start 操作的帮助命令</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点名称。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>目录路径，指向的目录中包含名为 “target[suffix][+patchtype].extension” 的文件。
例如，"kube-apiserver0+merge.yaml" 或 "etcd.json" 这种简单形式。
"target" 可以是 “kube-apiserver”、“kube-controller-manager”、“kube-scheduler”、“etcd”、“kubeletconfiguration” 之一，
"patchtype" 可以是 "strategic"、"merge" 或 "json" 之一，并且它们与 kubectl 支持的补丁格式匹配。
默认的 "patchtype" 为 "strategic"。 "extension" 必须为 "json" 或 "yaml"。
"suffix" 是一个可选字符串，可用于确定按字母顺序首先应用哪些补丁。</p></td></tr><tr><td colspan=2>--tls-bootstrap-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定在加入节点时用于临时通过 Kubernetes 控制平面进行身份验证的令牌。</p></td></tr><tr><td colspan=2>--token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果未提供这些值，则将它们用于 discovery-token 令牌和 tls-bootstrap 令牌。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-47f2d404188d6eb1fbf6fffd7fba4e48>85 -</h1><p>运行 join 命令前检查</p><h3 id=概要>概要</h3><p>运行 kubeadm join 命令添加节点前检查。</p><pre tabindex=0><code>kubeadm join phase preflight [api-server-endpoint] [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 使用配置文件运行 kubeadm join 命令添加节点前检查。
kubeadm join phase preflight --config kubeadm-config.yaml
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--apiserver-advertise-address string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于将要托管新的控制平面实例的节点，指定 API 服务器将公布的其正在侦听的 IP 地址。如果未设置，则使用默认网络接口。</p></td></tr><tr><td colspan=2>--apiserver-bind-port int32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：6443</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>针对将要托管新的控制平面实例的节点，设置 API 服务器要绑定的端口。</p></td></tr><tr><td colspan=2>--certificate-key string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>使用此密钥可以解密由 `init` 操作上传的证书 secret。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--control-plane</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在此节点上创建一个新的控制平面实例</p></td></tr><tr><td colspan=2>--cri-socket string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>提供给 CRI 套接字建立连接的路径。如果为空，则 kubeadm 将尝试自动检测该值；仅当安装了多个 CRI 或具有非标准 CRI 套接字时，才使用此选项。</p></td></tr><tr><td colspan=2>--discovery-file string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于文件的发现，给出用于加载集群信息的文件或者 URL。</p></td></tr><tr><td colspan=2>--discovery-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，该令牌用于验证从 API 服务器获取的集群信息。</p></td></tr><tr><td colspan=2>--discovery-token-ca-cert-hash strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，验证根 CA 公钥是否匹配此哈希值（格式："&lt;type>:&lt;value>"）。</p></td></tr><tr><td colspan=2>--discovery-token-unsafe-skip-ca-verification</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对于基于令牌的发现，允许在未关联 --discovery-token-ca-cert-hash 参数的情况下添加节点。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>preflight 操作的帮助命令</p></td></tr><tr><td colspan=2>--ignore-preflight-errors stringSlice</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>错误将显示为警告的检查列表；例如：'IsPrivilegedUser,Swap'。取值为 'all' 时将忽略检查中的所有错误。</p></td></tr><tr><td colspan=2>--node-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定节点名称。</p></td></tr><tr><td colspan=2>--tls-bootstrap-token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定在加入节点时用于临时通过 Kubernetes 控制平面进行身份验证的令牌。</p></td></tr><tr><td colspan=2>--token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果未提供这些值，则将它们用于 discovery-token 令牌和 tls-bootstrap 令牌。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-257824537b4c6c6b33249aa786461156>86 -</h1><p>Kubeconfig 文件工具。</p><h3 id=概要>概要</h3><p>kubeconfig 文件工具。</p><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>kubeconfig 操作的帮助命令</td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>[实验] 到 '真实' 主机根文件系统的路径。</td></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e10faf6f940de61052258af59e036518>87 -</h1><p>为其他用户输出一个 kubeconfig 文件。</p><h3 id=概要>概要</h3><p>为其他用户输出一个 kubeconfig 文件。</p><pre tabindex=0><code>kubeadm alpha kubeconfig user [flags]
</code></pre><h3 id=示例>示例</h3><pre tabindex=0><code># 使用名为 bar 的 kubeadm 配置文件为名为 foo 的另一用户输出 kubeconfig 文件
kubeadm kubeconfig user --client-name=foo --config=bar
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--client-name string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>用户名。如果生成客户端证书，则用作其 CN。</td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>指向 kubeadm 配置文件的路径</td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>user 操作的帮助命令</td></tr><tr><td colspan=2>--org strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>客户端证书的组织。如果创建客户端证书，此值将用作其 O 字段值。</td></tr><tr><td colspan=2>--token string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>应该用此令牌做为 kubeconfig 的身份验证机制，而不是客户端证书</td></tr><tr><td colspan=2>--validity-period duration&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: 8760h0m0s</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>客户证书的合法期限。所设置值为相对当前时间的偏移。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>[实验] 指向 '真实' 宿主机的根目录。</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-a46a193f2322aa88cb3b2de2447b0461>88 -</h1><p>尽最大努力还原通过 'kubeadm init' 或者 'kubeadm join' 操作对主机所作的更改</p><h3 id=概要>概要</h3><p>尽最大努力还原通过 'kubeadm init' 或者 'kubeadm join' 操作对主机所作的更改</p><p>"reset" 命令执行以下阶段：</p><pre tabindex=0><code>preflight              Run reset pre-flight checks
update-cluster-status  Remove this node from the ClusterStatus object.
remove-etcd-member     Remove a local etcd member.
cleanup-node           Run cleanup node.
</code></pre><pre tabindex=0><code>kubeadm reset [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的目录路径。如果已指定，则需要清空此目录。</p></td></tr><tr><td colspan=2>--cri-socket string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要连接的 CRI 套接字的路径。如果为空，则 kubeadm 将尝试自动检测此值；仅当安装了多个CRI 或具有非标准 CRI 插槽时，才使用此选项。</p></td></tr><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不要应用任何更改；只需输出将要做什么。</p></td></td></tr><tr><td colspan=2>-f, --force</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在不提示确认的情况下重置节点。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>reset 操作的帮助命令</p></td></tr><tr><td colspan=2>--ignore-preflight-errors strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>错误将显示为警告的检查列表；例如：'IsPrivilegedUser,Swap'。取值为 'all' 时将忽略检查中的所有错误。</p></td></tr><tr><td colspan=2><p>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</p></td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置该标志，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--skip-phases strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要跳过的阶段列表</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-f5b27d7bd0eeed918f8635c68d220dc5>89 -</h1><p>使用此命令来调用 <code>reset</code> 工作流程的某个阶段</p><h3 id=概要>概要</h3><p>使用此命令来调用 <code>reset</code> 工作流程的某个阶段</p><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>phase 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-370e9ffda66b4c48dfa54ea37c3aad21>90 -</h1><p>执行 cleanup node（清理节点）操作。</p><h3 id=概要>概要</h3><p>执行 cleanup node（清理节点）操作。</p><pre tabindex=0><code>kubeadm reset phase cleanup-node [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--cert-dir string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/pki"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>存储证书的目录路径。如果已指定，则需要清空此目录。</p></td></tr><tr><td colspan=2>--cri-socket string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要连接的 CRI 套接字的路径。如果为空，则 kubeadm 将尝试自动检测此值；仅当安装了多个CRI 或具有非标准 CRI 插槽时，才使用此选项。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>cleanup-node 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-6bd27042c883aa5c498647d37762392c>91 -</h1><p>运行重置启动前检查</p><h3 id=概要>概要</h3><p>kubeadm reset（重置）前运行启动前检查。</p><pre tabindex=0><code>kubeadm reset phase preflight [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-f, --force</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>在不提示确认的情况下重置节点。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>preflight 操作的帮助命令</p></td></tr><tr><td colspan=2>--ignore-preflight-errors strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>错误将显示为警告的检查列表；例如：'IsPrivilegedUser,Swap'。取值为 'all' 时将忽略检查中的所有错误。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-3a000435e1cca0be398b44b487f530c8>92 -</h1><p>删除本地 etcd 成员</p><h3 id=概要>概要</h3><p>删除控制平面节点的本地 etcd 成员</p><pre tabindex=0><code>kubeadm reset phase remove-etcd-member [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>remove-etcd-member 的帮助信息</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 Kubeconfig 文件。如果未设置该标志，则可以在默认位置中查找现有的 Kubeconfig 文件。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到'真实'主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-bee6749065a369c2ab5b311eb43c40ba>93 -</h1><p>管理引导令牌</p><h3 id=概要>概要</h3><p>此命令管理引导令牌（bootstrap token）。它是可选的，仅适用于高级用例。</p><p>简而言之，引导令牌（bootstrap token）用于在客户端和服务器之间建立双向信任。
当客户端（例如，即将加入集群的节点）需要时，可以使用引导令牌相信正在与之通信的服务器。
然后可以使用具有 “签名” 的引导令牌。</p><p>引导令牌还可以作为一种允许对 API 服务器进行短期身份验证的方法（令牌用作 API 服务器信任客户端的方式），例如用于执行 TLS 引导程序。</p><p>引导令牌准确来说是什么？</p><ul><li>它是位于 kube-system 命名空间中类型为 “bootstrap.kubernetes.io/token” 的一个 Secret。</li><li>引导令牌的格式必须为 “[a-z0-9]{6}.[a-z0-9]{16}”，前一部分是公共令牌 ID，而后者是令牌秘钥，必须在任何情况下都保密！</li><li>必须将 Secret 的名称命名为 “bootstrap-token-(token-id)”。</li></ul><p>你可以在此处阅读有关引导令牌（bootstrap token）的更多信息：
/docs/admin/bootstrap-tokens/</p><pre tabindex=0><code>kubeadm token [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>是否启用 `dry-run` 模式</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>token 操作的帮助命令</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置，则搜索一组标准位置以查找现有 kubeconfig 文件。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-bdd9680ec894593d17f782d5e5665fd4>94 -</h1><p>在服务器上创建引导令牌</p><h3 id=概要>概要</h3><p>这个命令将为你创建一个引导令牌。
你可以设置此令牌的用途，"有效时间" 和可选的人性化的描述。</p><p>这里的 [token] 是指将要生成的实际令牌。
该令牌应该是一个通过安全机制生成的随机令牌，形式为 "[a-z0-9]{6}.[a-z0-9]{16}"。
如果没有给出 [token]，kubeadm 将生成一个随机令牌。</p><pre tabindex=0><code>kubeadm token create [token]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--certificate-key string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>当与 “--print-join-command” 一起使用时，打印作为控制平面加入集群时所需的所有 “kubeadm join” 标志。
要创建新的证书密钥，你必须使用 “kubeadm init phase upload-certs --upload-certs”。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--description string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>针对令牌用途的人性化的描述。</p></td></tr><tr><td colspan=2><p>--groups stringSlice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：[system:bootstrappers:kubeadm:default-node-token]</p></td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>此令牌用于身份验证时将进行身份验证的其他组。必须匹配 "\\Asystem:bootstrappers:[a-z0-9:-]{0,255}[a-z0-9]\\z"</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>create 操作的帮助命令</p></td></tr><tr><td colspan=2>--print-join-command</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不仅仅打印令牌，而是打印使用令牌加入集群所需的完整 'kubeadm join' 参数。</p></td></tr><tr><td colspan=2>--ttl duration&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：24h0m0s</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>令牌有效时间，超过该时间令牌被自动删除。(例如： 1s, 2m, 3h)。如果设置为 '0'，令牌将永远不过期。</p></td></tr><tr><td colspan=2>--usages stringSlice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：[signing,authentication]</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>描述可以使用此令牌的方式。你可以多次使用 `--usages` 或者提供一个以逗号分隔的选项列表。合法选项有: [signing,authentication]</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>是否启用 `dry-run` 运行模式</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 KubeConfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 KubeConfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-1d005baad1a1e217d7ae0210fec96c3f>95 -</h1><p>删除服务器上的引导令牌</p><h3 id=概要>概要</h3><p>这个命令将为你删除指定的引导令牌列表。</p><p><code>[token-value]</code> 是要删除的 "[a-z0-9]{6}.[a-z0-9]{16}" 形式的完整令牌或者是 "[a-z0-9]{6}" 形式的令牌 ID。</p><pre tabindex=0><code>kubeadm token delete [token-value] ...
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>delete 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>是否启用 `dry-run` 运行模式</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 KubeConfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 KubeConfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-c79d11d27bed54caac743c93e0b2fb24>96 -</h1><p>生成并打印一个引导令牌，但不要在服务器上创建它</p><h3 id=概要>概要</h3><p>此命令将打印一个随机生成的可以被 "init" 和 "join" 命令使用的引导令牌。
您不必使用此命令来生成令牌。你可以自己设定，只要格式符合 "[a-z0-9]{6}.[a-z0-9]{16}"。这个命令提供是为了方便生成规定格式的令牌。
您也可以使用 "kubeadm init" 并且不指定令牌，该命令会生成一个令牌并打印出来。</p><pre tabindex=0><code>kubeadm token generate [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>generate 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>是否启用 `dry-run` 运行模式</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 KubeConfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 KubeConfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ba78e64c325e4131dd741235e2a1b2c0>97 -</h1><p>列出服务器上的引导令牌</p><h3 id=概要>概要</h3><p>此命令将为你列出所有的引导令牌。</p><pre tabindex=0><code>kubeadm token list [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--allow-missing-template-keys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：true</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果设置为 true，则在模板中缺少字段或哈希表的键时忽略模板中的任何错误。
仅适用于 golang 和 jsonpath 输出格式。</p></td></tr><tr><td colspan=2>-o, --experimental-output string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："text"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>输出格式：text|json|yaml|go-template|go-template-file|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file 其中之一</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>list 操作的帮助命令</p></td></tr><tr><td colspan=2>--show-managed-fields</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果为 true，则在以 JSON 或 YAML 格式打印对象时保留 managedFields。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>是否启用 `dry-run` 模式</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 kubeconfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-872d33f1fbc83cb2f0bf89b4bd545174>98 -</h1><p>此命令能将集群平滑升级到新版本</p><h3 id=概要>概要</h3><p>此命令能将集群平滑升级到新版本</p><pre tabindex=0><code>kubeadm upgrade [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>upgrade 操作的帮助命令<p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。<p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-7d8c1710684742ca940f580674225d9d>99 -</h1><p>将 Kubernetes 集群升级到指定版本</p><h3 id=概要>概要</h3><p>将 Kubernetes 集群升级到指定版本</p><pre tabindex=0><code>kubeadm upgrade apply [version]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--allow-experimental-upgrades</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>显示 Kubernetes 的不稳定版本作为升级替代方案，并允许升级到 Kubernetes 的 alpha/beta 或 RC 版本。</p></td></tr><tr><td colspan=2>--allow-release-candidate-upgrades</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>显示 Kubernetes 的候选版本作为升级替代方案，并允许升级到 Kubernetes 的 RC 版本。</p></td></tr><tr><td colspan=2>--certificate-renewal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default: true</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>执行升级期间更改的组件所使用的证书的更新。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径。</p></td></tr><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不要更改任何状态，只输出要执行的操作。</p></td></tr><tr><td colspan=2>--etcd-upgrade&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值: true</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>执行 etcd 的升级。</p></td></tr><tr><td colspan=2>--feature-gates string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组键值对，用于描述各种功能。选项包括：<br>PublicKeysECDSA=true|false (ALPHA - 默认值=false<br>RootlessControlPlane=true|false (ALPHA - 默认值=false)<br>UnversionedKubeletConfigMap=true|false (默认值=true)</p></td></tr><tr><td colspan=2>-f, --force</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>强制升级，但可能无法满足某些要求。这也意味着非交互模式。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>apply 操作的帮助命令</p></td></tr><tr><td colspan=2>-ignore-preflight-errors strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>错误将显示为警告的检查列表；例如：'IsPrivilegedUser,Swap'。取值为 'all' 时将忽略检查中的所有错误。</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果未设置标志，则在相关目录下搜索以查找现有 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 "target[suffix][+patchtype].extension" 的文件的目录的路径。
例如，"kube-apiserver0+merge.yaml"或是简单的 "etcd.json"。
"target" 可以是 "kube-apiserver"、"kube-controller-manager"、"kube-scheduler"、"etcd" 、"kubeletconfiguration" 之一。
"patchtype" 可以是 "strategic"、"merge" 或者 "json" 之一，
并且它们与 kubectl 支持的补丁格式相同。
默认的 "patchtype" 是 "strategic"。
"extension" 必须是 "json" 或 "yaml"。
"suffix" 是一个可选字符串，可用于确定首先按字母顺序应用哪些补丁。</p></td></tr><tr><td colspan=2>--print-config</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定是否应打印将在升级中使用的配置文件。</p></td></tr><tr><td colspan=2>-y, --yes</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>执行升级，不提示确认（非交互模式）。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-28dcf20d89c7bb1c8e7a3873d7703d5d>100 -</h1><p>显示哪些差异将被应用于现有的静态 pod 资源清单。参考: kubeadm upgrade apply --dry-run</p><h3 id=概述>概述</h3><p>显示哪些差异将被应用于现有的静态 pod 资源清单。参考: kubeadm upgrade apply --dry-run</p><pre tabindex=0><code>kubeadm upgrade diff [version] [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--api-server-manifest string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/manifests/kube-apiserver.yaml"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>API服务器清单的路径</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubeadm 配置文件的路径</p></td></tr><tr><td colspan=2>-c, --context-lines int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值：3</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>差异中有多少行上下文</td></tr><tr><td colspan=2>--controller-manager-manifest string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值： "/etc/kubernetes/manifests/kube-controller-manager.yaml"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>控制器清单的路径</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>帮助</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件，如果标志是未设置，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--scheduler-manifest string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/manifests/kube-scheduler.yaml"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>调度程序清单的路径</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[EXPERIMENTAL] “真实”主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-f869b6331e40c6f9eb01314f96d3113e>101 -</h1><p>升级集群中某个节点的命令</p><h3 id=概要>概要</h3><p>升级集群中某个节点的命令</p><p>"node" 命令执行以下阶段：</p><pre tabindex=0><code>preflight       执行节点升级前检查
control-plane   如果存在的话，升级部署在该节点上的管理面实例
kubelet-config  更新该节点上的 kubelet 配置
</code></pre><pre tabindex=0><code>kubeadm upgrade node [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--certificate-renewal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值: true</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>对升级期间变化的组件所使用的证书执行更新。</p></td></tr><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不更改任何状态，只输出将要执行的操作。</p></td></tr><tr><td colspan=2>--etcd-upgrade&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值: true</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>执行 etcd 的升级。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>node 操作的帮助命令</p></td></tr><tr><td colspan=2>--ignore-preflight-errors strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>其错误将显示为警告的检查列表。示例：'IsPrivilegedUser,Swap'。 值 'all' 忽略所有检查中的错误。</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值: "/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于与集群交互的 kubeconfig 文件。如果参数未指定，将从一系列标准位置检索存在的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>包含名为 "target[suffix][+patchtype].extension" 的文件的目录的路径。
例如，"kube-apiserver0+merge.yaml"或仅仅是 "etcd.json"。
"target" 可以是 "kube-apiserver"、"kube-controller-manager"、"kube-scheduler"、"etcd" 之一。
"patchtype" 可以是 "strategic"、"merge" 或者 "json" 之一，
并且它们与 kubectl 支持的补丁格式相同。
默认的 "patchtype" 是 "strategic"。
"extension" 必须是"json" 或"yaml"。
"suffix" 是一个可选字符串，可用于确定首先按字母顺序应用哪些补丁。</p></td></tr></tr><tr><td colspan=2>--skip-phases strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>要跳过的阶段的列表</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-19a94d2f7649959b218952cef00729f4>102 -</h1><p>使用此命令调用 node 工作流的某个阶段</p><h3 id=概要>概要</h3><p>使用此命令调用 node 工作流的某个阶段</p><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>phase 操作的帮助命令</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-b22d3ed181fb7f926ae2081f8fc8c14d>103 -</h1><p>升级部署在此节点上的控制平面实例，如果有的话</p><h3 id=概要>概要</h3><p>升级部署在此节点上的控制平面实例，如果有的话</p><pre tabindex=0><code>kubeadm upgrade node phase control-plane [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--certificate-renewal</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>更新在升级期间变更的组件使用的证书。</p></td></tr><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不改变任何状态，只输出将要执行的动作。</p></td></tr><tr><td colspan=2>--etcd-upgrade&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值: true</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>执行 etcd 的升级。</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>control-plane 的帮助信息</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值: "/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 KubeConfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 KubeConfig 文件。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word>包含名为 "target[suffix][+patchtype].extension" 的文件的目录的路径。
例如，"kube-apiserver0+merge.yaml" 或仅仅是 "etcd.json"。
"patchtype" 可以是 "strategic"、"merge" 或 "json" 之一，并且它们与 kubectl 支持的补丁格式匹配。
默认的 "patchtype" 为 "strategic"。 "extension" 必须为 "json" 或 "yaml"。
"suffix" 是一个可选字符串，可用于确定首先按字母顺序应用哪些补丁。</td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到'真实'主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ae1ea74c2c21b25a3c1eacdaf549274b>104 -</h1><p>升级此节点的 kubelet 配置</p><h3 id=概要>概要</h3><p>从集群中 ConfigMap kubelet-config 下载 kubelet 配置</p><pre tabindex=0><code>kubeadm upgrade node phase kubelet-config [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--dry-run</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>不改变任何状态，只输出将要执行的操作</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>kubelet-config 操作的帮助信息</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>用于和集群通信的 KubeConfig 文件。如果它没有被设置，那么 kubeadm 将会搜索一个已经存在于标准路径的 KubeConfig 文件。</p></td></tr><tr><td colspan=2>--patches string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>目录路径，指向的目录中包含名为 “target[suffix][+patchtype].extension” 的文件。
例如，"kube-apiserver0+merge.yaml" 或 "etcd.json" 这种简单形式。
"target" 可以是 “kube-apiserver”、“kube-controller-manager”、“kube-scheduler”、“etcd”、“kubeletconfiguration” 之一，
"patchtype" 可以是 "strategic"、"merge" 或 "json" 之一，并且它们与 kubectl 支持的补丁格式匹配。
默认的 "patchtype" 为 "strategic"。 "extension" 必须为 "json" 或 "yaml"。
"suffix" 是一个可选字符串，可用于确定按字母顺序首先应用哪些补丁。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到'真实'主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-633020ef232bc34f60c82153578a6c9b>105 -</h1><p>执行升级节点的预检</p><h3 id=概要>概要</h3><p>执行 kubeadm 升级节点的预检。</p><pre tabindex=0><code>kubeadm upgrade node phase preflight [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>preflight 操作的帮助命令</p></td></tr><tr><td colspan=2>--ignore-preflight-errors strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>错误将显示为警告的检查清单。示例：'IsPrivilegedUser,Swap'。值为'all'表示忽略所有检查的错误。</p></td></tr></tbody></table><h3 id=继承于父命令的选项>继承于父命令的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 到'真实'主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-e938edeb3d824f9b364de617a1f10a93>106 -</h1><h3 id=概述>概述</h3><p>检查可升级到哪些版本，并验证你当前的集群是否可升级。 要跳过互联网检查，请传递可选的 [version] 参数</p><pre tabindex=0><code>kubeadm upgrade plan [version] [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--allow-experimental-upgrades</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>显示不稳定版本的 Kubernetes 作为升级替代方案，并允许升级到 Kubernetes 的 Alpha/Beta/发行候选版本。</p></td></tr><tr><td colspan=2>--allow-release-candidate-upgrades</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>显示 Kubernetes 的发行候选版本作为升级选择，并允许升级到 Kubernetes 的发行候选版本。</p></td></tr><tr><td colspan=2>--config string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>配置文件的路径。</p></td></tr><tr><td colspan=2>--feature-gates string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>一组描述各种特征特性门控的键值对。选项有：<br>PublicKeysECDSA=true|false (ALPHA - 默认值=false)<br>RootlessControlPlane=true|false (ALPHA - 默认值=false)<br>UnversionedKubeletConfigMap=true|false (默认值=true)</p></td></tr><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>plan 的帮助信息</p></td></tr><tr><td colspan=2>--ignore-preflight-errors strings</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>其错误将显示为警告的检查列表。 例如：'IsPrivilegedUser,Swap'。 值 'all' 忽略所有检查错误。</p></td></tr><tr><td colspan=2>--kubeconfig string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认值："/etc/kubernetes/admin.conf"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>与集群通信时使用的 kubeconfig 文件。如果标志为未设置，则可以在一组标准位置中搜索现有的 kubeconfig 文件。</p></td></tr><tr><td colspan=2>-o, --output string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
默认值："text"</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>实验性功能；输出格式为 text|json|yaml 其中的一种。</p></td></tr><tr><td colspan=2>--print-config</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>指定是否打印将在升级中使用的配置文件。</p></td></tr><tr><td colspan=2>--show-managed-fields</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>如果开启，以 JSON 或 YAML 格式打印对象时会保留 managedField。</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[EXPERIMENTAL] “真实”主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-aa9f718186487df2ab6885cae45f5d37>107 -</h1><p>打印 kubeadm 的版本</p><h3 id=概要>概要</h3><p>打印 kubeadm 的版本</p><pre tabindex=0><code>kubeadm version [flags]
</code></pre><h3 id=选项>选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>-h, --help</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>version 操作的帮助命令</p></td></tr><tr><td colspan=2>-o, --output string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>输出格式；可用的选项有 'yaml', 'json' 和 'short'</p></td></tr></tbody></table><h3 id=从父命令继承的选项>从父命令继承的选项</h3><table style=width:100%;table-layout:fixed><col span=1 style=width:10px><col span=1><tbody><tr><td colspan=2>--rootfs string</td></tr><tr><td></td><td style=line-height:130%;word-wrap:break-word><p>[实验] 指向 '真实' 宿主机根文件系统的路径。</p></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-60d816e74ec8e0301cc484b19d7694e6>108 -</h1><p>此目录下的所有文件都是从其他仓库自动生成的。 <strong>不要人工编辑它们。 你必须在上游仓库中编辑它们</strong></p></div></main></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/zh-cn/docs/home/>主页</a>
<a class=text-white href=/zh-cn/blog/>博客</a>
<a class=text-white href=/zh-cn/training/>培训</a>
<a class=text-white href=/zh-cn/partners/>合作伙伴</a>
<a class=text-white href=/zh-cn/community/>社区</a>
<a class=text-white href=/zh-cn/case-studies/>案例分析</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes 作者 | 文档发布基于 <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a> 授权许可</small><br><small class=text-white>Copyright &copy; 2023 Linux 基金会&reg;。保留所有权利。Linux 基金会已注册并使用商标。如需了解 Linux 基金会的商标列表，请访问<a href=https://www.linuxfoundation.org/trademark-usage class=light-text>商标使用页面</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=/js/popper-1.16.1.min.js intregrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap-4.6.1.min.js integrity=sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2 crossorigin=anonymous></script>
<script src=/js/script.js></script>
<script async src=/js/mermaid-8.13.4.min.js integrity=sha384-5hHNvPeMrNH14oM3IcQofDoBhiclNK3g2+hnEinKzQ07C4AliMeVpnvxuiwEGpaO crossorigin=anonymous></script>
<script src=/js/main.min.5c0bf7f21dc4f66485f74efbbeeff28a7e4f8cddaac1bae47043159c922ff3a3.js integrity="sha256-XAv38h3E9mSF9077vu/yin5PjN2qwbrkcEMVnJIv86M=" crossorigin=anonymous></script></body></html>